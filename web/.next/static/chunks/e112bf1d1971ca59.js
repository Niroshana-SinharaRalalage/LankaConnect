(globalThis.TURBOPACK||(globalThis.TURBOPACK=[])).push(["object"==typeof document?document.currentScript:void 0,28424,e=>{"use strict";var t,s=((t={}).GeneralUser="GeneralUser",t.BusinessOwner="BusinessOwner",t.EventOrganizer="EventOrganizer",t.EventOrganizerAndBusinessOwner="EventOrganizerAndBusinessOwner",t.Admin="Admin",t.AdminManager="AdminManager",t);e.s(["UserRole",()=>s])},67735,e=>{"use strict";var t=e.i(43476),s=e.i(71645),a=e.i(25913),l=e.i(57022);let n=(0,a.cva)("inline-flex items-center rounded-full px-2.5 py-0.5 text-xs font-medium transition-colors",{variants:{variant:{default:"bg-gray-100 text-gray-800",cultural:"bg-saffron-100 text-saffron-800",arts:"bg-pink-100 text-pink-800",food:"bg-orange-100 text-orange-800",business:"bg-cyan-100 text-cyan-800",community:"bg-purple-100 text-purple-800",featured:"bg-green-100 text-green-800",new:"bg-emerald-100 text-emerald-800",hot:"bg-red-100 text-red-800"}},defaultVariants:{variant:"default"}}),r=s.forwardRef(({className:e,variant:s,...a},r)=>(0,t.jsx)("span",{ref:r,className:(0,l.cn)(n({variant:s}),e),...a}));r.displayName="Badge",e.s(["Badge",()=>r])},7233,e=>{"use strict";let t=(0,e.i(75254).default)("plus",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]]);e.s(["Plus",()=>t],7233)},19937,e=>{"use strict";var t=e.i(71645);function s(e=!0){let[a,l]=(0,t.useState)({latitude:null,longitude:null,loading:e,error:null});return(0,t.useEffect)(()=>{if(!e)return void l({latitude:null,longitude:null,loading:!1,error:null});let t=!0,s=async()=>{try{let e=await fetch("https://ipapi.co/json/",{method:"GET",headers:{Accept:"application/json"}});if(!e.ok)throw Error(`IP geolocation API error: ${e.status}`);let s=await e.json();if(t&&s.latitude&&s.longitude)l({latitude:s.latitude,longitude:s.longitude,loading:!1,error:null});else throw Error("Invalid response from IP geolocation service")}catch(e){console.error("IP-based geolocation failed:",e),t&&l({latitude:null,longitude:null,loading:!1,error:e instanceof Error?e.message:"Failed to detect location"})}};return(async()=>{"geolocation"in navigator?navigator.geolocation.getCurrentPosition(e=>{t&&l({latitude:e.coords.latitude,longitude:e.coords.longitude,loading:!1,error:null})},async e=>{console.warn("Browser geolocation failed:",e.message),await s()},{timeout:1e4,maximumAge:3e5,enableHighAccuracy:!1}):await s()})(),()=>{t=!1}},[e]),a}e.s(["useGeolocation",()=>s])},60219,e=>{"use strict";var t=e.i(43476),s=e.i(71645),a=e.i(18566),l=e.i(3224),n=e.i(79574),r=e.i(21065),i=e.i(67735),o=e.i(44212),d=e.i(71547),c=e.i(87316),u=e.i(46897),m=e.i(61911),g=e.i(12426);let x=(0,e.i(75254).default)("funnel",[["path",{d:"M10 20a1 1 0 0 0 .553.895l2 1A1 1 0 0 0 14 21v-7a2 2 0 0 1 .517-1.341L21.74 4.67A1 1 0 0 0 21 3H3a1 1 0 0 0-.742 1.67l7.225 7.989A2 2 0 0 1 10 14z",key:"sc7q7i"}]]);var h=e.i(7233),v=e.i(97353),f=e.i(88129),p=e.i(19937),j=e.i(74736),b=e.i(45771),w=e.i(24877);function y(e=new Date){let t=new Date(e),s=t.getDay(),a=t.getDate()+(6-s);return t.setDate(a),t.setHours(23,59,59,999),t}function N(e,t){let s=new Date(e);return s.setDate(s.getDate()+t),s}var C=e.i(28424);function E(){let e=(0,a.useRouter)(),{user:i}=(0,f.useAuthStore)(),u=!i?.userId,{latitude:m,longitude:g,loading:E}=(0,p.useGeolocation)(u),{metroAreasByState:S,stateLevelMetros:A,isLoading:k}=(0,j.useMetroAreas)(),[F,M]=(0,s.useState)(void 0),[I,O]=(0,s.useState)([]),[B,T]=(0,s.useState)(void 0),[H,U]=(0,s.useState)("upcoming"),P=(0,s.useMemo)(()=>{let e=function(e){switch(e){case"all":return{};case"upcoming":default:return{startDateFrom:new Date().toISOString()};case"thisWeek":let t;return{startDateFrom:((t=new Date).setHours(0,0,0,0),t).toISOString(),startDateTo:y().toISOString()};case"nextWeek":let s,a,l;return a=N(function(e=new Date){let t=new Date(e),s=t.getDay(),a=t.getDate()-s;return t.setDate(a),t.setHours(0,0,0,0),t}(s=new Date),7),l=N(y(s),7),{startDateFrom:a.toISOString(),startDateTo:l.toISOString()};case"nextMonth":let n,r=((n=new Date(new Date)).setMonth(n.getMonth()+1),n),i=function(e=new Date){let t=new Date(e);return t.setDate(1),t.setHours(0,0,0,0),t}(r),o=function(e=new Date){let t=new Date(e);return t.setMonth(t.getMonth()+1),t.setDate(0),t.setHours(23,59,59,999),t}(r);return{startDateFrom:i.toISOString(),startDateTo:o.toISOString()}}}(H);return{category:F,userId:i?.userId,latitude:u?m??void 0:void 0,longitude:u?g??void 0:void 0,metroAreaIds:I.length>0?I:void 0,state:B,...e}},[F,i?.userId,u,m,g,I,B,H]),{data:R,isLoading:z,error:L}=(0,v.useEvents)(P),V=(0,s.useMemo)(()=>{let e=[];return w.US_STATES.forEach(t=>{let s=S.get(t.code)||[];if(0===s.length)return;let a=s.find(e=>e.isStateLevelArea),l=s.filter(e=>!e.isStateLevelArea),n=[];a&&n.push({id:a.id,label:`All of ${t.name}`,checked:I.includes(a.id)}),l.forEach(e=>{n.push({id:e.id,label:e.name,checked:I.includes(e.id)})}),e.push({id:t.code,label:t.name,checked:!1,children:n})}),e},[S,I]),W=void 0!==F||I.length>0||void 0!==B||"upcoming"!==H,G={[b.EventCategory.Religious]:"Religious",[b.EventCategory.Cultural]:"Cultural",[b.EventCategory.Community]:"Community",[b.EventCategory.Educational]:"Educational",[b.EventCategory.Social]:"Social",[b.EventCategory.Business]:"Business",[b.EventCategory.Charity]:"Charity",[b.EventCategory.Entertainment]:"Entertainment"},$=z||u&&E||k,K=i&&(i.role===C.UserRole.EventOrganizer||i.role===C.UserRole.Admin||i.role===C.UserRole.AdminManager);return(0,t.jsxs)("div",{className:"min-h-screen bg-gradient-to-b from-neutral-50 to-white",children:[(0,t.jsx)(l.Header,{}),(0,t.jsxs)("div",{className:"bg-gradient-to-r from-orange-600 via-rose-800 to-emerald-800 py-12 relative overflow-hidden",children:[(0,t.jsx)("div",{className:"absolute inset-0 opacity-10",children:(0,t.jsx)("div",{className:"absolute inset-0",style:{backgroundImage:"url(\"data:image/svg+xml,%3Csvg width='60' height='60' viewBox='0 0 60 60' xmlns='http://www.w3.org/2000/svg'%3E%3Cg fill='none' fill-rule='evenodd'%3E%3Cg fill='%23ffffff' fill-opacity='1'%3E%3Cpath d='M36 34v-4h-2v4h-4v2h4v4h2v-4h4v-2h-4zm0-30V0h-2v4h-4v2h4v4h2V6h4V4h-4zM6 34v-4H4v4H0v2h4v4h2v-4h4v-2H6zM6 4V0H4v4H0v2h4v4h2V6h4V4H6z'/%3E%3C/g%3E%3C/g%3E%3C/svg%3E\")"}})}),(0,t.jsxs)("div",{className:"absolute inset-0 overflow-hidden",children:[(0,t.jsx)("div",{className:"absolute -top-24 -left-24 w-96 h-96 bg-orange-400/20 rounded-full blur-3xl"}),(0,t.jsx)("div",{className:"absolute -bottom-24 -right-24 w-96 h-96 bg-emerald-400/20 rounded-full blur-3xl"}),(0,t.jsx)("div",{className:"absolute top-1/2 left-1/2 transform -translate-x-1/2 -translate-y-1/2 w-96 h-96 bg-rose-400/10 rounded-full blur-3xl"})]}),(0,t.jsx)("div",{className:"relative max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:(0,t.jsxs)("div",{className:"flex items-center justify-between",children:[(0,t.jsxs)("div",{className:"flex-1",children:[(0,t.jsx)("h1",{className:"text-4xl font-bold text-white mb-4",children:"Discover Events"}),(0,t.jsx)("p",{className:"text-lg text-white/90 max-w-2xl",children:"Find cultural, community, and social events relevant to you"})]}),K&&(0,t.jsxs)(o.Button,{onClick:()=>e.push("/events/create"),className:"flex items-center gap-2",style:{background:"#FF7900"},children:[(0,t.jsx)(h.Plus,{className:"h-5 w-5"}),"Create Event"]})]})})]}),(0,t.jsx)("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8",children:(0,t.jsxs)(r.Card,{children:[(0,t.jsx)(r.CardHeader,{children:(0,t.jsxs)("div",{className:"flex items-center justify-between",children:[(0,t.jsxs)("div",{className:"flex items-center gap-2",children:[(0,t.jsx)(x,{className:"h-5 w-5",style:{color:"#FF7900"}}),(0,t.jsx)(r.CardTitle,{style:{color:"#8B1538"},children:"Filters"})]}),W&&(0,t.jsx)("button",{onClick:()=>{M(void 0),O([]),T(void 0),U("upcoming")},className:"text-sm font-medium hover:underline",style:{color:"#FF7900"},children:"Clear All"})]})}),(0,t.jsx)(r.CardContent,{children:(0,t.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[(0,t.jsxs)("div",{children:[(0,t.jsx)("label",{className:"block text-sm font-medium text-neutral-700 mb-2",children:"Event Type"}),(0,t.jsxs)("select",{value:F??"",onChange:e=>{let t=e.target.value;M(""===t?void 0:Number(t))},className:"w-full px-4 py-2 border border-neutral-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-orange-500",disabled:$,children:[(0,t.jsx)("option",{value:"",children:"All Types"}),Object.entries(G).map(([e,s])=>(0,t.jsx)("option",{value:e,children:s},e))]})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)("label",{className:"block text-sm font-medium text-neutral-700 mb-2",children:"Event Date"}),(0,t.jsxs)("select",{value:H,onChange:e=>{U(e.target.value)},className:"w-full px-4 py-2 border border-neutral-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-orange-500",disabled:$,children:[(0,t.jsx)("option",{value:"upcoming",children:"Upcoming Events"}),(0,t.jsx)("option",{value:"thisWeek",children:"This Week"}),(0,t.jsx)("option",{value:"nextWeek",children:"Next Week"}),(0,t.jsx)("option",{value:"nextMonth",children:"Next Month"}),(0,t.jsx)("option",{value:"all",children:"All Events"})]})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)("label",{className:"block text-sm font-medium text-neutral-700 mb-2",children:"Location (State/Metro Area)"}),(0,t.jsx)(d.TreeDropdown,{nodes:V,selectedIds:I,onSelectionChange:e=>{O(e)},placeholder:"Select location",maxSelections:20,disabled:$||k,className:"w-full"})]})]})})]})}),(0,t.jsx)("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 pb-12",children:$?(0,t.jsx)("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:[...Array(6)].map((e,s)=>(0,t.jsx)(r.Card,{className:"animate-pulse",children:(0,t.jsxs)(r.CardContent,{className:"p-6",children:[(0,t.jsx)("div",{className:"w-full h-48 bg-neutral-200 rounded-lg mb-4"}),(0,t.jsx)("div",{className:"h-6 bg-neutral-200 rounded w-3/4 mb-2"}),(0,t.jsx)("div",{className:"h-4 bg-neutral-200 rounded w-1/2 mb-4"}),(0,t.jsx)("div",{className:"h-4 bg-neutral-200 rounded w-full"})]})},s))}):L?(0,t.jsx)(r.Card,{children:(0,t.jsx)(r.CardContent,{className:"p-12 text-center",children:(0,t.jsx)("p",{className:"text-destructive text-lg",children:"Failed to load events. Please try again later."})})}):R&&0!==R.length?(0,t.jsx)("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:R.map(e=>(0,t.jsx)(D,{event:e,categoryLabels:G},e.id))}):(0,t.jsx)(r.Card,{children:(0,t.jsxs)(r.CardContent,{className:"p-12 text-center",children:[(0,t.jsx)(c.Calendar,{className:"h-16 w-16 mx-auto mb-4 text-neutral-400"}),(0,t.jsx)("h3",{className:"text-xl font-semibold text-neutral-900 mb-2",children:"No Events Found"}),(0,t.jsx)("p",{className:"text-neutral-500",children:W?"Try adjusting your filters to see more events.":"Check back soon for new events!"})]})})}),(0,t.jsx)(n.default,{})]})}function D({event:e,categoryLabels:s}){let a=new Date(e.startDate),l=a.toLocaleDateString("en-US",{month:"short",day:"numeric",year:"numeric"}),n=a.toLocaleTimeString("en-US",{hour:"numeric",minute:"2-digit"});return(0,t.jsxs)(r.Card,{className:"hover:shadow-xl transition-all hover:-translate-y-1 cursor-pointer overflow-hidden",onClick:()=>window.location.href=`/events/${e.id}`,children:[(0,t.jsxs)("div",{className:"relative h-48 bg-gradient-to-br from-orange-500 to-rose-500",children:[e.images&&e.images.length>0?(0,t.jsx)("img",{src:e.images[0].imageUrl,alt:e.title,className:"w-full h-full object-cover"}):(0,t.jsx)("div",{className:"w-full h-full flex items-center justify-center text-6xl text-white",children:"ðŸŽ‰"}),(0,t.jsx)("div",{className:"absolute top-3 right-3",children:(0,t.jsx)(i.Badge,{variant:"default",className:"text-white shadow-lg",style:{background:"#8B1538"},children:s[e.category]})})]}),(0,t.jsxs)(r.CardContent,{className:"p-6",children:[(0,t.jsx)("h3",{className:"text-lg font-semibold text-neutral-900 mb-3 line-clamp-2",children:e.title}),(0,t.jsxs)("div",{className:"flex items-center gap-2 text-sm text-neutral-600 mb-2",children:[(0,t.jsx)(c.Calendar,{className:"h-4 w-4",style:{color:"#FF7900"}}),(0,t.jsxs)("span",{children:[l," at ",n]})]}),e.city&&e.state&&(0,t.jsxs)("div",{className:"flex items-center gap-2 text-sm text-neutral-600 mb-2",children:[(0,t.jsx)(u.MapPin,{className:"h-4 w-4",style:{color:"#FF7900"}}),(0,t.jsxs)("span",{children:[e.city,", ",e.state]})]}),(0,t.jsxs)("div",{className:"flex items-center gap-2 text-sm text-neutral-600 mb-3",children:[(0,t.jsx)(m.Users,{className:"h-4 w-4",style:{color:"#FF7900"}}),(0,t.jsxs)("span",{children:[e.currentRegistrations," / ",e.capacity," registered"]})]}),(0,t.jsxs)("div",{className:"flex items-center justify-between pt-3 border-t border-neutral-200",children:[(0,t.jsxs)("div",{className:"flex items-center gap-2",children:[(0,t.jsx)(g.DollarSign,{className:"h-4 w-4",style:{color:"#FF7900"}}),(0,t.jsx)("span",{className:"text-sm font-semibold",style:{color:"#8B1538"},children:e.isFree?"Free Event":`$${e.ticketPriceAmount?.toFixed(2)}`})]}),(0,t.jsx)("button",{className:"px-4 py-2 rounded-lg text-sm font-medium text-white transition-colors",style:{background:"#FF7900"},children:"View Details"})]})]})]})}e.s(["default",()=>E],60219)},45865,e=>{e.v(t=>Promise.all(["static/chunks/8b532d2e6601d76f.js"].map(t=>e.l(t))).then(()=>t(42490)))}]);