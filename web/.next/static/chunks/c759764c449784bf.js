(globalThis.TURBOPACK||(globalThis.TURBOPACK=[])).push(["object"==typeof document?document.currentScript:void 0,94909,(e,s,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0});var a={default:function(){return c},getImageProps:function(){return d}};for(var t in a)Object.defineProperty(r,t,{enumerable:!0,get:a[t]});let i=e.r(55682),n=e.r(8927),o=e.r(5500),l=i._(e.r(1948));function d(e){let{props:s}=(0,n.getImgProps)(e,{defaultLoader:l.default,imgConf:{deviceSizes:[640,750,828,1080,1200,1920,2048,3840],imageSizes:[32,48,64,96,128,256,384],qualities:[75],path:"/_next/image",loader:"default",dangerouslyAllowSVG:!1,unoptimized:!1}});for(let[e,r]of Object.entries(s))void 0===r&&delete s[e];return{props:s}}let c=o.Image},57688,(e,s,r)=>{s.exports=e.r(94909)},75244,e=>{"use strict";var s=e.i(43476),r=e.i(71645),a=e.i(57022);let t=r.forwardRef(({className:e,type:r="text",error:t,...i},n)=>(0,s.jsx)("input",{type:r,className:(0,a.cn)("flex h-10 w-full rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background file:border-0 file:bg-transparent file:text-sm file:font-medium placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50",t&&"border-destructive focus-visible:ring-destructive",e),ref:n,"aria-invalid":t?"true":void 0,...i}));t.displayName="Input",e.s(["Input",()=>t])},42490,e=>{"use strict";var s=e.i(48831);class r{basePath="/auth";async login(e,r=!1){return await s.apiClient.post(`${this.basePath}/login`,{...e,rememberMe:r})}async register(e){return await s.apiClient.post(`${this.basePath}/register`,e)}async refreshToken(e){return await s.apiClient.post(`${this.basePath}/refresh-token`,{refreshToken:e})}async logout(){await s.apiClient.post(`${this.basePath}/logout`)}async requestPasswordReset(e){return await s.apiClient.post(`${this.basePath}/forgot-password`,{email:e})}async resetPassword(e,r){return await s.apiClient.post(`${this.basePath}/reset-password`,{token:e,newPassword:r})}async verifyEmail(e){return await s.apiClient.post(`${this.basePath}/verify-email`,{token:e})}async resendVerificationEmail(e){return await s.apiClient.post(`${this.basePath}/resend-verification`,{email:e})}async testVerifyEmail(e){return await s.apiClient.post(`${this.basePath}/test/verify-user/${e}`,{})}}let a=new r;e.s(["AuthRepository",()=>r,"authRepository",0,a])},10769,e=>{"use strict";var s=e.i(81307);let r=s.z.string().min(1,"Email is required").email("Please enter a valid email address").toLowerCase(),a=s.z.string().min(8,"Password must be at least 8 characters").regex(/[A-Z]/,"Password must contain at least one uppercase letter").regex(/[a-z]/,"Password must contain at least one lowercase letter").regex(/[0-9]/,"Password must contain at least one number").regex(/[!@#$%^&*()_+\-=\[\]{};':"\\|,.<>\/?]/,"Password must contain at least one special character"),t=s.z.string().min(1,"This field is required").min(2,"Must be at least 2 characters").max(50,"Must be less than 50 characters").regex(/^[a-zA-Z\s'-]+$/,"Only letters, spaces, hyphens and apostrophes allowed"),i=s.z.object({email:r,password:s.z.string().min(1,"Password is required")}),n=s.z.object({email:r,password:a,confirmPassword:s.z.string().min(1,"Please confirm your password"),firstName:t,lastName:t,selectedRole:s.z.enum(["GeneralUser","EventOrganizer"]),preferredMetroAreaIds:s.z.array(s.z.string()).min(1,"Please select at least one metro area").max(20,"Maximum 20 metro areas allowed"),agreeToTerms:s.z.boolean().refine(e=>!0===e,{message:"You must agree to the terms and conditions"}),agreeToApproval:s.z.boolean().optional()}).refine(e=>e.password===e.confirmPassword,{message:"Passwords do not match",path:["confirmPassword"]}).refine(e=>"EventOrganizer"!==e.selectedRole||!0===e.agreeToApproval,{message:"You must acknowledge that Event Organizer requests require admin approval",path:["agreeToApproval"]}),o=s.z.object({email:r}),l=s.z.object({password:a,confirmPassword:s.z.string().min(1,"Please confirm your password")}).refine(e=>e.password===e.confirmPassword,{message:"Passwords do not match",path:["confirmPassword"]});e.s(["forgotPasswordSchema",0,o,"loginSchema",0,i,"registerSchema",0,n,"resetPasswordSchema",0,l])},83033,e=>{"use strict";var s=e.i(43476),r=e.i(71645),a=e.i(18566),t=e.i(53145),i=e.i(94814),n=e.i(42490),o=e.i(44212),l=e.i(75244),d=e.i(21065),c=e.i(10769),m=e.i(66793);function p({token:e}){let p=(0,a.useRouter)(),[x,u]=(0,r.useState)(null),[h,f]=(0,r.useState)(null),{register:g,handleSubmit:w,formState:{errors:b,isSubmitting:j}}=(0,t.useForm)({resolver:(0,i.zodResolver)(c.resetPasswordSchema)}),v=async s=>{try{u(null),f(null);let r=await n.authRepository.resetPassword(e,s.password);f(r.message||"Your password has been reset successfully!"),setTimeout(()=>{p.push("/login")},3e3)}catch(e){e instanceof m.ApiError?u(e.message):u("An unexpected error occurred. Please try again.")}};return(0,s.jsxs)(d.Card,{className:"w-full max-w-md",children:[(0,s.jsxs)(d.CardHeader,{children:[(0,s.jsx)(d.CardTitle,{children:"Reset Password"}),(0,s.jsx)(d.CardDescription,{children:"Enter your new password below."})]}),(0,s.jsxs)("form",{onSubmit:w(v),children:[(0,s.jsxs)(d.CardContent,{className:"space-y-4",children:[h&&(0,s.jsxs)("div",{className:"p-4 bg-green-50 border border-green-200 rounded-md",children:[(0,s.jsx)("p",{className:"text-sm text-green-800",children:h}),(0,s.jsx)("p",{className:"text-sm text-green-600 mt-2",children:"Redirecting to login..."})]}),x&&(0,s.jsx)("div",{className:"p-4 bg-red-50 border border-red-200 rounded-md",children:(0,s.jsx)("p",{className:"text-sm text-red-800",children:x})}),(0,s.jsxs)("div",{className:"space-y-2",children:[(0,s.jsx)("label",{htmlFor:"password",className:"block text-sm font-medium text-gray-700",children:"New Password"}),(0,s.jsx)(l.Input,{id:"password",type:"password",placeholder:"Enter new password",error:!!b.password,"aria-invalid":b.password?"true":"false","aria-describedby":b.password?"password-error":void 0,...g("password")}),b.password&&(0,s.jsx)("p",{id:"password-error",className:"text-sm text-red-600",children:b.password.message})]}),(0,s.jsxs)("div",{className:"space-y-2",children:[(0,s.jsx)("label",{htmlFor:"confirmPassword",className:"block text-sm font-medium text-gray-700",children:"Confirm New Password"}),(0,s.jsx)(l.Input,{id:"confirmPassword",type:"password",placeholder:"Confirm new password",error:!!b.confirmPassword,"aria-invalid":b.confirmPassword?"true":"false","aria-describedby":b.confirmPassword?"confirmPassword-error":void 0,...g("confirmPassword")}),b.confirmPassword&&(0,s.jsx)("p",{id:"confirmPassword-error",className:"text-sm text-red-600",children:b.confirmPassword.message})]}),(0,s.jsxs)("div",{className:"text-xs text-gray-600 space-y-1",children:[(0,s.jsx)("p",{className:"font-medium",children:"Password must contain:"}),(0,s.jsxs)("ul",{className:"list-disc list-inside space-y-1 ml-2",children:[(0,s.jsx)("li",{children:"At least 8 characters"}),(0,s.jsx)("li",{children:"One uppercase letter"}),(0,s.jsx)("li",{children:"One lowercase letter"}),(0,s.jsx)("li",{children:"One number"}),(0,s.jsx)("li",{children:"One special character (!@#$%^&*...)"})]})]})]}),(0,s.jsx)(d.CardFooter,{children:(0,s.jsx)(o.Button,{type:"submit",className:"w-full",loading:j,disabled:j||!!h,children:j?"Resetting...":"Reset Password"})})]})]})}var x=e.i(22016),u=e.i(57688);function h(){let e=(0,a.useSearchParams)().get("token");return e?(0,s.jsx)(p,{token:e}):(0,s.jsxs)(d.Card,{className:"w-full max-w-md",children:[(0,s.jsxs)(d.CardHeader,{children:[(0,s.jsx)(d.CardTitle,{children:"Invalid Reset Link"}),(0,s.jsx)(d.CardDescription,{children:"The password reset link is invalid or missing the required token."})]}),(0,s.jsxs)(d.CardContent,{className:"space-y-4",children:[(0,s.jsx)("div",{className:"p-4 bg-red-50 border border-red-200 rounded-md",children:(0,s.jsx)("p",{className:"text-sm text-red-800",children:"This password reset link appears to be invalid. Please request a new password reset."})}),(0,s.jsxs)("div",{className:"flex flex-col space-y-2",children:[(0,s.jsx)(x.default,{href:"/forgot-password",className:"text-primary hover:underline text-sm text-center",children:"Request New Password Reset"}),(0,s.jsx)(x.default,{href:"/login",className:"text-primary hover:underline text-sm text-center",children:"Back to Login"})]})]})]})}function f(){return(0,s.jsx)("div",{className:"min-h-screen flex items-center justify-center p-5",style:{backgroundImage:"url(/images/batik-sri-lanka.jpg)",backgroundSize:"cover",backgroundPosition:"center",backgroundRepeat:"no-repeat"},children:(0,s.jsxs)("div",{className:"relative z-10 w-full max-w-[1000px] grid grid-cols-1 md:grid-cols-2 bg-white rounded-[20px] overflow-hidden shadow-[0_20px_60px_rgba(0,0,0,0.3)]",children:[(0,s.jsxs)("div",{className:"hidden md:flex flex-col justify-center text-white px-10 py-[60px] relative overflow-hidden",style:{background:"linear-gradient(135deg, #FF7900 0%, #8B1538 50%, #006400 100%)"},children:[(0,s.jsx)("div",{className:"absolute -top-1/2 -right-1/2 w-[200%] h-[200%] pointer-events-none",style:{background:"radial-gradient(circle, rgba(255,255,255,0.1) 0%, transparent 70%)",animation:"pulse 8s ease-in-out infinite"}}),(0,s.jsx)("div",{className:"relative z-10 mb-10",children:(0,s.jsxs)("div",{className:"flex items-center text-[2rem] font-bold mb-5",children:[(0,s.jsx)(u.default,{src:"/lankaconnect-logo-transparent.png",alt:"LankaConnect",width:80,height:80,className:"mr-5",priority:!0}),"LankaConnect"]})}),(0,s.jsxs)("div",{className:"relative z-10",children:[(0,s.jsx)("h1",{className:"text-[2.5rem] font-bold mb-5 drop-shadow-[2px_2px_4px_rgba(0,0,0,0.2)]",children:"Create New Password"}),(0,s.jsx)("p",{className:"text-[1.1rem] opacity-95 leading-[1.6] mb-[30px]",children:"You're almost there! Create a strong, secure password to protect your account and continue connecting with the Sri Lankan American community."})]}),(0,s.jsxs)("div",{className:"relative z-10",children:[(0,s.jsxs)("div",{className:"flex items-center mb-[15px] p-[15px] bg-white/10 backdrop-blur-[10px] rounded-[10px]",children:[(0,s.jsx)("div",{className:"w-10 h-10 rounded-[10px] flex items-center justify-center text-[1.3rem] mr-[15px] flex-shrink-0",style:{background:"#FFD700"},children:"ðŸ”"}),(0,s.jsxs)("div",{children:[(0,s.jsx)("strong",{className:"block",children:"Secure & Safe"}),(0,s.jsx)("div",{className:"text-[0.9rem] opacity-90",children:"Your password is encrypted"})]})]}),(0,s.jsxs)("div",{className:"flex items-center mb-[15px] p-[15px] bg-white/10 backdrop-blur-[10px] rounded-[10px]",children:[(0,s.jsx)("div",{className:"w-10 h-10 rounded-[10px] flex items-center justify-center text-[1.3rem] mr-[15px] flex-shrink-0",style:{background:"#FFD700"},children:"âœ…"}),(0,s.jsxs)("div",{children:[(0,s.jsx)("strong",{className:"block",children:"Strong Password"}),(0,s.jsx)("div",{className:"text-[0.9rem] opacity-90",children:"Use 8+ characters with variety"})]})]}),(0,s.jsxs)("div",{className:"flex items-center mb-[15px] p-[15px] bg-white/10 backdrop-blur-[10px] rounded-[10px]",children:[(0,s.jsx)("div",{className:"w-10 h-10 rounded-[10px] flex items-center justify-center text-[1.3rem] mr-[15px] flex-shrink-0",style:{background:"#FFD700"},children:"ðŸŽ¯"}),(0,s.jsxs)("div",{children:[(0,s.jsx)("strong",{className:"block",children:"Instant Access"}),(0,s.jsx)("div",{className:"text-[0.9rem] opacity-90",children:"Login immediately after reset"})]})]})]})]}),(0,s.jsxs)("div",{className:"flex flex-col justify-center px-[50px] py-[60px]",style:{background:"linear-gradient(to bottom, #ffffff 0%, #fef9f5 100%)"},children:[(0,s.jsxs)("div",{className:"mb-8 md:hidden text-center",children:[(0,s.jsx)(u.default,{src:"/lankaconnect-logo-transparent.png",alt:"LankaConnect",width:60,height:60,className:"mx-auto mb-2",priority:!0}),(0,s.jsx)("span",{className:"text-2xl font-bold",style:{color:"#8B1538"},children:"LankaConnect"})]}),(0,s.jsx)(r.Suspense,{fallback:(0,s.jsx)(d.Card,{className:"w-full",children:(0,s.jsx)(d.CardHeader,{children:(0,s.jsx)(d.CardTitle,{children:"Loading..."})})}),children:(0,s.jsx)(h,{})})]})]})})}e.s(["default",()=>f],83033)}]);