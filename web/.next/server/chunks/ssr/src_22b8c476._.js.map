{"version":3,"sources":["turbopack:///[project]/src/infrastructure/api/types/events.types.ts","turbopack:///[project]/src/app/test-simple/page.tsx"],"sourcesContent":["/**\r\n * Events API Type Definitions\r\n * DTOs matching backend API contracts (LankaConnect.Application.Events.Common)\r\n */\r\n\r\nimport type { EventBadgeDto } from './badges.types';\r\n\r\n// ==================== Enums ====================\r\n\r\n/**\r\n * Event status enum matching backend LankaConnect.Domain.Events.Enums.EventStatus\r\n */\r\nexport enum EventStatus {\r\n  Draft = 0,\r\n  Published = 1,\r\n  Active = 2,\r\n  Postponed = 3,\r\n  Cancelled = 4,\r\n  Completed = 5,\r\n  Archived = 6,\r\n  UnderReview = 7,\r\n}\r\n\r\n/**\r\n * Event category enum matching backend LankaConnect.Domain.Events.Enums.EventCategory\r\n */\r\nexport enum EventCategory {\r\n  Religious = 0,\r\n  Cultural = 1,\r\n  Community = 2,\r\n  Educational = 3,\r\n  Social = 4,\r\n  Business = 5,\r\n  Charity = 6,\r\n  Entertainment = 7,\r\n}\r\n\r\n/**\r\n * Registration status enum matching backend LankaConnect.Domain.Events.Enums.RegistrationStatus\r\n */\r\nexport enum RegistrationStatus {\r\n  Pending = 0,\r\n  Confirmed = 1,\r\n  Waitlisted = 2,\r\n  CheckedIn = 3,\r\n  Completed = 4,\r\n  Cancelled = 5,\r\n  Refunded = 6,\r\n}\r\n\r\n/**\r\n * Currency enum matching backend LankaConnect.Domain.Shared.Enums.Currency\r\n */\r\nexport enum Currency {\r\n  USD = 1,\r\n  LKR = 2,\r\n  GBP = 3,\r\n  EUR = 4,\r\n  CAD = 5,\r\n  AUD = 6,\r\n}\r\n\r\n/**\r\n * Pricing type enum matching backend LankaConnect.Domain.Events.Enums.PricingType\r\n * Phase 6D: Tiered Group Pricing\r\n */\r\nexport enum PricingType {\r\n  Single = 0,      // Flat rate per attendee\r\n  AgeDual = 1,     // Age-based (Adult/Child)\r\n  GroupTiered = 2, // Quantity-based with tiers\r\n}\r\n\r\n/**\r\n * Payment status enum matching backend LankaConnect.Domain.Events.Enums.PaymentStatus\r\n * Session 23: Stripe payment integration\r\n */\r\nexport enum PaymentStatus {\r\n  Pending = 0,\r\n  Completed = 1,\r\n  Failed = 2,\r\n  Refunded = 3,\r\n  NotRequired = 4,\r\n}\r\n\r\n// ==================== Event DTOs ====================\r\n\r\n/**\r\n * Event image DTO\r\n * Matches backend EventImageDto\r\n */\r\nexport interface EventImageDto {\r\n  id: string;\r\n  imageUrl: string;\r\n  displayOrder: number;\r\n  isPrimary: boolean; // Phase 6A.13: Primary image flag\r\n  uploadedAt: string;\r\n}\r\n\r\n/**\r\n * Event video DTO\r\n * Matches backend EventVideoDto\r\n */\r\nexport interface EventVideoDto {\r\n  id: string;\r\n  videoUrl: string;\r\n  thumbnailUrl: string;\r\n  duration?: string | null; // ISO 8601 duration (e.g., PT1H30M)\r\n  format: string;\r\n  fileSizeBytes: number;\r\n  displayOrder: number;\r\n  uploadedAt: string;\r\n}\r\n\r\n/**\r\n * Group pricing tier DTO\r\n * Matches backend GroupPricingTierDto\r\n * Phase 6D: Tiered Group Pricing\r\n */\r\nexport interface GroupPricingTierDto {\r\n  minAttendees: number;\r\n  maxAttendees?: number | null; // Null for unlimited tier (e.g., \"6+\")\r\n  pricePerPerson: number;\r\n  currency: Currency;\r\n  tierRange: string; // Display format: \"1-2\", \"3-5\", \"6+\"\r\n}\r\n\r\n/**\r\n * Main Event DTO\r\n * Matches backend EventDto from LankaConnect.Application.Events.Common\r\n * Session 21: Added dual ticket pricing support\r\n */\r\nexport interface EventDto {\r\n  id: string;\r\n  title: string;\r\n  description: string;\r\n  startDate: string; // ISO 8601 date-time\r\n  endDate: string; // ISO 8601 date-time\r\n  organizerId: string;\r\n  capacity: number;\r\n  currentRegistrations: number;\r\n  status: EventStatus;\r\n  category: EventCategory;\r\n  createdAt: string;\r\n  updatedAt?: string | null;\r\n\r\n  // Location information (nullable - not all events have physical locations)\r\n  address?: string | null;\r\n  city?: string | null;\r\n  state?: string | null;\r\n  zipCode?: string | null;\r\n  country?: string | null;\r\n  latitude?: number | null;\r\n  longitude?: number | null;\r\n\r\n  // Ticket pricing (nullable - free events)\r\n  // Legacy single pricing (backward compatibility)\r\n  ticketPriceAmount?: number | null;\r\n  ticketPriceCurrency?: Currency | null;\r\n  isFree: boolean;\r\n\r\n  // Session 21: Dual ticket pricing (adult/child)\r\n  adultPriceAmount?: number | null;\r\n  adultPriceCurrency?: Currency | null;\r\n  childPriceAmount?: number | null;\r\n  childPriceCurrency?: Currency | null;\r\n  childAgeLimit?: number | null; // Age limit for child pricing (e.g., 12 = under 12 years old)\r\n  hasDualPricing: boolean; // True if event uses adult/child pricing\r\n\r\n  // Phase 6D: Group tiered pricing\r\n  pricingType?: PricingType | null; // Pricing model type (Single, AgeDual, GroupTiered)\r\n  groupPricingTiers: readonly GroupPricingTierDto[]; // Quantity-based pricing tiers\r\n  hasGroupPricing: boolean; // True if event uses group tiered pricing\r\n\r\n  // Media galleries (Epic 2 Phase 2)\r\n  images: readonly EventImageDto[];\r\n  videos: readonly EventVideoDto[];\r\n\r\n  // Phase 6A.25: Badge overlays (optional - populated when badges are assigned)\r\n  badges?: readonly EventBadgeDto[];\r\n\r\n  // Phase 6A.32: Email Groups Integration\r\n  emailGroupIds?: string[];\r\n}\r\n\r\n/**\r\n * Event search result DTO with relevance score\r\n * Matches backend EventSearchResultDto\r\n */\r\nexport interface EventSearchResultDto extends EventDto {\r\n  searchRank: number; // PostgreSQL FTS relevance score\r\n}\r\n\r\n/**\r\n * RSVP/Registration DTO\r\n */\r\nexport interface RsvpDto {\r\n  id: string;\r\n  eventId: string;\r\n  userId: string;\r\n  quantity: number;\r\n  status: RegistrationStatus;\r\n  createdAt: string;\r\n  updatedAt?: string | null;\r\n\r\n  // Denormalized event info (optional)\r\n  eventTitle?: string | null;\r\n  eventStartDate?: string | null;\r\n  eventEndDate?: string | null;\r\n  eventStatus?: EventStatus | null;\r\n}\r\n\r\n/**\r\n * Waiting list entry DTO\r\n */\r\nexport interface WaitingListEntryDto {\r\n  id: string;\r\n  eventId: string;\r\n  userId: string;\r\n  addedAt: string;\r\n  position: number;\r\n}\r\n\r\n// ==================== Sign-Up Management ====================\r\n\r\n/**\r\n * Sign-up type enum matching backend SignUpType\r\n */\r\nexport enum SignUpType {\r\n  Open = 0,\r\n  Predefined = 1,\r\n}\r\n\r\n/**\r\n * Sign-up item category enum matching backend SignUpItemCategory\r\n * For category-based sign-up lists\r\n *\r\n * IMPORTANT: Uses string values to match ASP.NET Core's JsonStringEnumConverter\r\n * The API serializes enums as strings: \"Mandatory\", \"Preferred\", \"Suggested\", \"Open\"\r\n *\r\n * Phase 6A.27: Added Open category for user-submitted items\r\n * Note: Preferred is deprecated, use Suggested instead\r\n */\r\nexport enum SignUpItemCategory {\r\n  Mandatory = \"Mandatory\",\r\n  /** @deprecated Use Suggested instead. Preferred is being deprecated. */\r\n  Preferred = \"Preferred\",\r\n  Suggested = \"Suggested\",\r\n  /** Phase 6A.27: User-submitted items - users can add their own items */\r\n  Open = \"Open\",\r\n}\r\n\r\n/**\r\n * Sign-up commitment DTO\r\n * Represents a user's commitment to bring an item to an event\r\n * Phase 2: Added contact information fields\r\n */\r\nexport interface SignUpCommitmentDto {\r\n  id: string;\r\n  signUpItemId?: string | null; // Null for legacy Open sign-ups\r\n  userId: string;\r\n  itemDescription: string;\r\n  quantity: number;\r\n  committedAt: string; // ISO 8601 date-time\r\n  notes?: string | null;\r\n\r\n  // Phase 2: Contact information\r\n  contactName?: string | null;\r\n  contactEmail?: string | null;\r\n  contactPhone?: string | null;\r\n}\r\n\r\n/**\r\n * Sign-up item DTO\r\n * Represents a specific item in a category-based sign-up list\r\n * Phase 6A.27: Enhanced with Open item support (createdByUserId, isOpenItem)\r\n */\r\nexport interface SignUpItemDto {\r\n  id: string;\r\n  itemDescription: string;\r\n  quantity: number;\r\n  remainingQuantity: number;\r\n  itemCategory: SignUpItemCategory;\r\n  notes?: string | null;\r\n  commitments: SignUpCommitmentDto[];\r\n  isFullyCommitted: boolean;\r\n  committedQuantity: number;\r\n  /** Phase 6A.27: User ID who created this item (only for Open items) */\r\n  createdByUserId?: string | null;\r\n  /** Phase 6A.27: True if this is a user-submitted Open item */\r\n  isOpenItem: boolean;\r\n}\r\n\r\n/**\r\n * Sign-up list DTO\r\n * Matches backend SignUpListDto - supports both legacy and category-based models\r\n * Phase 6A.27: Added hasOpenItems for user-submitted items\r\n */\r\nexport interface SignUpListDto {\r\n  id: string;\r\n  category: string;\r\n  description: string;\r\n  signUpType: SignUpType;\r\n\r\n  // Legacy fields (for Open/Predefined sign-ups)\r\n  predefinedItems: string[];\r\n  commitments: SignUpCommitmentDto[];\r\n  commitmentCount: number;\r\n\r\n  // New category-based fields\r\n  hasMandatoryItems: boolean;\r\n  /** @deprecated Use hasSuggestedItems instead. Preferred is being deprecated. */\r\n  hasPreferredItems: boolean;\r\n  hasSuggestedItems: boolean;\r\n  /** Phase 6A.27: True if users can add their own Open items */\r\n  hasOpenItems: boolean;\r\n  items: SignUpItemDto[];\r\n}\r\n\r\n// ==================== Request DTOs ====================\r\n\r\n/**\r\n * Get events query filters\r\n * Matches backend GetEventsQuery parameters\r\n *\r\n * Location-based sorting parameters:\r\n * - For authenticated users with preferred metros: userId (uses user's preferred metro areas)\r\n * - For authenticated users without preferences: userId (uses user's home location)\r\n * - For anonymous users: latitude + longitude (uses provided coordinates)\r\n * - For specific metro filter: metroAreaIds\r\n */\r\nexport interface GetEventsRequest {\r\n  status?: EventStatus;\r\n  category?: EventCategory;\r\n  startDateFrom?: string; // ISO 8601 date\r\n  startDateTo?: string; // ISO 8601 date\r\n  isFreeOnly?: boolean;\r\n  city?: string;\r\n  state?: string; // NEW: State filter for location-based filtering\r\n  userId?: string; // NEW: Authenticated user ID for location-based sorting\r\n  latitude?: number; // NEW: Latitude for anonymous user location-based sorting\r\n  longitude?: number; // NEW: Longitude for anonymous user location-based sorting\r\n  metroAreaIds?: string[]; // NEW: Specific metro area IDs filter\r\n}\r\n\r\n/**\r\n * Search events request with pagination\r\n */\r\nexport interface SearchEventsRequest {\r\n  searchTerm: string;\r\n  page?: number;\r\n  pageSize?: number;\r\n  category?: EventCategory;\r\n  isFreeOnly?: boolean;\r\n  startDateFrom?: string;\r\n}\r\n\r\n/**\r\n * Get nearby events request (geospatial query)\r\n */\r\nexport interface GetNearbyEventsRequest {\r\n  latitude: number;\r\n  longitude: number;\r\n  radiusKm: number;\r\n  category?: EventCategory;\r\n  isFreeOnly?: boolean;\r\n  startDateFrom?: string;\r\n}\r\n\r\n/**\r\n * Create event request\r\n * Matches backend CreateEventCommand\r\n * Session 21: Added dual ticket pricing support\r\n */\r\nexport interface CreateEventRequest {\r\n  title: string;\r\n  description: string;\r\n  startDate: string;\r\n  endDate: string;\r\n  organizerId: string;\r\n  capacity: number;\r\n  category?: EventCategory;\r\n\r\n  // Location (optional)\r\n  locationAddress?: string;\r\n  locationCity?: string;\r\n  locationState?: string;\r\n  locationZipCode?: string;\r\n  locationCountry?: string;\r\n  locationLatitude?: number;\r\n  locationLongitude?: number;\r\n\r\n  // Ticket Price (optional - legacy single pricing for backward compatibility)\r\n  ticketPriceAmount?: number;\r\n  ticketPriceCurrency?: Currency;\r\n\r\n  // Session 21: Dual ticket pricing (optional)\r\n  adultPriceAmount?: number;\r\n  adultPriceCurrency?: Currency;\r\n  childPriceAmount?: number;\r\n  childPriceCurrency?: Currency;\r\n  childAgeLimit?: number; // Age limit for child pricing (1-18)\r\n\r\n  // Phase 6D: Group tiered pricing (optional)\r\n  groupPricingTiers?: GroupPricingTierRequest[];\r\n\r\n  // Phase 6A.32: Email Groups Integration\r\n  emailGroupIds?: string[];\r\n}\r\n\r\n/**\r\n * Group pricing tier request\r\n * Matches backend GroupPricingTierRequest\r\n * Phase 6D: Tiered Group Pricing\r\n */\r\nexport interface GroupPricingTierRequest {\r\n  minAttendees: number;\r\n  maxAttendees?: number | null; // Null for unlimited tier (e.g., \"6+\")\r\n  pricePerPerson: number;\r\n  currency: Currency;\r\n}\r\n\r\n/**\r\n * Update event request\r\n * Matches backend UpdateEventCommand signature exactly\r\n */\r\nexport interface UpdateEventRequest {\r\n  eventId: string;\r\n  title?: string;\r\n  description?: string;\r\n  startDate?: string;\r\n  endDate?: string;\r\n  capacity?: number;\r\n  category?: EventCategory;\r\n\r\n  // Location (with \"Location\" prefix to match backend)\r\n  locationAddress?: string | null;\r\n  locationCity?: string | null;\r\n  locationState?: string | null;\r\n  locationZipCode?: string | null;\r\n  locationCountry?: string | null;\r\n  locationLatitude?: number | null;\r\n  locationLongitude?: number | null;\r\n\r\n  // Pricing (nullable to match C# decimal? and Currency?)\r\n  ticketPriceAmount?: number | null;\r\n  ticketPriceCurrency?: Currency | null;\r\n\r\n  // Session 21: Dual ticket pricing (optional)\r\n  adultPriceAmount?: number | null;\r\n  adultPriceCurrency?: Currency | null;\r\n  childPriceAmount?: number | null;\r\n  childPriceCurrency?: Currency | null;\r\n  childAgeLimit?: number | null;\r\n\r\n  // Session 33: Group tiered pricing (optional)\r\n  groupPricingTiers?: GroupPricingTierRequest[];\r\n\r\n  // Phase 6A.32: Email Groups Integration\r\n  emailGroupIds?: string[];\r\n\r\n  // Note: isFree is NOT in backend UpdateEventCommand - backend infers it from ticketPriceAmount\r\n}\r\n\r\n/**\r\n * RSVP to event request\r\n * Matches backend RsvpToEventCommand for authenticated user registration\r\n * Session 21: Added multi-attendee support with individual names and ages\r\n * Session 23: Added payment redirect URLs for paid events\r\n */\r\nexport interface RsvpRequest {\r\n  userId: string;\r\n\r\n  // Legacy format (backward compatibility)\r\n  quantity?: number; // Default: 1\r\n\r\n  // New format (Session 21 - multi-attendee)\r\n  attendees?: AttendeeDto[];\r\n\r\n  // Contact information (new format only)\r\n  email?: string;\r\n  phoneNumber?: string;\r\n  address?: string;\r\n\r\n  // Session 23: Payment redirect URLs (required for paid events)\r\n  successUrl?: string;\r\n  cancelUrl?: string;\r\n}\r\n\r\n/**\r\n * Anonymous registration request\r\n * Matches backend AnonymousRegistrationRequest for unauthenticated event registration\r\n * Session 21: Added multi-attendee support with individual names and ages\r\n */\r\nexport interface AnonymousRegistrationRequest {\r\n  // Legacy format (Session 20 - backward compatibility)\r\n  name?: string;\r\n  age?: number;\r\n\r\n  // New format (Session 21 - multi-attendee)\r\n  attendees?: AttendeeDto[];\r\n\r\n  // Contact information (shared for all attendees)\r\n  email: string;\r\n  phoneNumber: string;\r\n  address?: string;\r\n\r\n  // Legacy quantity field (backward compatibility)\r\n  quantity?: number; // Default: 1\r\n}\r\n\r\n/**\r\n * Session 21: Individual attendee information\r\n * Used for multi-attendee registration\r\n */\r\nexport interface AttendeeDto {\r\n  name: string;\r\n  age: number;\r\n}\r\n\r\n/**\r\n * Registration details DTO with attendee information\r\n * Fix 1: Enhanced registration status detection\r\n * Matches backend RegistrationDetailsDto\r\n */\r\nexport interface RegistrationDetailsDto {\r\n  id: string;\r\n  eventId: string;\r\n  userId?: string | null;\r\n  quantity: number;\r\n  status: RegistrationStatus;\r\n  createdAt: string;\r\n  updatedAt?: string | null;\r\n\r\n  // Session 21: Multi-attendee details\r\n  attendees: AttendeeDto[];\r\n\r\n  // Contact information\r\n  contactEmail?: string | null;\r\n  contactPhone?: string | null;\r\n  contactAddress?: string | null;\r\n\r\n  // Payment information\r\n  paymentStatus: PaymentStatus;\r\n  totalPriceAmount?: number | null;\r\n  totalPriceCurrency?: string | null;\r\n}\r\n\r\n/**\r\n * Update RSVP request\r\n */\r\nexport interface UpdateRsvpRequest {\r\n  userId: string;\r\n  newQuantity: number;\r\n}\r\n\r\n/**\r\n * Phase 6A.14: Update registration details request\r\n * Allows users to edit their registration after initial RSVP\r\n */\r\nexport interface UpdateRegistrationRequest {\r\n  attendees: UpdateRegistrationAttendeeDto[];\r\n  email: string;\r\n  phoneNumber: string;\r\n  address?: string;\r\n}\r\n\r\n/**\r\n * Phase 6A.14: Attendee DTO for registration update\r\n */\r\nexport interface UpdateRegistrationAttendeeDto {\r\n  name: string;\r\n  age: number;\r\n}\r\n\r\n/**\r\n * Cancel event request\r\n */\r\nexport interface CancelEventRequest {\r\n  reason: string;\r\n}\r\n\r\n/**\r\n * Postpone event request\r\n */\r\nexport interface PostponeEventRequest {\r\n  reason: string;\r\n}\r\n\r\n/**\r\n * Add sign-up list to event request\r\n */\r\nexport interface AddSignUpListRequest {\r\n  category: string;\r\n  description: string;\r\n  signUpType: SignUpType;\r\n  predefinedItems?: string[];\r\n}\r\n\r\n/**\r\n * Commit to sign-up request\r\n */\r\nexport interface CommitToSignUpRequest {\r\n  userId: string;\r\n  itemDescription: string;\r\n  quantity: number;\r\n}\r\n\r\n/**\r\n * Cancel sign-up commitment request\r\n */\r\nexport interface CancelCommitmentRequest {\r\n  userId: string;\r\n}\r\n\r\n/**\r\n * Create sign-up list with items request\r\n * Matches backend CreateSignUpListRequest - creates list WITH items in single API call\r\n * Phase 6A.27: Added hasOpenItems for user-submitted items\r\n */\r\nexport interface CreateSignUpListRequest {\r\n  category: string;\r\n  description: string;\r\n  hasMandatoryItems: boolean;\r\n  /** @deprecated Use hasSuggestedItems instead. Preferred is being deprecated. */\r\n  hasPreferredItems: boolean;\r\n  hasSuggestedItems: boolean;\r\n  /** Phase 6A.27: Allow users to add their own Open items */\r\n  hasOpenItems?: boolean;\r\n  items: SignUpItemRequestDto[];\r\n}\r\n\r\n/**\r\n * Update sign-up list request\r\n * Phase 6A.13: Edit Sign-Up List feature\r\n * Phase 6A.28: Added hasOpenItems for user-submitted items\r\n * Matches backend UpdateSignUpListRequest\r\n */\r\nexport interface UpdateSignUpListRequest {\r\n  category: string;\r\n  description: string;\r\n  hasMandatoryItems: boolean;\r\n  /** @deprecated Use hasSuggestedItems instead. Preferred is being deprecated. */\r\n  hasPreferredItems: boolean;\r\n  hasSuggestedItems: boolean;\r\n  /** Phase 6A.28: Allow users to add their own Open items */\r\n  hasOpenItems: boolean; // Made required for type safety\r\n}\r\n\r\n/**\r\n * Sign-up item within CreateSignUpListRequest\r\n */\r\nexport interface SignUpItemRequestDto {\r\n  itemDescription: string;\r\n  quantity: number;\r\n  itemCategory: SignUpItemCategory;\r\n  notes?: string | null;\r\n}\r\n\r\n/**\r\n * Add sign-up item request\r\n */\r\nexport interface AddSignUpItemRequest {\r\n  itemDescription: string;\r\n  quantity: number;\r\n  itemCategory: SignUpItemCategory;\r\n  notes?: string | null;\r\n}\r\n\r\n/**\r\n * Update sign-up item request\r\n * Phase 6A.14: Edit Sign-Up Item feature\r\n * Matches backend UpdateSignUpItemRequest\r\n */\r\nexport interface UpdateSignUpItemRequest {\r\n  itemDescription: string;\r\n  quantity: number;\r\n  notes?: string | null;\r\n}\r\n\r\n// ==================== Phase 6A.27: Open Sign-Up Items ====================\r\n\r\n/**\r\n * Phase 6A.27: Add an Open sign-up item (user-submitted)\r\n * POST /api/events/{eventId}/signups/{signupId}/open-items\r\n */\r\nexport interface AddOpenSignUpItemRequest {\r\n  /** Name of the item the user will bring */\r\n  itemName: string;\r\n  /** Number of items */\r\n  quantity: number;\r\n  /** Optional notes/description */\r\n  notes?: string | null;\r\n  /** Optional contact name */\r\n  contactName?: string | null;\r\n  /** Optional contact email */\r\n  contactEmail?: string | null;\r\n  /** Optional contact phone */\r\n  contactPhone?: string | null;\r\n}\r\n\r\n/**\r\n * Phase 6A.27: Update an Open sign-up item\r\n * PUT /api/events/{eventId}/signups/{signupId}/open-items/{itemId}\r\n * Only the user who created the item can update it\r\n */\r\nexport interface UpdateOpenSignUpItemRequest {\r\n  /** Updated item name */\r\n  itemName: string;\r\n  /** Updated quantity */\r\n  quantity: number;\r\n  /** Updated notes/description */\r\n  notes?: string | null;\r\n  /** Updated contact name */\r\n  contactName?: string | null;\r\n  /** Updated contact email */\r\n  contactEmail?: string | null;\r\n  /** Updated contact phone */\r\n  contactPhone?: string | null;\r\n}\r\n\r\n/**\r\n * Commit to sign-up item request\r\n * Phase 2: Added optional contact information\r\n */\r\nexport interface CommitToSignUpItemRequest {\r\n  userId: string;\r\n  quantity: number;\r\n  notes?: string | null;\r\n  contactName?: string | null;\r\n  contactEmail?: string | null;\r\n  contactPhone?: string | null;\r\n}\r\n\r\n/**\r\n * Anonymous commit to sign-up item request\r\n * Phase 6A.23: Supports anonymous sign-up workflow\r\n * Email is used to verify event registration and identify the anonymous user\r\n */\r\nexport interface CommitToSignUpItemAnonymousRequest {\r\n  contactEmail: string;\r\n  quantity: number;\r\n  notes?: string | null;\r\n  contactName?: string | null;\r\n  contactPhone?: string | null;\r\n}\r\n\r\n/**\r\n * Result of checking event registration by email\r\n * Phase 6A.23: Enhanced to support proper UX flow for anonymous sign-up\r\n */\r\nexport interface EventRegistrationCheckResult {\r\n  /** Whether the email belongs to a LankaConnect member (User account exists) */\r\n  hasUserAccount: boolean;\r\n  /** The UserId if the email belongs to a member */\r\n  userId?: string | null;\r\n  /** Whether the email is registered for this specific event */\r\n  isRegisteredForEvent: boolean;\r\n  /** The registration ID if registered for the event */\r\n  registrationId?: string | null;\r\n  /** Can proceed with anonymous commitment (NOT a member AND registered for event) */\r\n  canCommitAnonymously: boolean;\r\n  /** Should prompt user to log in (IS a member) */\r\n  shouldPromptLogin: boolean;\r\n  /** Needs to register for event first (NOT a member AND NOT registered) */\r\n  needsEventRegistration: boolean;\r\n}\r\n\r\n// ==================== Response DTOs ====================\r\n\r\n/**\r\n * Create event response\r\n * Returns the newly created event ID\r\n */\r\nexport interface CreateEventResponse {\r\n  id: string;\r\n}\r\n\r\n/**\r\n * Upload event image response\r\n */\r\nexport interface UploadEventImageResponse {\r\n  id: string;\r\n  imageUrl: string;\r\n  displayOrder: number;\r\n  uploadedAt: string;\r\n}\r\n\r\n// ==================== Ticket DTOs (Phase 6A.24) ====================\r\n\r\n/**\r\n * Phase 6A.24: Ticket attendee information\r\n */\r\nexport interface TicketAttendeeDto {\r\n  name: string;\r\n  age: number;\r\n}\r\n\r\n/**\r\n * Phase 6A.24: Event ticket DTO\r\n * Returned by GET /api/events/{eventId}/my-registration/ticket\r\n */\r\nexport interface TicketDto {\r\n  id: string;\r\n  registrationId: string;\r\n  eventId: string;\r\n  userId?: string | null;\r\n  ticketCode: string;\r\n  qrCodeBase64?: string | null;\r\n  pdfBlobUrl?: string | null;\r\n  isValid: boolean;\r\n  validatedAt?: string | null;\r\n  expiresAt: string;\r\n  createdAt: string;\r\n\r\n  // Event details for display\r\n  eventTitle?: string | null;\r\n  eventStartDate?: string | null;\r\n  eventLocation?: string | null;\r\n\r\n  // Attendee information\r\n  attendeeCount: number;\r\n  attendees?: TicketAttendeeDto[] | null;\r\n}\r\n","'use client';\r\n\r\nimport React from 'react';\r\nimport { QueryClient, QueryClientProvider, useQuery } from '@tanstack/react-query';\r\nimport { eventsRepository } from '@/infrastructure/api/repositories/events.repository';\r\nimport { EventStatus } from '@/infrastructure/api/types/events.types';\r\n\r\n// Create a fresh query client for this test\r\nconst queryClient = new QueryClient({\r\n  defaultOptions: {\r\n    queries: {\r\n      retry: false,\r\n      staleTime: 0,\r\n    },\r\n  },\r\n});\r\n\r\nfunction SimpleTest() {\r\n  const { data, isLoading, error, status, fetchStatus } = useQuery({\r\n    queryKey: ['simple-test'],\r\n    queryFn: async () => {\r\n      console.log('✅ Simple queryFn STARTING');\r\n      const result = await eventsRepository.getEvents({\r\n        status: EventStatus.Published,\r\n      });\r\n      console.log('✅ Simple queryFn SUCCESS:', result.length);\r\n      return result;\r\n    },\r\n  });\r\n\r\n  console.log('Simple Test Render:', { data: data?.length, isLoading, error, status, fetchStatus });\r\n\r\n  return (\r\n    <div style={{ padding: '20px', fontFamily: 'monospace' }}>\r\n      <h1>Simple Test (Fresh Query Client)</h1>\r\n      <p>Status: {status}</p>\r\n      <p>Fetch Status: {fetchStatus}</p>\r\n      <p>Loading: {isLoading ? 'YES' : 'NO'}</p>\r\n      <p>Error: {error ? String(error) : 'None'}</p>\r\n      <p>Events: {data?.length || 0}</p>\r\n\r\n      {data && data.length > 0 && (\r\n        <div style={{ marginTop: '20px', background: '#ccffcc', padding: '10px' }}>\r\n          <h2>SUCCESS! Events Loaded:</h2>\r\n          <ul>\r\n            {data.slice(0, 5).map(event => (\r\n              <li key={event.id}>{event.title}</li>\r\n            ))}\r\n          </ul>\r\n        </div>\r\n      )}\r\n    </div>\r\n  );\r\n}\r\n\r\nexport default function SimpleTestPage() {\r\n  return (\r\n    <QueryClientProvider client={queryClient}>\r\n      <SimpleTest />\r\n    </QueryClientProvider>\r\n  );\r\n}\r\n"],"names":[],"mappings":"uCAYO,MAcK,EAcA,EAaA,IA6LA,EAtOA,IAAA,gOAAA,GAcA,8OAAA,GAcA,+MAAA,GAaA,8GAAA,GA8KA,IAAA,sDAAA,GAeA,gCAE4D,EAAA,SAAA,CAAA,oCAGA,EAAA,IAAA,CAAA,OAL5D,uLC/OZ,EAAA,EAAA,CAAA,CAAA,OAAA,EAAA,EAAA,CAAA,CAAA,OAAA,EAAA,EAAA,CAAA,CAAA,OACA,EAAA,EAAA,CAAA,CAAA,OACA,EAAA,EAAA,CAAA,CAAA,OAGA,IAAM,EAAc,IAAI,EAAA,WAAW,CAAC,CAClC,eAAgB,CACd,QAAS,CACP,OAAO,EACP,UAAW,CACb,CACF,CACF,GAEA,SAAS,IACP,GAAM,CAAE,MAAI,CAAE,WAAS,OAAE,CAAK,QAAE,CAAM,aAAE,CAAW,CAAE,CAAG,CAAA,EAAA,EAAA,QAAA,AAAQ,EAAC,CAC/D,SAAU,CAAC,cAAc,CACzB,QAAS,UACP,QAAQ,GAAG,CAAC,6BACZ,IAAM,EAAS,MAAM,EAAA,gBAAgB,CAAC,SAAS,CAAC,CAC9C,OAAQ,EAAA,WAAW,CAAC,SAAS,AAC/B,GAEA,OADA,QAAQ,GAAG,CAAC,4BAA6B,EAAO,MAAM,EAC/C,CACT,CACF,GAIA,OAFA,QAAQ,GAAG,CAAC,sBAAuB,CAAE,KAAM,GAAM,iBAAQ,EAAW,eAAO,cAAQ,CAAY,GAG7F,CAAA,EAAA,EAAA,IAAA,EAAC,MAAA,CAAI,MAAO,CAAE,QAAS,OAAQ,WAAY,WAAY,YACrD,CAAA,EAAA,EAAA,GAAA,EAAC,KAAA,UAAG,qCACJ,CAAA,EAAA,EAAA,IAAA,EAAC,IAAA,WAAE,WAAS,KACZ,CAAA,EAAA,EAAA,IAAA,EAAC,IAAA,WAAE,iBAAe,KAClB,CAAA,EAAA,EAAA,IAAA,EAAC,IAAA,WAAE,YAAU,EAAY,MAAQ,QACjC,CAAA,EAAA,EAAA,IAAA,EAAC,IAAA,WAAE,UAAQ,EAAQ,OAAO,GAAS,UACnC,CAAA,EAAA,EAAA,IAAA,EAAC,IAAA,WAAE,WAAS,GAAM,QAAU,KAE3B,GAAQ,EAAK,MAAM,CAAG,GACrB,CAAA,EAAA,EAAA,IAAA,EAAC,MAAA,CAAI,MAAO,CAAE,UAAW,OAAQ,WAAY,UAAW,QAAS,MAAO,YACtE,CAAA,EAAA,EAAA,GAAA,EAAC,KAAA,UAAG,4BACJ,CAAA,EAAA,EAAA,GAAA,EAAC,KAAA,UACE,EAAK,KAAK,CAAC,EAAG,GAAG,GAAG,CAAC,GACpB,CAAA,EAAA,EAAA,GAAA,EAAC,KAAA,UAAmB,EAAM,KAAK,EAAtB,EAAM,EAAE,UAO/B,CAEe,SAAS,IACtB,MACE,CAAA,EAAA,EAAA,GAAA,EAAC,EAAA,mBAAmB,CAAA,CAAC,OAAQ,WAC3B,CAAA,EAAA,EAAA,GAAA,EAAC,EAAA,CAAA,IAGP"}