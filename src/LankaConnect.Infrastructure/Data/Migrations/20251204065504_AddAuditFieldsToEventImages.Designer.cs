// <auto-generated />
using System;
using System.Collections.Generic;
using LankaConnect.Infrastructure.Data;
using Microsoft.EntityFrameworkCore;
using Microsoft.EntityFrameworkCore.Infrastructure;
using Microsoft.EntityFrameworkCore.Migrations;
using Microsoft.EntityFrameworkCore.Storage.ValueConversion;
using Npgsql.EntityFrameworkCore.PostgreSQL.Metadata;

#nullable disable

namespace LankaConnect.Infrastructure.Data.Migrations
{
    [DbContext(typeof(AppDbContext))]
    [Migration("20251204065504_AddAuditFieldsToEventImages")]
    partial class AddAuditFieldsToEventImages
    {
        /// <inheritdoc />
        protected override void BuildTargetModel(ModelBuilder modelBuilder)
        {
#pragma warning disable 612, 618
            modelBuilder
                .HasAnnotation("ProductVersion", "8.0.19")
                .HasAnnotation("Relational:MaxIdentifierLength", 63);

            NpgsqlModelBuilderExtensions.HasPostgresExtension(modelBuilder, "hstore");
            NpgsqlModelBuilderExtensions.HasPostgresExtension(modelBuilder, "postgis");
            NpgsqlModelBuilderExtensions.UseIdentityByDefaultColumns(modelBuilder);

            modelBuilder.Entity("LankaConnect.Domain.Analytics.EventAnalytics", b =>
                {
                    b.Property<Guid>("Id")
                        .HasColumnType("uuid")
                        .HasColumnName("id");

                    b.Property<DateTime>("CreatedAt")
                        .ValueGeneratedOnAdd()
                        .HasColumnType("timestamp with time zone")
                        .HasColumnName("created_at")
                        .HasDefaultValueSql("NOW()");

                    b.Property<Guid>("EventId")
                        .HasColumnType("uuid")
                        .HasColumnName("event_id");

                    b.Property<DateTime?>("LastViewedAt")
                        .HasColumnType("timestamp with time zone")
                        .HasColumnName("last_viewed_at");

                    b.Property<int>("RegistrationCount")
                        .ValueGeneratedOnAdd()
                        .HasColumnType("integer")
                        .HasDefaultValue(0)
                        .HasColumnName("registration_count");

                    b.Property<int>("ShareCount")
                        .ValueGeneratedOnAdd()
                        .HasColumnType("integer")
                        .HasDefaultValue(0)
                        .HasColumnName("share_count");

                    b.Property<int>("TotalViews")
                        .ValueGeneratedOnAdd()
                        .HasColumnType("integer")
                        .HasDefaultValue(0)
                        .HasColumnName("total_views");

                    b.Property<int>("UniqueViewers")
                        .ValueGeneratedOnAdd()
                        .HasColumnType("integer")
                        .HasDefaultValue(0)
                        .HasColumnName("unique_viewers");

                    b.Property<DateTime?>("UpdatedAt")
                        .HasColumnType("timestamp with time zone")
                        .HasColumnName("updated_at");

                    b.HasKey("Id");

                    b.HasIndex("EventId")
                        .IsUnique()
                        .HasDatabaseName("ix_event_analytics_event_id_unique");

                    b.HasIndex("LastViewedAt")
                        .HasDatabaseName("ix_event_analytics_last_viewed_at");

                    b.HasIndex("TotalViews")
                        .HasDatabaseName("ix_event_analytics_total_views");

                    b.ToTable("event_analytics", "analytics");
                });

            modelBuilder.Entity("LankaConnect.Domain.Analytics.EventViewRecord", b =>
                {
                    b.Property<Guid>("Id")
                        .HasColumnType("uuid")
                        .HasColumnName("id");

                    b.Property<Guid>("EventId")
                        .HasColumnType("uuid")
                        .HasColumnName("event_id");

                    b.Property<string>("IpAddress")
                        .IsRequired()
                        .HasMaxLength(45)
                        .HasColumnType("character varying(45)")
                        .HasColumnName("ip_address");

                    b.Property<string>("UserAgent")
                        .HasMaxLength(500)
                        .HasColumnType("character varying(500)")
                        .HasColumnName("user_agent");

                    b.Property<Guid?>("UserId")
                        .HasColumnType("uuid")
                        .HasColumnName("user_id");

                    b.Property<DateTime>("ViewedAt")
                        .ValueGeneratedOnAdd()
                        .HasColumnType("timestamp with time zone")
                        .HasColumnName("viewed_at")
                        .HasDefaultValueSql("NOW()");

                    b.HasKey("Id");

                    b.HasIndex("EventId")
                        .HasDatabaseName("ix_event_view_records_event_id");

                    b.HasIndex("IpAddress")
                        .HasDatabaseName("ix_event_view_records_ip_address");

                    b.HasIndex("UserId")
                        .HasDatabaseName("ix_event_view_records_user_id");

                    b.HasIndex("ViewedAt")
                        .HasDatabaseName("ix_event_view_records_viewed_at");

                    b.HasIndex("EventId", "IpAddress", "ViewedAt")
                        .HasDatabaseName("ix_event_view_records_dedup_ip");

                    b.HasIndex("EventId", "UserId", "ViewedAt")
                        .HasDatabaseName("ix_event_view_records_dedup_user");

                    b.ToTable("event_view_records", "analytics");
                });

            modelBuilder.Entity("LankaConnect.Domain.Business.Business", b =>
                {
                    b.Property<Guid>("Id")
                        .ValueGeneratedOnAdd()
                        .HasColumnType("uuid");

                    b.Property<string>("Category")
                        .IsRequired()
                        .HasMaxLength(50)
                        .HasColumnType("character varying(50)");

                    b.Property<DateTime>("CreatedAt")
                        .HasColumnType("timestamp with time zone");

                    b.Property<string>("Hours")
                        .IsRequired()
                        .HasColumnType("json")
                        .HasColumnName("BusinessHours");

                    b.Property<bool>("IsVerified")
                        .ValueGeneratedOnAdd()
                        .HasColumnType("boolean")
                        .HasDefaultValue(false);

                    b.Property<Guid>("OwnerId")
                        .HasColumnType("uuid");

                    b.Property<decimal?>("Rating")
                        .HasColumnType("decimal(3,2)");

                    b.Property<int>("ReviewCount")
                        .ValueGeneratedOnAdd()
                        .HasColumnType("integer")
                        .HasDefaultValue(0);

                    b.Property<string>("Status")
                        .IsRequired()
                        .HasMaxLength(50)
                        .HasColumnType("character varying(50)");

                    b.Property<DateTime?>("UpdatedAt")
                        .IsRequired()
                        .HasColumnType("timestamp with time zone");

                    b.Property<DateTime?>("VerifiedAt")
                        .HasColumnType("timestamp with time zone");

                    b.Property<long>("Version")
                        .HasColumnType("bigint");

                    b.HasKey("Id");

                    b.HasIndex("Category")
                        .HasDatabaseName("IX_Business_Category");

                    b.HasIndex("CreatedAt")
                        .HasDatabaseName("IX_Business_CreatedAt");

                    b.HasIndex("IsVerified")
                        .HasDatabaseName("IX_Business_IsVerified");

                    b.HasIndex("OwnerId")
                        .HasDatabaseName("IX_Business_OwnerId");

                    b.HasIndex("Rating")
                        .HasDatabaseName("IX_Business_Rating");

                    b.HasIndex("Status")
                        .HasDatabaseName("IX_Business_Status");

                    b.ToTable("businesses", "business");
                });

            modelBuilder.Entity("LankaConnect.Domain.Business.Review", b =>
                {
                    b.Property<Guid>("Id")
                        .HasColumnType("uuid");

                    b.Property<DateTime?>("ApprovedAt")
                        .HasColumnType("timestamp with time zone");

                    b.Property<Guid>("BusinessId")
                        .HasColumnType("uuid");

                    b.Property<DateTime>("CreatedAt")
                        .ValueGeneratedOnAdd()
                        .HasColumnType("timestamp with time zone")
                        .HasDefaultValueSql("NOW()");

                    b.Property<string>("ModerationNotes")
                        .HasMaxLength(1000)
                        .HasColumnType("character varying(1000)");

                    b.Property<Guid>("ReviewerId")
                        .HasColumnType("uuid");

                    b.Property<string>("Status")
                        .IsRequired()
                        .ValueGeneratedOnAdd()
                        .HasColumnType("text")
                        .HasDefaultValue("Pending");

                    b.Property<DateTime?>("UpdatedAt")
                        .HasColumnType("timestamp with time zone");

                    b.HasKey("Id");

                    b.HasIndex("BusinessId")
                        .HasDatabaseName("ix_reviews_business_id");

                    b.HasIndex("CreatedAt")
                        .HasDatabaseName("ix_reviews_created_at");

                    b.HasIndex("ReviewerId")
                        .HasDatabaseName("ix_reviews_reviewer_id");

                    b.HasIndex("Status")
                        .HasDatabaseName("ix_reviews_status");

                    b.HasIndex("BusinessId", "ReviewerId")
                        .IsUnique()
                        .HasDatabaseName("ix_reviews_business_reviewer_unique");

                    b.HasIndex("BusinessId", "Status")
                        .HasDatabaseName("ix_reviews_business_status");

                    b.HasIndex("ReviewerId", "Status")
                        .HasDatabaseName("ix_reviews_reviewer_status");

                    b.HasIndex("BusinessId", "Status", "CreatedAt")
                        .HasDatabaseName("ix_reviews_business_status_created");

                    b.ToTable("reviews", "business");
                });

            modelBuilder.Entity("LankaConnect.Domain.Business.Service", b =>
                {
                    b.Property<Guid>("Id")
                        .ValueGeneratedOnAdd()
                        .HasColumnType("uuid");

                    b.Property<Guid>("BusinessId")
                        .HasColumnType("uuid");

                    b.Property<DateTime>("CreatedAt")
                        .HasColumnType("timestamp with time zone");

                    b.Property<string>("Description")
                        .IsRequired()
                        .HasMaxLength(1000)
                        .HasColumnType("character varying(1000)");

                    b.Property<string>("Duration")
                        .HasMaxLength(100)
                        .HasColumnType("character varying(100)");

                    b.Property<bool>("IsActive")
                        .ValueGeneratedOnAdd()
                        .HasColumnType("boolean")
                        .HasDefaultValue(true);

                    b.Property<string>("Name")
                        .IsRequired()
                        .HasMaxLength(200)
                        .HasColumnType("character varying(200)");

                    b.Property<DateTime?>("UpdatedAt")
                        .IsRequired()
                        .HasColumnType("timestamp with time zone");

                    b.HasKey("Id");

                    b.HasIndex("BusinessId")
                        .HasDatabaseName("IX_Service_BusinessId");

                    b.HasIndex("IsActive")
                        .HasDatabaseName("IX_Service_IsActive");

                    b.HasIndex("Name")
                        .HasDatabaseName("IX_Service_Name");

                    b.ToTable("services", "business");
                });

            modelBuilder.Entity("LankaConnect.Domain.Business.ValueObjects.BusinessImage", b =>
                {
                    b.Property<string>("Id")
                        .HasColumnType("text");

                    b.Property<string>("AltText")
                        .IsRequired()
                        .HasColumnType("text");

                    b.Property<Guid?>("BusinessId")
                        .HasColumnType("uuid");

                    b.Property<string>("Caption")
                        .IsRequired()
                        .HasColumnType("text");

                    b.Property<string>("ContentType")
                        .IsRequired()
                        .HasColumnType("text");

                    b.Property<int>("DisplayOrder")
                        .HasColumnType("integer");

                    b.Property<long>("FileSizeBytes")
                        .HasColumnType("bigint");

                    b.Property<bool>("IsPrimary")
                        .HasColumnType("boolean");

                    b.Property<string>("LargeUrl")
                        .IsRequired()
                        .HasColumnType("text");

                    b.Property<string>("MediumUrl")
                        .IsRequired()
                        .HasColumnType("text");

                    b.Property<Dictionary<string, string>>("Metadata")
                        .IsRequired()
                        .HasColumnType("hstore");

                    b.Property<string>("OriginalUrl")
                        .IsRequired()
                        .HasColumnType("text");

                    b.Property<string>("ThumbnailUrl")
                        .IsRequired()
                        .HasColumnType("text");

                    b.Property<DateTime>("UploadedAt")
                        .HasColumnType("timestamp with time zone");

                    b.HasKey("Id");

                    b.HasIndex("BusinessId");

                    b.ToTable("BusinessImage");
                });

            modelBuilder.Entity("LankaConnect.Domain.Communications.Entities.EmailMessage", b =>
                {
                    b.Property<Guid>("Id")
                        .HasColumnType("uuid");

                    b.Property<double?>("BackoffMultiplier")
                        .HasColumnType("double precision");

                    b.Property<string>("BypassReason")
                        .HasColumnType("text");

                    b.Property<DateTime?>("ClickedAt")
                        .HasColumnType("timestamp with time zone")
                        .HasColumnName("clicked_at");

                    b.Property<int>("ConcurrentAccessAttempts")
                        .HasColumnType("integer");

                    b.Property<DateTime>("CreatedAt")
                        .HasColumnType("timestamp with time zone");

                    b.Property<string>("CulturalContext")
                        .HasColumnType("jsonb")
                        .HasColumnName("cultural_context");

                    b.Property<bool>("CulturalDelayBypassed")
                        .HasColumnType("boolean");

                    b.Property<string>("CulturalDelayReason")
                        .HasColumnType("text");

                    b.Property<bool>("CulturalTimingOptimized")
                        .HasColumnType("boolean");

                    b.Property<DateTime?>("DeliveredAt")
                        .HasColumnType("timestamp with time zone")
                        .HasColumnName("delivered_at");

                    b.Property<bool>("DeliveryConfirmationReceived")
                        .HasColumnType("boolean");

                    b.Property<bool>("DiasporaOptimized")
                        .HasColumnType("boolean");

                    b.Property<string>("ErrorMessage")
                        .HasMaxLength(1000)
                        .HasColumnType("character varying(1000)")
                        .HasColumnName("error_message");

                    b.Property<DateTime?>("FailedAt")
                        .HasColumnType("timestamp with time zone")
                        .HasColumnName("failed_at");

                    b.Property<string>("FestivalContext")
                        .HasColumnType("text");

                    b.Property<bool>("GeographicOptimization")
                        .HasColumnType("boolean");

                    b.Property<int?>("GeographicRegion")
                        .HasColumnType("integer");

                    b.Property<bool>("HasAllRecipientsDelivered")
                        .HasColumnType("boolean");

                    b.Property<string>("HtmlContent")
                        .HasColumnType("text")
                        .HasColumnName("html_content");

                    b.Property<DateTime?>("LastStateTransition")
                        .HasColumnType("timestamp with time zone");

                    b.Property<DateTime?>("LocalizedSendTime")
                        .HasColumnType("timestamp with time zone");

                    b.Property<int>("MaxRetries")
                        .HasColumnType("integer")
                        .HasColumnName("max_retries");

                    b.Property<string>("MessageId")
                        .HasColumnType("text");

                    b.Property<DateTime?>("NextRetryAt")
                        .HasColumnType("timestamp with time zone")
                        .HasColumnName("next_retry_at");

                    b.Property<DateTime?>("OpenedAt")
                        .HasColumnType("timestamp with time zone")
                        .HasColumnName("opened_at");

                    b.Property<DateTime?>("OptimalSendTime")
                        .HasColumnType("timestamp with time zone");

                    b.Property<string>("PermanentFailureReason")
                        .HasColumnType("text");

                    b.Property<string>("PostponementReason")
                        .HasColumnType("text");

                    b.Property<int>("Priority")
                        .HasColumnType("integer")
                        .HasColumnName("priority");

                    b.Property<string>("RecipientStatuses")
                        .HasColumnType("jsonb")
                        .HasColumnName("recipient_statuses");

                    b.Property<bool>("ReligiousObservanceConsidered")
                        .HasColumnType("boolean");

                    b.Property<int>("RetryCount")
                        .HasColumnType("integer")
                        .HasColumnName("retry_count");

                    b.Property<string>("RetryStrategy")
                        .HasColumnType("text");

                    b.Property<DateTime?>("SendingStartedAt")
                        .HasColumnType("timestamp with time zone");

                    b.Property<DateTime?>("SentAt")
                        .HasColumnType("timestamp with time zone")
                        .HasColumnName("sent_at");

                    b.Property<string>("Status")
                        .IsRequired()
                        .HasMaxLength(50)
                        .HasColumnType("character varying(50)")
                        .HasColumnName("status");

                    b.Property<string>("TargetTimezone")
                        .HasColumnType("text");

                    b.Property<string>("TemplateData")
                        .HasColumnType("jsonb")
                        .HasColumnName("template_data");

                    b.Property<string>("TemplateName")
                        .HasMaxLength(100)
                        .HasColumnType("character varying(100)")
                        .HasColumnName("template_name");

                    b.Property<string>("TextContent")
                        .IsRequired()
                        .HasColumnType("text")
                        .HasColumnName("text_content");

                    b.Property<string>("Type")
                        .IsRequired()
                        .HasMaxLength(50)
                        .HasColumnType("character varying(50)")
                        .HasColumnName("type");

                    b.Property<DateTime?>("UpdatedAt")
                        .HasColumnType("timestamp with time zone");

                    b.Property<List<string>>("_bccRecipients")
                        .IsRequired()
                        .HasColumnType("jsonb")
                        .HasColumnName("bcc_emails");

                    b.Property<List<string>>("_ccRecipients")
                        .IsRequired()
                        .HasColumnType("jsonb")
                        .HasColumnName("cc_emails");

                    b.Property<List<string>>("_recipients")
                        .IsRequired()
                        .HasColumnType("jsonb")
                        .HasColumnName("to_emails");

                    b.HasKey("Id");

                    b.HasIndex("CreatedAt")
                        .HasDatabaseName("IX_EmailMessages_CreatedAt");

                    b.HasIndex("Priority")
                        .HasDatabaseName("IX_EmailMessages_Priority");

                    b.HasIndex("Status")
                        .HasDatabaseName("IX_EmailMessages_Status");

                    b.HasIndex("Type")
                        .HasDatabaseName("IX_EmailMessages_Type");

                    b.HasIndex("RetryCount", "Status")
                        .HasDatabaseName("IX_EmailMessages_RetryCount_Status");

                    b.HasIndex("Status", "NextRetryAt")
                        .HasDatabaseName("IX_EmailMessages_Status_NextRetryAt");

                    b.ToTable("email_messages", "communications");
                });

            modelBuilder.Entity("LankaConnect.Domain.Communications.Entities.EmailTemplate", b =>
                {
                    b.Property<Guid>("Id")
                        .HasColumnType("uuid");

                    b.Property<string>("Category")
                        .IsRequired()
                        .HasMaxLength(50)
                        .HasColumnType("character varying(50)")
                        .HasColumnName("category");

                    b.Property<DateTime>("CreatedAt")
                        .ValueGeneratedOnAdd()
                        .HasColumnType("timestamp with time zone")
                        .HasColumnName("created_at")
                        .HasDefaultValueSql("NOW()");

                    b.Property<string>("Description")
                        .IsRequired()
                        .HasMaxLength(500)
                        .HasColumnType("character varying(500)")
                        .HasColumnName("description");

                    b.Property<string>("HtmlTemplate")
                        .HasColumnType("text")
                        .HasColumnName("html_template");

                    b.Property<bool>("IsActive")
                        .ValueGeneratedOnAdd()
                        .HasColumnType("boolean")
                        .HasDefaultValue(true)
                        .HasColumnName("is_active");

                    b.Property<string>("Name")
                        .IsRequired()
                        .HasMaxLength(100)
                        .HasColumnType("character varying(100)")
                        .HasColumnName("name");

                    b.Property<string>("Tags")
                        .HasMaxLength(500)
                        .HasColumnType("character varying(500)")
                        .HasColumnName("tags");

                    b.Property<string>("TextTemplate")
                        .IsRequired()
                        .HasColumnType("text")
                        .HasColumnName("text_template");

                    b.Property<string>("Type")
                        .IsRequired()
                        .HasMaxLength(50)
                        .HasColumnType("character varying(50)")
                        .HasColumnName("type");

                    b.Property<DateTime?>("UpdatedAt")
                        .HasColumnType("timestamp with time zone")
                        .HasColumnName("updated_at");

                    b.HasKey("Id");

                    b.HasIndex("Category")
                        .HasDatabaseName("IX_EmailTemplates_Category");

                    b.HasIndex("CreatedAt")
                        .HasDatabaseName("IX_EmailTemplates_CreatedAt");

                    b.HasIndex("IsActive")
                        .HasDatabaseName("IX_EmailTemplates_IsActive");

                    b.HasIndex("Name")
                        .IsUnique()
                        .HasDatabaseName("IX_EmailTemplates_Name");

                    b.HasIndex("Type")
                        .HasDatabaseName("IX_EmailTemplates_Type");

                    b.HasIndex("Category", "IsActive")
                        .HasDatabaseName("IX_EmailTemplates_Category_IsActive");

                    b.HasIndex("Type", "IsActive")
                        .HasDatabaseName("IX_EmailTemplates_Type_IsActive");

                    b.ToTable("email_templates", "communications");
                });

            modelBuilder.Entity("LankaConnect.Domain.Communications.Entities.NewsletterSubscriber", b =>
                {
                    b.Property<Guid>("Id")
                        .HasColumnType("uuid")
                        .HasColumnName("id");

                    b.Property<DateTime?>("ConfirmationSentAt")
                        .HasColumnType("timestamp with time zone")
                        .HasColumnName("confirmation_sent_at");

                    b.Property<string>("ConfirmationToken")
                        .HasMaxLength(100)
                        .HasColumnType("character varying(100)")
                        .HasColumnName("confirmation_token");

                    b.Property<DateTime?>("ConfirmedAt")
                        .HasColumnType("timestamp with time zone")
                        .HasColumnName("confirmed_at");

                    b.Property<DateTime>("CreatedAt")
                        .HasColumnType("timestamp with time zone")
                        .HasColumnName("created_at");

                    b.Property<bool>("IsActive")
                        .ValueGeneratedOnAdd()
                        .HasColumnType("boolean")
                        .HasDefaultValue(true)
                        .HasColumnName("is_active");

                    b.Property<bool>("IsConfirmed")
                        .ValueGeneratedOnAdd()
                        .HasColumnType("boolean")
                        .HasDefaultValue(false)
                        .HasColumnName("is_confirmed");

                    b.Property<Guid?>("MetroAreaId")
                        .HasColumnType("uuid")
                        .HasColumnName("metro_area_id");

                    b.Property<bool>("ReceiveAllLocations")
                        .ValueGeneratedOnAdd()
                        .HasColumnType("boolean")
                        .HasDefaultValue(false)
                        .HasColumnName("receive_all_locations");

                    b.Property<string>("UnsubscribeToken")
                        .IsRequired()
                        .HasMaxLength(100)
                        .HasColumnType("character varying(100)")
                        .HasColumnName("unsubscribe_token");

                    b.Property<DateTime?>("UnsubscribedAt")
                        .HasColumnType("timestamp with time zone")
                        .HasColumnName("unsubscribed_at");

                    b.Property<DateTime?>("UpdatedAt")
                        .HasColumnType("timestamp with time zone")
                        .HasColumnName("updated_at");

                    b.Property<byte[]>("Version")
                        .IsConcurrencyToken()
                        .IsRequired()
                        .ValueGeneratedOnAddOrUpdate()
                        .HasColumnType("bytea")
                        .HasColumnName("version");

                    b.HasKey("Id");

                    b.HasIndex("ConfirmationToken")
                        .HasDatabaseName("idx_newsletter_subscribers_confirmation_token");

                    b.HasIndex("MetroAreaId")
                        .HasDatabaseName("idx_newsletter_subscribers_metro_area_id");

                    b.HasIndex("UnsubscribeToken")
                        .HasDatabaseName("idx_newsletter_subscribers_unsubscribe_token");

                    b.HasIndex("IsActive", "IsConfirmed")
                        .HasDatabaseName("idx_newsletter_subscribers_active_confirmed");

                    b.ToTable("newsletter_subscribers", "communications");
                });

            modelBuilder.Entity("LankaConnect.Domain.Communications.Entities.UserEmailPreferences", b =>
                {
                    b.Property<Guid>("Id")
                        .HasColumnType("uuid");

                    b.Property<bool>("AllowMarketing")
                        .ValueGeneratedOnAdd()
                        .HasColumnType("boolean")
                        .HasDefaultValue(false)
                        .HasColumnName("allow_marketing");

                    b.Property<bool>("AllowNewsletters")
                        .ValueGeneratedOnAdd()
                        .HasColumnType("boolean")
                        .HasDefaultValue(true)
                        .HasColumnName("allow_newsletters");

                    b.Property<bool>("AllowNotifications")
                        .ValueGeneratedOnAdd()
                        .HasColumnType("boolean")
                        .HasDefaultValue(true)
                        .HasColumnName("allow_notifications");

                    b.Property<bool>("AllowTransactional")
                        .ValueGeneratedOnAdd()
                        .HasColumnType("boolean")
                        .HasDefaultValue(true)
                        .HasColumnName("allow_transactional");

                    b.Property<DateTime>("CreatedAt")
                        .ValueGeneratedOnAdd()
                        .HasColumnType("timestamp with time zone")
                        .HasColumnName("created_at")
                        .HasDefaultValueSql("NOW()");

                    b.Property<string>("PreferredLanguage")
                        .ValueGeneratedOnAdd()
                        .HasMaxLength(10)
                        .HasColumnType("character varying(10)")
                        .HasDefaultValue("en-US")
                        .HasColumnName("preferred_language");

                    b.Property<string>("TimeZone")
                        .HasMaxLength(100)
                        .HasColumnType("character varying(100)")
                        .HasColumnName("timezone");

                    b.Property<DateTime?>("UpdatedAt")
                        .HasColumnType("timestamp with time zone")
                        .HasColumnName("updated_at");

                    b.Property<Guid>("UserId")
                        .HasColumnType("uuid")
                        .HasColumnName("user_id");

                    b.HasKey("Id");

                    b.HasIndex("AllowMarketing")
                        .HasDatabaseName("IX_UserEmailPreferences_AllowMarketing");

                    b.HasIndex("AllowNotifications")
                        .HasDatabaseName("IX_UserEmailPreferences_AllowNotifications");

                    b.HasIndex("CreatedAt")
                        .HasDatabaseName("IX_UserEmailPreferences_CreatedAt");

                    b.HasIndex("PreferredLanguage")
                        .HasDatabaseName("IX_UserEmailPreferences_PreferredLanguage");

                    b.HasIndex("UserId")
                        .IsUnique()
                        .HasDatabaseName("IX_UserEmailPreferences_UserId_Unique");

                    b.ToTable("user_email_preferences", "communications");
                });

            modelBuilder.Entity("LankaConnect.Domain.Community.ForumTopic", b =>
                {
                    b.Property<Guid>("Id")
                        .HasColumnType("uuid");

                    b.Property<Guid>("AuthorId")
                        .HasColumnType("uuid");

                    b.Property<string>("Category")
                        .IsRequired()
                        .HasMaxLength(50)
                        .HasColumnType("character varying(50)");

                    b.Property<DateTime>("CreatedAt")
                        .ValueGeneratedOnAdd()
                        .HasColumnType("timestamp with time zone")
                        .HasDefaultValueSql("NOW()");

                    b.Property<Guid>("ForumId")
                        .HasColumnType("uuid");

                    b.Property<bool>("IsPinned")
                        .ValueGeneratedOnAdd()
                        .HasColumnType("boolean")
                        .HasDefaultValue(false);

                    b.Property<string>("LockReason")
                        .HasMaxLength(500)
                        .HasColumnType("character varying(500)");

                    b.Property<string>("Status")
                        .IsRequired()
                        .ValueGeneratedOnAdd()
                        .HasMaxLength(20)
                        .HasColumnType("character varying(20)")
                        .HasDefaultValue("Active");

                    b.Property<DateTime?>("UpdatedAt")
                        .HasColumnType("timestamp with time zone");

                    b.Property<int>("ViewCount")
                        .ValueGeneratedOnAdd()
                        .HasColumnType("integer")
                        .HasDefaultValue(0);

                    b.HasKey("Id");

                    b.HasIndex("AuthorId")
                        .HasDatabaseName("ix_topics_author_id");

                    b.HasIndex("Category")
                        .HasDatabaseName("ix_topics_category");

                    b.HasIndex("ForumId")
                        .HasDatabaseName("ix_topics_forum_id");

                    b.HasIndex("Status")
                        .HasDatabaseName("ix_topics_status");

                    b.HasIndex("IsPinned", "UpdatedAt")
                        .HasDatabaseName("ix_topics_pinned_updated");

                    b.HasIndex("ForumId", "Status", "UpdatedAt")
                        .HasDatabaseName("ix_topics_forum_status_updated");

                    b.ToTable("topics", "community");
                });

            modelBuilder.Entity("LankaConnect.Domain.Community.Reply", b =>
                {
                    b.Property<Guid>("Id")
                        .HasColumnType("uuid");

                    b.Property<Guid>("AuthorId")
                        .HasColumnType("uuid");

                    b.Property<DateTime>("CreatedAt")
                        .ValueGeneratedOnAdd()
                        .HasColumnType("timestamp with time zone")
                        .HasDefaultValueSql("NOW()");

                    b.Property<int>("HelpfulVotes")
                        .ValueGeneratedOnAdd()
                        .HasColumnType("integer")
                        .HasDefaultValue(0);

                    b.Property<bool>("IsMarkedAsSolution")
                        .ValueGeneratedOnAdd()
                        .HasColumnType("boolean")
                        .HasDefaultValue(false);

                    b.Property<Guid?>("ParentReplyId")
                        .HasColumnType("uuid");

                    b.Property<Guid>("TopicId")
                        .HasColumnType("uuid");

                    b.Property<DateTime?>("UpdatedAt")
                        .HasColumnType("timestamp with time zone");

                    b.HasKey("Id");

                    b.HasIndex("AuthorId")
                        .HasDatabaseName("ix_replies_author_id");

                    b.HasIndex("HelpfulVotes")
                        .HasDatabaseName("ix_replies_helpful_votes");

                    b.HasIndex("ParentReplyId")
                        .HasDatabaseName("ix_replies_parent_id");

                    b.HasIndex("TopicId")
                        .HasDatabaseName("ix_replies_topic_id");

                    b.HasIndex("IsMarkedAsSolution", "TopicId")
                        .HasDatabaseName("ix_replies_solution_topic");

                    b.HasIndex("TopicId", "CreatedAt")
                        .HasDatabaseName("ix_replies_topic_created");

                    b.ToTable("replies", "community");
                });

            modelBuilder.Entity("LankaConnect.Domain.Events.Entities.SignUpCommitment", b =>
                {
                    b.Property<Guid>("Id")
                        .HasColumnType("uuid")
                        .HasColumnName("id");

                    b.Property<DateTime>("CommittedAt")
                        .HasColumnType("timestamp with time zone")
                        .HasColumnName("committed_at");

                    b.Property<DateTime>("CreatedAt")
                        .HasColumnType("timestamp with time zone")
                        .HasColumnName("created_at");

                    b.Property<string>("ItemDescription")
                        .IsRequired()
                        .HasMaxLength(500)
                        .HasColumnType("character varying(500)")
                        .HasColumnName("item_description");

                    b.Property<string>("Notes")
                        .HasMaxLength(1000)
                        .HasColumnType("character varying(1000)")
                        .HasColumnName("notes");

                    b.Property<int>("Quantity")
                        .HasColumnType("integer")
                        .HasColumnName("quantity");

                    b.Property<Guid?>("SignUpItemId")
                        .HasColumnType("uuid")
                        .HasColumnName("sign_up_item_id");

                    b.Property<Guid?>("SignUpListId")
                        .HasColumnType("uuid");

                    b.Property<DateTime?>("UpdatedAt")
                        .HasColumnType("timestamp with time zone")
                        .HasColumnName("updated_at");

                    b.Property<Guid>("UserId")
                        .HasColumnType("uuid")
                        .HasColumnName("user_id");

                    b.HasKey("Id");

                    b.HasIndex("SignUpItemId")
                        .HasDatabaseName("ix_sign_up_commitments_sign_up_item_id");

                    b.HasIndex("SignUpListId");

                    b.HasIndex("UserId")
                        .HasDatabaseName("ix_sign_up_commitments_user_id");

                    b.ToTable("sign_up_commitments", "events");
                });

            modelBuilder.Entity("LankaConnect.Domain.Events.Entities.SignUpItem", b =>
                {
                    b.Property<Guid>("Id")
                        .HasColumnType("uuid")
                        .HasColumnName("id");

                    b.Property<DateTime>("CreatedAt")
                        .HasColumnType("timestamp with time zone")
                        .HasColumnName("created_at");

                    b.Property<int>("ItemCategory")
                        .HasColumnType("integer")
                        .HasColumnName("item_category");

                    b.Property<string>("ItemDescription")
                        .IsRequired()
                        .HasMaxLength(200)
                        .HasColumnType("character varying(200)")
                        .HasColumnName("item_description");

                    b.Property<string>("Notes")
                        .HasMaxLength(500)
                        .HasColumnType("character varying(500)")
                        .HasColumnName("notes");

                    b.Property<int>("Quantity")
                        .HasColumnType("integer")
                        .HasColumnName("quantity");

                    b.Property<int>("RemainingQuantity")
                        .HasColumnType("integer")
                        .HasColumnName("remaining_quantity");

                    b.Property<Guid>("SignUpListId")
                        .HasColumnType("uuid")
                        .HasColumnName("sign_up_list_id");

                    b.Property<DateTime?>("UpdatedAt")
                        .HasColumnType("timestamp with time zone")
                        .HasColumnName("updated_at");

                    b.HasKey("Id");

                    b.HasIndex("ItemCategory")
                        .HasDatabaseName("ix_sign_up_items_category");

                    b.HasIndex("SignUpListId")
                        .HasDatabaseName("ix_sign_up_items_list_id");

                    b.ToTable("sign_up_items", "events");
                });

            modelBuilder.Entity("LankaConnect.Domain.Events.Entities.SignUpList", b =>
                {
                    b.Property<Guid>("Id")
                        .HasColumnType("uuid")
                        .HasColumnName("id");

                    b.Property<string>("Category")
                        .IsRequired()
                        .HasMaxLength(100)
                        .HasColumnType("character varying(100)")
                        .HasColumnName("category");

                    b.Property<DateTime>("CreatedAt")
                        .HasColumnType("timestamp with time zone")
                        .HasColumnName("created_at");

                    b.Property<string>("Description")
                        .IsRequired()
                        .HasMaxLength(500)
                        .HasColumnType("character varying(500)")
                        .HasColumnName("description");

                    b.Property<Guid>("EventId")
                        .HasColumnType("uuid")
                        .HasColumnName("event_id");

                    b.Property<bool>("HasMandatoryItems")
                        .ValueGeneratedOnAdd()
                        .HasColumnType("boolean")
                        .HasDefaultValue(false)
                        .HasColumnName("has_mandatory_items");

                    b.Property<bool>("HasPreferredItems")
                        .ValueGeneratedOnAdd()
                        .HasColumnType("boolean")
                        .HasDefaultValue(false)
                        .HasColumnName("has_preferred_items");

                    b.Property<bool>("HasSuggestedItems")
                        .ValueGeneratedOnAdd()
                        .HasColumnType("boolean")
                        .HasDefaultValue(false)
                        .HasColumnName("has_suggested_items");

                    b.Property<string>("SignUpType")
                        .IsRequired()
                        .HasMaxLength(20)
                        .HasColumnType("character varying(20)")
                        .HasColumnName("sign_up_type");

                    b.Property<DateTime?>("UpdatedAt")
                        .HasColumnType("timestamp with time zone")
                        .HasColumnName("updated_at");

                    b.Property<List<string>>("_predefinedItems")
                        .IsRequired()
                        .HasColumnType("jsonb")
                        .HasColumnName("predefined_items");

                    b.HasKey("Id");

                    b.HasIndex("Category")
                        .HasDatabaseName("ix_sign_up_lists_category");

                    b.HasIndex("EventId")
                        .HasDatabaseName("ix_sign_up_lists_event_id");

                    b.ToTable("sign_up_lists", "events");
                });

            modelBuilder.Entity("LankaConnect.Domain.Events.Event", b =>
                {
                    b.Property<Guid>("Id")
                        .HasColumnType("uuid");

                    b.Property<string>("CancellationReason")
                        .HasMaxLength(500)
                        .HasColumnType("character varying(500)");

                    b.Property<int>("Capacity")
                        .HasColumnType("integer");

                    b.Property<string>("Category")
                        .IsRequired()
                        .ValueGeneratedOnAdd()
                        .HasMaxLength(20)
                        .HasColumnType("character varying(20)")
                        .HasDefaultValue("Community");

                    b.Property<DateTime>("CreatedAt")
                        .ValueGeneratedOnAdd()
                        .HasColumnType("timestamp with time zone")
                        .HasDefaultValueSql("NOW()");

                    b.Property<DateTime>("EndDate")
                        .HasColumnType("timestamp with time zone");

                    b.Property<Guid>("OrganizerId")
                        .HasColumnType("uuid");

                    b.Property<DateTime>("StartDate")
                        .HasColumnType("timestamp with time zone");

                    b.Property<string>("Status")
                        .IsRequired()
                        .ValueGeneratedOnAdd()
                        .HasMaxLength(20)
                        .HasColumnType("character varying(20)")
                        .HasDefaultValue("Draft");

                    b.Property<DateTime?>("UpdatedAt")
                        .HasColumnType("timestamp with time zone");

                    b.HasKey("Id");

                    b.HasIndex("OrganizerId")
                        .HasDatabaseName("ix_events_organizer_id");

                    b.HasIndex("StartDate")
                        .HasDatabaseName("ix_events_start_date");

                    b.HasIndex("Status")
                        .HasDatabaseName("ix_events_status");

                    b.HasIndex("Status", "StartDate")
                        .HasDatabaseName("ix_events_status_start_date");

                    b.ToTable("events", "events");
                });

            modelBuilder.Entity("LankaConnect.Domain.Events.EventImage", b =>
                {
                    b.Property<Guid>("Id")
                        .HasColumnType("uuid");

                    b.Property<string>("BlobName")
                        .IsRequired()
                        .HasMaxLength(255)
                        .HasColumnType("character varying(255)");

                    b.Property<DateTime>("CreatedAt")
                        .ValueGeneratedOnAdd()
                        .HasColumnType("timestamp with time zone")
                        .HasDefaultValueSql("NOW()");

                    b.Property<int>("DisplayOrder")
                        .HasColumnType("integer");

                    b.Property<Guid>("EventId")
                        .HasColumnType("uuid");

                    b.Property<string>("ImageUrl")
                        .IsRequired()
                        .HasMaxLength(500)
                        .HasColumnType("character varying(500)");

                    b.Property<DateTime?>("UpdatedAt")
                        .HasColumnType("timestamp with time zone");

                    b.Property<DateTime>("UploadedAt")
                        .HasColumnType("timestamp with time zone");

                    b.HasKey("Id");

                    b.HasIndex("EventId")
                        .HasDatabaseName("IX_EventImages_EventId");

                    b.HasIndex("EventId", "DisplayOrder")
                        .IsUnique()
                        .HasDatabaseName("IX_EventImages_EventId_DisplayOrder");

                    b.ToTable("EventImages", "events");
                });

            modelBuilder.Entity("LankaConnect.Domain.Events.EventTemplate", b =>
                {
                    b.Property<Guid>("Id")
                        .HasColumnType("uuid")
                        .HasColumnName("id");

                    b.Property<string>("Category")
                        .IsRequired()
                        .HasMaxLength(50)
                        .HasColumnType("character varying(50)")
                        .HasColumnName("category");

                    b.Property<DateTime>("CreatedAt")
                        .HasColumnType("timestamp with time zone")
                        .HasColumnName("created_at");

                    b.Property<string>("Description")
                        .IsRequired()
                        .HasMaxLength(500)
                        .HasColumnType("character varying(500)")
                        .HasColumnName("description");

                    b.Property<int>("DisplayOrder")
                        .ValueGeneratedOnAdd()
                        .HasColumnType("integer")
                        .HasDefaultValue(0)
                        .HasColumnName("display_order");

                    b.Property<bool>("IsActive")
                        .ValueGeneratedOnAdd()
                        .HasColumnType("boolean")
                        .HasDefaultValue(true)
                        .HasColumnName("is_active");

                    b.Property<string>("Name")
                        .IsRequired()
                        .HasMaxLength(100)
                        .HasColumnType("character varying(100)")
                        .HasColumnName("name");

                    b.Property<string>("TemplateDataJson")
                        .IsRequired()
                        .HasColumnType("jsonb")
                        .HasColumnName("template_data_json");

                    b.Property<string>("ThumbnailSvg")
                        .IsRequired()
                        .HasColumnType("text")
                        .HasColumnName("thumbnail_svg");

                    b.Property<DateTime?>("UpdatedAt")
                        .HasColumnType("timestamp with time zone")
                        .HasColumnName("updated_at");

                    b.HasKey("Id");

                    b.HasIndex("Category")
                        .HasDatabaseName("idx_event_templates_category");

                    b.HasIndex("DisplayOrder")
                        .HasDatabaseName("idx_event_templates_display_order");

                    b.HasIndex("IsActive")
                        .HasDatabaseName("idx_event_templates_is_active");

                    b.HasIndex("IsActive", "Category", "DisplayOrder")
                        .HasDatabaseName("idx_event_templates_active_category_order");

                    b.ToTable("event_templates", "events");
                });

            modelBuilder.Entity("LankaConnect.Domain.Events.EventVideo", b =>
                {
                    b.Property<Guid>("Id")
                        .HasColumnType("uuid");

                    b.Property<string>("BlobName")
                        .IsRequired()
                        .HasMaxLength(255)
                        .HasColumnType("character varying(255)");

                    b.Property<DateTime>("CreatedAt")
                        .ValueGeneratedOnAdd()
                        .HasColumnType("timestamp with time zone")
                        .HasDefaultValueSql("NOW()");

                    b.Property<int>("DisplayOrder")
                        .HasColumnType("integer");

                    b.Property<TimeSpan?>("Duration")
                        .HasColumnType("interval");

                    b.Property<Guid>("EventId")
                        .HasColumnType("uuid");

                    b.Property<long>("FileSizeBytes")
                        .HasColumnType("bigint");

                    b.Property<string>("Format")
                        .IsRequired()
                        .HasMaxLength(50)
                        .HasColumnType("character varying(50)");

                    b.Property<string>("ThumbnailBlobName")
                        .IsRequired()
                        .HasMaxLength(255)
                        .HasColumnType("character varying(255)");

                    b.Property<string>("ThumbnailUrl")
                        .IsRequired()
                        .HasMaxLength(500)
                        .HasColumnType("character varying(500)");

                    b.Property<DateTime?>("UpdatedAt")
                        .HasColumnType("timestamp with time zone");

                    b.Property<DateTime>("UploadedAt")
                        .HasColumnType("timestamp with time zone");

                    b.Property<string>("VideoUrl")
                        .IsRequired()
                        .HasMaxLength(500)
                        .HasColumnType("character varying(500)");

                    b.HasKey("Id");

                    b.HasIndex("EventId")
                        .HasDatabaseName("IX_EventVideos_EventId");

                    b.HasIndex("EventId", "DisplayOrder")
                        .IsUnique()
                        .HasDatabaseName("IX_EventVideos_EventId_DisplayOrder");

                    b.ToTable("EventVideos", "events");
                });

            modelBuilder.Entity("LankaConnect.Domain.Events.MetroArea", b =>
                {
                    b.Property<Guid>("Id")
                        .HasColumnType("uuid")
                        .HasColumnName("id");

                    b.Property<double>("CenterLatitude")
                        .HasPrecision(10, 8)
                        .HasColumnType("double precision")
                        .HasColumnName("center_latitude");

                    b.Property<double>("CenterLongitude")
                        .HasPrecision(11, 8)
                        .HasColumnType("double precision")
                        .HasColumnName("center_longitude");

                    b.Property<DateTime>("CreatedAt")
                        .HasColumnType("timestamp with time zone")
                        .HasColumnName("created_at");

                    b.Property<bool>("IsActive")
                        .ValueGeneratedOnAdd()
                        .HasColumnType("boolean")
                        .HasDefaultValue(true)
                        .HasColumnName("is_active");

                    b.Property<bool>("IsStateLevelArea")
                        .ValueGeneratedOnAdd()
                        .HasColumnType("boolean")
                        .HasDefaultValue(false)
                        .HasColumnName("is_state_level_area");

                    b.Property<string>("Name")
                        .IsRequired()
                        .HasMaxLength(100)
                        .HasColumnType("character varying(100)")
                        .HasColumnName("name");

                    b.Property<int>("RadiusMiles")
                        .HasColumnType("integer")
                        .HasColumnName("radius_miles");

                    b.Property<string>("State")
                        .IsRequired()
                        .HasMaxLength(2)
                        .HasColumnType("character varying(2)")
                        .HasColumnName("state");

                    b.Property<DateTime?>("UpdatedAt")
                        .HasColumnType("timestamp with time zone")
                        .HasColumnName("updated_at");

                    b.HasKey("Id");

                    b.HasIndex("IsActive")
                        .HasDatabaseName("idx_metro_areas_is_active");

                    b.HasIndex("Name")
                        .HasDatabaseName("idx_metro_areas_name");

                    b.HasIndex("State")
                        .HasDatabaseName("idx_metro_areas_state");

                    b.ToTable("metro_areas", "events");
                });

            modelBuilder.Entity("LankaConnect.Domain.Events.Registration", b =>
                {
                    b.Property<Guid>("Id")
                        .HasColumnType("uuid");

                    b.Property<DateTime>("CreatedAt")
                        .ValueGeneratedOnAdd()
                        .HasColumnType("timestamp with time zone")
                        .HasDefaultValueSql("NOW()");

                    b.Property<Guid>("EventId")
                        .HasColumnType("uuid");

                    b.Property<int>("PaymentStatus")
                        .HasColumnType("integer");

                    b.Property<int>("Quantity")
                        .ValueGeneratedOnAdd()
                        .HasColumnType("integer")
                        .HasDefaultValue(1);

                    b.Property<string>("Status")
                        .IsRequired()
                        .ValueGeneratedOnAdd()
                        .HasMaxLength(20)
                        .HasColumnType("character varying(20)")
                        .HasDefaultValue("Confirmed");

                    b.Property<string>("StripeCheckoutSessionId")
                        .HasColumnType("text");

                    b.Property<string>("StripePaymentIntentId")
                        .HasColumnType("text");

                    b.Property<DateTime?>("UpdatedAt")
                        .HasColumnType("timestamp with time zone");

                    b.Property<Guid?>("UserId")
                        .HasColumnType("uuid");

                    b.HasKey("Id");

                    b.HasIndex("EventId")
                        .HasDatabaseName("ix_registrations_event_id");

                    b.HasIndex("UserId")
                        .HasDatabaseName("ix_registrations_user_id");

                    b.HasIndex("UserId", "Status")
                        .HasDatabaseName("ix_registrations_user_status");

                    b.ToTable("registrations", "events", t =>
                        {
                            t.HasCheckConstraint("ck_registrations_valid_format", "(\n                    (\"UserId\" IS NOT NULL AND attendee_info IS NULL) OR\n                    (\"UserId\" IS NULL AND attendee_info IS NOT NULL) OR\n                    (attendees IS NOT NULL AND contact IS NOT NULL)\n                )");
                        });
                });

            modelBuilder.Entity("LankaConnect.Domain.Notifications.Notification", b =>
                {
                    b.Property<Guid>("Id")
                        .HasColumnType("uuid");

                    b.Property<DateTime>("CreatedAt")
                        .HasColumnType("timestamp with time zone");

                    b.Property<bool>("IsRead")
                        .ValueGeneratedOnAdd()
                        .HasColumnType("boolean")
                        .HasDefaultValue(false);

                    b.Property<string>("Message")
                        .IsRequired()
                        .HasMaxLength(1000)
                        .HasColumnType("character varying(1000)");

                    b.Property<DateTime?>("ReadAt")
                        .HasColumnType("timestamp with time zone");

                    b.Property<string>("RelatedEntityId")
                        .HasMaxLength(100)
                        .HasColumnType("character varying(100)");

                    b.Property<string>("RelatedEntityType")
                        .HasMaxLength(100)
                        .HasColumnType("character varying(100)");

                    b.Property<string>("Title")
                        .IsRequired()
                        .HasMaxLength(200)
                        .HasColumnType("character varying(200)");

                    b.Property<int>("Type")
                        .HasColumnType("integer");

                    b.Property<DateTime?>("UpdatedAt")
                        .HasColumnType("timestamp with time zone");

                    b.Property<Guid>("UserId")
                        .HasColumnType("uuid");

                    b.HasKey("Id");

                    b.HasIndex("CreatedAt")
                        .HasDatabaseName("ix_notifications_created_at");

                    b.HasIndex("UserId")
                        .HasDatabaseName("ix_notifications_user_id");

                    b.HasIndex("UserId", "IsRead")
                        .HasDatabaseName("ix_notifications_user_id_is_read");

                    b.ToTable("notifications", "notifications");
                });

            modelBuilder.Entity("LankaConnect.Domain.Users.User", b =>
                {
                    b.Property<Guid>("Id")
                        .HasColumnType("uuid");

                    b.Property<DateTime?>("AccountLockedUntil")
                        .HasColumnType("timestamp with time zone");

                    b.Property<string>("Bio")
                        .HasMaxLength(1000)
                        .HasColumnType("character varying(1000)");

                    b.Property<DateTime>("CreatedAt")
                        .ValueGeneratedOnAdd()
                        .HasColumnType("timestamp with time zone")
                        .HasDefaultValueSql("NOW()");

                    b.Property<string>("EmailVerificationToken")
                        .HasMaxLength(255)
                        .HasColumnType("character varying(255)");

                    b.Property<DateTime?>("EmailVerificationTokenExpiresAt")
                        .HasColumnType("timestamp with time zone");

                    b.Property<string>("ExternalProviderId")
                        .HasMaxLength(255)
                        .HasColumnType("character varying(255)");

                    b.Property<int>("FailedLoginAttempts")
                        .ValueGeneratedOnAdd()
                        .HasColumnType("integer")
                        .HasDefaultValue(0);

                    b.Property<string>("FirstName")
                        .IsRequired()
                        .HasMaxLength(100)
                        .HasColumnType("character varying(100)");

                    b.Property<int>("IdentityProvider")
                        .ValueGeneratedOnAdd()
                        .HasColumnType("integer")
                        .HasDefaultValue(0);

                    b.Property<bool>("IsActive")
                        .ValueGeneratedOnAdd()
                        .HasColumnType("boolean")
                        .HasDefaultValue(true);

                    b.Property<bool>("IsEmailVerified")
                        .ValueGeneratedOnAdd()
                        .HasColumnType("boolean")
                        .HasDefaultValue(false);

                    b.Property<DateTime?>("LastLoginAt")
                        .HasColumnType("timestamp with time zone");

                    b.Property<string>("LastName")
                        .IsRequired()
                        .HasMaxLength(100)
                        .HasColumnType("character varying(100)");

                    b.Property<string>("PasswordHash")
                        .HasMaxLength(255)
                        .HasColumnType("character varying(255)");

                    b.Property<string>("PasswordResetToken")
                        .HasMaxLength(255)
                        .HasColumnType("character varying(255)");

                    b.Property<DateTime?>("PasswordResetTokenExpiresAt")
                        .HasColumnType("timestamp with time zone");

                    b.Property<int?>("PendingUpgradeRole")
                        .HasColumnType("integer");

                    b.Property<string>("ProfilePhotoBlobName")
                        .HasColumnType("text");

                    b.Property<string>("ProfilePhotoUrl")
                        .HasColumnType("text");

                    b.Property<int>("Role")
                        .ValueGeneratedOnAdd()
                        .HasColumnType("integer")
                        .HasDefaultValue(1);

                    b.Property<DateTime?>("UpdatedAt")
                        .HasColumnType("timestamp with time zone");

                    b.Property<DateTime?>("UpgradeRequestedAt")
                        .HasColumnType("timestamp with time zone");

                    b.HasKey("Id");

                    b.HasIndex("CreatedAt")
                        .HasDatabaseName("ix_users_created_at");

                    b.HasIndex("EmailVerificationToken")
                        .HasDatabaseName("ix_users_email_verification_token");

                    b.HasIndex("ExternalProviderId")
                        .HasDatabaseName("ix_users_external_provider_id");

                    b.HasIndex("IdentityProvider")
                        .HasDatabaseName("ix_users_identity_provider");

                    b.HasIndex("IsActive")
                        .HasDatabaseName("ix_users_is_active");

                    b.HasIndex("IsEmailVerified")
                        .HasDatabaseName("ix_users_is_email_verified");

                    b.HasIndex("LastLoginAt")
                        .HasDatabaseName("ix_users_last_login_at");

                    b.HasIndex("PasswordResetToken")
                        .HasDatabaseName("ix_users_password_reset_token");

                    b.HasIndex("Role")
                        .HasDatabaseName("ix_users_role");

                    b.HasIndex("IdentityProvider", "ExternalProviderId")
                        .HasDatabaseName("ix_users_identity_provider_external_id");

                    b.ToTable("users", "identity");
                });

            modelBuilder.Entity("user_preferred_metro_areas", b =>
                {
                    b.Property<Guid>("user_id")
                        .HasColumnType("uuid");

                    b.Property<Guid>("metro_area_id")
                        .HasColumnType("uuid");

                    b.Property<DateTime>("created_at")
                        .ValueGeneratedOnAdd()
                        .HasColumnType("timestamp with time zone")
                        .HasDefaultValueSql("NOW()");

                    b.HasKey("user_id", "metro_area_id");

                    b.HasIndex("metro_area_id")
                        .HasDatabaseName("ix_user_preferred_metro_areas_metro_area_id");

                    b.HasIndex("user_id")
                        .HasDatabaseName("ix_user_preferred_metro_areas_user_id");

                    b.ToTable("user_preferred_metro_areas", "identity");
                });

            modelBuilder.Entity("LankaConnect.Domain.Business.Business", b =>
                {
                    b.OwnsOne("LankaConnect.Domain.Business.ValueObjects.BusinessLocation", "Location", b1 =>
                        {
                            b1.Property<Guid>("BusinessId")
                                .HasColumnType("uuid");

                            b1.HasKey("BusinessId");

                            b1.ToTable("businesses", "business");

                            b1.WithOwner()
                                .HasForeignKey("BusinessId");

                            b1.OwnsOne("LankaConnect.Domain.Business.ValueObjects.Address", "Address", b2 =>
                                {
                                    b2.Property<Guid>("BusinessLocationBusinessId")
                                        .HasColumnType("uuid");

                                    b2.Property<string>("City")
                                        .IsRequired()
                                        .HasMaxLength(50)
                                        .HasColumnType("character varying(50)")
                                        .HasColumnName("AddressCity");

                                    b2.Property<string>("Country")
                                        .IsRequired()
                                        .HasMaxLength(50)
                                        .HasColumnType("character varying(50)")
                                        .HasColumnName("AddressCountry");

                                    b2.Property<string>("State")
                                        .IsRequired()
                                        .HasMaxLength(50)
                                        .HasColumnType("character varying(50)")
                                        .HasColumnName("AddressState");

                                    b2.Property<string>("Street")
                                        .IsRequired()
                                        .HasMaxLength(200)
                                        .HasColumnType("character varying(200)")
                                        .HasColumnName("AddressStreet");

                                    b2.Property<string>("ZipCode")
                                        .IsRequired()
                                        .HasMaxLength(10)
                                        .HasColumnType("character varying(10)")
                                        .HasColumnName("AddressZipCode");

                                    b2.HasKey("BusinessLocationBusinessId");

                                    b2.ToTable("businesses", "business");

                                    b2.WithOwner()
                                        .HasForeignKey("BusinessLocationBusinessId");
                                });

                            b1.OwnsOne("LankaConnect.Domain.Business.ValueObjects.GeoCoordinate", "Coordinates", b2 =>
                                {
                                    b2.Property<Guid>("BusinessLocationBusinessId")
                                        .HasColumnType("uuid");

                                    b2.Property<decimal>("Latitude")
                                        .HasColumnType("decimal(10,8)")
                                        .HasColumnName("LocationLatitude");

                                    b2.Property<decimal>("Longitude")
                                        .HasColumnType("decimal(11,8)")
                                        .HasColumnName("LocationLongitude");

                                    b2.HasKey("BusinessLocationBusinessId");

                                    b2.ToTable("businesses", "business");

                                    b2.WithOwner()
                                        .HasForeignKey("BusinessLocationBusinessId");
                                });

                            b1.Navigation("Address")
                                .IsRequired();

                            b1.Navigation("Coordinates");
                        });

                    b.OwnsOne("LankaConnect.Domain.Business.ValueObjects.BusinessProfile", "Profile", b1 =>
                        {
                            b1.Property<Guid>("BusinessId")
                                .HasColumnType("uuid");

                            b1.Property<string>("Description")
                                .IsRequired()
                                .HasMaxLength(2000)
                                .HasColumnType("character varying(2000)")
                                .HasColumnName("Description");

                            b1.Property<string>("Name")
                                .IsRequired()
                                .HasMaxLength(200)
                                .HasColumnType("character varying(200)")
                                .HasColumnName("Name");

                            b1.HasKey("BusinessId");

                            b1.ToTable("businesses", "business");

                            b1.WithOwner()
                                .HasForeignKey("BusinessId");
                        });

                    b.OwnsOne("LankaConnect.Domain.Business.ValueObjects.ContactInformation", "ContactInfo", b1 =>
                        {
                            b1.Property<Guid>("BusinessId")
                                .HasColumnType("uuid");

                            b1.Property<string>("FacebookPage")
                                .HasMaxLength(100)
                                .HasColumnType("character varying(100)")
                                .HasColumnName("ContactFacebook");

                            b1.Property<string>("InstagramHandle")
                                .HasMaxLength(50)
                                .HasColumnType("character varying(50)")
                                .HasColumnName("ContactInstagram");

                            b1.Property<string>("TwitterHandle")
                                .HasMaxLength(50)
                                .HasColumnType("character varying(50)")
                                .HasColumnName("ContactTwitter");

                            b1.Property<string>("Website")
                                .HasMaxLength(200)
                                .HasColumnType("character varying(200)")
                                .HasColumnName("ContactWebsite");

                            b1.HasKey("BusinessId");

                            b1.ToTable("businesses", "business");

                            b1.WithOwner()
                                .HasForeignKey("BusinessId");

                            b1.OwnsOne("LankaConnect.Domain.Shared.ValueObjects.Email", "Email", b2 =>
                                {
                                    b2.Property<Guid>("ContactInformationBusinessId")
                                        .HasColumnType("uuid");

                                    b2.Property<string>("Value")
                                        .IsRequired()
                                        .HasMaxLength(100)
                                        .HasColumnType("character varying(100)")
                                        .HasColumnName("ContactEmail");

                                    b2.HasKey("ContactInformationBusinessId");

                                    b2.ToTable("businesses", "business");

                                    b2.WithOwner()
                                        .HasForeignKey("ContactInformationBusinessId");
                                });

                            b1.OwnsOne("LankaConnect.Domain.Shared.ValueObjects.PhoneNumber", "PhoneNumber", b2 =>
                                {
                                    b2.Property<Guid>("ContactInformationBusinessId")
                                        .HasColumnType("uuid");

                                    b2.Property<string>("Value")
                                        .IsRequired()
                                        .HasMaxLength(20)
                                        .HasColumnType("character varying(20)")
                                        .HasColumnName("ContactPhone");

                                    b2.HasKey("ContactInformationBusinessId");

                                    b2.ToTable("businesses", "business");

                                    b2.WithOwner()
                                        .HasForeignKey("ContactInformationBusinessId");
                                });

                            b1.Navigation("Email");

                            b1.Navigation("PhoneNumber");
                        });

                    b.Navigation("ContactInfo")
                        .IsRequired();

                    b.Navigation("Location")
                        .IsRequired();

                    b.Navigation("Profile")
                        .IsRequired();
                });

            modelBuilder.Entity("LankaConnect.Domain.Business.Review", b =>
                {
                    b.HasOne("LankaConnect.Domain.Business.Business", "Business")
                        .WithMany("Reviews")
                        .HasForeignKey("BusinessId")
                        .OnDelete(DeleteBehavior.Cascade)
                        .IsRequired();

                    b.OwnsOne("LankaConnect.Domain.Business.ValueObjects.Rating", "Rating", b1 =>
                        {
                            b1.Property<Guid>("ReviewId")
                                .HasColumnType("uuid");

                            b1.Property<int>("Value")
                                .HasColumnType("integer")
                                .HasColumnName("rating");

                            b1.HasKey("ReviewId");

                            b1.ToTable("reviews", "business");

                            b1.WithOwner()
                                .HasForeignKey("ReviewId");
                        });

                    b.OwnsOne("LankaConnect.Domain.Business.ValueObjects.ReviewContent", "Content", b1 =>
                        {
                            b1.Property<Guid>("ReviewId")
                                .HasColumnType("uuid");

                            b1.Property<string>("Cons")
                                .HasColumnType("jsonb")
                                .HasColumnName("cons");

                            b1.Property<string>("Content")
                                .IsRequired()
                                .HasMaxLength(2000)
                                .HasColumnType("character varying(2000)")
                                .HasColumnName("content");

                            b1.Property<string>("Pros")
                                .HasColumnType("jsonb")
                                .HasColumnName("pros");

                            b1.Property<string>("Title")
                                .IsRequired()
                                .HasMaxLength(200)
                                .HasColumnType("character varying(200)")
                                .HasColumnName("title");

                            b1.HasKey("ReviewId");

                            b1.ToTable("reviews", "business");

                            b1.WithOwner()
                                .HasForeignKey("ReviewId");
                        });

                    b.Navigation("Business");

                    b.Navigation("Content")
                        .IsRequired();

                    b.Navigation("Rating")
                        .IsRequired();
                });

            modelBuilder.Entity("LankaConnect.Domain.Business.Service", b =>
                {
                    b.HasOne("LankaConnect.Domain.Business.Business", "Business")
                        .WithMany("Services")
                        .HasForeignKey("BusinessId")
                        .OnDelete(DeleteBehavior.Cascade)
                        .IsRequired();

                    b.OwnsOne("LankaConnect.Domain.Shared.ValueObjects.Money", "Price", b1 =>
                        {
                            b1.Property<Guid>("ServiceId")
                                .HasColumnType("uuid");

                            b1.Property<decimal>("Amount")
                                .HasColumnType("decimal(10,2)")
                                .HasColumnName("PriceAmount");

                            b1.Property<int>("Currency")
                                .HasMaxLength(3)
                                .HasColumnType("integer")
                                .HasColumnName("PriceCurrency");

                            b1.HasKey("ServiceId");

                            b1.ToTable("services", "business");

                            b1.WithOwner()
                                .HasForeignKey("ServiceId");
                        });

                    b.Navigation("Business");

                    b.Navigation("Price");
                });

            modelBuilder.Entity("LankaConnect.Domain.Business.ValueObjects.BusinessImage", b =>
                {
                    b.HasOne("LankaConnect.Domain.Business.Business", null)
                        .WithMany("Images")
                        .HasForeignKey("BusinessId");
                });

            modelBuilder.Entity("LankaConnect.Domain.Communications.Entities.EmailMessage", b =>
                {
                    b.OwnsOne("LankaConnect.Domain.Shared.ValueObjects.Email", "FromEmail", b1 =>
                        {
                            b1.Property<Guid>("EmailMessageId")
                                .HasColumnType("uuid");

                            b1.Property<string>("Value")
                                .IsRequired()
                                .HasMaxLength(255)
                                .HasColumnType("character varying(255)")
                                .HasColumnName("from_email");

                            b1.HasKey("EmailMessageId");

                            b1.ToTable("email_messages", "communications");

                            b1.WithOwner()
                                .HasForeignKey("EmailMessageId");
                        });

                    b.OwnsOne("LankaConnect.Domain.Communications.ValueObjects.EmailSubject", "Subject", b1 =>
                        {
                            b1.Property<Guid>("EmailMessageId")
                                .HasColumnType("uuid");

                            b1.Property<string>("Value")
                                .IsRequired()
                                .HasMaxLength(200)
                                .HasColumnType("character varying(200)")
                                .HasColumnName("subject");

                            b1.HasKey("EmailMessageId");

                            b1.ToTable("email_messages", "communications");

                            b1.WithOwner()
                                .HasForeignKey("EmailMessageId");
                        });

                    b.Navigation("FromEmail")
                        .IsRequired();

                    b.Navigation("Subject")
                        .IsRequired();
                });

            modelBuilder.Entity("LankaConnect.Domain.Communications.Entities.EmailTemplate", b =>
                {
                    b.OwnsOne("LankaConnect.Domain.Communications.ValueObjects.EmailSubject", "SubjectTemplate", b1 =>
                        {
                            b1.Property<Guid>("EmailTemplateId")
                                .HasColumnType("uuid");

                            b1.Property<string>("Value")
                                .IsRequired()
                                .HasMaxLength(200)
                                .HasColumnType("character varying(200)")
                                .HasColumnName("subject_template");

                            b1.HasKey("EmailTemplateId");

                            b1.ToTable("email_templates", "communications");

                            b1.WithOwner()
                                .HasForeignKey("EmailTemplateId");
                        });

                    b.Navigation("SubjectTemplate")
                        .IsRequired();
                });

            modelBuilder.Entity("LankaConnect.Domain.Communications.Entities.NewsletterSubscriber", b =>
                {
                    b.OwnsOne("LankaConnect.Domain.Shared.ValueObjects.Email", "Email", b1 =>
                        {
                            b1.Property<Guid>("NewsletterSubscriberId")
                                .HasColumnType("uuid");

                            b1.Property<string>("Value")
                                .IsRequired()
                                .HasMaxLength(255)
                                .HasColumnType("character varying(255)")
                                .HasColumnName("email");

                            b1.HasKey("NewsletterSubscriberId");

                            b1.ToTable("newsletter_subscribers", "communications");

                            b1.WithOwner()
                                .HasForeignKey("NewsletterSubscriberId");
                        });

                    b.Navigation("Email")
                        .IsRequired();
                });

            modelBuilder.Entity("LankaConnect.Domain.Communications.Entities.UserEmailPreferences", b =>
                {
                    b.HasOne("LankaConnect.Domain.Users.User", null)
                        .WithMany()
                        .HasForeignKey("UserId")
                        .OnDelete(DeleteBehavior.Cascade)
                        .IsRequired()
                        .HasConstraintName("FK_UserEmailPreferences_Users_UserId");
                });

            modelBuilder.Entity("LankaConnect.Domain.Community.ForumTopic", b =>
                {
                    b.OwnsOne("LankaConnect.Domain.Community.ValueObjects.PostContent", "Content", b1 =>
                        {
                            b1.Property<Guid>("ForumTopicId")
                                .HasColumnType("uuid");

                            b1.Property<string>("Value")
                                .IsRequired()
                                .HasMaxLength(10000)
                                .HasColumnType("character varying(10000)")
                                .HasColumnName("content");

                            b1.HasKey("ForumTopicId");

                            b1.ToTable("topics", "community");

                            b1.WithOwner()
                                .HasForeignKey("ForumTopicId");
                        });

                    b.OwnsOne("LankaConnect.Domain.Community.ValueObjects.ForumTitle", "Title", b1 =>
                        {
                            b1.Property<Guid>("ForumTopicId")
                                .HasColumnType("uuid");

                            b1.Property<string>("Value")
                                .IsRequired()
                                .HasMaxLength(100)
                                .HasColumnType("character varying(100)")
                                .HasColumnName("title");

                            b1.HasKey("ForumTopicId");

                            b1.ToTable("topics", "community");

                            b1.WithOwner()
                                .HasForeignKey("ForumTopicId");
                        });

                    b.Navigation("Content")
                        .IsRequired();

                    b.Navigation("Title")
                        .IsRequired();
                });

            modelBuilder.Entity("LankaConnect.Domain.Community.Reply", b =>
                {
                    b.HasOne("LankaConnect.Domain.Community.Reply", null)
                        .WithMany()
                        .HasForeignKey("ParentReplyId")
                        .OnDelete(DeleteBehavior.Restrict);

                    b.HasOne("LankaConnect.Domain.Community.ForumTopic", null)
                        .WithMany("Replies")
                        .HasForeignKey("TopicId")
                        .OnDelete(DeleteBehavior.Cascade)
                        .IsRequired();

                    b.OwnsOne("LankaConnect.Domain.Community.ValueObjects.PostContent", "Content", b1 =>
                        {
                            b1.Property<Guid>("ReplyId")
                                .HasColumnType("uuid");

                            b1.Property<string>("Value")
                                .IsRequired()
                                .HasMaxLength(10000)
                                .HasColumnType("character varying(10000)")
                                .HasColumnName("content");

                            b1.HasKey("ReplyId");

                            b1.ToTable("replies", "community");

                            b1.WithOwner()
                                .HasForeignKey("ReplyId");
                        });

                    b.Navigation("Content")
                        .IsRequired();
                });

            modelBuilder.Entity("LankaConnect.Domain.Events.Entities.SignUpCommitment", b =>
                {
                    b.HasOne("LankaConnect.Domain.Events.Entities.SignUpItem", null)
                        .WithMany("Commitments")
                        .HasForeignKey("SignUpItemId")
                        .OnDelete(DeleteBehavior.Cascade);

                    b.HasOne("LankaConnect.Domain.Events.Entities.SignUpList", null)
                        .WithMany("Commitments")
                        .HasForeignKey("SignUpListId")
                        .OnDelete(DeleteBehavior.Cascade);
                });

            modelBuilder.Entity("LankaConnect.Domain.Events.Entities.SignUpItem", b =>
                {
                    b.HasOne("LankaConnect.Domain.Events.Entities.SignUpList", null)
                        .WithMany("Items")
                        .HasForeignKey("SignUpListId")
                        .OnDelete(DeleteBehavior.Cascade)
                        .IsRequired();
                });

            modelBuilder.Entity("LankaConnect.Domain.Events.Entities.SignUpList", b =>
                {
                    b.HasOne("LankaConnect.Domain.Events.Event", null)
                        .WithMany("SignUpLists")
                        .HasForeignKey("EventId")
                        .OnDelete(DeleteBehavior.Cascade)
                        .IsRequired();
                });

            modelBuilder.Entity("LankaConnect.Domain.Events.Event", b =>
                {
                    b.OwnsOne("LankaConnect.Domain.Shared.ValueObjects.Money", "TicketPrice", b1 =>
                        {
                            b1.Property<Guid>("EventId")
                                .HasColumnType("uuid");

                            b1.Property<decimal>("Amount")
                                .HasColumnType("numeric");

                            b1.Property<int>("Currency")
                                .HasColumnType("integer");

                            b1.HasKey("EventId");

                            b1.ToTable("events", "events");

                            b1.ToJson("ticket_price");

                            b1.WithOwner()
                                .HasForeignKey("EventId");
                        });

                    b.OwnsOne("LankaConnect.Domain.Events.ValueObjects.EventDescription", "Description", b1 =>
                        {
                            b1.Property<Guid>("EventId")
                                .HasColumnType("uuid");

                            b1.Property<string>("Value")
                                .IsRequired()
                                .HasMaxLength(2000)
                                .HasColumnType("character varying(2000)")
                                .HasColumnName("description");

                            b1.HasKey("EventId");

                            b1.ToTable("events", "events");

                            b1.WithOwner()
                                .HasForeignKey("EventId");
                        });

                    b.OwnsOne("LankaConnect.Domain.Events.ValueObjects.EventLocation", "Location", b1 =>
                        {
                            b1.Property<Guid>("EventId")
                                .HasColumnType("uuid");

                            b1.Property<bool>("_hasValue")
                                .ValueGeneratedOnAdd()
                                .HasColumnType("boolean")
                                .HasDefaultValue(true)
                                .HasColumnName("has_location");

                            b1.HasKey("EventId");

                            b1.ToTable("events", "events");

                            b1.WithOwner()
                                .HasForeignKey("EventId");

                            b1.OwnsOne("LankaConnect.Domain.Business.ValueObjects.Address", "Address", b2 =>
                                {
                                    b2.Property<Guid>("EventLocationEventId")
                                        .HasColumnType("uuid");

                                    b2.Property<string>("City")
                                        .IsRequired()
                                        .HasMaxLength(100)
                                        .HasColumnType("character varying(100)")
                                        .HasColumnName("address_city");

                                    b2.Property<string>("Country")
                                        .IsRequired()
                                        .HasMaxLength(100)
                                        .HasColumnType("character varying(100)")
                                        .HasColumnName("address_country");

                                    b2.Property<string>("State")
                                        .IsRequired()
                                        .HasMaxLength(100)
                                        .HasColumnType("character varying(100)")
                                        .HasColumnName("address_state");

                                    b2.Property<string>("Street")
                                        .IsRequired()
                                        .HasMaxLength(200)
                                        .HasColumnType("character varying(200)")
                                        .HasColumnName("address_street");

                                    b2.Property<string>("ZipCode")
                                        .IsRequired()
                                        .HasMaxLength(20)
                                        .HasColumnType("character varying(20)")
                                        .HasColumnName("address_zip_code");

                                    b2.HasKey("EventLocationEventId");

                                    b2.ToTable("events", "events");

                                    b2.WithOwner()
                                        .HasForeignKey("EventLocationEventId");
                                });

                            b1.OwnsOne("LankaConnect.Domain.Business.ValueObjects.GeoCoordinate", "Coordinates", b2 =>
                                {
                                    b2.Property<Guid>("EventLocationEventId")
                                        .HasColumnType("uuid");

                                    b2.Property<decimal>("Latitude")
                                        .HasPrecision(10, 7)
                                        .HasColumnType("numeric(10,7)")
                                        .HasColumnName("coordinates_latitude");

                                    b2.Property<decimal>("Longitude")
                                        .HasPrecision(10, 7)
                                        .HasColumnType("numeric(10,7)")
                                        .HasColumnName("coordinates_longitude");

                                    b2.HasKey("EventLocationEventId");

                                    b2.ToTable("events", "events");

                                    b2.WithOwner()
                                        .HasForeignKey("EventLocationEventId");
                                });

                            b1.Navigation("Address")
                                .IsRequired();

                            b1.Navigation("Coordinates");
                        });

                    b.OwnsOne("LankaConnect.Domain.Events.ValueObjects.EventTitle", "Title", b1 =>
                        {
                            b1.Property<Guid>("EventId")
                                .HasColumnType("uuid");

                            b1.Property<string>("Value")
                                .IsRequired()
                                .HasMaxLength(200)
                                .HasColumnType("character varying(200)")
                                .HasColumnName("title");

                            b1.HasKey("EventId");

                            b1.ToTable("events", "events");

                            b1.WithOwner()
                                .HasForeignKey("EventId");
                        });

                    b.OwnsOne("LankaConnect.Domain.Events.ValueObjects.TicketPricing", "Pricing", b1 =>
                        {
                            b1.Property<Guid>("EventId")
                                .HasColumnType("uuid");

                            b1.Property<int?>("ChildAgeLimit")
                                .HasColumnType("integer");

                            b1.Property<int>("Currency")
                                .HasColumnType("integer");

                            b1.Property<int>("Type")
                                .HasColumnType("integer");

                            b1.HasKey("EventId");

                            b1.ToTable("events", "events");

                            b1.ToJson("pricing");

                            b1.WithOwner()
                                .HasForeignKey("EventId");

                            b1.OwnsMany("LankaConnect.Domain.Events.ValueObjects.GroupPricingTier", "GroupTiers", b2 =>
                                {
                                    b2.Property<Guid>("TicketPricingEventId")
                                        .HasColumnType("uuid");

                                    b2.Property<int>("Id")
                                        .ValueGeneratedOnAdd()
                                        .HasColumnType("integer");

                                    b2.Property<int?>("MaxAttendees")
                                        .HasColumnType("integer");

                                    b2.Property<int>("MinAttendees")
                                        .HasColumnType("integer");

                                    b2.HasKey("TicketPricingEventId", "Id");

                                    b2.ToTable("events", "events");

                                    b2.WithOwner()
                                        .HasForeignKey("TicketPricingEventId");

                                    b2.OwnsOne("LankaConnect.Domain.Shared.ValueObjects.Money", "PricePerPerson", b3 =>
                                        {
                                            b3.Property<Guid>("GroupPricingTierTicketPricingEventId")
                                                .HasColumnType("uuid");

                                            b3.Property<int>("GroupPricingTierId")
                                                .HasColumnType("integer");

                                            b3.Property<decimal>("Amount")
                                                .HasColumnType("numeric");

                                            b3.Property<int>("Currency")
                                                .HasColumnType("integer");

                                            b3.HasKey("GroupPricingTierTicketPricingEventId", "GroupPricingTierId");

                                            b3.ToTable("events", "events");

                                            b3.WithOwner()
                                                .HasForeignKey("GroupPricingTierTicketPricingEventId", "GroupPricingTierId");
                                        });

                                    b2.Navigation("PricePerPerson")
                                        .IsRequired();
                                });

                            b1.OwnsOne("LankaConnect.Domain.Shared.ValueObjects.Money", "AdultPrice", b2 =>
                                {
                                    b2.Property<Guid>("TicketPricingEventId")
                                        .HasColumnType("uuid");

                                    b2.Property<decimal>("Amount")
                                        .HasColumnType("numeric");

                                    b2.Property<int>("Currency")
                                        .HasColumnType("integer");

                                    b2.HasKey("TicketPricingEventId");

                                    b2.ToTable("events", "events");

                                    b2.WithOwner()
                                        .HasForeignKey("TicketPricingEventId");
                                });

                            b1.OwnsOne("LankaConnect.Domain.Shared.ValueObjects.Money", "ChildPrice", b2 =>
                                {
                                    b2.Property<Guid>("TicketPricingEventId")
                                        .HasColumnType("uuid");

                                    b2.Property<decimal>("Amount")
                                        .HasColumnType("numeric");

                                    b2.Property<int>("Currency")
                                        .HasColumnType("integer");

                                    b2.HasKey("TicketPricingEventId");

                                    b2.ToTable("events", "events");

                                    b2.WithOwner()
                                        .HasForeignKey("TicketPricingEventId");
                                });

                            b1.Navigation("AdultPrice")
                                .IsRequired();

                            b1.Navigation("ChildPrice");

                            b1.Navigation("GroupTiers");
                        });

                    b.OwnsMany("LankaConnect.Domain.Events.ValueObjects.WaitingListEntry", "WaitingList", b1 =>
                        {
                            b1.Property<Guid>("Id")
                                .ValueGeneratedOnAdd()
                                .HasColumnType("uuid");

                            b1.Property<Guid>("EventId")
                                .HasColumnType("uuid");

                            b1.Property<DateTime>("JoinedAt")
                                .HasColumnType("timestamp with time zone")
                                .HasColumnName("joined_at");

                            b1.Property<int>("Position")
                                .HasColumnType("integer")
                                .HasColumnName("position");

                            b1.Property<Guid>("UserId")
                                .HasColumnType("uuid")
                                .HasColumnName("user_id");

                            b1.HasKey("Id");

                            b1.HasIndex("EventId", "Position")
                                .HasDatabaseName("ix_event_waiting_list_event_position");

                            b1.HasIndex("EventId", "UserId")
                                .IsUnique()
                                .HasDatabaseName("ix_event_waiting_list_event_user");

                            b1.ToTable("event_waiting_list", "events");

                            b1.WithOwner()
                                .HasForeignKey("EventId");
                        });

                    b.Navigation("Description")
                        .IsRequired();

                    b.Navigation("Location");

                    b.Navigation("Pricing");

                    b.Navigation("TicketPrice");

                    b.Navigation("Title")
                        .IsRequired();

                    b.Navigation("WaitingList");
                });

            modelBuilder.Entity("LankaConnect.Domain.Events.EventImage", b =>
                {
                    b.HasOne("LankaConnect.Domain.Events.Event", null)
                        .WithMany("Images")
                        .HasForeignKey("EventId")
                        .OnDelete(DeleteBehavior.Cascade)
                        .IsRequired();
                });

            modelBuilder.Entity("LankaConnect.Domain.Events.EventVideo", b =>
                {
                    b.HasOne("LankaConnect.Domain.Events.Event", null)
                        .WithMany("Videos")
                        .HasForeignKey("EventId")
                        .OnDelete(DeleteBehavior.Cascade)
                        .IsRequired();
                });

            modelBuilder.Entity("LankaConnect.Domain.Events.Registration", b =>
                {
                    b.HasOne("LankaConnect.Domain.Events.Event", null)
                        .WithMany("Registrations")
                        .HasForeignKey("EventId")
                        .OnDelete(DeleteBehavior.Cascade)
                        .IsRequired();

                    b.OwnsOne("LankaConnect.Domain.Shared.ValueObjects.Money", "TotalPrice", b1 =>
                        {
                            b1.Property<Guid>("RegistrationId")
                                .HasColumnType("uuid");

                            b1.Property<decimal>("Amount")
                                .HasPrecision(18, 2)
                                .HasColumnType("numeric(18,2)")
                                .HasColumnName("total_price_amount");

                            b1.Property<string>("Currency")
                                .IsRequired()
                                .HasMaxLength(3)
                                .HasColumnType("character varying(3)")
                                .HasColumnName("total_price_currency");

                            b1.HasKey("RegistrationId");

                            b1.ToTable("registrations", "events");

                            b1.WithOwner()
                                .HasForeignKey("RegistrationId");
                        });

                    b.OwnsMany("LankaConnect.Domain.Events.ValueObjects.AttendeeDetails", "Attendees", b1 =>
                        {
                            b1.Property<Guid>("RegistrationId")
                                .HasColumnType("uuid");

                            b1.Property<int>("Id")
                                .ValueGeneratedOnAdd()
                                .HasColumnType("integer");

                            b1.Property<int>("Age")
                                .HasColumnType("integer")
                                .HasColumnName("age");

                            b1.Property<string>("Name")
                                .IsRequired()
                                .HasColumnType("text")
                                .HasColumnName("name");

                            b1.HasKey("RegistrationId", "Id");

                            b1.ToTable("registrations", "events");

                            b1.ToJson("attendees");

                            b1.WithOwner()
                                .HasForeignKey("RegistrationId");
                        });

                    b.OwnsOne("LankaConnect.Domain.Events.ValueObjects.AttendeeInfo", "AttendeeInfo", b1 =>
                        {
                            b1.Property<Guid>("RegistrationId")
                                .HasColumnType("uuid");

                            b1.HasKey("RegistrationId");

                            b1.ToTable("registrations", "events");

                            b1.ToJson("attendee_info");

                            b1.WithOwner()
                                .HasForeignKey("RegistrationId");

                            b1.OwnsOne("LankaConnect.Domain.Shared.ValueObjects.Email", "Email", b2 =>
                                {
                                    b2.Property<Guid>("AttendeeInfoRegistrationId")
                                        .HasColumnType("uuid");

                                    b2.Property<string>("Value")
                                        .IsRequired()
                                        .ValueGeneratedOnUpdateSometimes()
                                        .HasColumnType("text")
                                        .HasColumnName("email");

                                    b2.HasKey("AttendeeInfoRegistrationId");

                                    b2.ToTable("registrations", "events");

                                    b2.WithOwner()
                                        .HasForeignKey("AttendeeInfoRegistrationId");
                                });

                            b1.OwnsOne("LankaConnect.Domain.Shared.ValueObjects.PhoneNumber", "PhoneNumber", b2 =>
                                {
                                    b2.Property<Guid>("AttendeeInfoRegistrationId")
                                        .HasColumnType("uuid");

                                    b2.Property<string>("Value")
                                        .IsRequired()
                                        .ValueGeneratedOnUpdateSometimes()
                                        .HasColumnType("text")
                                        .HasColumnName("phone_number");

                                    b2.HasKey("AttendeeInfoRegistrationId");

                                    b2.ToTable("registrations", "events");

                                    b2.WithOwner()
                                        .HasForeignKey("AttendeeInfoRegistrationId");
                                });

                            b1.Navigation("Email")
                                .IsRequired();

                            b1.Navigation("PhoneNumber")
                                .IsRequired();
                        });

                    b.OwnsOne("LankaConnect.Domain.Events.ValueObjects.RegistrationContact", "Contact", b1 =>
                        {
                            b1.Property<Guid>("RegistrationId")
                                .HasColumnType("uuid");

                            b1.Property<string>("Address")
                                .HasColumnType("text")
                                .HasColumnName("address");

                            b1.Property<string>("Email")
                                .IsRequired()
                                .ValueGeneratedOnUpdateSometimes()
                                .HasColumnType("text")
                                .HasColumnName("email");

                            b1.Property<string>("PhoneNumber")
                                .IsRequired()
                                .ValueGeneratedOnUpdateSometimes()
                                .HasColumnType("text")
                                .HasColumnName("phone_number");

                            b1.HasKey("RegistrationId");

                            b1.ToTable("registrations", "events");

                            b1.ToJson("contact");

                            b1.WithOwner()
                                .HasForeignKey("RegistrationId");
                        });

                    b.Navigation("AttendeeInfo");

                    b.Navigation("Attendees");

                    b.Navigation("Contact");

                    b.Navigation("TotalPrice");
                });

            modelBuilder.Entity("LankaConnect.Domain.Users.User", b =>
                {
                    b.OwnsOne("LankaConnect.Domain.Shared.ValueObjects.Email", "Email", b1 =>
                        {
                            b1.Property<Guid>("UserId")
                                .HasColumnType("uuid");

                            b1.Property<string>("Value")
                                .IsRequired()
                                .HasMaxLength(255)
                                .HasColumnType("character varying(255)")
                                .HasColumnName("email");

                            b1.HasKey("UserId");

                            b1.HasIndex("Value")
                                .IsUnique()
                                .HasDatabaseName("ix_users_email");

                            b1.ToTable("users", "identity");

                            b1.WithOwner()
                                .HasForeignKey("UserId");
                        });

                    b.OwnsOne("LankaConnect.Domain.Shared.ValueObjects.PhoneNumber", "PhoneNumber", b1 =>
                        {
                            b1.Property<Guid>("UserId")
                                .HasColumnType("uuid");

                            b1.Property<string>("Value")
                                .IsRequired()
                                .HasMaxLength(20)
                                .HasColumnType("character varying(20)")
                                .HasColumnName("phone_number");

                            b1.HasKey("UserId");

                            b1.ToTable("users", "identity");

                            b1.WithOwner()
                                .HasForeignKey("UserId");
                        });

                    b.OwnsMany("LankaConnect.Domain.Users.ValueObjects.CulturalInterest", "CulturalInterests", b1 =>
                        {
                            b1.Property<int>("Id")
                                .ValueGeneratedOnAdd()
                                .HasColumnType("integer");

                            NpgsqlPropertyBuilderExtensions.UseIdentityByDefaultColumn(b1.Property<int>("Id"));

                            b1.Property<string>("Code")
                                .IsRequired()
                                .HasMaxLength(50)
                                .HasColumnType("character varying(50)")
                                .HasColumnName("interest_code");

                            b1.Property<Guid>("UserId")
                                .HasColumnType("uuid");

                            b1.HasKey("Id");

                            b1.HasIndex("UserId", "Code")
                                .IsUnique()
                                .HasDatabaseName("ix_user_cultural_interests_user_code");

                            b1.ToTable("user_cultural_interests", "users");

                            b1.WithOwner()
                                .HasForeignKey("UserId");
                        });

                    b.OwnsMany("LankaConnect.Domain.Users.ValueObjects.ExternalLogin", "ExternalLogins", b1 =>
                        {
                            b1.Property<Guid>("UserId")
                                .HasColumnType("uuid");

                            b1.Property<int>("Id")
                                .ValueGeneratedOnAdd()
                                .HasColumnType("integer");

                            NpgsqlPropertyBuilderExtensions.UseIdentityByDefaultColumn(b1.Property<int>("Id"));

                            b1.Property<string>("ExternalProviderId")
                                .IsRequired()
                                .HasMaxLength(255)
                                .HasColumnType("character varying(255)")
                                .HasColumnName("external_provider_id");

                            b1.Property<DateTime>("LinkedAt")
                                .HasColumnType("timestamp with time zone")
                                .HasColumnName("linked_at");

                            b1.Property<int>("Provider")
                                .HasColumnType("integer")
                                .HasColumnName("provider");

                            b1.Property<string>("ProviderEmail")
                                .IsRequired()
                                .HasMaxLength(255)
                                .HasColumnType("character varying(255)")
                                .HasColumnName("provider_email");

                            b1.HasKey("UserId", "Id");

                            b1.HasIndex("UserId")
                                .HasDatabaseName("ix_external_logins_user_id");

                            b1.HasIndex("Provider", "ExternalProviderId")
                                .IsUnique()
                                .HasDatabaseName("ix_external_logins_provider_external_id");

                            b1.ToTable("external_logins", "identity");

                            b1.WithOwner()
                                .HasForeignKey("UserId");
                        });

                    b.OwnsMany("LankaConnect.Domain.Users.ValueObjects.LanguagePreference", "Languages", b1 =>
                        {
                            b1.Property<int>("Id")
                                .ValueGeneratedOnAdd()
                                .HasColumnType("integer");

                            NpgsqlPropertyBuilderExtensions.UseIdentityByDefaultColumn(b1.Property<int>("Id"));

                            b1.Property<int>("Proficiency")
                                .HasColumnType("integer")
                                .HasColumnName("proficiency_level");

                            b1.Property<Guid>("UserId")
                                .HasColumnType("uuid");

                            b1.HasKey("Id");

                            b1.HasIndex("UserId");

                            b1.ToTable("user_languages", "users");

                            b1.WithOwner()
                                .HasForeignKey("UserId");

                            b1.OwnsOne("LankaConnect.Domain.Users.ValueObjects.LanguageCode", "Language", b2 =>
                                {
                                    b2.Property<int>("LanguagePreferenceId")
                                        .HasColumnType("integer");

                                    b2.Property<string>("Code")
                                        .IsRequired()
                                        .HasMaxLength(10)
                                        .HasColumnType("character varying(10)")
                                        .HasColumnName("language_code");

                                    b2.HasKey("LanguagePreferenceId");

                                    b2.HasIndex("Code")
                                        .HasDatabaseName("ix_user_languages_code");

                                    b2.ToTable("user_languages", "users");

                                    b2.WithOwner()
                                        .HasForeignKey("LanguagePreferenceId");
                                });

                            b1.Navigation("Language")
                                .IsRequired();
                        });

                    b.OwnsMany("LankaConnect.Domain.Users.ValueObjects.RefreshToken", "RefreshTokens", b1 =>
                        {
                            b1.Property<Guid>("UserId")
                                .HasColumnType("uuid");

                            b1.Property<int>("Id")
                                .ValueGeneratedOnAdd()
                                .HasColumnType("integer");

                            NpgsqlPropertyBuilderExtensions.UseIdentityByDefaultColumn(b1.Property<int>("Id"));

                            b1.Property<DateTime>("CreatedAt")
                                .HasColumnType("timestamp with time zone");

                            b1.Property<string>("CreatedByIp")
                                .IsRequired()
                                .HasMaxLength(45)
                                .HasColumnType("character varying(45)");

                            b1.Property<DateTime>("ExpiresAt")
                                .HasColumnType("timestamp with time zone");

                            b1.Property<bool>("IsRevoked")
                                .ValueGeneratedOnAdd()
                                .HasColumnType("boolean")
                                .HasDefaultValue(false);

                            b1.Property<DateTime?>("RevokedAt")
                                .HasColumnType("timestamp with time zone");

                            b1.Property<string>("RevokedByIp")
                                .HasMaxLength(45)
                                .HasColumnType("character varying(45)");

                            b1.Property<string>("Token")
                                .IsRequired()
                                .HasMaxLength(255)
                                .HasColumnType("character varying(255)");

                            b1.HasKey("UserId", "Id");

                            b1.HasIndex("ExpiresAt")
                                .HasDatabaseName("ix_user_refresh_tokens_expires_at");

                            b1.HasIndex("Token")
                                .IsUnique()
                                .HasDatabaseName("ix_user_refresh_tokens_token");

                            b1.ToTable("user_refresh_tokens", "identity");

                            b1.WithOwner()
                                .HasForeignKey("UserId");
                        });

                    b.OwnsOne("LankaConnect.Domain.Users.ValueObjects.UserLocation", "Location", b1 =>
                        {
                            b1.Property<Guid>("UserId")
                                .HasColumnType("uuid");

                            b1.Property<string>("City")
                                .IsRequired()
                                .HasMaxLength(100)
                                .HasColumnType("character varying(100)")
                                .HasColumnName("city");

                            b1.Property<string>("Country")
                                .IsRequired()
                                .HasMaxLength(100)
                                .HasColumnType("character varying(100)")
                                .HasColumnName("country");

                            b1.Property<string>("State")
                                .IsRequired()
                                .HasMaxLength(100)
                                .HasColumnType("character varying(100)")
                                .HasColumnName("state");

                            b1.Property<string>("ZipCode")
                                .IsRequired()
                                .HasMaxLength(20)
                                .HasColumnType("character varying(20)")
                                .HasColumnName("zip_code");

                            b1.HasKey("UserId");

                            b1.ToTable("users", "identity");

                            b1.WithOwner()
                                .HasForeignKey("UserId");
                        });

                    b.Navigation("CulturalInterests");

                    b.Navigation("Email")
                        .IsRequired();

                    b.Navigation("ExternalLogins");

                    b.Navigation("Languages");

                    b.Navigation("Location");

                    b.Navigation("PhoneNumber");

                    b.Navigation("RefreshTokens");
                });

            modelBuilder.Entity("user_preferred_metro_areas", b =>
                {
                    b.HasOne("LankaConnect.Domain.Events.MetroArea", null)
                        .WithMany()
                        .HasForeignKey("metro_area_id")
                        .OnDelete(DeleteBehavior.Cascade)
                        .IsRequired()
                        .HasConstraintName("fk_user_preferred_metro_areas_metro_area_id");

                    b.HasOne("LankaConnect.Domain.Users.User", null)
                        .WithMany()
                        .HasForeignKey("user_id")
                        .OnDelete(DeleteBehavior.Cascade)
                        .IsRequired()
                        .HasConstraintName("fk_user_preferred_metro_areas_user_id");
                });

            modelBuilder.Entity("LankaConnect.Domain.Business.Business", b =>
                {
                    b.Navigation("Images");

                    b.Navigation("Reviews");

                    b.Navigation("Services");
                });

            modelBuilder.Entity("LankaConnect.Domain.Community.ForumTopic", b =>
                {
                    b.Navigation("Replies");
                });

            modelBuilder.Entity("LankaConnect.Domain.Events.Entities.SignUpItem", b =>
                {
                    b.Navigation("Commitments");
                });

            modelBuilder.Entity("LankaConnect.Domain.Events.Entities.SignUpList", b =>
                {
                    b.Navigation("Commitments");

                    b.Navigation("Items");
                });

            modelBuilder.Entity("LankaConnect.Domain.Events.Event", b =>
                {
                    b.Navigation("Images");

                    b.Navigation("Registrations");

                    b.Navigation("SignUpLists");

                    b.Navigation("Videos");
                });
#pragma warning restore 612, 618
        }
    }
}
