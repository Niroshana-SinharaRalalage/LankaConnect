(globalThis.TURBOPACK||(globalThis.TURBOPACK=[])).push(["object"==typeof document?document.currentScript:void 0,33602,e=>{"use strict";var t,s=e.i(43476),a=e.i(57688),r=e.i(14863),n=e.i(88129),i=e.i(44212),l=e.i(71645);function c({tabs:e,defaultTab:t,onChange:a,className:r=""}){let[n,i]=l.useState(t||(e.length>0?e[0].id:"")),c=l.useMemo(()=>e.find(e=>e.id===n)?.content,[e,n]);return(0,s.jsxs)("div",{className:`w-full ${r}`,children:[(0,s.jsx)("div",{role:"tablist",className:"flex border-b border-gray-200 overflow-x-auto",onKeyDown:t=>{let s=e.findIndex(e=>e.id===n);if("ArrowRight"===t.key){t.preventDefault();let r=(s+1)%e.length,n=e[r].id;i(n),a?.(n)}else if("ArrowLeft"===t.key){t.preventDefault();let r=0===s?e.length-1:s-1,n=e[r].id;i(n),a?.(n)}},style:{scrollbarWidth:"thin"},children:e.map(e=>{let t=e.id===n,r=e.icon;return(0,s.jsxs)("button",{role:"tab","aria-selected":t,"aria-controls":`tabpanel-${e.id}`,id:`tab-${e.id}`,onClick:()=>{var t;i(t=e.id),a?.(t)},className:`
                flex items-center gap-2 px-4 py-3 font-medium text-sm
                transition-all duration-200 whitespace-nowrap
                ${t?"border-b-2 text-[#8B1538]":"text-gray-600 hover:text-[#FF7900] hover:bg-gray-50"}
              `,style:t?{borderImage:"linear-gradient(90deg, #FF7900 0%, #8B1538 100%) 1"}:void 0,children:[r&&(0,s.jsx)(r,{className:"w-4 h-4"}),(0,s.jsx)("span",{children:e.label})]},e.id)})}),(0,s.jsx)("div",{role:"tabpanel",id:`tabpanel-${n}`,"aria-labelledby":`tab-${n}`,className:"mt-6",children:c})]})}var o=e.i(74063),d=e.i(79574),x=e.i(18566),u=e.i(42490),m=e.i(28424);function h(e){return e===m.UserRole.Admin||e===m.UserRole.AdminManager}(t={}).None="None",t.Trialing="Trialing",t.Active="Active",t.PastDue="PastDue",t.Canceled="Canceled",t.Expired="Expired";var g=e.i(87316),p=e.i(61911),f=e.i(64659),y=e.i(84614),v=e.i(92270),j=e.i(83086),b=e.i(75254);let N=(0,b.default)("clipboard-check",[["rect",{width:"8",height:"4",x:"8",y:"2",rx:"1",ry:"1",key:"tgr4d6"}],["path",{d:"M16 4h2a2 2 0 0 1 2 2v14a2 2 0 0 1-2 2H6a2 2 0 0 1-2-2V6a2 2 0 0 1 2-2h2",key:"116196"}],["path",{d:"m9 14 2 2 4-4",key:"df797q"}]]),w=(0,b.default)("folder-open",[["path",{d:"m6 14 1.5-2.9A2 2 0 0 1 9.24 10H20a2 2 0 0 1 1.94 2.5l-1.54 6a2 2 0 0 1-1.95 1.5H4a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h3.9a2 2 0 0 1 1.69.9l.81 1.2a2 2 0 0 0 1.67.9H18a2 2 0 0 1 2 2v2",key:"usdka0"}]]),C=(0,b.default)("bell",[["path",{d:"M10.268 21a2 2 0 0 0 3.464 0",key:"vwvbt9"}],["path",{d:"M3.262 15.326A1 1 0 0 0 4 17h16a1 1 0 0 0 .74-1.673C19.41 13.956 18 12.499 18 8A6 6 0 0 0 6 8c0 4.499-1.411 5.956-2.738 7.326",key:"11g9vi"}]]);var k=e.i(46897),F=e.i(45771);function E({events:e,isLoading:t=!1,emptyMessage:a="No events to display",onEventClick:r}){let n=e=>new Date(e).toLocaleDateString("en-US",{year:"numeric",month:"short",day:"2-digit"});return t?(0,s.jsx)("div",{className:"flex items-center justify-center py-12",children:(0,s.jsxs)("div",{className:"text-center",children:[(0,s.jsx)("div",{className:"inline-block w-8 h-8 border-4 border-gray-300 border-t-[#FF7900] rounded-full animate-spin",role:"status"}),(0,s.jsx)("p",{className:"mt-2 text-gray-600",children:"Loading events..."})]})}):0===e.length?(0,s.jsxs)("div",{className:"text-center py-12",children:[(0,s.jsx)(g.Calendar,{className:"w-16 h-16 mx-auto mb-4 text-gray-400"}),(0,s.jsx)("p",{className:"text-gray-600 text-lg",children:a})]}):(0,s.jsx)("div",{className:"space-y-4",children:e.map(e=>(0,s.jsxs)("div",{onClick:()=>r?.(e.id),className:`bg-white rounded-lg shadow-sm border border-gray-200 p-4 transition-all hover:shadow-md ${r?"cursor-pointer":""}`,children:[(0,s.jsxs)("div",{className:"flex items-start justify-between mb-2",children:[(0,s.jsx)("h3",{className:"text-lg font-semibold text-[#8B1538] flex-1",children:e.title}),(0,s.jsx)("div",{className:"flex gap-2 ml-4",children:(0,s.jsx)("span",{className:"px-2 py-1 rounded-full text-xs font-semibold text-white whitespace-nowrap",style:{backgroundColor:(e=>{switch(e){case F.EventStatus.Published:return"#10B981";case F.EventStatus.Active:return"#FF7900";case F.EventStatus.Draft:return"#6B7280";case F.EventStatus.Postponed:return"#F59E0B";case F.EventStatus.Cancelled:return"#EF4444";case F.EventStatus.Completed:return"#3B82F6";case F.EventStatus.UnderReview:return"#8B5CF6";default:return"#6B7280"}})(e.status)},children:(e=>{switch(e){case F.EventStatus.Published:return"Published";case F.EventStatus.Active:return"Active";case F.EventStatus.Draft:return"Draft";case F.EventStatus.Postponed:return"Postponed";case F.EventStatus.Cancelled:return"Cancelled";case F.EventStatus.Completed:return"Completed";case F.EventStatus.UnderReview:return"Under Review";case F.EventStatus.Archived:return"Archived";default:return"Unknown"}})(e.status)})})]}),(0,s.jsxs)("div",{className:"space-y-2",children:[(0,s.jsxs)("div",{className:"flex items-center text-sm text-gray-600",children:[(0,s.jsx)(g.Calendar,{className:"w-4 h-4 mr-2 text-[#FF7900]"}),(0,s.jsxs)("span",{children:[n(e.startDate),e.endDate&&e.endDate!==e.startDate&&(0,s.jsxs)(s.Fragment,{children:[" - ",n(e.endDate)]})]})]}),e.city&&e.state&&(0,s.jsxs)("div",{className:"flex items-center text-sm text-gray-600",children:[(0,s.jsx)(k.MapPin,{className:"w-4 h-4 mr-2 text-[#FF7900]"}),(0,s.jsxs)("span",{children:[e.city,", ",e.state]})]}),(0,s.jsxs)("div",{className:"flex items-center text-sm text-gray-600",children:[(0,s.jsx)(p.Users,{className:"w-4 h-4 mr-2 text-[#FF7900]"}),(0,s.jsxs)("span",{children:[e.currentRegistrations," / ",e.capacity," registered"]})]})]}),(0,s.jsx)("div",{className:"flex items-center justify-between mt-3 pt-3 border-t border-gray-200",children:(0,s.jsxs)("div",{className:"flex gap-2",children:[(0,s.jsx)("span",{className:"px-2 py-1 bg-gray-100 text-gray-700 rounded text-xs font-medium",children:(e=>{switch(e){case F.EventCategory.Religious:return"Religious";case F.EventCategory.Cultural:return"Cultural";case F.EventCategory.Community:return"Community";case F.EventCategory.Educational:return"Educational";case F.EventCategory.Social:return"Social";case F.EventCategory.Business:return"Business";case F.EventCategory.Charity:return"Charity";case F.EventCategory.Entertainment:return"Entertainment";default:return"Other"}})(e.category)}),e.isFree&&(0,s.jsx)("span",{className:"px-2 py-1 bg-green-100 text-green-700 rounded text-xs font-medium",children:"Free"}),!e.isFree&&e.ticketPriceAmount&&(0,s.jsxs)("span",{className:"px-2 py-1 bg-[#FFE8CC] text-[#8B1538] rounded text-xs font-medium",children:["$",e.ticketPriceAmount]})]})})]},e.id))})}function R({isOpen:e,userName:t,onClose:a,onConfirm:r,isLoading:n=!1}){let[c,o]=l.useState("");return e?(0,s.jsx)("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black bg-opacity-50",children:(0,s.jsxs)("div",{className:"bg-white rounded-lg shadow-xl max-w-md w-full mx-4 p-6",children:[(0,s.jsx)("h2",{className:"text-2xl font-bold text-[#8B1538] mb-4",children:"Reject Role Upgrade"}),(0,s.jsxs)("p",{className:"text-gray-700 mb-4",children:["Are you sure you want to reject the role upgrade request for ",(0,s.jsx)("strong",{children:t}),"?"]}),(0,s.jsxs)("div",{className:"mb-6",children:[(0,s.jsx)("label",{htmlFor:"reason",className:"block text-sm font-medium text-gray-700 mb-2",children:"Reason (Optional)"}),(0,s.jsx)("textarea",{id:"reason",value:c,onChange:e=>o(e.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-[#FF7900] focus:border-transparent",rows:4,placeholder:"Provide a reason for rejection (optional)",disabled:n})]}),(0,s.jsxs)("div",{className:"flex gap-3 justify-end",children:[(0,s.jsx)(i.Button,{variant:"outline",onClick:()=>{o(""),a()},disabled:n,className:"border-gray-300 text-gray-700 hover:bg-gray-50",children:"Cancel"}),(0,s.jsx)(i.Button,{variant:"default",onClick:()=>{r(c)},disabled:n,className:"bg-red-600 hover:bg-red-700 text-white",children:n?"Rejecting...":"Reject"})]})]})}):null}var S=e.i(48831);let U=new class{basePath="/approvals";async getPendingApprovals(){return await S.apiClient.get(`${this.basePath}/pending`)}async approveRoleUpgrade(e){await S.apiClient.post(`${this.basePath}/${e}/approve`)}async rejectRoleUpgrade(e,t){await S.apiClient.post(`${this.basePath}/${e}/reject`,{reason:t})}};function B({approvals:e,onUpdate:t}){let[a,r]=l.useState(null),[n,c]=l.useState(!1),[o,d]=l.useState(null),x=async e=>{try{d(e),await U.approveRoleUpgrade(e),t()}catch(e){console.error("Error approving role upgrade:",e),alert("Failed to approve role upgrade")}finally{d(null)}},u=async e=>{if(a)try{d(a.userId),await U.rejectRoleUpgrade(a.userId,e),c(!1),r(null),t()}catch(e){console.error("Error rejecting role upgrade:",e),alert("Failed to reject role upgrade")}finally{d(null)}};return 0===e.length?(0,s.jsx)("div",{className:"bg-white rounded-lg shadow p-8 text-center",children:(0,s.jsx)("p",{className:"text-gray-500 text-lg",children:"No pending approvals"})}):(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)("div",{className:"bg-white rounded-lg shadow overflow-x-auto",children:(0,s.jsxs)("table",{className:"min-w-full divide-y divide-gray-200",children:[(0,s.jsx)("thead",{className:"bg-gray-50",children:(0,s.jsxs)("tr",{children:[(0,s.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"User"}),(0,s.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Email"}),(0,s.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Current Role"}),(0,s.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Requested Role"}),(0,s.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Requested At"}),(0,s.jsx)("th",{className:"px-6 py-3 text-right text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Actions"})]})}),(0,s.jsx)("tbody",{className:"bg-white divide-y divide-gray-200",children:e.map(e=>(0,s.jsxs)("tr",{className:"hover:bg-gray-50",children:[(0,s.jsx)("td",{className:"px-6 py-4 whitespace-nowrap",children:(0,s.jsx)("div",{className:"text-sm font-medium text-gray-900",children:e.fullName})}),(0,s.jsx)("td",{className:"px-6 py-4 whitespace-nowrap",children:(0,s.jsx)("div",{className:"text-sm text-gray-500",children:e.email})}),(0,s.jsx)("td",{className:"px-6 py-4 whitespace-nowrap",children:(0,s.jsx)("span",{className:"px-2 inline-flex text-xs leading-5 font-semibold rounded-full bg-gray-100 text-gray-800",children:e.currentRole})}),(0,s.jsx)("td",{className:"px-6 py-4 whitespace-nowrap",children:(0,s.jsx)("span",{className:"px-2 inline-flex text-xs leading-5 font-semibold rounded-full bg-[#FFE8CC] text-[#8B1538]",children:e.requestedRole})}),(0,s.jsx)("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500",children:new Date(e.requestedAt).toLocaleDateString("en-US",{year:"numeric",month:"short",day:"numeric",hour:"2-digit",minute:"2-digit"})}),(0,s.jsx)("td",{className:"px-6 py-4 whitespace-nowrap text-right text-sm font-medium",children:(0,s.jsxs)("div",{className:"flex gap-2 justify-end",children:[(0,s.jsx)(i.Button,{size:"sm",variant:"default",onClick:()=>x(e.userId),disabled:o===e.userId,className:"bg-green-600 hover:bg-green-700 text-white",children:o===e.userId?"Approving...":"Approve"}),(0,s.jsx)(i.Button,{size:"sm",variant:"outline",onClick:()=>{r(e),c(!0)},disabled:o===e.userId,className:"border-red-600 text-red-600 hover:bg-red-50",children:"Reject"})]})})]},e.userId))})]})}),(0,s.jsx)(R,{isOpen:n,userName:a?.fullName||"",onClose:()=>{c(!1),r(null)},onConfirm:u,isLoading:o===a?.userId})]})}var A=e.i(37727),P=e.i(43531),q=e.i(54616),D=e.i(12598);let L=new class{basePath="/users/me";async requestUpgrade(e){return await S.apiClient.post(`${this.basePath}/request-upgrade`,e),{success:!0,message:"Role upgrade request submitted successfully"}}async cancelUpgrade(){return await S.apiClient.post(`${this.basePath}/cancel-upgrade`,{}),{success:!0,message:"Role upgrade request canceled successfully"}}};function z({isOpen:e,onClose:t}){let a,[r,n]=l.useState(""),[c,o]=l.useState(!1),d=(a=(0,D.useQueryClient)(),(0,q.useMutation)({mutationFn:e=>L.requestUpgrade(e),onSuccess:()=>{a.invalidateQueries({queryKey:["user"]})}}));l.useEffect(()=>{e||(n(""),o(!1),d.reset())},[e]);let x=async e=>{if(e.preventDefault(),!(r.trim().length<20))try{await d.mutateAsync({targetRole:"EventOrganizer",reason:r.trim()}),o(!0),setTimeout(()=>{t()},2e3)}catch(e){console.error("Failed to request upgrade:",e)}};return e?c?(0,s.jsx)("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4",children:(0,s.jsxs)("div",{className:"bg-white rounded-xl p-8 max-w-md w-full text-center",children:[(0,s.jsx)("div",{className:"w-16 h-16 bg-green-100 rounded-full flex items-center justify-center mx-auto mb-4",children:(0,s.jsx)(P.Check,{className:"w-8 h-8 text-green-600"})}),(0,s.jsx)("h3",{className:"text-2xl font-bold text-[#8B1538] mb-2",children:"Request Submitted!"}),(0,s.jsx)("p",{className:"text-gray-600",children:"Your upgrade request has been submitted for admin review. You'll be notified once it's processed."})]})}):(0,s.jsx)("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4",children:(0,s.jsxs)("div",{className:"bg-white rounded-xl max-w-2xl w-full max-h-[90vh] overflow-y-auto",children:[(0,s.jsxs)("div",{className:"p-6 flex items-center justify-between",style:{background:"linear-gradient(135deg, #FF7900 0%, #8B1538 100%)"},children:[(0,s.jsxs)("div",{className:"flex items-center gap-3",children:[(0,s.jsx)(j.Sparkles,{className:"w-6 h-6 text-white"}),(0,s.jsx)("h2",{className:"text-2xl font-bold text-white",children:"Upgrade to Event Organizer"})]}),(0,s.jsx)("button",{onClick:t,className:"text-white hover:bg-white/20 rounded-lg p-2 transition-colors",disabled:d.isPending,children:(0,s.jsx)(A.X,{className:"w-6 h-6"})})]}),(0,s.jsxs)("div",{className:"p-6",children:[(0,s.jsxs)("div",{className:"mb-6",children:[(0,s.jsx)("h3",{className:"text-lg font-semibold text-[#8B1538] mb-4",children:"Event Organizer Benefits"}),(0,s.jsx)("div",{className:"space-y-3",children:["Create and manage unlimited events","6-month free trial to explore all features","Access to event analytics and insights","Priority event listing in search results","Custom event branding and themes","Email notifications to interested attendees"].map((e,t)=>(0,s.jsxs)("div",{className:"flex items-start gap-3",children:[(0,s.jsx)("div",{className:"w-6 h-6 rounded-full bg-green-100 flex items-center justify-center flex-shrink-0 mt-0.5",children:(0,s.jsx)(P.Check,{className:"w-4 h-4 text-green-600"})}),(0,s.jsx)("p",{className:"text-gray-700",children:e})]},t))})]}),(0,s.jsx)("div",{className:"mb-6 p-4 bg-orange-50 rounded-lg border border-orange-200",children:(0,s.jsxs)("p",{className:"text-sm text-gray-700",children:[(0,s.jsx)("span",{className:"font-semibold text-[#FF7900]",children:"Free for 6 months!"})," After your trial, Event Organizer subscription is just $9.99/month. Cancel anytime."]})}),(0,s.jsxs)("form",{onSubmit:x,children:[(0,s.jsxs)("div",{className:"mb-6",children:[(0,s.jsxs)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:["Tell us why you want to become an Event Organizer ",(0,s.jsx)("span",{className:"text-red-500",children:"*"})]}),(0,s.jsx)("textarea",{value:r,onChange:e=>n(e.target.value),className:"w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-[#FF7900] focus:border-transparent transition-all resize-none",rows:4,placeholder:"Describe the types of events you plan to organize and how you'll engage the community... (minimum 20 characters)",disabled:d.isPending,required:!0}),(0,s.jsxs)("p",{className:"text-sm text-gray-500 mt-1",children:[r.length,"/20 characters minimum"]})]}),d.isError&&(0,s.jsx)("div",{className:"mb-4 p-4 bg-red-50 border border-red-200 rounded-lg",children:(0,s.jsx)("p",{className:"text-sm text-red-600",children:d.error instanceof Error?d.error.message:"Failed to submit upgrade request. Please try again."})}),(0,s.jsxs)("div",{className:"flex gap-3",children:[(0,s.jsx)(i.Button,{type:"button",onClick:t,variant:"outline",className:"flex-1",disabled:d.isPending,children:"Cancel"}),(0,s.jsx)(i.Button,{type:"submit",className:"flex-1",style:{background:"linear-gradient(135deg, #FF7900 0%, #8B1538 100%)",color:"white"},disabled:d.isPending||r.trim().length<20,children:d.isPending?"Submitting...":"Submit Request"})]})]})]})]})}):null}var M=e.i(3116);function $({upgradeRequestedAt:e}){let t,[a,r]=l.useState(!1),[n,c]=l.useState(!1),o=(t=(0,D.useQueryClient)(),(0,q.useMutation)({mutationFn:()=>L.cancelUpgrade(),onSuccess:()=>{t.invalidateQueries({queryKey:["user"]})}})),d=async()=>{try{await o.mutateAsync(),c(!1)}catch(e){console.error("Failed to cancel upgrade:",e)}};return a?null:(0,s.jsxs)(s.Fragment,{children:[(0,s.jsxs)("div",{className:"mb-6 p-4 rounded-lg border-2 flex items-start gap-4",style:{background:"linear-gradient(135deg, #FFF5E6 0%, #FFE8CC 100%)",borderColor:"#FF7900"},children:[(0,s.jsx)("div",{className:"flex-shrink-0",children:(0,s.jsx)("div",{className:"w-10 h-10 rounded-full bg-[#FF7900] flex items-center justify-center",children:(0,s.jsx)(M.Clock,{className:"w-5 h-5 text-white"})})}),(0,s.jsxs)("div",{className:"flex-1",children:[(0,s.jsx)("h3",{className:"text-lg font-semibold text-[#8B1538] mb-1",children:"Event Organizer Upgrade Pending"}),(0,s.jsx)("p",{className:"text-gray-700 text-sm mb-3",children:"Your request to become an Event Organizer is under review. Our team will review your application and notify you within 2-3 business days."}),e&&(0,s.jsxs)("p",{className:"text-xs text-gray-600",children:["Requested on: ",new Date(e).toLocaleDateString("en-US",{month:"long",day:"numeric",year:"numeric",hour:"2-digit",minute:"2-digit"})]}),(0,s.jsx)("div",{className:"mt-3 flex gap-2",children:(0,s.jsx)(i.Button,{size:"sm",variant:"outline",onClick:()=>c(!0),disabled:o.isPending,className:"text-sm",style:{borderColor:"#8B1538",color:"#8B1538"},children:o.isPending?"Canceling...":"Cancel Request"})})]}),(0,s.jsx)("button",{onClick:()=>r(!0),className:"flex-shrink-0 text-gray-500 hover:text-gray-700 transition-colors",title:"Dismiss banner",children:(0,s.jsx)(A.X,{className:"w-5 h-5"})})]}),n&&(0,s.jsx)("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4",children:(0,s.jsxs)("div",{className:"bg-white rounded-xl p-6 max-w-md w-full",children:[(0,s.jsx)("h3",{className:"text-xl font-bold text-[#8B1538] mb-3",children:"Cancel Upgrade Request?"}),(0,s.jsx)("p",{className:"text-gray-700 mb-6",children:"Are you sure you want to cancel your Event Organizer upgrade request? You can submit a new request anytime."}),o.isError&&(0,s.jsx)("div",{className:"mb-4 p-3 bg-red-50 border border-red-200 rounded-lg",children:(0,s.jsx)("p",{className:"text-sm text-red-600",children:"Failed to cancel request. Please try again."})}),(0,s.jsxs)("div",{className:"flex gap-3",children:[(0,s.jsx)(i.Button,{variant:"outline",onClick:()=>c(!1),className:"flex-1",disabled:o.isPending,children:"Keep Request"}),(0,s.jsx)(i.Button,{onClick:d,className:"flex-1",style:{background:"#8B1538",color:"white"},disabled:o.isPending,children:o.isPending?"Canceling...":"Yes, Cancel"})]})]})})]})}var O=e.i(57022),T=e.i(12726);function I({notifications:e,onNotificationClick:t,isLoading:a=!1,error:r=null,className:n=""}){return a?(0,s.jsx)("div",{className:(0,O.cn)("flex items-center justify-center py-12",n),children:(0,s.jsxs)("div",{className:"text-center",children:[(0,s.jsxs)("svg",{className:"animate-spin h-12 w-12 mx-auto mb-4 text-[#FF7900]",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",children:[(0,s.jsx)("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),(0,s.jsx)("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]}),(0,s.jsx)("p",{className:"text-gray-600",children:"Loading notifications..."})]})}):r?(0,s.jsx)("div",{className:(0,O.cn)("flex items-center justify-center py-12",n),children:(0,s.jsxs)("div",{className:"text-center",children:[(0,s.jsx)("svg",{className:"w-12 h-12 mx-auto mb-4 text-red-500",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",xmlns:"http://www.w3.org/2000/svg",children:(0,s.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 8v4m0 4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"})}),(0,s.jsx)("p",{className:"text-red-600 font-medium mb-2",children:"Failed to load notifications"}),(0,s.jsx)("p",{className:"text-gray-600 text-sm",children:r.message})]})}):0===e.length?(0,s.jsx)("div",{className:(0,O.cn)("flex items-center justify-center py-12",n),children:(0,s.jsxs)("div",{className:"text-center",children:[(0,s.jsx)("svg",{className:"w-16 h-16 mx-auto mb-4 text-gray-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",xmlns:"http://www.w3.org/2000/svg",children:(0,s.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M15 17h5l-1.405-1.405A2.032 2.032 0 0118 14.158V11a6.002 6.002 0 00-4-5.659V5a2 2 0 10-4 0v.341C7.67 6.165 6 8.388 6 11v3.159c0 .538-.214 1.055-.595 1.436L4 17h5m6 0v1a3 3 0 11-6 0v-1m6 0H9"})}),(0,s.jsx)("p",{className:"text-gray-600 font-medium mb-2",children:"No notifications"}),(0,s.jsx)("p",{className:"text-gray-500 text-sm",children:"You're all caught up!"})]})}):(0,s.jsx)("div",{className:(0,O.cn)("space-y-3",n),children:e.map(e=>{let a,r,n,i,l=T.notificationTypeConfig[e.type];return(0,s.jsx)("div",{role:"button",tabIndex:0,className:(0,O.cn)("p-4 rounded-lg border transition-all cursor-pointer","hover:shadow-md hover:border-[#FF7900]","bg-white border-gray-200","focus:outline-none focus:ring-2 focus:ring-[#FF7900] focus:ring-offset-2"),onClick:()=>t(e.id),onKeyDown:s=>{("Enter"===s.key||" "===s.key)&&(s.preventDefault(),t(e.id))},children:(0,s.jsxs)("div",{className:"flex gap-4",children:[(0,s.jsx)("div",{className:(0,O.cn)("flex-shrink-0 w-12 h-12 rounded-full","flex items-center justify-center text-xl",l.bgColor,l.color),children:l.icon}),(0,s.jsxs)("div",{className:"flex-1 min-w-0",children:[(0,s.jsxs)("div",{className:"flex items-start justify-between gap-4 mb-2",children:[(0,s.jsx)("h3",{className:"font-semibold text-[#8B1538] text-base",children:e.title}),!e.isRead&&(0,s.jsx)("span",{className:"flex-shrink-0 w-2 h-2 rounded-full bg-[#FF7900]","aria-label":"Unread"})]}),(0,s.jsx)("p",{className:"text-gray-700 text-sm mb-2 leading-relaxed",children:e.message}),(0,s.jsxs)("div",{className:"flex items-center gap-2",children:[(0,s.jsx)("span",{className:(0,O.cn)("inline-block px-2 py-0.5 rounded text-xs font-medium",l.bgColor,l.color),children:e.type.replace(/([A-Z])/g," $1").trim()}),(0,s.jsx)("span",{className:"text-gray-500 text-xs",children:(a=new Date(e.createdAt),i=Math.floor((n=Math.floor((r=Math.floor((new Date().getTime()-a.getTime())/6e4))/60))/24),r<1?"Just now":r<60?`${r} ${1===r?"minute":"minutes"} ago`:n<24?`${n} ${1===n?"hour":"hours"} ago`:i<7?`${i} ${1===i?"day":"days"} ago`:a.toLocaleDateString("en-US",{month:"short",day:"numeric",year:"numeric"}))})]})]})]})},e.id)})})}var Y=e.i(3318),H=e.i(13795);function K(){var e;let t=(0,x.useRouter)(),{user:b,clearAuth:k}=(0,n.useAuthStore)(),[F,R]=(0,l.useState)(!1),[S,A]=(0,l.useState)(!1),[P,q]=(0,l.useState)(!1),D=(0,l.useRef)(null),[L,M]=(0,l.useState)([]),[O,T]=(0,l.useState)([]),[K,V]=(0,l.useState)(!1),[W,Q]=(0,l.useState)(!1),[G,X]=(0,l.useState)([]),[J,Z]=(0,l.useState)(!1),{data:_=[],isLoading:ee}=(0,H.useUnreadNotifications)(),et=(0,H.useMarkNotificationAsRead)();(0,l.useEffect)(()=>{A(!0)},[]),(0,l.useEffect)(()=>{function e(e){D.current&&!D.current.contains(e.target)&&R(!1)}return document.addEventListener("mousedown",e),()=>document.removeEventListener("mousedown",e)},[]),(0,l.useEffect)(()=>{let e=async()=>{try{V(!0);let e=await Y.eventsRepository.getUserRsvps();M(e)}catch(e){console.error("Error loading registered events:",e)}finally{V(!1)}};b&&e()},[b]),(0,l.useEffect)(()=>{let e=async()=>{try{Q(!0);let e=await Y.eventsRepository.getUserCreatedEvents();T(e)}catch(e){console.error("Error loading created events:",e)}finally{Q(!1)}};b&&(b.role===m.UserRole.EventOrganizer||h(b.role))&&e()},[b]),(0,l.useEffect)(()=>{let e=async()=>{try{Z(!0);let e=await U.getPendingApprovals();X(e)}catch(e){console.error("Error loading approvals:",e)}finally{Z(!1)}};b&&h(b.role)&&e()},[b]);let es=async()=>{try{let e=await U.getPendingApprovals();X(e)}catch(e){console.error("Error refreshing approvals:",e)}},ea=async e=>{try{await et.mutateAsync(e)}catch(e){console.error("Failed to mark notification as read:",e)}},er=async()=>{try{await u.authRepository.logout()}catch(e){}finally{k(),t.push("/login")}};return(0,s.jsx)(r.ProtectedRoute,{children:(0,s.jsxs)("div",{className:"min-h-screen",style:{background:"#f7fafc"},children:[(0,s.jsx)("header",{className:"bg-white sticky top-0 z-40",style:{background:"rgba(255, 255, 255, 0.95)",backdropFilter:"blur(10px)",boxShadow:"0 2px 20px rgba(0,0,0,0.1)"},children:(0,s.jsx)("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-4",children:(0,s.jsxs)("div",{className:"flex items-center justify-between",children:[(0,s.jsxs)("div",{className:"flex items-center gap-8",children:[(0,s.jsx)(o.OfficialLogo,{size:"md"}),(0,s.jsxs)("nav",{className:"hidden md:flex items-center gap-6",children:[(0,s.jsx)("a",{href:"/events",className:"text-[#333] hover:text-[#FF7900] font-medium transition-colors",children:"Events"}),(0,s.jsx)("a",{href:"/forums",className:"text-[#333] hover:text-[#FF7900] font-medium transition-colors",children:"Forums"}),(0,s.jsx)("a",{href:"/business",className:"text-[#333] hover:text-[#FF7900] font-medium transition-colors",children:"Business"}),(0,s.jsx)("a",{href:"/marketplace",className:"text-[#333] hover:text-[#FF7900] font-medium transition-colors",children:"Marketplace"}),(0,s.jsx)("a",{href:"/dashboard",className:"text-[#FF7900] font-medium transition-colors",children:"Dashboard"})]})]}),(0,s.jsx)("div",{className:"flex items-center gap-4",suppressHydrationWarning:!0,children:S&&(0,s.jsxs)("div",{className:"relative",ref:D,children:[(0,s.jsxs)("button",{onClick:()=>R(!F),className:"flex items-center gap-3 hover:bg-gray-50 rounded-lg p-2 transition-colors",children:[b?.profilePhotoUrl?(0,s.jsx)(a.default,{src:b.profilePhotoUrl,alt:b.fullName,width:40,height:40,className:"w-10 h-10 rounded-full object-cover"}):(0,s.jsx)("div",{className:"w-10 h-10 rounded-full flex items-center justify-center text-white font-semibold",style:{background:"linear-gradient(135deg, #FF7900 0%, #8B1538 100%)"},children:(b?.fullName||"U").split(" ").map(e=>e[0]).join("").toUpperCase()}),(0,s.jsxs)("div",{className:"hidden md:block text-left",children:[(0,s.jsx)("p",{className:"text-sm font-medium",style:{color:"#8B1538"},children:b?.fullName}),(0,s.jsx)("p",{className:"text-xs",style:{color:"#718096"},children:b?.role})]}),(0,s.jsx)(f.ChevronDown,{className:`w-4 h-4 text-gray-600 transition-transform ${F?"rotate-180":""}`})]}),F&&(0,s.jsxs)("div",{className:"absolute right-0 mt-2 w-48 rounded-lg shadow-lg overflow-hidden z-50",style:{background:"white",border:"1px solid #e2e8f0"},children:[(0,s.jsxs)("button",{onClick:()=>{R(!1),t.push("/profile")},className:"w-full flex items-center gap-3 px-4 py-3 hover:bg-gray-50 transition-colors text-left",children:[(0,s.jsx)(y.User,{className:"w-4 h-4",style:{color:"#FF7900"}}),(0,s.jsx)("span",{style:{color:"#2d3748"},children:"Profile"})]}),(0,s.jsx)("div",{style:{borderTop:"1px solid #e2e8f0"}}),(0,s.jsxs)("button",{onClick:()=>{R(!1),er()},className:"w-full flex items-center gap-3 px-4 py-3 hover:bg-gray-50 transition-colors text-left",children:[(0,s.jsx)(v.LogOut,{className:"w-4 h-4",style:{color:"#8B1538"}}),(0,s.jsx)("span",{style:{color:"#2d3748"},children:"Logout"})]})]})]})})]})})}),(0,s.jsxs)("main",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8",children:[b?.pendingUpgradeRole&&(0,s.jsx)($,{upgradeRequestedAt:b.upgradeRequestedAt?new Date(b.upgradeRequestedAt):void 0}),(0,s.jsx)("div",{className:"mb-8",children:(0,s.jsxs)("div",{className:"flex flex-col sm:flex-row gap-3",children:[b&&b.role===m.UserRole.GeneralUser&&!b.pendingUpgradeRole&&(0,s.jsxs)(i.Button,{onClick:()=>q(!0),className:"flex-1 sm:flex-none rounded-lg",style:{background:"linear-gradient(135deg, #FF7900 0%, #8B1538 100%)",color:"white",transition:"all 0.3s"},variant:"default",children:[(0,s.jsx)(j.Sparkles,{className:"w-4 h-4 mr-2"}),"Upgrade to Event Organizer"]}),b&&(e=b.role)!==m.UserRole.GeneralUser&&(!!h(e)||(m.UserRole.EventOrganizer,!1))&&(0,s.jsxs)(i.Button,{onClick:()=>t.push("/events/create"),className:"flex-1 sm:flex-none rounded-lg",style:{background:"#FF7900",color:"white",transition:"all 0.3s"},variant:"default",children:[(0,s.jsx)(g.Calendar,{className:"w-4 h-4 mr-2"}),"Create Event"]})]})}),(0,s.jsx)("div",{children:(0,s.jsx)("div",{children:(0,s.jsx)("div",{className:"bg-white rounded-xl shadow-sm",children:b&&h(b.role)?(0,s.jsx)(c,{tabs:[{id:"registered",label:"My Registered Events",icon:p.Users,content:(0,s.jsx)(E,{events:L,isLoading:K,emptyMessage:"You haven't registered for any events yet"})},{id:"created",label:"My Created Events",icon:w,content:(0,s.jsx)(E,{events:O,isLoading:W,emptyMessage:"You haven't created any events yet"})},{id:"admin",label:"Admin Tasks",icon:N,content:(0,s.jsxs)("div",{children:[(0,s.jsx)("h3",{className:"text-lg font-semibold mb-4 text-[#8B1538]",children:"Pending Approvals"}),J?(0,s.jsx)("div",{className:"text-center py-8",children:(0,s.jsx)("p",{className:"text-gray-600",children:"Loading approvals..."})}):(0,s.jsx)(B,{approvals:G,onUpdate:es})]})},{id:"notifications",label:"Notifications",icon:C,content:(0,s.jsx)(I,{notifications:_,isLoading:ee,onNotificationClick:ea})}]}):b&&b.role===m.UserRole.EventOrganizer?(0,s.jsx)(c,{tabs:[{id:"registered",label:"My Registered Events",icon:p.Users,content:(0,s.jsx)(E,{events:L,isLoading:K,emptyMessage:"You haven't registered for any events yet"})},{id:"created",label:"My Created Events",icon:w,content:(0,s.jsx)(E,{events:O,isLoading:W,emptyMessage:"You haven't created any events yet"})},{id:"notifications",label:"Notifications",icon:C,content:(0,s.jsx)(I,{notifications:_,isLoading:ee,onNotificationClick:ea})}]}):(0,s.jsx)(c,{tabs:[{id:"registered",label:"My Registered Events",icon:p.Users,content:(0,s.jsx)(E,{events:L,isLoading:K,emptyMessage:"You haven't registered for any events yet. Browse events to join!"})},{id:"notifications",label:"Notifications",icon:C,content:(0,s.jsx)(I,{notifications:_,isLoading:ee,onNotificationClick:ea})}]})})})})]}),(0,s.jsx)(d.default,{}),(0,s.jsx)(z,{isOpen:P,onClose:()=>q(!1)})]})})}e.s(["default",()=>K],33602)}]);