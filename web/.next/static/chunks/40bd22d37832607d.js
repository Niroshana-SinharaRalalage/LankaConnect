(globalThis.TURBOPACK||(globalThis.TURBOPACK=[])).push(["object"==typeof document?document.currentScript:void 0,3318,t=>{"use strict";var e=t.i(48831);let s=new class{basePath="/events";async getEvents(t={}){let s=new URLSearchParams;void 0!==t.status&&s.append("status",String(t.status)),void 0!==t.category&&s.append("category",String(t.category)),t.startDateFrom&&s.append("startDateFrom",t.startDateFrom),t.startDateTo&&s.append("startDateTo",t.startDateTo),void 0!==t.isFreeOnly&&s.append("isFreeOnly",String(t.isFreeOnly)),t.city&&s.append("city",t.city);let r=s.toString(),i=r?`${this.basePath}?${r}`:this.basePath;return await e.apiClient.get(i)}async getEventById(t){return await e.apiClient.get(`${this.basePath}/${t}`)}async searchEvents(t){let s=new URLSearchParams({searchTerm:t.searchTerm,page:String(t.page??1),pageSize:String(t.pageSize??20)});return void 0!==t.category&&s.append("category",String(t.category)),void 0!==t.isFreeOnly&&s.append("isFreeOnly",String(t.isFreeOnly)),t.startDateFrom&&s.append("startDateFrom",t.startDateFrom),await e.apiClient.get(`${this.basePath}/search?${s.toString()}`)}async getNearbyEvents(t){let s=new URLSearchParams({latitude:String(t.latitude),longitude:String(t.longitude),radiusKm:String(t.radiusKm)});return void 0!==t.category&&s.append("category",String(t.category)),void 0!==t.isFreeOnly&&s.append("isFreeOnly",String(t.isFreeOnly)),t.startDateFrom&&s.append("startDateFrom",t.startDateFrom),await e.apiClient.get(`${this.basePath}/nearby?${s.toString()}`)}async createEvent(t){return(await e.apiClient.post(this.basePath,t)).id}async updateEvent(t,s){await e.apiClient.put(`${this.basePath}/${t}`,{...s,eventId:t})}async deleteEvent(t){await e.apiClient.delete(`${this.basePath}/${t}`)}async submitForApproval(t){await e.apiClient.post(`${this.basePath}/${t}/submit`)}async publishEvent(t){await e.apiClient.post(`${this.basePath}/${t}/publish`)}async cancelEvent(t,s){await e.apiClient.post(`${this.basePath}/${t}/cancel`,{reason:s})}async postponeEvent(t,s){await e.apiClient.post(`${this.basePath}/${t}/postpone`,{reason:s})}async rsvpToEvent(t,s,r=1){await e.apiClient.post(`${this.basePath}/${t}/rsvp`,{eventId:t,userId:s,quantity:r})}async cancelRsvp(t){await e.apiClient.delete(`${this.basePath}/${t}/rsvp`)}async updateRsvp(t,s,r){await e.apiClient.put(`${this.basePath}/${t}/rsvp`,{userId:s,newQuantity:r})}async getUserRsvps(){return await e.apiClient.get(`${this.basePath}/my-rsvps`)}async getUpcomingEvents(){return await e.apiClient.get(`${this.basePath}/upcoming`)}async addToWaitingList(t){await e.apiClient.post(`${this.basePath}/${t}/waiting-list`)}async removeFromWaitingList(t){await e.apiClient.delete(`${this.basePath}/${t}/waiting-list`)}async getWaitingList(t){return await e.apiClient.get(`${this.basePath}/${t}/waiting-list`)}async uploadEventImage(t,s){let r=new FormData;return r.append("image",s),await e.apiClient.postMultipart(`${this.basePath}/${t}/images`,r)}async deleteEventImage(t,s){await e.apiClient.delete(`${this.basePath}/${t}/images/${s}`)}async getEventIcs(t){let e=await fetch(`https://lankaconnect-api-staging.politebay-79d6e8a2.eastus2.azurecontainerapps.io/api${this.basePath}/${t}/ics`);if(!e.ok)throw Error("Failed to download ICS file");return await e.blob()}async recordEventShare(t,s){await e.apiClient.post(`${this.basePath}/${t}/share`,{platform:s})}};t.s(["eventsRepository",0,s])},45771,t=>{"use strict";var e,s=((e={})[e.Draft=0]="Draft",e[e.Published=1]="Published",e[e.Active=2]="Active",e[e.Postponed=3]="Postponed",e[e.Cancelled=4]="Cancelled",e[e.Completed=5]="Completed",e[e.Archived=6]="Archived",e[e.UnderReview=7]="UnderReview",e);t.s(["EventStatus",()=>s])},54616,t=>{"use strict";var e=t.i(71645),s=t.i(14272),r=t.i(40143),i=t.i(15823),a=t.i(19273),n=class extends i.Subscribable{#t;#e=void 0;#s;#r;constructor(t,e){super(),this.#t=t,this.setOptions(e),this.bindMethods(),this.#i()}bindMethods(){this.mutate=this.mutate.bind(this),this.reset=this.reset.bind(this)}setOptions(t){let e=this.options;this.options=this.#t.defaultMutationOptions(t),(0,a.shallowEqualObjects)(this.options,e)||this.#t.getMutationCache().notify({type:"observerOptionsUpdated",mutation:this.#s,observer:this}),e?.mutationKey&&this.options.mutationKey&&(0,a.hashKey)(e.mutationKey)!==(0,a.hashKey)(this.options.mutationKey)?this.reset():this.#s?.state.status==="pending"&&this.#s.setOptions(this.options)}onUnsubscribe(){this.hasListeners()||this.#s?.removeObserver(this)}onMutationUpdate(t){this.#i(),this.#a(t)}getCurrentResult(){return this.#e}reset(){this.#s?.removeObserver(this),this.#s=void 0,this.#i(),this.#a()}mutate(t,e){return this.#r=e,this.#s?.removeObserver(this),this.#s=this.#t.getMutationCache().build(this.#t,this.options),this.#s.addObserver(this),this.#s.execute(t)}#i(){let t=this.#s?.state??(0,s.getDefaultState)();this.#e={...t,isPending:"pending"===t.status,isSuccess:"success"===t.status,isError:"error"===t.status,isIdle:"idle"===t.status,mutate:this.mutate,reset:this.reset}}#a(t){r.notifyManager.batch(()=>{if(this.#r&&this.hasListeners()){let e=this.#e.variables,s=this.#e.context,r={client:this.#t,meta:this.options.meta,mutationKey:this.options.mutationKey};t?.type==="success"?(this.#r.onSuccess?.(t.data,e,s,r),this.#r.onSettled?.(t.data,null,e,s,r)):t?.type==="error"&&(this.#r.onError?.(t.error,e,s,r),this.#r.onSettled?.(void 0,t.error,e,s,r))}this.listeners.forEach(t=>{t(this.#e)})})}},o=t.i(12598);function u(t,s){let i=(0,o.useQueryClient)(s),[u]=e.useState(()=>new n(i,t));e.useEffect(()=>{u.setOptions(t)},[u,t]);let l=e.useSyncExternalStore(e.useCallback(t=>u.subscribe(r.notifyManager.batchCalls(t)),[u]),()=>u.getCurrentResult(),()=>u.getCurrentResult()),c=e.useCallback((t,e)=>{u.mutate(t,e).catch(a.noop)},[u]);if(l.error&&(0,a.shouldThrowError)(u.options.throwOnError,[l.error]))throw l.error;return{...l,mutate:c,mutateAsync:l.mutate}}t.s(["useMutation",()=>u],54616)},66027,t=>{"use strict";let e;var s=t.i(75555),r=t.i(40143),i=t.i(86491),a=t.i(15823),n=t.i(93803),o=t.i(19273),u=t.i(80166),l=class extends a.Subscribable{constructor(t,e){super(),this.options=e,this.#t=t,this.#n=null,this.#o=(0,n.pendingThenable)(),this.bindMethods(),this.setOptions(e)}#t;#u=void 0;#l=void 0;#e=void 0;#c;#h;#o;#n;#d;#p;#y;#g;#f;#v;#b=new Set;bindMethods(){this.refetch=this.refetch.bind(this)}onSubscribe(){1===this.listeners.size&&(this.#u.addObserver(this),c(this.#u,this.options)?this.#m():this.updateResult(),this.#R())}onUnsubscribe(){this.hasListeners()||this.destroy()}shouldFetchOnReconnect(){return h(this.#u,this.options,this.options.refetchOnReconnect)}shouldFetchOnWindowFocus(){return h(this.#u,this.options,this.options.refetchOnWindowFocus)}destroy(){this.listeners=new Set,this.#S(),this.#E(),this.#u.removeObserver(this)}setOptions(t){let e=this.options,s=this.#u;if(this.options=this.#t.defaultQueryOptions(t),void 0!==this.options.enabled&&"boolean"!=typeof this.options.enabled&&"function"!=typeof this.options.enabled&&"boolean"!=typeof(0,o.resolveEnabled)(this.options.enabled,this.#u))throw Error("Expected enabled to be a boolean or a callback that returns a boolean");this.#O(),this.#u.setOptions(this.options),e._defaulted&&!(0,o.shallowEqualObjects)(this.options,e)&&this.#t.getQueryCache().notify({type:"observerOptionsUpdated",query:this.#u,observer:this});let r=this.hasListeners();r&&d(this.#u,s,this.options,e)&&this.#m(),this.updateResult(),r&&(this.#u!==s||(0,o.resolveEnabled)(this.options.enabled,this.#u)!==(0,o.resolveEnabled)(e.enabled,this.#u)||(0,o.resolveStaleTime)(this.options.staleTime,this.#u)!==(0,o.resolveStaleTime)(e.staleTime,this.#u))&&this.#x();let i=this.#C();r&&(this.#u!==s||(0,o.resolveEnabled)(this.options.enabled,this.#u)!==(0,o.resolveEnabled)(e.enabled,this.#u)||i!==this.#v)&&this.#Q(i)}getOptimisticResult(t){var e,s;let r=this.#t.getQueryCache().build(this.#t,t),i=this.createResult(r,t);return e=this,s=i,(0,o.shallowEqualObjects)(e.getCurrentResult(),s)||(this.#e=i,this.#h=this.options,this.#c=this.#u.state),i}getCurrentResult(){return this.#e}trackResult(t,e){return new Proxy(t,{get:(t,s)=>(this.trackProp(s),e?.(s),"promise"===s&&(this.trackProp("data"),this.options.experimental_prefetchInRender||"pending"!==this.#o.status||this.#o.reject(Error("experimental_prefetchInRender feature flag is not enabled"))),Reflect.get(t,s))})}trackProp(t){this.#b.add(t)}getCurrentQuery(){return this.#u}refetch({...t}={}){return this.fetch({...t})}fetchOptimistic(t){let e=this.#t.defaultQueryOptions(t),s=this.#t.getQueryCache().build(this.#t,e);return s.fetch().then(()=>this.createResult(s,e))}fetch(t){return this.#m({...t,cancelRefetch:t.cancelRefetch??!0}).then(()=>(this.updateResult(),this.#e))}#m(t){this.#O();let e=this.#u.fetch(this.options,t);return t?.throwOnError||(e=e.catch(o.noop)),e}#x(){this.#S();let t=(0,o.resolveStaleTime)(this.options.staleTime,this.#u);if(o.isServer||this.#e.isStale||!(0,o.isValidTimeout)(t))return;let e=(0,o.timeUntilStale)(this.#e.dataUpdatedAt,t);this.#g=u.timeoutManager.setTimeout(()=>{this.#e.isStale||this.updateResult()},e+1)}#C(){return("function"==typeof this.options.refetchInterval?this.options.refetchInterval(this.#u):this.options.refetchInterval)??!1}#Q(t){this.#E(),this.#v=t,!o.isServer&&!1!==(0,o.resolveEnabled)(this.options.enabled,this.#u)&&(0,o.isValidTimeout)(this.#v)&&0!==this.#v&&(this.#f=u.timeoutManager.setInterval(()=>{(this.options.refetchIntervalInBackground||s.focusManager.isFocused())&&this.#m()},this.#v))}#R(){this.#x(),this.#Q(this.#C())}#S(){this.#g&&(u.timeoutManager.clearTimeout(this.#g),this.#g=void 0)}#E(){this.#f&&(u.timeoutManager.clearInterval(this.#f),this.#f=void 0)}createResult(t,e){let s,r=this.#u,a=this.options,u=this.#e,l=this.#c,h=this.#h,y=t!==r?t.state:this.#l,{state:g}=t,f={...g},v=!1;if(e._optimisticResults){let s=this.hasListeners(),n=!s&&c(t,e),o=s&&d(t,r,e,a);(n||o)&&(f={...f,...(0,i.fetchState)(g.data,t.options)}),"isRestoring"===e._optimisticResults&&(f.fetchStatus="idle")}let{error:b,errorUpdatedAt:m,status:R}=f;s=f.data;let S=!1;if(void 0!==e.placeholderData&&void 0===s&&"pending"===R){let t;u?.isPlaceholderData&&e.placeholderData===h?.placeholderData?(t=u.data,S=!0):t="function"==typeof e.placeholderData?e.placeholderData(this.#y?.state.data,this.#y):e.placeholderData,void 0!==t&&(R="success",s=(0,o.replaceData)(u?.data,t,e),v=!0)}if(e.select&&void 0!==s&&!S)if(u&&s===l?.data&&e.select===this.#d)s=this.#p;else try{this.#d=e.select,s=e.select(s),s=(0,o.replaceData)(u?.data,s,e),this.#p=s,this.#n=null}catch(t){this.#n=t}this.#n&&(b=this.#n,s=this.#p,m=Date.now(),R="error");let E="fetching"===f.fetchStatus,O="pending"===R,x="error"===R,C=O&&E,Q=void 0!==s,w={status:R,fetchStatus:f.fetchStatus,isPending:O,isSuccess:"success"===R,isError:x,isInitialLoading:C,isLoading:C,data:s,dataUpdatedAt:f.dataUpdatedAt,error:b,errorUpdatedAt:m,failureCount:f.fetchFailureCount,failureReason:f.fetchFailureReason,errorUpdateCount:f.errorUpdateCount,isFetched:f.dataUpdateCount>0||f.errorUpdateCount>0,isFetchedAfterMount:f.dataUpdateCount>y.dataUpdateCount||f.errorUpdateCount>y.errorUpdateCount,isFetching:E,isRefetching:E&&!O,isLoadingError:x&&!Q,isPaused:"paused"===f.fetchStatus,isPlaceholderData:v,isRefetchError:x&&Q,isStale:p(t,e),refetch:this.refetch,promise:this.#o,isEnabled:!1!==(0,o.resolveEnabled)(e.enabled,t)};if(this.options.experimental_prefetchInRender){let e=t=>{"error"===w.status?t.reject(w.error):void 0!==w.data&&t.resolve(w.data)},s=()=>{e(this.#o=w.promise=(0,n.pendingThenable)())},i=this.#o;switch(i.status){case"pending":t.queryHash===r.queryHash&&e(i);break;case"fulfilled":("error"===w.status||w.data!==i.value)&&s();break;case"rejected":("error"!==w.status||w.error!==i.reason)&&s()}}return w}updateResult(){let t=this.#e,e=this.createResult(this.#u,this.options);if(this.#c=this.#u.state,this.#h=this.options,void 0!==this.#c.data&&(this.#y=this.#u),(0,o.shallowEqualObjects)(e,t))return;this.#e=e;let s=()=>{if(!t)return!0;let{notifyOnChangeProps:e}=this.options,s="function"==typeof e?e():e;if("all"===s||!s&&!this.#b.size)return!0;let r=new Set(s??this.#b);return this.options.throwOnError&&r.add("error"),Object.keys(this.#e).some(e=>this.#e[e]!==t[e]&&r.has(e))};this.#a({listeners:s()})}#O(){let t=this.#t.getQueryCache().build(this.#t,this.options);if(t===this.#u)return;let e=this.#u;this.#u=t,this.#l=t.state,this.hasListeners()&&(e?.removeObserver(this),t.addObserver(this))}onQueryUpdate(){this.updateResult(),this.hasListeners()&&this.#R()}#a(t){r.notifyManager.batch(()=>{t.listeners&&this.listeners.forEach(t=>{t(this.#e)}),this.#t.getQueryCache().notify({query:this.#u,type:"observerResultsUpdated"})})}};function c(t,e){return!1!==(0,o.resolveEnabled)(e.enabled,t)&&void 0===t.state.data&&("error"!==t.state.status||!1!==e.retryOnMount)||void 0!==t.state.data&&h(t,e,e.refetchOnMount)}function h(t,e,s){if(!1!==(0,o.resolveEnabled)(e.enabled,t)&&"static"!==(0,o.resolveStaleTime)(e.staleTime,t)){let r="function"==typeof s?s(t):s;return"always"===r||!1!==r&&p(t,e)}return!1}function d(t,e,s,r){return(t!==e||!1===(0,o.resolveEnabled)(r.enabled,t))&&(!s.suspense||"error"!==t.state.status)&&p(t,s)}function p(t,e){return!1!==(0,o.resolveEnabled)(e.enabled,t)&&t.isStaleByTime((0,o.resolveStaleTime)(e.staleTime,t))}t.i(47167);var y=t.i(71645),g=t.i(12598);t.i(43476);var f=y.createContext((e=!1,{clearReset:()=>{e=!1},reset:()=>{e=!0},isReset:()=>e})),v=y.createContext(!1);v.Provider;var b=(t,e,s)=>e.fetchOptimistic(t).catch(()=>{s.clearReset()});function m(t,e){return function(t,e,s){let i=y.useContext(v),a=y.useContext(f),n=(0,g.useQueryClient)(s),u=n.defaultQueryOptions(t);if(n.getDefaultOptions().queries?._experimental_beforeQuery?.(u),u._optimisticResults=i?"isRestoring":"optimistic",u.suspense){let t=t=>"static"===t?t:Math.max(t??1e3,1e3),e=u.staleTime;u.staleTime="function"==typeof e?(...s)=>t(e(...s)):t(e),"number"==typeof u.gcTime&&(u.gcTime=Math.max(u.gcTime,1e3))}(u.suspense||u.throwOnError||u.experimental_prefetchInRender)&&!a.isReset()&&(u.retryOnMount=!1),y.useEffect(()=>{a.clearReset()},[a]);let l=!n.getQueryCache().get(u.queryHash),[c]=y.useState(()=>new e(n,u)),h=c.getOptimisticResult(u),d=!i&&!1!==t.subscribed;if(y.useSyncExternalStore(y.useCallback(t=>{let e=d?c.subscribe(r.notifyManager.batchCalls(t)):o.noop;return c.updateResult(),e},[c,d]),()=>c.getCurrentResult(),()=>c.getCurrentResult()),y.useEffect(()=>{c.setOptions(u)},[u,c]),u?.suspense&&h.isPending)throw b(u,c,a);if((({result:t,errorResetBoundary:e,throwOnError:s,query:r,suspense:i})=>t.isError&&!e.isReset()&&!t.isFetching&&r&&(i&&void 0===t.data||(0,o.shouldThrowError)(s,[t.error,r])))({result:h,errorResetBoundary:a,throwOnError:u.throwOnError,query:n.getQueryCache().get(u.queryHash),suspense:u.suspense}))throw h.error;if(n.getDefaultOptions().queries?._experimental_afterQuery?.(u,h),u.experimental_prefetchInRender&&!o.isServer&&h.isLoading&&h.isFetching&&!i){let t=l?b(u,c,a):n.getQueryCache().get(u.queryHash)?.promise;t?.catch(o.noop).finally(()=>{c.updateResult()})}return u.notifyOnChangeProps?h:c.trackResult(h)}(t,l,e)}t.s(["useQuery",()=>m],66027)},97353,t=>{"use strict";var e=t.i(66027),s=(t.i(54616),t.i(12598),t.i(3318));let r={all:["events"],lists:()=>[...r.all,"list"],list:t=>[...r.lists(),t],details:()=>[...r.all,"detail"],detail:t=>[...r.details(),t],search:t=>[...r.all,"search",t]};function i(t,i){return(0,e.useQuery)({queryKey:r.list(t||{}),queryFn:async()=>await s.eventsRepository.getEvents(t),staleTime:3e5,refetchOnWindowFocus:!0,retry:1,...i})}t.s(["useEvents",()=>i])},16294,t=>{"use strict";var e=t.i(43476),s=t.i(71645),r=t.i(97353),i=t.i(45771),a=t.i(3318);function n(){let[t,n]=s.default.useState(null),[o,u]=s.default.useState(null),{data:l,isLoading:c,error:h,fetchStatus:d,status:p}=(0,r.useEvents)({status:i.EventStatus.Published,startDateFrom:new Date().toISOString()});return s.default.useEffect(()=>{a.eventsRepository.getEvents({status:i.EventStatus.Published,startDateFrom:new Date().toISOString()}).then(t=>{console.log("✅ Direct API call SUCCESS:",t),n(t)}).catch(t=>{console.error("❌ Direct API call ERROR:",t),u(t)})},[]),console.log("=== DEBUG INFO ==="),console.log("API URL:","https://lankaconnect-api-staging.politebay-79d6e8a2.eastus2.azurecontainerapps.io/api"),console.log("React Query - Events:",l),console.log("React Query - Loading:",c),console.log("React Query - Error:",h),console.log("React Query - Status:",p),console.log("React Query - Fetch Status:",d),console.log("Direct API - Result:",t),console.log("Direct API - Error:",o),(0,e.jsxs)("div",{style:{padding:"20px",fontFamily:"monospace"},children:[(0,e.jsx)("h1",{children:"Events API Test Page"}),(0,e.jsxs)("div",{style:{marginTop:"20px",padding:"10px",background:"#f0f0f0"},children:[(0,e.jsx)("h2",{children:"Configuration"}),(0,e.jsxs)("p",{children:[(0,e.jsx)("strong",{children:"API URL:"})," ","https://lankaconnect-api-staging.politebay-79d6e8a2.eastus2.azurecontainerapps.io/api"]})]}),(0,e.jsxs)("div",{style:{marginTop:"20px",padding:"10px",background:"#f0f0f0"},children:[(0,e.jsx)("h2",{children:"React Query Status"}),(0,e.jsxs)("p",{children:[(0,e.jsx)("strong",{children:"Loading:"})," ",c?"YES":"NO"]}),(0,e.jsxs)("p",{children:[(0,e.jsx)("strong",{children:"Status:"})," ",p]}),(0,e.jsxs)("p",{children:[(0,e.jsx)("strong",{children:"Fetch Status:"})," ",d]}),(0,e.jsxs)("p",{children:[(0,e.jsx)("strong",{children:"Error:"})," ",h?JSON.stringify(h,null,2):"None"]}),(0,e.jsxs)("p",{children:[(0,e.jsx)("strong",{children:"Events Count:"})," ",l?.length||0]})]}),(0,e.jsxs)("div",{style:{marginTop:"20px",padding:"10px",background:"#e0e0ff"},children:[(0,e.jsx)("h2",{children:"Direct API Call Status"}),(0,e.jsxs)("p",{children:[(0,e.jsx)("strong",{children:"Result:"})," ",t?`${t.length} events`:"Pending..."]}),(0,e.jsxs)("p",{children:[(0,e.jsx)("strong",{children:"Error:"})," ",o?JSON.stringify(o,null,2):"None"]})]}),h&&(0,e.jsxs)("div",{style:{marginTop:"20px",padding:"10px",background:"#ffcccc"},children:[(0,e.jsx)("h2",{children:"Error Details"}),(0,e.jsx)("pre",{children:JSON.stringify(h,null,2)})]}),l&&l.length>0&&(0,e.jsxs)("div",{style:{marginTop:"20px",padding:"10px",background:"#ccffcc"},children:[(0,e.jsxs)("h2",{children:["Events (",l.length,")"]}),(0,e.jsx)("ul",{children:l.map(t=>(0,e.jsxs)("li",{children:[(0,e.jsx)("strong",{children:t.title})," - ",t.city,", ",t.state]},t.id))})]}),c&&(0,e.jsxs)("div",{style:{marginTop:"20px",padding:"10px",background:"#ffffcc"},children:[(0,e.jsx)("h2",{children:"Loading..."}),(0,e.jsx)("p",{children:"Fetching events from API..."})]})]})}t.s(["default",()=>n])}]);