(globalThis.TURBOPACK||(globalThis.TURBOPACK=[])).push(["object"==typeof document?document.currentScript:void 0,66027,e=>{"use strict";let t;var r=e.i(75555),s=e.i(40143),a=e.i(86491),i=e.i(15823),l=e.i(93803),n=e.i(19273),o=e.i(80166),c=class extends i.Subscribable{constructor(e,t){super(),this.options=t,this.#e=e,this.#t=null,this.#r=(0,l.pendingThenable)(),this.bindMethods(),this.setOptions(t)}#e;#s=void 0;#a=void 0;#i=void 0;#l;#n;#r;#t;#o;#c;#h;#d;#u;#m;#f=new Set;bindMethods(){this.refetch=this.refetch.bind(this)}onSubscribe(){1===this.listeners.size&&(this.#s.addObserver(this),h(this.#s,this.options)?this.#p():this.updateResult(),this.#g())}onUnsubscribe(){this.hasListeners()||this.destroy()}shouldFetchOnReconnect(){return d(this.#s,this.options,this.options.refetchOnReconnect)}shouldFetchOnWindowFocus(){return d(this.#s,this.options,this.options.refetchOnWindowFocus)}destroy(){this.listeners=new Set,this.#b(),this.#x(),this.#s.removeObserver(this)}setOptions(e){let t=this.options,r=this.#s;if(this.options=this.#e.defaultQueryOptions(e),void 0!==this.options.enabled&&"boolean"!=typeof this.options.enabled&&"function"!=typeof this.options.enabled&&"boolean"!=typeof(0,n.resolveEnabled)(this.options.enabled,this.#s))throw Error("Expected enabled to be a boolean or a callback that returns a boolean");this.#v(),this.#s.setOptions(this.options),t._defaulted&&!(0,n.shallowEqualObjects)(this.options,t)&&this.#e.getQueryCache().notify({type:"observerOptionsUpdated",query:this.#s,observer:this});let s=this.hasListeners();s&&u(this.#s,r,this.options,t)&&this.#p(),this.updateResult(),s&&(this.#s!==r||(0,n.resolveEnabled)(this.options.enabled,this.#s)!==(0,n.resolveEnabled)(t.enabled,this.#s)||(0,n.resolveStaleTime)(this.options.staleTime,this.#s)!==(0,n.resolveStaleTime)(t.staleTime,this.#s))&&this.#y();let a=this.#w();s&&(this.#s!==r||(0,n.resolveEnabled)(this.options.enabled,this.#s)!==(0,n.resolveEnabled)(t.enabled,this.#s)||a!==this.#m)&&this.#j(a)}getOptimisticResult(e){var t,r;let s=this.#e.getQueryCache().build(this.#e,e),a=this.createResult(s,e);return t=this,r=a,(0,n.shallowEqualObjects)(t.getCurrentResult(),r)||(this.#i=a,this.#n=this.options,this.#l=this.#s.state),a}getCurrentResult(){return this.#i}trackResult(e,t){return new Proxy(e,{get:(e,r)=>(this.trackProp(r),t?.(r),"promise"===r&&(this.trackProp("data"),this.options.experimental_prefetchInRender||"pending"!==this.#r.status||this.#r.reject(Error("experimental_prefetchInRender feature flag is not enabled"))),Reflect.get(e,r))})}trackProp(e){this.#f.add(e)}getCurrentQuery(){return this.#s}refetch({...e}={}){return this.fetch({...e})}fetchOptimistic(e){let t=this.#e.defaultQueryOptions(e),r=this.#e.getQueryCache().build(this.#e,t);return r.fetch().then(()=>this.createResult(r,t))}fetch(e){return this.#p({...e,cancelRefetch:e.cancelRefetch??!0}).then(()=>(this.updateResult(),this.#i))}#p(e){this.#v();let t=this.#s.fetch(this.options,e);return e?.throwOnError||(t=t.catch(n.noop)),t}#y(){this.#b();let e=(0,n.resolveStaleTime)(this.options.staleTime,this.#s);if(n.isServer||this.#i.isStale||!(0,n.isValidTimeout)(e))return;let t=(0,n.timeUntilStale)(this.#i.dataUpdatedAt,e);this.#d=o.timeoutManager.setTimeout(()=>{this.#i.isStale||this.updateResult()},t+1)}#w(){return("function"==typeof this.options.refetchInterval?this.options.refetchInterval(this.#s):this.options.refetchInterval)??!1}#j(e){this.#x(),this.#m=e,!n.isServer&&!1!==(0,n.resolveEnabled)(this.options.enabled,this.#s)&&(0,n.isValidTimeout)(this.#m)&&0!==this.#m&&(this.#u=o.timeoutManager.setInterval(()=>{(this.options.refetchIntervalInBackground||r.focusManager.isFocused())&&this.#p()},this.#m))}#g(){this.#y(),this.#j(this.#w())}#b(){this.#d&&(o.timeoutManager.clearTimeout(this.#d),this.#d=void 0)}#x(){this.#u&&(o.timeoutManager.clearInterval(this.#u),this.#u=void 0)}createResult(e,t){let r,s=this.#s,i=this.options,o=this.#i,c=this.#l,d=this.#n,f=e!==s?e.state:this.#a,{state:p}=e,g={...p},b=!1;if(t._optimisticResults){let r=this.hasListeners(),l=!r&&h(e,t),n=r&&u(e,s,t,i);(l||n)&&(g={...g,...(0,a.fetchState)(p.data,e.options)}),"isRestoring"===t._optimisticResults&&(g.fetchStatus="idle")}let{error:x,errorUpdatedAt:v,status:y}=g;r=g.data;let w=!1;if(void 0!==t.placeholderData&&void 0===r&&"pending"===y){let e;o?.isPlaceholderData&&t.placeholderData===d?.placeholderData?(e=o.data,w=!0):e="function"==typeof t.placeholderData?t.placeholderData(this.#h?.state.data,this.#h):t.placeholderData,void 0!==e&&(y="success",r=(0,n.replaceData)(o?.data,e,t),b=!0)}if(t.select&&void 0!==r&&!w)if(o&&r===c?.data&&t.select===this.#o)r=this.#c;else try{this.#o=t.select,r=t.select(r),r=(0,n.replaceData)(o?.data,r,t),this.#c=r,this.#t=null}catch(e){this.#t=e}this.#t&&(x=this.#t,r=this.#c,v=Date.now(),y="error");let j="fetching"===g.fetchStatus,R="pending"===y,S="error"===y,N=R&&j,C=void 0!==r,k={status:y,fetchStatus:g.fetchStatus,isPending:R,isSuccess:"success"===y,isError:S,isInitialLoading:N,isLoading:N,data:r,dataUpdatedAt:g.dataUpdatedAt,error:x,errorUpdatedAt:v,failureCount:g.fetchFailureCount,failureReason:g.fetchFailureReason,errorUpdateCount:g.errorUpdateCount,isFetched:g.dataUpdateCount>0||g.errorUpdateCount>0,isFetchedAfterMount:g.dataUpdateCount>f.dataUpdateCount||g.errorUpdateCount>f.errorUpdateCount,isFetching:j,isRefetching:j&&!R,isLoadingError:S&&!C,isPaused:"paused"===g.fetchStatus,isPlaceholderData:b,isRefetchError:S&&C,isStale:m(e,t),refetch:this.refetch,promise:this.#r,isEnabled:!1!==(0,n.resolveEnabled)(t.enabled,e)};if(this.options.experimental_prefetchInRender){let t=e=>{"error"===k.status?e.reject(k.error):void 0!==k.data&&e.resolve(k.data)},r=()=>{t(this.#r=k.promise=(0,l.pendingThenable)())},a=this.#r;switch(a.status){case"pending":e.queryHash===s.queryHash&&t(a);break;case"fulfilled":("error"===k.status||k.data!==a.value)&&r();break;case"rejected":("error"!==k.status||k.error!==a.reason)&&r()}}return k}updateResult(){let e=this.#i,t=this.createResult(this.#s,this.options);if(this.#l=this.#s.state,this.#n=this.options,void 0!==this.#l.data&&(this.#h=this.#s),(0,n.shallowEqualObjects)(t,e))return;this.#i=t;let r=()=>{if(!e)return!0;let{notifyOnChangeProps:t}=this.options,r="function"==typeof t?t():t;if("all"===r||!r&&!this.#f.size)return!0;let s=new Set(r??this.#f);return this.options.throwOnError&&s.add("error"),Object.keys(this.#i).some(t=>this.#i[t]!==e[t]&&s.has(t))};this.#R({listeners:r()})}#v(){let e=this.#e.getQueryCache().build(this.#e,this.options);if(e===this.#s)return;let t=this.#s;this.#s=e,this.#a=e.state,this.hasListeners()&&(t?.removeObserver(this),e.addObserver(this))}onQueryUpdate(){this.updateResult(),this.hasListeners()&&this.#g()}#R(e){s.notifyManager.batch(()=>{e.listeners&&this.listeners.forEach(e=>{e(this.#i)}),this.#e.getQueryCache().notify({query:this.#s,type:"observerResultsUpdated"})})}};function h(e,t){return!1!==(0,n.resolveEnabled)(t.enabled,e)&&void 0===e.state.data&&("error"!==e.state.status||!1!==t.retryOnMount)||void 0!==e.state.data&&d(e,t,t.refetchOnMount)}function d(e,t,r){if(!1!==(0,n.resolveEnabled)(t.enabled,e)&&"static"!==(0,n.resolveStaleTime)(t.staleTime,e)){let s="function"==typeof r?r(e):r;return"always"===s||!1!==s&&m(e,t)}return!1}function u(e,t,r,s){return(e!==t||!1===(0,n.resolveEnabled)(s.enabled,e))&&(!r.suspense||"error"!==e.state.status)&&m(e,r)}function m(e,t){return!1!==(0,n.resolveEnabled)(t.enabled,e)&&e.isStaleByTime((0,n.resolveStaleTime)(t.staleTime,e))}e.i(47167);var f=e.i(71645),p=e.i(12598);e.i(43476);var g=f.createContext((t=!1,{clearReset:()=>{t=!1},reset:()=>{t=!0},isReset:()=>t})),b=f.createContext(!1);b.Provider;var x=(e,t,r)=>t.fetchOptimistic(e).catch(()=>{r.clearReset()});function v(e,t){return function(e,t,r){let a=f.useContext(b),i=f.useContext(g),l=(0,p.useQueryClient)(r),o=l.defaultQueryOptions(e);if(l.getDefaultOptions().queries?._experimental_beforeQuery?.(o),o._optimisticResults=a?"isRestoring":"optimistic",o.suspense){let e=e=>"static"===e?e:Math.max(e??1e3,1e3),t=o.staleTime;o.staleTime="function"==typeof t?(...r)=>e(t(...r)):e(t),"number"==typeof o.gcTime&&(o.gcTime=Math.max(o.gcTime,1e3))}(o.suspense||o.throwOnError||o.experimental_prefetchInRender)&&!i.isReset()&&(o.retryOnMount=!1),f.useEffect(()=>{i.clearReset()},[i]);let c=!l.getQueryCache().get(o.queryHash),[h]=f.useState(()=>new t(l,o)),d=h.getOptimisticResult(o),u=!a&&!1!==e.subscribed;if(f.useSyncExternalStore(f.useCallback(e=>{let t=u?h.subscribe(s.notifyManager.batchCalls(e)):n.noop;return h.updateResult(),t},[h,u]),()=>h.getCurrentResult(),()=>h.getCurrentResult()),f.useEffect(()=>{h.setOptions(o)},[o,h]),o?.suspense&&d.isPending)throw x(o,h,i);if((({result:e,errorResetBoundary:t,throwOnError:r,query:s,suspense:a})=>e.isError&&!t.isReset()&&!e.isFetching&&s&&(a&&void 0===e.data||(0,n.shouldThrowError)(r,[e.error,s])))({result:d,errorResetBoundary:i,throwOnError:o.throwOnError,query:l.getQueryCache().get(o.queryHash),suspense:o.suspense}))throw d.error;if(l.getDefaultOptions().queries?._experimental_afterQuery?.(o,d),o.experimental_prefetchInRender&&!n.isServer&&d.isLoading&&d.isFetching&&!a){let e=c?x(o,h,i):l.getQueryCache().get(o.queryHash)?.promise;e?.catch(n.noop).finally(()=>{h.updateResult()})}return o.notifyOnChangeProps?d:h.trackResult(d)}(e,c,t)}e.s(["useQuery",()=>v],66027)},84924,e=>{"use strict";var t=e.i(43476),r=e.i(57688),s=e.i(57022);let a={sm:"h-10 w-10",md:"h-16 w-16",lg:"h-20 w-20",xl:"h-24 w-24"},i={sm:"text-lg",md:"text-xl",lg:"text-2xl",xl:"text-3xl"},l={sm:40,md:64,lg:80,xl:96};function n({size:e="md",showText:n=!1,className:o}){return(0,t.jsxs)("div",{className:(0,s.cn)("flex items-center gap-3",o),suppressHydrationWarning:!0,children:[(0,t.jsx)("div",{className:(0,s.cn)(a[e],"relative flex-shrink-0"),children:(0,t.jsx)(r.default,{src:"/images/lankaconnect-logo.png",alt:"LankaConnect",width:l[e],height:l[e],className:"object-contain w-full h-full",priority:!0})}),n&&(0,t.jsx)("span",{className:(0,s.cn)("font-bold text-maroon",i[e]),children:"LankaConnect"})]})}e.s(["Logo",()=>n])},75254,e=>{"use strict";var t=e.i(71645);let r=e=>{let t=e.replace(/^([A-Z])|[\s-_]+(\w)/g,(e,t,r)=>r?r.toUpperCase():t.toLowerCase());return t.charAt(0).toUpperCase()+t.slice(1)},s=(...e)=>e.filter((e,t,r)=>!!e&&""!==e.trim()&&r.indexOf(e)===t).join(" ").trim();var a={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};let i=(0,t.forwardRef)(({color:e="currentColor",size:r=24,strokeWidth:i=2,absoluteStrokeWidth:l,className:n="",children:o,iconNode:c,...h},d)=>(0,t.createElement)("svg",{ref:d,...a,width:r,height:r,stroke:e,strokeWidth:l?24*Number(i)/Number(r):i,className:s("lucide",n),...!o&&!(e=>{for(let t in e)if(t.startsWith("aria-")||"role"===t||"title"===t)return!0})(h)&&{"aria-hidden":"true"},...h},[...c.map(([e,r])=>(0,t.createElement)(e,r)),...Array.isArray(o)?o:[o]])),l=(e,a)=>{let l=(0,t.forwardRef)(({className:l,...n},o)=>(0,t.createElement)(i,{ref:o,iconNode:a,className:s(`lucide-${r(e).replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase()}`,`lucide-${e}`,l),...n}));return l.displayName=r(e),l};e.s(["default",()=>l],75254)},94909,(e,t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0});var s={default:function(){return h},getImageProps:function(){return c}};for(var a in s)Object.defineProperty(r,a,{enumerable:!0,get:s[a]});let i=e.r(55682),l=e.r(8927),n=e.r(5500),o=i._(e.r(1948));function c(e){let{props:t}=(0,l.getImgProps)(e,{defaultLoader:o.default,imgConf:{deviceSizes:[640,750,828,1080,1200,1920,2048,3840],imageSizes:[32,48,64,96,128,256,384],qualities:[75],path:"/_next/image",loader:"default",dangerouslyAllowSVG:!1,unoptimized:!1}});for(let[e,r]of Object.entries(t))void 0===r&&delete t[e];return{props:t}}let h=n.Image},57688,(e,t,r)=>{t.exports=e.r(94909)},64659,63059,e=>{"use strict";var t=e.i(75254);let r=(0,t.default)("chevron-down",[["path",{d:"m6 9 6 6 6-6",key:"qrunsl"}]]);e.s(["ChevronDown",()=>r],64659);let s=(0,t.default)("chevron-right",[["path",{d:"m9 18 6-6-6-6",key:"mthhwq"}]]);e.s(["ChevronRight",()=>s],63059)},43531,e=>{"use strict";let t=(0,e.i(75254).default)("check",[["path",{d:"M20 6 9 17l-5-5",key:"1gmf2c"}]]);e.s(["Check",()=>t],43531)},71547,74736,e=>{"use strict";var t=e.i(43476),r=e.i(71645),s=e.i(64659),a=e.i(63059),i=e.i(43531);function l({nodes:e,selectedIds:l,onSelectionChange:n,placeholder:o="Select items",maxSelections:c,disabled:h=!1,className:d=""}){let[u,m]=(0,r.useState)(!1),[f,p]=(0,r.useState)(new Set),g=(0,r.useRef)(null);(0,r.useEffect)(()=>{function e(e){g.current&&!g.current.contains(e.target)&&m(!1)}if(u)return document.addEventListener("mousedown",e),()=>document.removeEventListener("mousedown",e)},[u]);let b=e=>{let t=[];if(e.children)for(let r of e.children)t.push(r.id),t.push(...b(r));return t},x=(t,r=e)=>{for(let e of r){if(e.id===t)return e;if(e.children){let r=x(t,e.children);if(r)return r}}return null},v=(e,r=0)=>{let o=e.children&&e.children.length>0,d=f.has(e.id),u=l.includes(e.id);if(o&&!u){let t=b(e);t.length>0&&(u=t.every(e=>l.includes(e)))}let m=r>0?`ml-${6*r}`:"";return(0,t.jsxs)("div",{children:[(0,t.jsxs)("div",{className:`flex items-center gap-2 px-3 py-2 hover:bg-gray-50 cursor-pointer ${m}`,style:{paddingLeft:`${24*r+12}px`},children:[o?(0,t.jsx)("button",{type:"button",onClick:t=>{var r;let s;t.stopPropagation(),r=e.id,(s=new Set(f)).has(r)?s.delete(r):s.add(r),p(s)},className:"p-0.5 hover:bg-gray-200 rounded","aria-label":d?"Collapse":"Expand",children:d?(0,t.jsx)(s.ChevronDown,{className:"h-4 w-4",style:{color:"#FF7900"}}):(0,t.jsx)(a.ChevronRight,{className:"h-4 w-4",style:{color:"#FF7900"}})}):(0,t.jsx)("span",{className:"w-5"}),(0,t.jsxs)("label",{className:"flex items-center gap-2 flex-1 cursor-pointer",onClick:e=>e.stopPropagation(),children:[(0,t.jsx)("input",{type:"checkbox",checked:u,onChange:()=>(e=>{let t=new Set(l),r=x(e);if(!r)return;let s=r.children&&r.children.length>0;if(t.has(e))t.delete(e),s&&b(r).forEach(e=>t.delete(e));else{let a=[];if(s?a.push(...b(r)):a.push(e),c&&t.size+a.length>c)return;a.forEach(e=>t.add(e))}n(Array.from(t))})(e.id),disabled:h,className:"h-4 w-4 rounded border-gray-300 focus:ring-2 focus:ring-offset-0",style:{accentColor:"#FF7900"}}),(0,t.jsx)("span",{className:"text-sm",children:e.label}),u&&(0,t.jsx)(i.Check,{className:"h-3.5 w-3.5 ml-auto",style:{color:"#006400"}})]})]}),o&&d&&(0,t.jsx)("div",{children:e.children.map(e=>v(e,r+1))})]},e.id)},y=l.length,w=0===y?o:`${y} ${1===y?"item":"items"} selected`;return(0,t.jsxs)("div",{ref:g,className:`relative ${d}`,children:[(0,t.jsxs)("button",{type:"button",onClick:()=>!h&&m(!u),disabled:h,className:"w-full flex items-center justify-between px-4 py-2 bg-white border-2 rounded-lg text-sm transition-colors hover:border-gray-400 focus:outline-none focus:ring-2 focus:ring-offset-0 disabled:opacity-50 disabled:cursor-not-allowed",style:{borderColor:u?"#FF7900":"#e2e8f0"},"aria-haspopup":"listbox","aria-expanded":u,children:[(0,t.jsx)("span",{className:0===y?"text-gray-500":"text-gray-900",children:w}),(0,t.jsx)(s.ChevronDown,{className:`h-4 w-4 transition-transform ${u?"rotate-180":""}`,style:{color:"#8B1538"}})]}),u&&(0,t.jsxs)("div",{className:"absolute z-50 w-full mt-2 bg-white border-2 rounded-lg shadow-lg max-h-96 overflow-y-auto",style:{borderColor:"#FF7900"},role:"listbox",children:[0===e.length?(0,t.jsx)("div",{className:"px-4 py-3 text-sm text-gray-500 text-center",children:"No items available"}):(0,t.jsx)("div",{className:"py-1",children:e.map(e=>v(e))}),(0,t.jsxs)("div",{className:"px-4 py-2 border-t bg-gray-50 flex items-center justify-between",style:{borderColor:"#e2e8f0"},children:[c&&(0,t.jsxs)("span",{className:"text-xs text-gray-600",children:[y," of ",c," selected"]}),(0,t.jsx)("button",{type:"button",onClick:()=>m(!1),className:"px-3 py-1 text-xs font-medium text-white rounded hover:opacity-90 transition-opacity",style:{backgroundColor:"#FF7900"},children:"Done"})]})]})]})}e.s(["TreeDropdown",()=>l],71547);var n=e.i(48831);let o={getAll:async(e=!0)=>await n.apiClient.get("/metro-areas",{params:{activeOnly:e}}),async getByState(e){return(await this.getAll()).filter(t=>t.state===e)},async getById(e){return(await this.getAll()).find(t=>t.id===e)}};function c(){let[e,t]=(0,r.useState)([]),[s,a]=(0,r.useState)(!0),[i,l]=(0,r.useState)(null);(0,r.useEffect)(()=>{let e=!0;return async function(){try{console.log("[useMetroAreas] Starting to fetch metro areas..."),a(!0),l(null);let r=await o.getAll(!0);console.log("[useMetroAreas] Successfully fetched",r.length,"metro areas"),e&&t(r)}catch(t){console.error("[useMetroAreas] ERROR fetching metro areas:",t),e&&(l(t instanceof Error?t.message:"Failed to load metro areas"),console.error("Error fetching metro areas:",t))}finally{e&&(console.log("[useMetroAreas] Finished fetching (loading=false)"),a(!1))}}(),()=>{e=!1}},[]);let n=new Map;for(let t of e)n.has(t.state)||n.set(t.state,[]),n.get(t.state).push(t);for(let[,e]of n)e.sort((e,t)=>e.isStateLevelArea&&!t.isStateLevelArea?-1:!e.isStateLevelArea&&t.isStateLevelArea?1:e.name.localeCompare(t.name));let c=e.filter(e=>e.isStateLevelArea),h=e.filter(e=>!e.isStateLevelArea);return{metroAreas:e,metroAreasByState:n,stateLevelMetros:c,cityLevelMetros:h,isLoading:s,error:i}}e.s(["useMetroAreas",()=>c],74736)},79574,24877,e=>{"use strict";e.i(47167);var t=e.i(43476),r=e.i(71645),s=e.i(22016),a=e.i(84924);let i=[{code:"AL",name:"Alabama"},{code:"AK",name:"Alaska"},{code:"AZ",name:"Arizona"},{code:"AR",name:"Arkansas"},{code:"CA",name:"California"},{code:"CO",name:"Colorado"},{code:"CT",name:"Connecticut"},{code:"DE",name:"Delaware"},{code:"FL",name:"Florida"},{code:"GA",name:"Georgia"},{code:"HI",name:"Hawaii"},{code:"ID",name:"Idaho"},{code:"IL",name:"Illinois"},{code:"IN",name:"Indiana"},{code:"IA",name:"Iowa"},{code:"KS",name:"Kansas"},{code:"KY",name:"Kentucky"},{code:"LA",name:"Louisiana"},{code:"ME",name:"Maine"},{code:"MD",name:"Maryland"},{code:"MA",name:"Massachusetts"},{code:"MI",name:"Michigan"},{code:"MN",name:"Minnesota"},{code:"MS",name:"Mississippi"},{code:"MO",name:"Missouri"},{code:"MT",name:"Montana"},{code:"NE",name:"Nebraska"},{code:"NV",name:"Nevada"},{code:"NH",name:"New Hampshire"},{code:"NJ",name:"New Jersey"},{code:"NM",name:"New Mexico"},{code:"NY",name:"New York"},{code:"NC",name:"North Carolina"},{code:"ND",name:"North Dakota"},{code:"OH",name:"Ohio"},{code:"OK",name:"Oklahoma"},{code:"OR",name:"Oregon"},{code:"PA",name:"Pennsylvania"},{code:"RI",name:"Rhode Island"},{code:"SC",name:"South Carolina"},{code:"SD",name:"South Dakota"},{code:"TN",name:"Tennessee"},{code:"TX",name:"Texas"},{code:"UT",name:"Utah"},{code:"VT",name:"Vermont"},{code:"VA",name:"Virginia"},{code:"WA",name:"Washington"},{code:"WV",name:"West Virginia"},{code:"WI",name:"Wisconsin"},{code:"WY",name:"Wyoming"}];e.s(["US_STATES",0,i],24877);var l=e.i(71547),n=e.i(74736);function o({selectedMetroIds:e,receiveAllLocations:s,onMetrosChange:a,onReceiveAllChange:o,disabled:c=!1,maxSelections:h=20}){let[d,u]=(0,r.useState)(""),{metroAreasByState:m,isLoading:f,error:p}=(0,n.useMetroAreas)();(0,r.useEffect)(()=>{e.length>h?u(`You cannot select more than ${h} metro areas`):u("")},[e,h]);let g=(0,r.useMemo)(()=>{let t=[];for(let r of i){let s=(m.get(r.code)||[]).filter(e=>!e.isStateLevelArea);if(0===s.length)continue;let a=s.map(t=>({id:t.id,label:t.name,checked:e.includes(t.id)}));t.push({id:`state-${r.code}`,label:r.name,checked:a.every(t=>e.includes(t.id)),children:a})}return t},[m,e]);return f?(0,t.jsxs)("div",{className:"space-y-4",children:[(0,t.jsxs)("div",{children:[(0,t.jsx)("label",{className:"text-sm font-medium text-gray-700 mb-2 block",children:"Get notifications for events in:"}),(0,t.jsx)("p",{className:"text-xs text-gray-500 mb-3",children:"Loading metro areas..."})]}),(0,t.jsx)("div",{className:"flex items-center justify-center p-4",children:(0,t.jsx)("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2",style:{borderColor:"#FF7900"}})})]}):p?(0,t.jsx)("div",{className:"space-y-4",children:(0,t.jsxs)("div",{children:[(0,t.jsx)("label",{className:"text-sm font-medium text-gray-700 mb-2 block",children:"Get notifications for events in:"}),(0,t.jsxs)("p",{className:"text-xs text-red-600",role:"alert",children:["Failed to load metro areas: ",p]})]})}):(0,t.jsxs)("div",{className:"space-y-4",children:[(0,t.jsxs)("div",{children:[(0,t.jsx)("label",{className:"text-sm font-medium text-gray-700 mb-2 block",children:"Get notifications for events in:"}),(0,t.jsxs)("p",{className:"text-xs text-gray-500 mb-3",children:["Select up to ",h," metro areas or receive updates from all locations"]})]}),(0,t.jsx)("div",{className:"mb-4",children:(0,t.jsxs)("label",{className:"flex items-center text-sm text-gray-700 cursor-pointer",children:[(0,t.jsx)("input",{type:"checkbox",checked:s,onChange:e=>{var t;o(t=e.target.checked),t&&(a([]),u(""))},disabled:c,className:"mr-2 w-4 h-4 rounded border-gray-300 text-[#FF7900] focus:ring-2 focus:ring-[#FF7900]"}),(0,t.jsx)("span",{className:"font-medium",children:"Send me events from all locations"})]})}),!s&&(0,t.jsxs)("div",{className:"space-y-3",children:[(0,t.jsx)(l.TreeDropdown,{nodes:g,selectedIds:e,onSelectionChange:e=>{let t=e.filter(e=>!e.startsWith("state-"));console.log("[NewsletterMetroSelector] TreeDropdown selection changed:"),console.log("  Raw IDs from TreeDropdown:",e),console.log("  Filtered metro IDs (state-* removed):",t),console.log("  Calling onMetrosChange with",t.length,"IDs"),a(t)},placeholder:"Select metro areas",maxSelections:h,disabled:c}),d&&(0,t.jsx)("p",{className:"text-xs text-red-600",role:"alert",children:d})]})]})}var c=e.i(75254);let h=(0,c.default)("facebook",[["path",{d:"M18 2h-3a5 5 0 0 0-5 5v3H7v4h3v8h4v-8h3l1-4h-4V7a1 1 0 0 1 1-1h3z",key:"1jg4f8"}]]),d=(0,c.default)("twitter",[["path",{d:"M22 4s-.7 2.1-2 3.4c1.6 10-9.4 17.3-18 11.6 2.2.1 4.4-.6 6-2C3 15.5.5 9.6 3 5c2.2 2.6 5.6 4.1 9 4-.9-4.2 4-6.6 7-3.8 1.1 0 3-1.2 3-1.2z",key:"pff0z6"}]]),u=(0,c.default)("instagram",[["rect",{width:"20",height:"20",x:"2",y:"2",rx:"5",ry:"5",key:"2e1cvw"}],["path",{d:"M16 11.37A4 4 0 1 1 12.63 8 4 4 0 0 1 16 11.37z",key:"9exkf1"}],["line",{x1:"17.5",x2:"17.51",y1:"6.5",y2:"6.5",key:"r4j83e"}]]),m=(0,c.default)("youtube",[["path",{d:"M2.5 17a24.12 24.12 0 0 1 0-10 2 2 0 0 1 1.4-1.4 49.56 49.56 0 0 1 16.2 0A2 2 0 0 1 21.5 7a24.12 24.12 0 0 1 0 10 2 2 0 0 1-1.4 1.4 49.55 49.55 0 0 1-16.2 0A2 2 0 0 1 2.5 17",key:"1q2vi4"}],["path",{d:"m10 15 5-3-5-3z",key:"1jp15x"}]]),f=(0,c.default)("mail",[["path",{d:"m22 7-8.991 5.727a2 2 0 0 1-2.009 0L2 7",key:"132q7q"}],["rect",{x:"2",y:"4",width:"20",height:"16",rx:"2",key:"izxlao"}]]);var p=e.i(88129);let g=({href:e,children:r,external:a=!1})=>{let i="text-white/80 hover:text-white transition-colors duration-200 text-sm";return a?(0,t.jsx)("a",{href:e,target:"_blank",rel:"noopener noreferrer",className:i,"aria-label":`${r} (opens in new tab)`,children:r}):(0,t.jsx)(s.default,{href:e,className:i,children:r})};e.s(["default",0,()=>{let{isAuthenticated:e}=(0,p.useAuthStore)(),[s,i]=(0,r.useState)(""),[l,n]=(0,r.useState)("idle"),[c,b]=(0,r.useState)([]),[x,v]=(0,r.useState)(!1),[y,w]=(0,r.useState)(2025);r.default.useEffect(()=>{w(new Date().getFullYear())},[]);let j=[{title:"Community",links:[{label:"Events",href:"/events"},{label:"Forums",href:"/forums"},{label:"Cultural Hub",href:"/culture"},...e?[{label:"Dashboard",href:"/dashboard"}]:[]]},{title:"Marketplace",links:[{label:"Browse Listings",href:"/marketplace"},{label:"Businesses",href:"/business"},{label:"Services",href:"/services"},{label:"Sell Items",href:"/marketplace/sell"}]},{title:"Resources",links:[{label:"Help Center",href:"/help"},{label:"Guidelines",href:"/guidelines"},{label:"Safety",href:"/safety"},{label:"Blog",href:"/blog"}]},{title:"About",links:[{label:"Our Story",href:"/about"},{label:"Contact Us",href:"/contact"},{label:"Careers",href:"/careers"},{label:"Press",href:"/press"}]}],R=async e=>{if(e.preventDefault(),console.log("[Footer] Newsletter form submitted:"),console.log("  Email:",s),console.log("  Receive all locations:",x),console.log("  Selected metro IDs:",c),console.log("  Selected metro count:",c.length),!s||!s.includes("@")){console.log("[Footer] ❌ Validation failed: Invalid email"),n("error");return}if(!x&&0===c.length){console.log("[Footer] ❌ Validation failed: No metros selected and not receiving all locations"),n("error");return}console.log("[Footer] ✅ Validation passed, submitting..."),n("loading");try{let e=await fetch("https://lankaconnect-api-staging.politebay-79d6e8a2.eastus2.azurecontainerapps.io/api/newsletter/subscribe",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({Email:s,MetroAreaIds:x?[]:c,ReceiveAllLocations:x,Timestamp:new Date().toISOString()})}),t=await e.json();console.log("[Footer] Backend response:",e.status,t),t.success||t.Success?(n("success"),i(""),b([]),v(!1),setTimeout(()=>{n("idle")},3e3)):n("error")}catch(e){console.error("Newsletter subscription error:",e),n("error")}};return(0,t.jsxs)("footer",{className:"bg-gradient-to-r from-orange-600 via-rose-800 to-emerald-800 text-white mt-24 relative overflow-hidden",children:[(0,t.jsx)("div",{className:"absolute inset-0 opacity-10",children:(0,t.jsx)("div",{className:"absolute inset-0",style:{backgroundImage:"url(\"data:image/svg+xml,%3Csvg width='60' height='60' viewBox='0 0 60 60' xmlns='http://www.w3.org/2000/svg'%3E%3Cg fill='none' fill-rule='evenodd'%3E%3Cg fill='%23ffffff' fill-opacity='1'%3E%3Cpath d='M36 34v-4h-2v4h-4v2h4v4h2v-4h4v-2h-4zm0-30V0h-2v4h-4v2h4v4h2V6h4V4h-4zM6 34v-4H4v4H0v2h4v4h2v-4h4v-2H6zM6 4V0H4v4H0v2h4v4h2V6h4V4H6z'/%3E%3C/g%3E%3C/g%3E%3C/svg%3E\")"}})}),(0,t.jsxs)("div",{className:"relative max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-12",children:[(0,t.jsx)("div",{className:"bg-white/10 backdrop-blur-sm rounded-2xl p-8 mb-12 border border-white/20",children:(0,t.jsxs)("div",{className:"max-w-xl mx-auto",children:[(0,t.jsx)("h3",{className:"text-2xl font-semibold mb-2 text-center",children:"Stay Connected"}),(0,t.jsx)("p",{className:"text-white/90 mb-6 text-center",children:"Subscribe to our newsletter for the latest events and community updates."}),(0,t.jsxs)("form",{onSubmit:R,className:"space-y-4",children:[(0,t.jsx)("input",{type:"email",placeholder:"Enter your email",value:s,onChange:e=>i(e.target.value),className:"w-full px-4 py-3 rounded-lg bg-white text-gray-900 placeholder-gray-500 focus:outline-none focus:ring-2 focus:ring-orange-500","aria-label":"Email address for newsletter",disabled:"loading"===l,required:!0}),(0,t.jsx)("div",{className:"bg-white/95 p-4 rounded-lg text-gray-800",children:(0,t.jsx)(o,{selectedMetroIds:c,receiveAllLocations:x,onMetrosChange:b,onReceiveAllChange:v,disabled:"loading"===l})}),(0,t.jsx)("button",{type:"submit",className:"w-full px-6 py-3 bg-[#FF7900] hover:bg-[#E56D00] text-white font-medium rounded-lg transition-colors duration-200 disabled:opacity-50 disabled:cursor-not-allowed",disabled:"loading"===l,"aria-label":"Subscribe to newsletter",children:"loading"===l?"Subscribing...":"success"===l?"Subscribed!":"Subscribe"})]}),"error"===l&&(0,t.jsx)("p",{className:"text-red-300 text-sm mt-2 text-center",role:"alert",children:"Please enter a valid email address and select at least one location."}),"success"===l&&(0,t.jsx)("p",{className:"text-green-300 text-sm mt-2 text-center",role:"alert",children:"Thank you for subscribing!"})]})}),(0,t.jsx)("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-8 mb-12",children:j.map(e=>(0,t.jsxs)("div",{children:[(0,t.jsx)("h4",{className:"text-white font-semibold mb-4",children:e.title}),(0,t.jsx)("ul",{className:"space-y-2",role:"list",children:e.links.map(e=>(0,t.jsx)("li",{children:(0,t.jsx)(g,{href:e.href,external:e.external,children:e.label})},e.label))})]},e.title))}),(0,t.jsxs)("div",{className:"pt-8 border-t border-white/20 flex flex-col md:flex-row items-center justify-between gap-4",children:[(0,t.jsxs)("div",{className:"flex items-center gap-3",children:[(0,t.jsx)(a.Logo,{size:"md",showText:!1}),(0,t.jsxs)("div",{children:[(0,t.jsx)("div",{className:"text-white font-semibold",children:"LankaConnect"}),(0,t.jsxs)("div",{className:"text-white/80 text-sm",children:["© ",y," All rights reserved"]})]})]}),(0,t.jsxs)("div",{className:"flex items-center gap-3",children:[(0,t.jsx)("a",{href:"https://facebook.com",target:"_blank",rel:"noopener noreferrer",className:"text-white/80 hover:text-white hover:bg-white/10 p-2 rounded-lg transition-colors","aria-label":"Facebook",children:(0,t.jsx)(h,{className:"h-5 w-5"})}),(0,t.jsx)("a",{href:"https://twitter.com",target:"_blank",rel:"noopener noreferrer",className:"text-white/80 hover:text-white hover:bg-white/10 p-2 rounded-lg transition-colors","aria-label":"Twitter",children:(0,t.jsx)(d,{className:"h-5 w-5"})}),(0,t.jsx)("a",{href:"https://instagram.com",target:"_blank",rel:"noopener noreferrer",className:"text-white/80 hover:text-white hover:bg-white/10 p-2 rounded-lg transition-colors","aria-label":"Instagram",children:(0,t.jsx)(u,{className:"h-5 w-5"})}),(0,t.jsx)("a",{href:"https://youtube.com",target:"_blank",rel:"noopener noreferrer",className:"text-white/80 hover:text-white hover:bg-white/10 p-2 rounded-lg transition-colors","aria-label":"YouTube",children:(0,t.jsx)(m,{className:"h-5 w-5"})}),(0,t.jsx)("a",{href:"mailto:contact@lankaconnect.com",className:"text-white/80 hover:text-white hover:bg-white/10 p-2 rounded-lg transition-colors","aria-label":"Email",children:(0,t.jsx)(f,{className:"h-5 w-5"})})]})]})]})]})}],79574)}]);