module.exports=[43827,a=>{"use strict";var b=a.i(87924),c=a.i(72131),d=a.i(72493),e=a.i(72988),f=a.i(23482),g=a.i(71987);let h=(0,a.i(70106).default)("upload",[["path",{d:"M12 3v12",key:"1x0j5s"}],["path",{d:"m17 8-5-5-5 5",key:"7q97r8"}],["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}]]);var i=a.i(33508),j=a.i(96221),k=a.i(42043),l=a.i(18203);let m=["image/jpeg","image/jpg","image/png","image/webp"],n=5,o=({currentPhotoUrl:a,onUpload:d,onDelete:e,maxSizeMB:f=n,acceptedFormats:o=m,isLoading:p=!1,error:q})=>{let r=(0,c.useRef)(null),[s,t]=(0,c.useState)(!1),[u,v]=(0,c.useState)(""),w=()=>o.map(a=>a.replace("image/","").toUpperCase()).join(", "),x=(0,c.useCallback)(async a=>{a&&(((v(""),o.includes(a.type))?a.size/1048576>f&&(v(`File size exceeds ${f}MB`),1):(v(`Only ${w()} images are allowed`),1))||await d(a))},[d,f,o]),y=()=>{r.current?.click()},z=async()=>{p||await e()},A=q||u;return(0,b.jsxs)("div",{className:"space-y-4",children:[a&&(0,b.jsxs)("div",{className:"relative flex flex-col items-center space-y-4",children:[(0,b.jsx)("div",{className:"relative h-32 w-32 overflow-hidden rounded-full border-4 border-border",children:(0,b.jsx)(g.default,{src:a,alt:"Current profile photo",fill:!0,className:"object-cover",sizes:"128px"})}),(0,b.jsxs)(k.Button,{type:"button",variant:"destructive",size:"sm",onClick:z,disabled:p,"aria-label":"Delete photo",children:[(0,b.jsx)(i.X,{className:"mr-2 h-4 w-4"}),"Delete Photo"]})]}),!a&&(0,b.jsxs)("div",{className:(0,l.cn)("relative flex flex-col items-center justify-center rounded-lg border-2 border-dashed p-8 transition-colors",s&&"border-primary bg-primary/5",!s&&"border-border hover:border-primary/50",p&&"pointer-events-none opacity-50"),onDragOver:a=>{a.preventDefault(),a.stopPropagation(),t(!0)},onDragLeave:a=>{a.preventDefault(),a.stopPropagation(),t(!1)},onDrop:a=>{a.preventDefault(),a.stopPropagation(),t(!1);let b=a.dataTransfer.files?.[0];b&&x(b)},onClick:y,role:"button",tabIndex:0,onKeyDown:a=>{("Enter"===a.key||" "===a.key)&&y()},children:[(0,b.jsx)("input",{ref:r,type:"file",accept:o.join(","),onChange:a=>{let b=a.target.files?.[0];b&&x(b),r.current&&(r.current.value="")},className:"hidden",disabled:p,"aria-label":"Upload profile photo"}),p?(0,b.jsxs)("div",{className:"flex flex-col items-center space-y-2",role:"status","aria-live":"polite",children:[(0,b.jsx)(j.Loader2,{className:"h-12 w-12 animate-spin text-primary"}),(0,b.jsx)("p",{className:"text-sm text-muted-foreground",children:"Uploading..."})]}):(0,b.jsxs)(b.Fragment,{children:[(0,b.jsx)(h,{className:"mb-4 h-12 w-12 text-muted-foreground"}),(0,b.jsx)("p",{className:"mb-2 text-sm font-medium text-foreground",children:"Upload Photo"}),(0,b.jsx)("p",{className:"mb-1 text-xs text-muted-foreground",children:"Drag and drop or click to select"}),(0,b.jsxs)("p",{className:"text-xs text-muted-foreground",children:[w()," (Max ",f,"MB)"]})]})]}),A&&(0,b.jsx)("div",{className:"rounded-md bg-destructive/10 p-3",children:(0,b.jsx)("p",{className:"text-sm text-destructive",children:A})})]})};var p=a.i(50253);function q(){let{user:a,isAuthenticated:c}=(0,e.useAuthStore)(),{profile:d,error:g,sectionStates:h,uploadPhoto:i,deletePhoto:j}=(0,f.useProfileStore)();if(!c||!a)return null;let k=d?.profilePhotoUrl||null,l="saving"===h.photo,m="error"===h.photo?g:null,n=async b=>{await i(a.userId,b)},q=async()=>{await j(a.userId)};return(0,b.jsx)("section",{role:"region","aria-labelledby":"profile-photo-heading",children:(0,b.jsxs)(p.Card,{children:[(0,b.jsxs)(p.CardHeader,{children:[(0,b.jsx)(p.CardTitle,{id:"profile-photo-heading",style:{color:"#8B1538"},children:"Profile Photo"}),(0,b.jsx)(p.CardDescription,{children:"Upload a photo to personalize your profile and help others recognize you"})]}),(0,b.jsx)(p.CardContent,{children:(0,b.jsx)(o,{currentPhotoUrl:k,onUpload:n,onDelete:q,isLoading:l,error:m||void 0,maxSizeMB:5,acceptedFormats:["image/jpeg","image/jpg","image/png","image/webp"]})})]})})}var r=a.i(13858);let s=[{code:"SL_CUISINE",name:"Sri Lankan Cuisine"},{code:"BUDDHIST_FEST",name:"Buddhist Festivals & Traditions"},{code:"HINDU_FEST",name:"Hindu Festivals & Traditions"},{code:"ISLAMIC_FEST",name:"Islamic Festivals & Traditions"},{code:"CHRISTIAN_FEST",name:"Christian Festivals & Traditions"},{code:"TRAD_DANCE",name:"Traditional Dance (Kandyan, Sabaragamuwa, Low Country)"},{code:"CRICKET",name:"Cricket & Sports"},{code:"AYURVEDA",name:"Ayurvedic Medicine & Wellness"},{code:"SINHALA_MUSIC",name:"Sinhala Music & Arts"},{code:"TAMIL_MUSIC",name:"Tamil Music & Arts"},{code:"VESAK",name:"Vesak & Poson Celebrations"},{code:"SINHALA_NY",name:"Sinhala & Tamil New Year (Aluth Avurudda)"},{code:"TEA_CULTURE",name:"Ceylon Tea Culture"},{code:"TRAD_ARTS",name:"Traditional Arts & Crafts (Masks, Batik, Pottery)"},{code:"SL_WEDDINGS",name:"Sri Lankan Wedding Traditions"},{code:"TEMPLE_ARCH",name:"Temple Architecture & Heritage Sites"},{code:"SL_LITERATURE",name:"Sinhala/Tamil Literature & Poetry"},{code:"TRAD_GAMES",name:"Traditional Games (Elle, Ankeliya)"},{code:"SL_FASHION",name:"Traditional Dress & Fashion (Saree, Sarong)"},{code:"DIASPORA_NET",name:"Diaspora Community & Networking"}],t=100,u=100,v=20,w=100,x=10,y={min:0,max:20};var z=a.i(33441),A=a.i(24987);function B(){let{user:a,isAuthenticated:d}=(0,e.useAuthStore)(),{profile:g,error:h,sectionStates:i,updateLocation:j}=(0,f.useProfileStore)(),[l,m]=(0,c.useState)(!1),[n,o]=(0,c.useState)({city:"",state:"",zipCode:"",country:""}),[q,s]=(0,c.useState)({});if(!d||!a)return null;let x=g?.location,y="saving"===i.location,B="success"===i.location,C="error"===i.location,D=async()=>{let b;if(b={},n.city.trim()?n.city.length>t&&(b.city=`City cannot exceed ${t} characters`):b.city="City is required",n.state.trim()?n.state.length>u&&(b.state=`State cannot exceed ${u} characters`):b.state="State is required",n.zipCode.trim()?n.zipCode.length>v&&(b.zipCode=`Zip code cannot exceed ${v} characters`):b.zipCode="Zip code is required",n.country.trim()?n.country.length>w&&(b.country=`Country cannot exceed ${w} characters`):b.country="Country is required",s(b),0===Object.keys(b).length)try{await j(a.userId,{city:n.city.trim(),state:n.state.trim(),zipCode:n.zipCode.trim(),country:n.country.trim()}),m(!1)}catch(a){}},E=(a,b)=>{o(c=>({...c,[a]:b})),q[a]&&s(b=>{let c={...b};return delete c[a],c})};return(0,b.jsx)("section",{role:"region","aria-labelledby":"location-heading",children:(0,b.jsxs)(p.Card,{children:[(0,b.jsxs)(p.CardHeader,{children:[(0,b.jsxs)("div",{className:"flex items-center justify-between",children:[(0,b.jsxs)("div",{className:"flex items-center gap-2",children:[(0,b.jsx)(A.MapPin,{className:"h-5 w-5",style:{color:"#FF7900"}}),(0,b.jsx)(p.CardTitle,{id:"location-heading",style:{color:"#8B1538"},children:"Location"})]}),!l&&(0,b.jsx)(k.Button,{onClick:()=>{o({city:x?.city||"",state:x?.state||"",zipCode:x?.zipCode||"",country:x?.country||""}),s({}),m(!0)},variant:"outline",size:"sm",disabled:y,style:{borderColor:"#FF7900",color:"#8B1538"},children:"Edit"})]}),(0,b.jsx)(p.CardDescription,{children:"Help others in the community find you by sharing your location"})]}),(0,b.jsx)(p.CardContent,{children:l?(0,b.jsxs)("div",{className:"space-y-4",children:[(0,b.jsxs)("div",{children:[(0,b.jsx)("label",{htmlFor:"city",className:"block text-sm font-medium mb-1",children:"City *"}),(0,b.jsx)(r.Input,{id:"city",type:"text",value:n.city,onChange:a=>E("city",a.target.value),placeholder:"e.g., Toronto",disabled:y,error:!!q.city,"aria-label":"City","aria-invalid":!!q.city,"aria-describedby":q.city?"city-error":void 0,maxLength:t}),q.city&&(0,b.jsx)("p",{id:"city-error",className:"text-sm text-destructive mt-1",role:"alert",children:q.city})]}),(0,b.jsxs)("div",{children:[(0,b.jsx)("label",{htmlFor:"state",className:"block text-sm font-medium mb-1",children:"State/Province *"}),(0,b.jsx)(r.Input,{id:"state",type:"text",value:n.state,onChange:a=>E("state",a.target.value),placeholder:"e.g., Ontario",disabled:y,error:!!q.state,"aria-label":"State/Province","aria-invalid":!!q.state,"aria-describedby":q.state?"state-error":void 0,maxLength:u}),q.state&&(0,b.jsx)("p",{id:"state-error",className:"text-sm text-destructive mt-1",role:"alert",children:q.state})]}),(0,b.jsxs)("div",{children:[(0,b.jsx)("label",{htmlFor:"zipCode",className:"block text-sm font-medium mb-1",children:"Zip/Postal Code *"}),(0,b.jsx)(r.Input,{id:"zipCode",type:"text",value:n.zipCode,onChange:a=>E("zipCode",a.target.value),placeholder:"e.g., M5H 2N2",disabled:y,error:!!q.zipCode,"aria-label":"Zip/Postal Code","aria-invalid":!!q.zipCode,"aria-describedby":q.zipCode?"zipCode-error":void 0,maxLength:v}),q.zipCode&&(0,b.jsx)("p",{id:"zipCode-error",className:"text-sm text-destructive mt-1",role:"alert",children:q.zipCode})]}),(0,b.jsxs)("div",{children:[(0,b.jsx)("label",{htmlFor:"country",className:"block text-sm font-medium mb-1",children:"Country *"}),(0,b.jsx)(r.Input,{id:"country",type:"text",value:n.country,onChange:a=>E("country",a.target.value),placeholder:"e.g., Canada",disabled:y,error:!!q.country,"aria-label":"Country","aria-invalid":!!q.country,"aria-describedby":q.country?"country-error":void 0,maxLength:w}),q.country&&(0,b.jsx)("p",{id:"country-error",className:"text-sm text-destructive mt-1",role:"alert",children:q.country})]}),C&&h&&(0,b.jsx)("p",{className:"text-sm text-destructive",role:"alert",children:h}),(0,b.jsxs)("div",{className:"flex gap-3 pt-2",children:[(0,b.jsx)(k.Button,{onClick:D,disabled:y,className:"flex-1 text-white",style:{background:"#FF7900"},children:y?"Saving...":"Save Location"}),(0,b.jsx)(k.Button,{onClick:()=>{m(!1),s({})},variant:"outline",disabled:y,className:"flex-1",style:{borderColor:"#8B1538",color:"#8B1538"},children:"Cancel"})]})]}):(0,b.jsxs)("div",{className:"space-y-2",children:[x?(0,b.jsxs)("div",{className:"text-sm",children:[(0,b.jsxs)("p",{className:"font-medium text-foreground",children:[x.city,", ",x.state," ",x.zipCode]}),(0,b.jsx)("p",{className:"text-muted-foreground",children:x.country})]}):(0,b.jsx)("p",{className:"text-sm text-muted-foreground italic",children:"Not set - Click Edit to add your location"}),B&&(0,b.jsxs)("div",{className:"flex items-center gap-2 text-sm",style:{color:"#006400"},children:[(0,b.jsx)(z.Check,{className:"h-4 w-4"}),(0,b.jsx)("span",{children:"Location saved successfully!"})]}),C&&h&&(0,b.jsx)("p",{className:"text-sm text-destructive",role:"alert",children:h})]})})]})})}var C=a.i(76472);function D(){let{user:a,isAuthenticated:d}=(0,e.useAuthStore)(),{profile:g,error:h,sectionStates:i,updateCulturalInterests:j}=(0,f.useProfileStore)(),[l,m]=(0,c.useState)(!1),[n,o]=(0,c.useState)([]),[q,r]=(0,c.useState)("");if(!d||!a)return null;let t=g?.culturalInterests||[],u="saving"===i.culturalInterests,v="success"===i.culturalInterests,w="error"===i.culturalInterests,y=async()=>{if(n.length>x)return void r(`Maximum ${x} interests allowed`);try{await j(a.userId,{culturalInterests:n}),m(!1)}catch(a){}};return(0,b.jsx)("section",{role:"region","aria-labelledby":"cultural-interests-heading",children:(0,b.jsxs)(p.Card,{children:[(0,b.jsxs)(p.CardHeader,{children:[(0,b.jsxs)("div",{className:"flex items-center justify-between",children:[(0,b.jsxs)("div",{className:"flex items-center gap-2",children:[(0,b.jsx)(C.Heart,{className:"h-5 w-5",style:{color:"#FF7900"}}),(0,b.jsx)(p.CardTitle,{id:"cultural-interests-heading",style:{color:"#8B1538"},children:"Cultural Interests"})]}),!l&&(0,b.jsx)(k.Button,{onClick:()=>{o([...t]),r(""),m(!0)},variant:"outline",size:"sm",disabled:u,style:{borderColor:"#FF7900",color:"#8B1538"},children:"Edit"})]}),(0,b.jsxs)(p.CardDescription,{children:["Share your cultural interests to connect with others (select 0-",x,")"]})]}),(0,b.jsx)(p.CardContent,{children:l?(0,b.jsxs)("div",{className:"space-y-4",children:[(0,b.jsx)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-3",children:s.map(a=>{let c=n.includes(a.code);return(0,b.jsxs)("label",{className:`flex items-start gap-3 p-3 rounded-lg border cursor-pointer transition-colors ${u?"opacity-50 cursor-not-allowed":""}`,style:{background:c?"#FFE8CC":"white",borderColor:c?"#FF7900":"#e2e8f0"},children:[(0,b.jsx)("input",{type:"checkbox",checked:c,onChange:()=>{var b;return b=a.code,void o(a=>a.includes(b)?a.filter(a=>a!==b):a.length>=x?(r(`You can select up to ${x} interests`),a):(r(""),[...a,b]))},disabled:u,className:"mt-1 h-4 w-4 rounded border-gray-300 text-primary focus:ring-primary","aria-label":a.name}),(0,b.jsx)("span",{className:"text-sm flex-1",children:a.name})]},a.code)})}),(0,b.jsxs)("p",{className:"text-sm text-muted-foreground",children:[n.length," of ",x," selected"]}),q&&(0,b.jsx)("p",{className:"text-sm text-destructive",role:"alert",children:q}),w&&h&&(0,b.jsx)("p",{className:"text-sm text-destructive",role:"alert",children:h}),(0,b.jsxs)("div",{className:"flex gap-3 pt-2",children:[(0,b.jsx)(k.Button,{onClick:y,disabled:u,className:"flex-1 text-white",style:{background:"#FF7900"},children:u?"Saving...":"Save Interests"}),(0,b.jsx)(k.Button,{onClick:()=>{m(!1),r("")},variant:"outline",disabled:u,className:"flex-1",style:{borderColor:"#8B1538",color:"#8B1538"},children:"Cancel"})]})]}):(0,b.jsxs)("div",{className:"space-y-2",children:[t.length>0?(0,b.jsx)("div",{className:"flex flex-wrap gap-2",children:t.map(a=>{let c=s.find(b=>b.code===a);return c?(0,b.jsx)("span",{className:"inline-flex items-center px-3 py-1 rounded-full text-sm font-medium",style:{background:"#FFE8CC",color:"#8B1538"},children:c.name},a):null})}):(0,b.jsx)("p",{className:"text-sm text-muted-foreground italic",children:"No interests selected - Click Edit to add your cultural interests"}),v&&(0,b.jsxs)("div",{className:"flex items-center gap-2 text-sm",style:{color:"#006400"},children:[(0,b.jsx)(z.Check,{className:"h-4 w-4"}),(0,b.jsx)("span",{children:"Cultural interests saved successfully!"})]}),w&&h&&(0,b.jsx)("p",{className:"text-sm text-destructive",role:"alert",children:h})]})})]})})}var E=a.i(5784),F=a.i(50522);function G({nodes:a,selectedIds:d,onSelectionChange:e,placeholder:f="Select items",maxSelections:g,disabled:h=!1,className:i=""}){let[j,k]=(0,c.useState)(!1),[l,m]=(0,c.useState)(new Set),n=(0,c.useRef)(null);(0,c.useEffect)(()=>{function a(a){n.current&&!n.current.contains(a.target)&&k(!1)}if(j)return document.addEventListener("mousedown",a),()=>document.removeEventListener("mousedown",a)},[j]);let o=(a,c=0)=>{let f=a.children&&a.children.length>0,i=l.has(a.id),j=d.includes(a.id),k=c>0?`ml-${6*c}`:"";return(0,b.jsxs)("div",{children:[(0,b.jsxs)("div",{className:`flex items-center gap-2 px-3 py-2 hover:bg-gray-50 cursor-pointer ${k}`,style:{paddingLeft:`${24*c+12}px`},children:[f?(0,b.jsx)("button",{onClick:b=>{var c;let d;b.stopPropagation(),c=a.id,(d=new Set(l)).has(c)?d.delete(c):d.add(c),m(d)},className:"p-0.5 hover:bg-gray-200 rounded","aria-label":i?"Collapse":"Expand",children:i?(0,b.jsx)(E.ChevronDown,{className:"h-4 w-4",style:{color:"#FF7900"}}):(0,b.jsx)(F.ChevronRight,{className:"h-4 w-4",style:{color:"#FF7900"}})}):(0,b.jsx)("span",{className:"w-5"}),(0,b.jsxs)("label",{className:"flex items-center gap-2 flex-1 cursor-pointer",onClick:a=>a.stopPropagation(),children:[(0,b.jsx)("input",{type:"checkbox",checked:j,onChange:()=>(a=>{let b=new Set(d);if(b.has(a))b.delete(a);else{if(g&&b.size>=g)return;b.add(a)}e(Array.from(b))})(a.id),disabled:h,className:"h-4 w-4 rounded border-gray-300 focus:ring-2 focus:ring-offset-0",style:{accentColor:"#FF7900"}}),(0,b.jsx)("span",{className:"text-sm",children:a.label}),j&&(0,b.jsx)(z.Check,{className:"h-3.5 w-3.5 ml-auto",style:{color:"#006400"}})]})]}),f&&i&&(0,b.jsx)("div",{children:a.children.map(a=>o(a,c+1))})]},a.id)},p=d.length,q=0===p?f:`${p} ${1===p?"item":"items"} selected`;return(0,b.jsxs)("div",{ref:n,className:`relative ${i}`,children:[(0,b.jsxs)("button",{type:"button",onClick:()=>!h&&k(!j),disabled:h,className:"w-full flex items-center justify-between px-4 py-2 bg-white border-2 rounded-lg text-sm transition-colors hover:border-gray-400 focus:outline-none focus:ring-2 focus:ring-offset-0 disabled:opacity-50 disabled:cursor-not-allowed",style:{borderColor:j?"#FF7900":"#e2e8f0"},"aria-haspopup":"listbox","aria-expanded":j,children:[(0,b.jsx)("span",{className:0===p?"text-gray-500":"text-gray-900",children:q}),(0,b.jsx)(E.ChevronDown,{className:`h-4 w-4 transition-transform ${j?"rotate-180":""}`,style:{color:"#8B1538"}})]}),j&&(0,b.jsxs)("div",{className:"absolute z-50 w-full mt-2 bg-white border-2 rounded-lg shadow-lg max-h-96 overflow-y-auto",style:{borderColor:"#FF7900"},role:"listbox",children:[0===a.length?(0,b.jsx)("div",{className:"px-4 py-3 text-sm text-gray-500 text-center",children:"No items available"}):(0,b.jsx)("div",{className:"py-1",children:a.map(a=>o(a))}),(0,b.jsxs)("div",{className:"px-4 py-2 border-t bg-gray-50 flex items-center justify-between",style:{borderColor:"#e2e8f0"},children:[g&&(0,b.jsxs)("span",{className:"text-xs text-gray-600",children:[p," of ",g," selected"]}),(0,b.jsx)("button",{type:"button",onClick:()=>k(!1),className:"px-3 py-1 text-xs font-medium text-white rounded hover:opacity-90 transition-opacity",style:{backgroundColor:"#FF7900"},children:"Done"})]})]})]})}var H=a.i(64668);let I={getAll:async(a=!0)=>await H.apiClient.get("/metro-areas",{params:{activeOnly:a}}),async getByState(a){return(await this.getAll()).filter(b=>b.state===a)},async getById(a){return(await this.getAll()).find(b=>b.id===a)}};var J=a.i(99225);function K(){let{user:a}=(0,e.useAuthStore)(),{profile:d,updatePreferredMetroAreas:g,sectionStates:h,error:i,isLoading:j}=(0,f.useProfileStore)(),{metroAreas:l,metroAreasByState:m,stateLevelMetros:n,isLoading:o,error:q}=function(){let[a,b]=(0,c.useState)([]),[d,e]=(0,c.useState)(!0),[f,g]=(0,c.useState)(null);(0,c.useEffect)(()=>{let a=!0;return async function(){try{e(!0),g(null);let c=await I.getAll(!0);a&&b(c)}catch(b){a&&(g(b instanceof Error?b.message:"Failed to load metro areas"),console.error("Error fetching metro areas:",b))}finally{a&&e(!1)}}(),()=>{a=!1}},[]);let h=new Map;for(let b of a)h.has(b.state)||h.set(b.state,[]),h.get(b.state).push(b);for(let[,a]of h)a.sort((a,b)=>a.isStateLevelArea&&!b.isStateLevelArea?-1:!a.isStateLevelArea&&b.isStateLevelArea?1:a.name.localeCompare(b.name));let i=a.filter(a=>a.isStateLevelArea),j=a.filter(a=>!a.isStateLevelArea);return{metroAreas:a,metroAreasByState:h,stateLevelMetros:i,cityLevelMetros:j,isLoading:d,error:f}}(),[r,s]=(0,c.useState)(!1),[t,u]=(0,c.useState)([]),[v,w]=(0,c.useState)(""),x=h.preferredMetroAreas,B=j||"saving"===x,C=d?.preferredMetroAreas||[],{max:D}=y,E=(0,c.useMemo)(()=>{let a=[];return J.US_STATES.forEach(b=>{let c=m.get(b.code)||[];if(0===c.length)return;let d=c.find(a=>a.isStateLevelArea),e=c.filter(a=>!a.isStateLevelArea),f=[];d&&f.push({id:d.id,label:d.name,checked:t.includes(d.id)}),e.forEach(a=>{f.push({id:a.id,label:a.name,checked:t.includes(a.id)})}),a.push({id:b.code,label:b.name,checked:!1,children:f})}),a},[m,n,t]);if(!a)return null;if(o)return(0,b.jsxs)(p.Card,{role:"region","aria-label":"Preferred Metro Areas",children:[(0,b.jsxs)(p.CardHeader,{children:[(0,b.jsxs)("div",{className:"flex items-center gap-2",children:[(0,b.jsx)(A.MapPin,{className:"h-5 w-5",style:{color:"#FF7900"}}),(0,b.jsx)(p.CardTitle,{style:{color:"#8B1538"},children:"Preferred Metro Areas"})]}),(0,b.jsx)(p.CardDescription,{children:"Loading metro areas..."})]}),(0,b.jsx)(p.CardContent,{children:(0,b.jsx)("div",{className:"flex items-center justify-center p-4",children:(0,b.jsx)("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2",style:{borderColor:"#FF7900"}})})})]});if(q)return(0,b.jsxs)(p.Card,{role:"region","aria-label":"Preferred Metro Areas",children:[(0,b.jsx)(p.CardHeader,{children:(0,b.jsxs)("div",{className:"flex items-center gap-2",children:[(0,b.jsx)(A.MapPin,{className:"h-5 w-5",style:{color:"#FF7900"}}),(0,b.jsx)(p.CardTitle,{style:{color:"#8B1538"},children:"Preferred Metro Areas"})]})}),(0,b.jsx)(p.CardContent,{children:(0,b.jsxs)("p",{className:"text-sm text-destructive",role:"alert",children:["Failed to load metro areas: ",q]})})]});let F=async()=>{if(a?.userId){console.log("=== DEBUG: Attempting to save metro areas ==="),console.log("Selected IDs:",t),console.log("Selected Count:",t.length),t.forEach(a=>{let b=H(a);console.log(`  - ${a}: ${b?`${b.name}, ${b.state}`:"NOT FOUND IN LOCAL DATA"}`)});try{await g(a.userId,{metroAreaIds:t}),console.log("✅ Save successful"),s(!1),w("")}catch(a){console.error("❌ Save failed:",a)}}},H=a=>l.find(b=>b.id===a);return(0,b.jsxs)(p.Card,{role:"region","aria-label":"Preferred Metro Areas",children:[(0,b.jsxs)(p.CardHeader,{children:[(0,b.jsxs)("div",{className:"flex items-center justify-between",children:[(0,b.jsxs)("div",{className:"flex items-center gap-2",children:[(0,b.jsx)(A.MapPin,{className:"h-5 w-5",style:{color:"#FF7900"}}),(0,b.jsx)(p.CardTitle,{style:{color:"#8B1538"},children:"Preferred Metro Areas"})]}),!r&&(0,b.jsx)(k.Button,{variant:"outline",size:"sm",onClick:()=>{s(!0),u([...C]),w("")},disabled:B,style:{borderColor:"#FF7900",color:"#8B1538"},children:"Edit"})]}),(0,b.jsxs)(p.CardDescription,{children:["Select up to ",D," metro areas for personalized event and content filtering. You can opt out by leaving this empty."]})]}),(0,b.jsx)(p.CardContent,{children:r?(0,b.jsxs)("div",{className:"space-y-3",children:[(0,b.jsx)("p",{className:"text-sm text-muted-foreground mb-2",children:"Select metro areas by expanding states and checking your preferred locations"}),(0,b.jsx)(G,{nodes:E,selectedIds:t,onSelectionChange:a=>{a.length>D?w(`You cannot select more than ${D} metro areas`):(w(""),u(a))},placeholder:`Select up to ${D} metro areas`,maxSelections:D,disabled:B,className:"w-full"}),(0,b.jsxs)("div",{className:"flex items-center justify-between pt-2 border-t",style:{borderColor:"#e2e8f0"},children:[(0,b.jsxs)("p",{className:"text-sm text-muted-foreground",children:[t.length," of ",D," selected"]}),v&&(0,b.jsx)("p",{className:"text-sm text-destructive",role:"alert",children:v})]}),(0,b.jsxs)("div",{className:"flex gap-3 pt-2",children:[(0,b.jsx)(k.Button,{onClick:F,disabled:B||!!v,className:"flex-1 text-white",style:{background:"#FF7900"},children:B?"Saving...":"Save Changes"}),(0,b.jsx)(k.Button,{onClick:()=>{s(!1),u([]),w("")},variant:"outline",disabled:B,className:"flex-1",style:{borderColor:"#8B1538",color:"#8B1538"},children:"Cancel"})]})]}):(0,b.jsxs)("div",{className:"space-y-2",children:[C.length>0?(0,b.jsx)("div",{className:"flex flex-wrap gap-2",children:C.map(a=>{let c,d=H(a);return d?(0,b.jsxs)("div",{className:"inline-flex items-center px-3 py-1 rounded-full text-sm font-medium",style:{background:"#FFE8CC",color:"#8B1538"},children:[d.name,(c=H(a),!c?.isStateLevelArea&&`, ${d.state}`)]},a):null})}):(0,b.jsx)("p",{className:"text-sm text-muted-foreground italic",children:"No metro areas selected - Click Edit to add your preferred locations"}),"success"===x&&(0,b.jsxs)("div",{className:"flex items-center gap-2 text-sm",style:{color:"#006400"},children:[(0,b.jsx)(z.Check,{className:"h-4 w-4"}),(0,b.jsx)("span",{children:"Preferred metro areas saved successfully!"})]}),"error"===x&&i&&(0,b.jsx)("p",{className:"text-sm text-destructive",role:"alert",children:i})]})})]})}var L=a.i(88473),M=a.i(50944),N=a.i(43061),O=a.i(210);function P(){let a=(0,M.useRouter)(),{user:g,clearAuth:h,isAuthenticated:i,isLoading:j}=(0,e.useAuthStore)(),{loadProfile:l,profile:m,isLoading:n}=(0,f.useProfileStore)();(0,c.useEffect)(()=>{i&&g?.userId&&!m&&!n&&l(g.userId)},[i,g?.userId,m,n,l]);let o=async()=>{try{await N.authRepository.logout()}catch(a){}finally{h(),a.push("/login")}};return(0,b.jsx)(d.ProtectedRoute,{children:(0,b.jsxs)("div",{className:"min-h-screen",style:{background:"#f7fafc"},children:[(0,b.jsx)("div",{className:"h-2 fixed top-0 left-0 right-0 z-50",style:{background:"linear-gradient(90deg, #FF7900 0%, #FF7900 33%, #8B1538 33%, #8B1538 66%, #006400 66%, #006400 100%)"}}),(0,b.jsx)("header",{className:"bg-white border-b sticky top-2 z-40",style:{background:"rgba(255, 255, 255, 0.95)",backdropFilter:"blur(10px)",boxShadow:"0 2px 20px rgba(0,0,0,0.1)"},children:(0,b.jsx)("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-4",children:(0,b.jsxs)("div",{className:"flex items-center justify-between",children:[(0,b.jsxs)("div",{className:"flex items-center gap-4",children:[(0,b.jsx)(L.Logo,{size:"md",showText:!0}),(0,b.jsx)("div",{className:"h-6 w-px bg-gray-300"}),(0,b.jsx)("h1",{className:"text-2xl font-bold",style:{color:"#8B1538"},children:"My Profile"})]}),(0,b.jsxs)("div",{className:"flex items-center gap-4",children:[(0,b.jsxs)(k.Button,{onClick:()=>{a.push("/dashboard")},variant:"outline",size:"sm",style:{borderColor:"#FF7900",color:"#8B1538"},children:[(0,b.jsx)(O.ArrowLeft,{className:"w-4 h-4 mr-2"}),"Dashboard"]}),(0,b.jsx)(k.Button,{onClick:o,variant:"outline",size:"sm",style:{borderColor:"#8B1538",color:"#8B1538"},children:"Logout"})]})]})})}),(0,b.jsx)("main",{className:"max-w-4xl mx-auto px-4 sm:px-6 lg:px-8 py-8",children:(0,b.jsxs)("div",{className:"space-y-6",children:[(0,b.jsx)("div",{className:"rounded-xl overflow-hidden",style:{background:"white",boxShadow:"0 4px 6px rgba(0, 0, 0, 0.05)"},children:(0,b.jsx)("div",{className:"p-6",style:{background:"linear-gradient(135deg, #FF7900 0%, #8B1538 50%, #006400 100%)",color:"white"},children:(0,b.jsxs)("div",{className:"flex items-center gap-4",children:[(0,b.jsx)("div",{className:"w-16 h-16 rounded-full flex items-center justify-center text-white font-bold text-xl",style:{background:"rgba(255, 255, 255, 0.2)"},children:(g?.fullName||"U").split(" ").map(a=>a[0]).join("").toUpperCase()}),(0,b.jsxs)("div",{children:[(0,b.jsxs)("h2",{className:"text-2xl font-semibold mb-1",children:["Welcome, ",g?.fullName,"!"]}),(0,b.jsx)("p",{className:"text-white/90",children:"Manage your profile information to help others in the Sri Lankan community connect with you."})]})]})})}),(0,b.jsx)(q,{}),(0,b.jsx)(B,{}),(0,b.jsx)(D,{}),(0,b.jsx)(K,{}),n&&(0,b.jsx)("div",{className:"bg-white rounded-xl shadow p-6 text-center",children:(0,b.jsxs)("div",{className:"flex items-center justify-center gap-3",children:[(0,b.jsx)("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2",style:{borderColor:"#FF7900"}}),(0,b.jsx)("p",{style:{color:"#8B1538"},children:"Loading profile..."})]})})]})})]})})}a.s(["default",()=>P],43827)}];

//# sourceMappingURL=src_app_%28dashboard%29_profile_page_tsx_f74027b2._.js.map