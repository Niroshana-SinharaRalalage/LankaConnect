module.exports=[74934,a=>{"use strict";var b=a.i(33217),c=a.i(70025),d=a.i(37927),e=a.i(29312);let f={all:["events"],lists:()=>[...f.all,"list"],list:a=>[...f.lists(),a],details:()=>[...f.all,"detail"],detail:a=>[...f.details(),a],search:a=>[...f.all,"search",a],featured:(a,b,c)=>[...f.all,"featured",{userId:a,lat:b,lng:c}]};function g(a,c){return(0,b.useQuery)({queryKey:f.list(a||{}),queryFn:async()=>await e.eventsRepository.getEvents(a),staleTime:3e5,refetchOnWindowFocus:!0,retry:1,...c})}function h(a,c){return(0,b.useQuery)({queryKey:f.detail(a||""),queryFn:()=>e.eventsRepository.getEventById(a),enabled:!!a,staleTime:6e5,refetchOnWindowFocus:!0,...c})}function i(a,c,d,g){return(0,b.useQuery)({queryKey:f.featured(a,c,d),queryFn:()=>e.eventsRepository.getFeaturedEvents(a,c,d),staleTime:3e5,refetchOnWindowFocus:!0,retry:1,...g})}function j(){let a=(0,d.useQueryClient)();return(0,c.useMutation)({mutationFn:a=>e.eventsRepository.createEvent(a),onSuccess:()=>{a.invalidateQueries({queryKey:f.lists()})}})}function k(){let a=(0,d.useQueryClient)();return(0,c.useMutation)({mutationFn:a=>e.eventsRepository.rsvpToEvent(a.eventId,a.userId,a.quantity),onMutate:async({eventId:b})=>{await a.cancelQueries({queryKey:f.detail(b)});let c=a.getQueryData(f.detail(b));return a.setQueryData(f.detail(b),a=>a?{...a,currentRegistrations:a.currentRegistrations+1}:a),{previousEvent:c}},onError:(b,{eventId:c},d)=>{d?.previousEvent&&a.setQueryData(f.detail(c),d.previousEvent)},onSuccess:(b,c)=>{a.invalidateQueries({queryKey:f.detail(c.eventId)})}})}a.s(["eventKeys",0,f,"useCreateEvent",()=>j,"useEventById",()=>h,"useEvents",()=>g,"useFeaturedEvents",()=>i,"useRsvpToEvent",()=>k])},29312,a=>{"use strict";var b=a.i(64668);let c=new class{basePath="/events";async getEvents(a={}){let c=new URLSearchParams;void 0!==a.status&&c.append("status",String(a.status)),void 0!==a.category&&c.append("category",String(a.category)),a.startDateFrom&&c.append("startDateFrom",a.startDateFrom),a.startDateTo&&c.append("startDateTo",a.startDateTo),void 0!==a.isFreeOnly&&c.append("isFreeOnly",String(a.isFreeOnly)),a.city&&c.append("city",a.city),a.state&&c.append("state",a.state),a.userId&&c.append("userId",a.userId),void 0!==a.latitude&&c.append("latitude",String(a.latitude)),void 0!==a.longitude&&c.append("longitude",String(a.longitude)),a.metroAreaIds&&a.metroAreaIds.length>0&&a.metroAreaIds.forEach(a=>c.append("metroAreaIds",a));let d=c.toString(),e=d?`${this.basePath}?${d}`:this.basePath;return await b.apiClient.get(e)}async getEventById(a){return await b.apiClient.get(`${this.basePath}/${a}`)}async searchEvents(a){let c=new URLSearchParams({searchTerm:a.searchTerm,page:String(a.page??1),pageSize:String(a.pageSize??20)});return void 0!==a.category&&c.append("category",String(a.category)),void 0!==a.isFreeOnly&&c.append("isFreeOnly",String(a.isFreeOnly)),a.startDateFrom&&c.append("startDateFrom",a.startDateFrom),await b.apiClient.get(`${this.basePath}/search?${c.toString()}`)}async getNearbyEvents(a){let c=new URLSearchParams({latitude:String(a.latitude),longitude:String(a.longitude),radiusKm:String(a.radiusKm)});return void 0!==a.category&&c.append("category",String(a.category)),void 0!==a.isFreeOnly&&c.append("isFreeOnly",String(a.isFreeOnly)),a.startDateFrom&&c.append("startDateFrom",a.startDateFrom),await b.apiClient.get(`${this.basePath}/nearby?${c.toString()}`)}async getFeaturedEvents(a,c,d){let e=new URLSearchParams;a&&e.append("userId",a),void 0!==c&&e.append("latitude",String(c)),void 0!==d&&e.append("longitude",String(d));let f=e.toString(),g=f?`${this.basePath}/featured?${f}`:`${this.basePath}/featured`;return await b.apiClient.get(g)}async createEvent(a){return(await b.apiClient.post(this.basePath,a)).id}async updateEvent(a,c){await b.apiClient.put(`${this.basePath}/${a}`,{...c,eventId:a})}async deleteEvent(a){await b.apiClient.delete(`${this.basePath}/${a}`)}async submitForApproval(a){await b.apiClient.post(`${this.basePath}/${a}/submit`)}async publishEvent(a){await b.apiClient.post(`${this.basePath}/${a}/publish`)}async cancelEvent(a,c){await b.apiClient.post(`${this.basePath}/${a}/cancel`,{reason:c})}async postponeEvent(a,c){await b.apiClient.post(`${this.basePath}/${a}/postpone`,{reason:c})}async rsvpToEvent(a,c,d=1){await b.apiClient.post(`${this.basePath}/${a}/rsvp`,{eventId:a,userId:c,quantity:d})}async cancelRsvp(a){await b.apiClient.delete(`${this.basePath}/${a}/rsvp`)}async updateRsvp(a,c,d){await b.apiClient.put(`${this.basePath}/${a}/rsvp`,{userId:c,newQuantity:d})}async getUserRsvps(){return await b.apiClient.get(`${this.basePath}/my-rsvps`)}async getUpcomingEvents(){return await b.apiClient.get(`${this.basePath}/upcoming`)}async getUserCreatedEvents(){return await b.apiClient.get(`${this.basePath}/my-events`)}async addToWaitingList(a){await b.apiClient.post(`${this.basePath}/${a}/waiting-list`)}async removeFromWaitingList(a){await b.apiClient.delete(`${this.basePath}/${a}/waiting-list`)}async getWaitingList(a){return await b.apiClient.get(`${this.basePath}/${a}/waiting-list`)}async getEventSignUpLists(a){return await b.apiClient.get(`${this.basePath}/${a}/signups`)}async addSignUpList(a,c){await b.apiClient.post(`${this.basePath}/${a}/signups`,c)}async removeSignUpList(a,c){await b.apiClient.delete(`${this.basePath}/${a}/signups/${c}`)}async commitToSignUp(a,c,d){await b.apiClient.post(`${this.basePath}/${a}/signups/${c}/commit`,d)}async cancelCommitment(a,c,d){await b.apiClient.delete(`${this.basePath}/${a}/signups/${c}/commit`,{data:d})}async uploadEventImage(a,c){let d=new FormData;return d.append("image",c),await b.apiClient.postMultipart(`${this.basePath}/${a}/images`,d)}async deleteEventImage(a,c){await b.apiClient.delete(`${this.basePath}/${a}/images/${c}`)}async getEventIcs(a){let b=await fetch(`https://lankaconnect-api-staging.politebay-79d6e8a2.eastus2.azurecontainerapps.io/api${this.basePath}/${a}/ics`);if(!b.ok)throw Error("Failed to download ICS file");return await b.blob()}async recordEventShare(a,c){await b.apiClient.post(`${this.basePath}/${a}/share`,{platform:c})}};a.s(["eventsRepository",0,c])},69212,a=>{"use strict";var b,c,d,e,f=((b={})[b.Draft=0]="Draft",b[b.Published=1]="Published",b[b.Active=2]="Active",b[b.Postponed=3]="Postponed",b[b.Cancelled=4]="Cancelled",b[b.Completed=5]="Completed",b[b.Archived=6]="Archived",b[b.UnderReview=7]="UnderReview",b),g=((c={})[c.Religious=0]="Religious",c[c.Cultural=1]="Cultural",c[c.Community=2]="Community",c[c.Educational=3]="Educational",c[c.Social=4]="Social",c[c.Business=5]="Business",c[c.Charity=6]="Charity",c[c.Entertainment=7]="Entertainment",c),h=((d={})[d.USD=1]="USD",d[d.LKR=2]="LKR",d[d.GBP=3]="GBP",d[d.EUR=4]="EUR",d[d.CAD=5]="CAD",d[d.AUD=6]="AUD",d),i=((e={})[e.Open=0]="Open",e[e.Predefined=1]="Predefined",e);a.s(["Currency",()=>h,"EventCategory",()=>g,"EventStatus",()=>f,"SignUpType",()=>i])},51300,a=>{"use strict";var b=a.i(87924),c=a.i(72131),d=a.i(74934),e=a.i(69212),f=a.i(29312);function g(){let[a,g]=c.default.useState(null),[h,i]=c.default.useState(null),{data:j,isLoading:k,error:l,fetchStatus:m,status:n}=(0,d.useEvents)({status:e.EventStatus.Published,startDateFrom:new Date().toISOString()});return c.default.useEffect(()=>{f.eventsRepository.getEvents({status:e.EventStatus.Published,startDateFrom:new Date().toISOString()}).then(a=>{console.log("✅ Direct API call SUCCESS:",a),g(a)}).catch(a=>{console.error("❌ Direct API call ERROR:",a),i(a)})},[]),console.log("=== DEBUG INFO ==="),console.log("API URL:","https://lankaconnect-api-staging.politebay-79d6e8a2.eastus2.azurecontainerapps.io/api"),console.log("React Query - Events:",j),console.log("React Query - Loading:",k),console.log("React Query - Error:",l),console.log("React Query - Status:",n),console.log("React Query - Fetch Status:",m),console.log("Direct API - Result:",a),console.log("Direct API - Error:",h),(0,b.jsxs)("div",{style:{padding:"20px",fontFamily:"monospace"},children:[(0,b.jsx)("h1",{children:"Events API Test Page"}),(0,b.jsxs)("div",{style:{marginTop:"20px",padding:"10px",background:"#f0f0f0"},children:[(0,b.jsx)("h2",{children:"Configuration"}),(0,b.jsxs)("p",{children:[(0,b.jsx)("strong",{children:"API URL:"})," ","https://lankaconnect-api-staging.politebay-79d6e8a2.eastus2.azurecontainerapps.io/api"]})]}),(0,b.jsxs)("div",{style:{marginTop:"20px",padding:"10px",background:"#f0f0f0"},children:[(0,b.jsx)("h2",{children:"React Query Status"}),(0,b.jsxs)("p",{children:[(0,b.jsx)("strong",{children:"Loading:"})," ",k?"YES":"NO"]}),(0,b.jsxs)("p",{children:[(0,b.jsx)("strong",{children:"Status:"})," ",n]}),(0,b.jsxs)("p",{children:[(0,b.jsx)("strong",{children:"Fetch Status:"})," ",m]}),(0,b.jsxs)("p",{children:[(0,b.jsx)("strong",{children:"Error:"})," ",l?JSON.stringify(l,null,2):"None"]}),(0,b.jsxs)("p",{children:[(0,b.jsx)("strong",{children:"Events Count:"})," ",j?.length||0]})]}),(0,b.jsxs)("div",{style:{marginTop:"20px",padding:"10px",background:"#e0e0ff"},children:[(0,b.jsx)("h2",{children:"Direct API Call Status"}),(0,b.jsxs)("p",{children:[(0,b.jsx)("strong",{children:"Result:"})," ",a?`${a.length} events`:"Pending..."]}),(0,b.jsxs)("p",{children:[(0,b.jsx)("strong",{children:"Error:"})," ",h?JSON.stringify(h,null,2):"None"]})]}),l&&(0,b.jsxs)("div",{style:{marginTop:"20px",padding:"10px",background:"#ffcccc"},children:[(0,b.jsx)("h2",{children:"Error Details"}),(0,b.jsx)("pre",{children:JSON.stringify(l,null,2)})]}),j&&j.length>0&&(0,b.jsxs)("div",{style:{marginTop:"20px",padding:"10px",background:"#ccffcc"},children:[(0,b.jsxs)("h2",{children:["Events (",j.length,")"]}),(0,b.jsx)("ul",{children:j.map(a=>(0,b.jsxs)("li",{children:[(0,b.jsx)("strong",{children:a.title})," - ",a.city,", ",a.state]},a.id))})]}),k&&(0,b.jsxs)("div",{style:{marginTop:"20px",padding:"10px",background:"#ffffcc"},children:[(0,b.jsx)("h2",{children:"Loading..."}),(0,b.jsx)("p",{children:"Fetching events from API..."})]})]})}a.s(["default",()=>g])}];

//# sourceMappingURL=src_6aeb1dde._.js.map