(globalThis.TURBOPACK||(globalThis.TURBOPACK=[])).push(["object"==typeof document?document.currentScript:void 0,18566,(e,t,r)=>{t.exports=e.r(76562)},88129,68834,79473,e=>{"use strict";var t=e.i(71645);let r=e=>{let t,r=new Set,s=(e,s)=>{let a="function"==typeof e?e(t):e;if(!Object.is(a,t)){let e=t;t=(null!=s?s:"object"!=typeof a||null===a)?a:Object.assign({},t,a),r.forEach(r=>r(t,e))}},a=()=>t,n={setState:s,getState:a,getInitialState:()=>l,subscribe:e=>(r.add(e),()=>r.delete(e))},l=t=e(s,a,n);return n},s=e=>{let s=e?r(e):r,a=e=>(function(e,r=e=>e){let s=t.default.useSyncExternalStore(e.subscribe,t.default.useCallback(()=>r(e.getState()),[e,r]),t.default.useCallback(()=>r(e.getInitialState()),[e,r]));return t.default.useDebugValue(s),s})(s,e);return Object.assign(a,s),a},a=e=>e?s(e):s;e.s(["create",()=>a],68834);let n={get url(){return`file://${e.P("node_modules/zustand/esm/middleware.mjs")}`}},l=new Map,i=e=>{let t=l.get(e);return t?Object.fromEntries(Object.entries(t.stores).map(([e,t])=>[e,t.getState()])):{}},o=(e,t={})=>(r,s,a)=>{let o,{enabled:d,anonymousActionType:u,store:h,...p}=t;try{o=(null!=d?d:(n.env?n.env.MODE:void 0)!=="production")&&window.__REDUX_DEVTOOLS_EXTENSION__}catch(e){}if(!o)return e(r,s,a);let{connection:g,...m}=((e,t,r)=>{if(void 0===e)return{type:"untracked",connection:t.connect(r)};let s=l.get(r.name);if(s)return{type:"tracked",store:e,...s};let a={connection:t.connect(r),stores:{}};return l.set(r.name,a),{type:"tracked",store:e,...a}})(h,o,p),x=!0;a.setState=(e,t,n)=>{let l=r(e,t);if(!x)return l;let o=void 0===n?{type:u||(e=>{var t,r;if(!e)return;let s=e.split("\n"),a=s.findIndex(e=>e.includes("api.setState"));if(a<0)return;let n=(null==(t=s[a+1])?void 0:t.trim())||"";return null==(r=/.+ (.+) .+/.exec(n))?void 0:r[1]})(Error().stack)||"anonymous"}:"string"==typeof n?{type:n}:n;return void 0===h?null==g||g.send(o,s()):null==g||g.send({...o,type:`${h}/${o.type}`},{...i(p.name),[h]:a.getState()}),l},a.devtools={cleanup:()=>{g&&"function"==typeof g.unsubscribe&&g.unsubscribe(),((e,t)=>{if(void 0===t)return;let r=l.get(e);r&&(delete r.stores[t],0===Object.keys(r.stores).length&&l.delete(e))})(p.name,h)}};let v=(...e)=>{let t=x;x=!1,r(...e),x=t},f=e(a.setState,s,a);if("untracked"===m.type?null==g||g.init(f):(m.stores[m.store]=a,null==g||g.init(Object.fromEntries(Object.entries(m.stores).map(([e,t])=>[e,e===m.store?f:t.getState()])))),a.dispatchFromDevtools&&"function"==typeof a.dispatch){let e=!1,t=a.dispatch;a.dispatch=(...r)=>{(n.env?n.env.MODE:void 0)==="production"||"__setState"!==r[0].type||e||(console.warn('[zustand devtools middleware] "__setState" action type is reserved to set state from the devtools. Avoid using it.'),e=!0),t(...r)}}return g.subscribe(e=>{var t;switch(e.type){case"ACTION":if("string"!=typeof e.payload)return void console.error("[zustand devtools middleware] Unsupported action format");return c(e.payload,e=>{if("__setState"===e.type){if(void 0===h)return void v(e.state);1!==Object.keys(e.state).length&&console.error(`
                    [zustand devtools middleware] Unsupported __setState action format.
                    When using 'store' option in devtools(), the 'state' should have only one key, which is a value of 'store' that was passed in devtools(),
                    and value of this only key should be a state object. Example: { "type": "__setState", "state": { "abc123Store": { "foo": "bar" } } }
                    `);let t=e.state[h];return void(null==t||JSON.stringify(a.getState())!==JSON.stringify(t)&&v(t))}a.dispatchFromDevtools&&"function"==typeof a.dispatch&&a.dispatch(e)});case"DISPATCH":switch(e.payload.type){case"RESET":if(v(f),void 0===h)return null==g?void 0:g.init(a.getState());return null==g?void 0:g.init(i(p.name));case"COMMIT":if(void 0===h){null==g||g.init(a.getState());break}return null==g?void 0:g.init(i(p.name));case"ROLLBACK":return c(e.state,e=>{if(void 0===h){v(e),null==g||g.init(a.getState());return}v(e[h]),null==g||g.init(i(p.name))});case"JUMP_TO_STATE":case"JUMP_TO_ACTION":return c(e.state,e=>{void 0===h?v(e):JSON.stringify(a.getState())!==JSON.stringify(e[h])&&v(e[h])});case"IMPORT_STATE":{let{nextLiftedState:r}=e.payload,s=null==(t=r.computedStates.slice(-1)[0])?void 0:t.state;if(!s)return;void 0===h?v(s):v(s[h]),null==g||g.send(null,r);break}case"PAUSE_RECORDING":return x=!x}return}}),f},c=(e,t)=>{let r;try{r=JSON.parse(e)}catch(e){console.error("[zustand devtools middleware] Could not parse the received json",e)}void 0!==r&&t(r)},d=e=>t=>{try{let r=e(t);if(r instanceof Promise)return r;return{then:e=>d(e)(r),catch(e){return this}}}catch(e){return{then(e){return this},catch:t=>d(t)(e)}}},u=(e,t)=>(r,s,a)=>{let n,l={storage:function(e,t){let r;try{r=e()}catch(e){return}return{getItem:e=>{var t;let s=e=>null===e?null:JSON.parse(e,void 0),a=null!=(t=r.getItem(e))?t:null;return a instanceof Promise?a.then(s):s(a)},setItem:(e,t)=>r.setItem(e,JSON.stringify(t,void 0)),removeItem:e=>r.removeItem(e)}}(()=>localStorage),partialize:e=>e,version:0,merge:(e,t)=>({...t,...e}),...t},i=!1,o=new Set,c=new Set,u=l.storage;if(!u)return e((...e)=>{console.warn(`[zustand persist middleware] Unable to update item '${l.name}', the given storage is currently unavailable.`),r(...e)},s,a);let h=()=>{let e=l.partialize({...s()});return u.setItem(l.name,{state:e,version:l.version})},p=a.setState;a.setState=(e,t)=>(p(e,t),h());let g=e((...e)=>(r(...e),h()),s,a);a.getInitialState=()=>g;let m=()=>{var e,t;if(!u)return;i=!1,o.forEach(e=>{var t;return e(null!=(t=s())?t:g)});let a=(null==(t=l.onRehydrateStorage)?void 0:t.call(l,null!=(e=s())?e:g))||void 0;return d(u.getItem.bind(u))(l.name).then(e=>{if(e)if("number"!=typeof e.version||e.version===l.version)return[!1,e.state];else{if(l.migrate){let t=l.migrate(e.state,e.version);return t instanceof Promise?t.then(e=>[!0,e]):[!0,t]}console.error("State loaded from storage couldn't be migrated since no migrate function was provided")}return[!1,void 0]}).then(e=>{var t;let[a,i]=e;if(r(n=l.merge(i,null!=(t=s())?t:g),!0),a)return h()}).then(()=>{null==a||a(n,void 0),n=s(),i=!0,c.forEach(e=>e(n))}).catch(e=>{null==a||a(void 0,e)})};return a.persist={setOptions:e=>{l={...l,...e},e.storage&&(u=e.storage)},clearStorage:()=>{null==u||u.removeItem(l.name)},getOptions:()=>l,rehydrate:()=>m(),hasHydrated:()=>i,onHydrate:e=>(o.add(e),()=>{o.delete(e)}),onFinishHydration:e=>(c.add(e),()=>{c.delete(e)})},l.skipHydration||m(),n||g};e.s(["devtools",()=>o,"persist",()=>u],79473);let h="lankaconnect_access_token",p="lankaconnect_refresh_token",g="lankaconnect_user";class m{static isAvailable(){try{let e="__localStorage_test__";return localStorage.setItem(e,e),localStorage.removeItem(e),!0}catch{return!1}}static getItem(e){if(!this.isAvailable())return console.warn("localStorage is not available"),null;try{let t=localStorage.getItem(e);if(!t)return null;return JSON.parse(t)}catch(t){return console.error(`Error reading from localStorage (${e}):`,t),null}}static setItem(e,t){if(!this.isAvailable())return console.warn("localStorage is not available"),!1;try{return localStorage.setItem(e,JSON.stringify(t)),!0}catch(t){return console.error(`Error writing to localStorage (${e}):`,t),!1}}static removeItem(e){if(!this.isAvailable())return void console.warn("localStorage is not available");try{localStorage.removeItem(e)}catch(t){console.error(`Error removing from localStorage (${e}):`,t)}}static clear(){if(!this.isAvailable())return void console.warn("localStorage is not available");try{localStorage.clear()}catch(e){console.error("Error clearing localStorage:",e)}}static getAccessToken(){return this.getItem(h)}static setAccessToken(e){return this.setItem(h,e)}static getRefreshToken(){return this.getItem(p)}static setRefreshToken(e){return this.setItem(p,e)}static getUser(){return this.getItem(g)}static setUser(e){return this.setItem(g,e)}static clearAuth(){this.removeItem(h),this.removeItem(p),this.removeItem(g)}}var x=e.i(48831);let v=a()(o(u((e,t)=>({user:null,accessToken:null,refreshToken:null,isAuthenticated:!1,isLoading:!1,setAuth:(t,r)=>{m.setAccessToken(r.accessToken),m.setRefreshToken(r.refreshToken),m.setUser(t),x.apiClient.setAuthToken(r.accessToken),e({user:t,accessToken:r.accessToken,refreshToken:r.refreshToken,isAuthenticated:!0,isLoading:!1})},clearAuth:()=>{m.clearAuth(),x.apiClient.clearAuthToken(),e({user:null,accessToken:null,refreshToken:null,isAuthenticated:!1,isLoading:!1})},setLoading:t=>{e({isLoading:t})},updateUser:r=>{let s=t().user;if(!s)return;let a={...s,...r};m.setUser(a),e({user:a})}}),{name:"auth-storage",partialize:e=>({user:e.user,accessToken:e.accessToken,refreshToken:e.refreshToken,isAuthenticated:e.isAuthenticated}),onRehydrateStorage:()=>e=>{e?.accessToken&&x.apiClient.setAuthToken(e.accessToken)}}),{name:"AuthStore"}));e.s(["useAuthStore",0,v],88129)},89543,e=>{"use strict";var t=e.i(43476),r=e.i(71645),s=e.i(18566),a=e.i(88129),n=e.i(44212);function l({isOpen:e,userName:s,onClose:a,onConfirm:l,isLoading:i=!1}){let[o,c]=r.useState("");return e?(0,t.jsx)("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black bg-opacity-50",children:(0,t.jsxs)("div",{className:"bg-white rounded-lg shadow-xl max-w-md w-full mx-4 p-6",children:[(0,t.jsx)("h2",{className:"text-2xl font-bold text-[#8B1538] mb-4",children:"Reject Role Upgrade"}),(0,t.jsxs)("p",{className:"text-gray-700 mb-4",children:["Are you sure you want to reject the role upgrade request for ",(0,t.jsx)("strong",{children:s}),"?"]}),(0,t.jsxs)("div",{className:"mb-6",children:[(0,t.jsx)("label",{htmlFor:"reason",className:"block text-sm font-medium text-gray-700 mb-2",children:"Reason (Optional)"}),(0,t.jsx)("textarea",{id:"reason",value:o,onChange:e=>c(e.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-[#FF7900] focus:border-transparent",rows:4,placeholder:"Provide a reason for rejection (optional)",disabled:i})]}),(0,t.jsxs)("div",{className:"flex gap-3 justify-end",children:[(0,t.jsx)(n.Button,{variant:"outline",onClick:()=>{c(""),a()},disabled:i,className:"border-gray-300 text-gray-700 hover:bg-gray-50",children:"Cancel"}),(0,t.jsx)(n.Button,{variant:"default",onClick:()=>{l(o)},disabled:i,className:"bg-red-600 hover:bg-red-700 text-white",children:i?"Rejecting...":"Reject"})]})]})}):null}var i=e.i(48831);let o=new class{basePath="/approvals";async getPendingApprovals(){return await i.apiClient.get(`${this.basePath}/pending`)}async approveRoleUpgrade(e){await i.apiClient.post(`${this.basePath}/${e}/approve`)}async rejectRoleUpgrade(e,t){await i.apiClient.post(`${this.basePath}/${e}/reject`,{reason:t})}};function c({approvals:e,onUpdate:s}){let[a,i]=r.useState(null),[c,d]=r.useState(!1),[u,h]=r.useState(null),p=async e=>{try{h(e),await o.approveRoleUpgrade(e),s()}catch(e){console.error("Error approving role upgrade:",e),alert("Failed to approve role upgrade")}finally{h(null)}},g=async e=>{if(a)try{h(a.userId),await o.rejectRoleUpgrade(a.userId,e),d(!1),i(null),s()}catch(e){console.error("Error rejecting role upgrade:",e),alert("Failed to reject role upgrade")}finally{h(null)}};return 0===e.length?(0,t.jsx)("div",{className:"bg-white rounded-lg shadow p-8 text-center",children:(0,t.jsx)("p",{className:"text-gray-500 text-lg",children:"No pending approvals"})}):(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)("div",{className:"bg-white rounded-lg shadow overflow-hidden",children:(0,t.jsxs)("table",{className:"min-w-full divide-y divide-gray-200",children:[(0,t.jsx)("thead",{className:"bg-gray-50",children:(0,t.jsxs)("tr",{children:[(0,t.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"User"}),(0,t.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Email"}),(0,t.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Current Role"}),(0,t.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Requested Role"}),(0,t.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Requested At"}),(0,t.jsx)("th",{className:"px-6 py-3 text-right text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Actions"})]})}),(0,t.jsx)("tbody",{className:"bg-white divide-y divide-gray-200",children:e.map(e=>(0,t.jsxs)("tr",{className:"hover:bg-gray-50",children:[(0,t.jsx)("td",{className:"px-6 py-4 whitespace-nowrap",children:(0,t.jsx)("div",{className:"text-sm font-medium text-gray-900",children:e.fullName})}),(0,t.jsx)("td",{className:"px-6 py-4 whitespace-nowrap",children:(0,t.jsx)("div",{className:"text-sm text-gray-500",children:e.email})}),(0,t.jsx)("td",{className:"px-6 py-4 whitespace-nowrap",children:(0,t.jsx)("span",{className:"px-2 inline-flex text-xs leading-5 font-semibold rounded-full bg-gray-100 text-gray-800",children:e.currentRole})}),(0,t.jsx)("td",{className:"px-6 py-4 whitespace-nowrap",children:(0,t.jsx)("span",{className:"px-2 inline-flex text-xs leading-5 font-semibold rounded-full bg-[#FFE8CC] text-[#8B1538]",children:e.requestedRole})}),(0,t.jsx)("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500",children:new Date(e.requestedAt).toLocaleDateString("en-US",{year:"numeric",month:"short",day:"numeric",hour:"2-digit",minute:"2-digit"})}),(0,t.jsx)("td",{className:"px-6 py-4 whitespace-nowrap text-right text-sm font-medium",children:(0,t.jsxs)("div",{className:"flex gap-2 justify-end",children:[(0,t.jsx)(n.Button,{size:"sm",variant:"default",onClick:()=>p(e.userId),disabled:u===e.userId,className:"bg-green-600 hover:bg-green-700 text-white",children:u===e.userId?"Approving...":"Approve"}),(0,t.jsx)(n.Button,{size:"sm",variant:"outline",onClick:()=>{i(e),d(!0)},disabled:u===e.userId,className:"border-red-600 text-red-600 hover:bg-red-50",children:"Reject"})]})})]},e.userId))})]})}),(0,t.jsx)(l,{isOpen:c,userName:a?.fullName||"",onClose:()=>{d(!1),i(null)},onConfirm:g,isLoading:u===a?.userId})]})}function d(){let e=(0,s.useRouter)(),{user:n,isAuthenticated:l}=(0,a.useAuthStore)(),[i,d]=r.useState([]),[u,h]=r.useState(!0),[p,g]=r.useState(null),m=n?.role==="Admin"||n?.role==="AdminManager";r.useEffect(()=>{l?m?x():e.push("/dashboard"):e.push("/login")},[l,m,e]);let x=async()=>{try{h(!0),g(null);let e=await o.getPendingApprovals();d(e)}catch(e){console.error("Error loading approvals:",e),g("Failed to load pending approvals")}finally{h(!1)}};return l&&m?(0,t.jsxs)("div",{className:"min-h-screen bg-gray-50",children:[(0,t.jsx)("div",{className:"bg-white shadow",children:(0,t.jsx)("div",{className:"container mx-auto px-4 sm:px-6 lg:px-8 py-6",children:(0,t.jsxs)("div",{className:"flex items-center justify-between",children:[(0,t.jsxs)("div",{children:[(0,t.jsx)("h1",{className:"text-3xl font-bold text-[#8B1538]",children:"Role Upgrade Approvals"}),(0,t.jsx)("p",{className:"mt-1 text-sm text-gray-500",children:"Manage pending Event Organizer role requests"})]}),(0,t.jsx)("button",{onClick:x,disabled:u,className:"px-4 py-2 bg-[#FF7900] text-white rounded-lg hover:bg-[#E66D00] transition-colors disabled:opacity-50",children:u?"Refreshing...":"Refresh"})]})})}),(0,t.jsxs)("div",{className:"container mx-auto px-4 sm:px-6 lg:px-8 py-8",children:[(0,t.jsx)("div",{className:"mb-6 grid grid-cols-1 gap-5 sm:grid-cols-2 lg:grid-cols-3",children:(0,t.jsx)("div",{className:"bg-white overflow-hidden shadow rounded-lg",children:(0,t.jsxs)("div",{className:"px-4 py-5 sm:p-6",children:[(0,t.jsx)("dt",{className:"text-sm font-medium text-gray-500 truncate",children:"Pending Requests"}),(0,t.jsx)("dd",{className:"mt-1 text-3xl font-semibold text-[#8B1538]",children:i.length})]})})}),p&&(0,t.jsx)("div",{className:"mb-6 bg-red-50 border border-red-200 rounded-lg p-4",children:(0,t.jsx)("p",{className:"text-red-800",children:p})}),u?(0,t.jsx)("div",{className:"bg-white rounded-lg shadow p-8 text-center",children:(0,t.jsx)("p",{className:"text-gray-500",children:"Loading approvals..."})}):(0,t.jsx)(c,{approvals:i,onUpdate:x})]})]}):null}e.s(["default",()=>d],89543)}]);