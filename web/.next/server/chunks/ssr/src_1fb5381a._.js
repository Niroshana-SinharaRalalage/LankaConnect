module.exports=[72493,a=>{"use strict";var b=a.i(87924),c=a.i(72131),d=a.i(50944),e=a.i(72988);function f({children:a}){let f=(0,d.useRouter)(),{isAuthenticated:g,isLoading:h}=(0,e.useAuthStore)(),[i,j]=(0,c.useState)(!1);return((0,c.useEffect)(()=>{j(!0)},[]),(0,c.useEffect)(()=>{!i||h||g||f.push("/login")},[g,h,i,f]),!i||h)?(0,b.jsx)("div",{className:"min-h-screen flex items-center justify-center",style:{background:"#f7fafc"},children:(0,b.jsxs)("div",{className:"text-center",children:[(0,b.jsx)("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 mx-auto mb-4",style:{borderColor:"#FF7900"}}),(0,b.jsx)("p",{style:{color:"#8B1538",fontSize:"0.9rem"},children:"Loading..."})]})}):g?(0,b.jsx)(b.Fragment,{children:a}):null}a.s(["ProtectedRoute",()=>f])},26135,a=>{"use strict";var b=a.i(87924),c=a.i(72131),d=a.i(72493),e=a.i(50388),f=a.i(93003),g=a.i(50253),h=a.i(42043),i=a.i(18203),j=a.i(73992),k=a.i(45744);function l(){let[a,l]=c.useState("all"),{data:m=[],isLoading:n,error:o}=(0,j.useUnreadNotifications)(),p=(0,j.useMarkNotificationAsRead)(),q=(0,j.useMarkAllNotificationsAsRead)(),r=async a=>{try{await p.mutateAsync(a)}catch(a){console.error("Failed to mark notification as read:",a)}},s=async()=>{try{await q.mutateAsync()}catch(a){console.error("Failed to mark all notifications as read:",a)}},t="all"===a?m:m.filter(b=>b.type===a),u=[{value:"all",label:"All Notifications"},{value:"RoleUpgradeApproved",label:"Role Upgrades"},{value:"FreeTrialExpiring",label:"Trial & Subscription"},{value:"System",label:"System"},{value:"Event",label:"Events"}];return(0,b.jsx)(d.ProtectedRoute,{children:(0,b.jsxs)("div",{className:"min-h-screen bg-gray-50",children:[(0,b.jsx)(e.Header,{}),(0,b.jsxs)("main",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8",children:[(0,b.jsxs)("div",{className:"mb-8",children:[(0,b.jsx)("h1",{className:"text-3xl font-bold text-[#8B1538] mb-2",children:"Notifications"}),(0,b.jsx)("p",{className:"text-gray-600",children:"Stay updated with your latest notifications"})]}),(0,b.jsxs)("div",{className:"grid grid-cols-1 lg:grid-cols-4 gap-8",children:[(0,b.jsx)("aside",{className:"lg:col-span-1",children:(0,b.jsxs)(g.Card,{children:[(0,b.jsx)(g.CardHeader,{children:(0,b.jsx)(g.CardTitle,{className:"text-lg text-[#8B1538]",children:"Filter"})}),(0,b.jsx)(g.CardContent,{children:(0,b.jsx)("div",{className:"space-y-2",children:u.map(c=>(0,b.jsxs)("button",{onClick:()=>l(c.value),className:(0,i.cn)("w-full text-left px-4 py-2 rounded-lg transition-colors",a===c.value?"bg-[#FF7900] text-white font-medium":"hover:bg-gray-100 text-gray-700"),children:[c.label,"all"===c.value&&m.length>0&&(0,b.jsxs)("span",{className:"ml-2 text-sm",children:["(",m.length,")"]})]},c.value))})})]})}),(0,b.jsx)("div",{className:"lg:col-span-3",children:(0,b.jsxs)(g.Card,{children:[(0,b.jsx)(g.CardHeader,{children:(0,b.jsxs)("div",{className:"flex items-center justify-between",children:[(0,b.jsxs)(g.CardTitle,{className:"text-xl text-[#8B1538]",children:["all"===a?"All":u.find(b=>b.value===a)?.label," ","Notifications"]}),t.length>0&&(0,b.jsx)(h.Button,{variant:"outline",size:"sm",onClick:s,disabled:q.isPending,className:"border-[#FF7900] text-[#FF7900] hover:bg-[#FF7900] hover:text-white",children:q.isPending?"Marking...":"Mark all as read"})]})}),(0,b.jsxs)(g.CardContent,{children:[n&&(0,b.jsx)("div",{className:"flex items-center justify-center py-12",children:(0,b.jsxs)("div",{className:"text-center",children:[(0,b.jsxs)("svg",{className:"animate-spin h-12 w-12 mx-auto mb-4 text-[#FF7900]",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",children:[(0,b.jsx)("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),(0,b.jsx)("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]}),(0,b.jsx)("p",{className:"text-gray-600",children:"Loading notifications..."})]})}),o&&(0,b.jsx)("div",{className:"flex items-center justify-center py-12",children:(0,b.jsxs)("div",{className:"text-center",children:[(0,b.jsx)("svg",{className:"w-12 h-12 mx-auto mb-4 text-red-500",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",xmlns:"http://www.w3.org/2000/svg",children:(0,b.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 8v4m0 4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"})}),(0,b.jsx)("p",{className:"text-red-600 font-medium mb-2",children:"Failed to load notifications"}),(0,b.jsx)("p",{className:"text-gray-600 text-sm",children:o.message})]})}),!n&&!o&&0===t.length&&(0,b.jsx)("div",{className:"flex items-center justify-center py-12",children:(0,b.jsxs)("div",{className:"text-center",children:[(0,b.jsx)("svg",{className:"w-16 h-16 mx-auto mb-4 text-gray-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",xmlns:"http://www.w3.org/2000/svg",children:(0,b.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M15 17h5l-1.405-1.405A2.032 2.032 0 0118 14.158V11a6.002 6.002 0 00-4-5.659V5a2 2 0 10-4 0v.341C7.67 6.165 6 8.388 6 11v3.159c0 .538-.214 1.055-.595 1.436L4 17h5m6 0v1a3 3 0 11-6 0v-1m6 0H9"})}),(0,b.jsx)("p",{className:"text-gray-600 font-medium mb-2",children:"No notifications"}),(0,b.jsx)("p",{className:"text-gray-500 text-sm",children:"You're all caught up!"})]})}),!n&&!o&&t.length>0&&(0,b.jsx)("div",{className:"space-y-3",children:t.map(a=>{let c,d,e,f,g=k.notificationTypeConfig[a.type];return(0,b.jsx)("div",{className:(0,i.cn)("p-4 rounded-lg border transition-all cursor-pointer","hover:shadow-md hover:border-[#FF7900]","bg-white border-gray-200"),onClick:()=>r(a.id),children:(0,b.jsxs)("div",{className:"flex gap-4",children:[(0,b.jsx)("div",{className:(0,i.cn)("flex-shrink-0 w-12 h-12 rounded-full","flex items-center justify-center text-xl",g.bgColor,g.color),children:g.icon}),(0,b.jsxs)("div",{className:"flex-1 min-w-0",children:[(0,b.jsxs)("div",{className:"flex items-start justify-between gap-4 mb-2",children:[(0,b.jsx)("h3",{className:"font-semibold text-[#8B1538] text-base",children:a.title}),(0,b.jsx)("span",{className:"flex-shrink-0 w-2 h-2 rounded-full bg-[#FF7900]","aria-label":"Unread"})]}),(0,b.jsx)("p",{className:"text-gray-700 text-sm mb-2 leading-relaxed",children:a.message}),(0,b.jsxs)("div",{className:"flex items-center gap-2",children:[(0,b.jsx)("span",{className:(0,i.cn)("inline-block px-2 py-0.5 rounded text-xs font-medium",g.bgColor,g.color),children:a.type.replace(/([A-Z])/g," $1").trim()}),(0,b.jsx)("span",{className:"text-gray-500 text-xs",children:(c=new Date(a.createdAt),f=Math.floor((e=Math.floor((d=Math.floor((new Date().getTime()-c.getTime())/6e4))/60))/24),d<1?"Just now":d<60?`${d} ${1===d?"minute":"minutes"} ago`:e<24?`${e} ${1===e?"hour":"hours"} ago`:f<7?`${f} ${1===f?"day":"days"} ago`:c.toLocaleDateString("en-US",{month:"short",day:"numeric",year:"numeric"}))})]})]})]})},a.id)})})]})]})})]})]}),(0,b.jsx)(f.default,{})]})})}a.s(["default",()=>l])},98075,a=>{a.v(b=>Promise.all(["server/chunks/ssr/src_infrastructure_api_repositories_auth_repository_ts_228441a4._.js"].map(b=>a.l(b))).then(()=>b(43061)))}];

//# sourceMappingURL=src_1fb5381a._.js.map