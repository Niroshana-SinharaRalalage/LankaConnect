(globalThis.TURBOPACK||(globalThis.TURBOPACK=[])).push(["object"==typeof document?document.currentScript:void 0,14863,e=>{"use strict";var s=e.i(43476),t=e.i(71645),a=e.i(18566),l=e.i(88129);function i({children:e}){let i=(0,a.useRouter)(),{isAuthenticated:r,isLoading:n}=(0,l.useAuthStore)(),[c,o]=(0,t.useState)(!1);return((0,t.useEffect)(()=>{o(!0)},[]),(0,t.useEffect)(()=>{!c||n||r||i.push("/login")},[r,n,c,i]),!c||n)?(0,s.jsx)("div",{className:"min-h-screen flex items-center justify-center",style:{background:"#f7fafc"},children:(0,s.jsxs)("div",{className:"text-center",children:[(0,s.jsx)("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 mx-auto mb-4",style:{borderColor:"#FF7900"}}),(0,s.jsx)("p",{style:{color:"#8B1538",fontSize:"0.9rem"},children:"Loading..."})]})}):r?(0,s.jsx)(s.Fragment,{children:e}):null}e.s(["ProtectedRoute",()=>i])},38682,e=>{"use strict";var s=e.i(43476),t=e.i(71645),a=e.i(14863),l=e.i(3224),i=e.i(79574),r=e.i(21065),n=e.i(44212),c=e.i(57022),o=e.i(13795),d=e.i(12726);function x(){let[e,x]=t.useState("all"),{data:m=[],isLoading:h,error:u}=(0,o.useUnreadNotifications)(),g=(0,o.useMarkNotificationAsRead)(),j=(0,o.useMarkAllNotificationsAsRead)(),f=async e=>{try{await g.mutateAsync(e)}catch(e){console.error("Failed to mark notification as read:",e)}},p=async()=>{try{await j.mutateAsync()}catch(e){console.error("Failed to mark all notifications as read:",e)}},v="all"===e?m:m.filter(s=>s.type===e),N=[{value:"all",label:"All Notifications"},{value:"RoleUpgradeApproved",label:"Role Upgrades"},{value:"FreeTrialExpiring",label:"Trial & Subscription"},{value:"System",label:"System"},{value:"Event",label:"Events"}];return(0,s.jsx)(a.ProtectedRoute,{children:(0,s.jsxs)("div",{className:"min-h-screen bg-gray-50",children:[(0,s.jsx)(l.Header,{}),(0,s.jsxs)("main",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8",children:[(0,s.jsxs)("div",{className:"mb-8",children:[(0,s.jsx)("h1",{className:"text-3xl font-bold text-[#8B1538] mb-2",children:"Notifications"}),(0,s.jsx)("p",{className:"text-gray-600",children:"Stay updated with your latest notifications"})]}),(0,s.jsxs)("div",{className:"grid grid-cols-1 lg:grid-cols-4 gap-8",children:[(0,s.jsx)("aside",{className:"lg:col-span-1",children:(0,s.jsxs)(r.Card,{children:[(0,s.jsx)(r.CardHeader,{children:(0,s.jsx)(r.CardTitle,{className:"text-lg text-[#8B1538]",children:"Filter"})}),(0,s.jsx)(r.CardContent,{children:(0,s.jsx)("div",{className:"space-y-2",children:N.map(t=>(0,s.jsxs)("button",{onClick:()=>x(t.value),className:(0,c.cn)("w-full text-left px-4 py-2 rounded-lg transition-colors",e===t.value?"bg-[#FF7900] text-white font-medium":"hover:bg-gray-100 text-gray-700"),children:[t.label,"all"===t.value&&m.length>0&&(0,s.jsxs)("span",{className:"ml-2 text-sm",children:["(",m.length,")"]})]},t.value))})})]})}),(0,s.jsx)("div",{className:"lg:col-span-3",children:(0,s.jsxs)(r.Card,{children:[(0,s.jsx)(r.CardHeader,{children:(0,s.jsxs)("div",{className:"flex items-center justify-between",children:[(0,s.jsxs)(r.CardTitle,{className:"text-xl text-[#8B1538]",children:["all"===e?"All":N.find(s=>s.value===e)?.label," ","Notifications"]}),v.length>0&&(0,s.jsx)(n.Button,{variant:"outline",size:"sm",onClick:p,disabled:j.isPending,className:"border-[#FF7900] text-[#FF7900] hover:bg-[#FF7900] hover:text-white",children:j.isPending?"Marking...":"Mark all as read"})]})}),(0,s.jsxs)(r.CardContent,{children:[h&&(0,s.jsx)("div",{className:"flex items-center justify-center py-12",children:(0,s.jsxs)("div",{className:"text-center",children:[(0,s.jsxs)("svg",{className:"animate-spin h-12 w-12 mx-auto mb-4 text-[#FF7900]",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",children:[(0,s.jsx)("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),(0,s.jsx)("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]}),(0,s.jsx)("p",{className:"text-gray-600",children:"Loading notifications..."})]})}),u&&(0,s.jsx)("div",{className:"flex items-center justify-center py-12",children:(0,s.jsxs)("div",{className:"text-center",children:[(0,s.jsx)("svg",{className:"w-12 h-12 mx-auto mb-4 text-red-500",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",xmlns:"http://www.w3.org/2000/svg",children:(0,s.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 8v4m0 4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"})}),(0,s.jsx)("p",{className:"text-red-600 font-medium mb-2",children:"Failed to load notifications"}),(0,s.jsx)("p",{className:"text-gray-600 text-sm",children:u.message})]})}),!h&&!u&&0===v.length&&(0,s.jsx)("div",{className:"flex items-center justify-center py-12",children:(0,s.jsxs)("div",{className:"text-center",children:[(0,s.jsx)("svg",{className:"w-16 h-16 mx-auto mb-4 text-gray-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",xmlns:"http://www.w3.org/2000/svg",children:(0,s.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M15 17h5l-1.405-1.405A2.032 2.032 0 0118 14.158V11a6.002 6.002 0 00-4-5.659V5a2 2 0 10-4 0v.341C7.67 6.165 6 8.388 6 11v3.159c0 .538-.214 1.055-.595 1.436L4 17h5m6 0v1a3 3 0 11-6 0v-1m6 0H9"})}),(0,s.jsx)("p",{className:"text-gray-600 font-medium mb-2",children:"No notifications"}),(0,s.jsx)("p",{className:"text-gray-500 text-sm",children:"You're all caught up!"})]})}),!h&&!u&&v.length>0&&(0,s.jsx)("div",{className:"space-y-3",children:v.map(e=>{let t,a,l,i,r=d.notificationTypeConfig[e.type];return(0,s.jsx)("div",{className:(0,c.cn)("p-4 rounded-lg border transition-all cursor-pointer","hover:shadow-md hover:border-[#FF7900]","bg-white border-gray-200"),onClick:()=>f(e.id),children:(0,s.jsxs)("div",{className:"flex gap-4",children:[(0,s.jsx)("div",{className:(0,c.cn)("flex-shrink-0 w-12 h-12 rounded-full","flex items-center justify-center text-xl",r.bgColor,r.color),children:r.icon}),(0,s.jsxs)("div",{className:"flex-1 min-w-0",children:[(0,s.jsxs)("div",{className:"flex items-start justify-between gap-4 mb-2",children:[(0,s.jsx)("h3",{className:"font-semibold text-[#8B1538] text-base",children:e.title}),(0,s.jsx)("span",{className:"flex-shrink-0 w-2 h-2 rounded-full bg-[#FF7900]","aria-label":"Unread"})]}),(0,s.jsx)("p",{className:"text-gray-700 text-sm mb-2 leading-relaxed",children:e.message}),(0,s.jsxs)("div",{className:"flex items-center gap-2",children:[(0,s.jsx)("span",{className:(0,c.cn)("inline-block px-2 py-0.5 rounded text-xs font-medium",r.bgColor,r.color),children:e.type.replace(/([A-Z])/g," $1").trim()}),(0,s.jsx)("span",{className:"text-gray-500 text-xs",children:(t=new Date(e.createdAt),i=Math.floor((l=Math.floor((a=Math.floor((new Date().getTime()-t.getTime())/6e4))/60))/24),a<1?"Just now":a<60?`${a} ${1===a?"minute":"minutes"} ago`:l<24?`${l} ${1===l?"hour":"hours"} ago`:i<7?`${i} ${1===i?"day":"days"} ago`:t.toLocaleDateString("en-US",{month:"short",day:"numeric",year:"numeric"}))})]})]})]})},e.id)})})]})]})})]})]}),(0,s.jsx)(i.default,{})]})})}e.s(["default",()=>x])},45865,e=>{e.v(s=>Promise.all(["static/chunks/f0466de78faadcde.js"].map(s=>e.l(s))).then(()=>s(42490)))}]);