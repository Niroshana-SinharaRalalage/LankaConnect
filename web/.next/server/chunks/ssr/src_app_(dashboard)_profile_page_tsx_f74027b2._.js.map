{"version":3,"sources":["turbopack:///[project]/src/app/(dashboard)/profile/page.tsx","turbopack:///[project]/src/presentation/components/widgets/PhotoUploadWidget.tsx","turbopack:///[project]/src/presentation/components/features/profile/ProfilePhotoSection.tsx","turbopack:///[project]/src/presentation/components/features/profile/LocationSection.tsx","turbopack:///[project]/src/presentation/components/features/profile/CulturalInterestsSection.tsx","turbopack:///[project]/src/presentation/components/ui/TreeDropdown.tsx","turbopack:///[project]/src/infrastructure/api/repositories/metro-areas.repository.ts","turbopack:///[project]/src/presentation/components/features/profile/PreferredMetroAreasSection.tsx","turbopack:///[project]/node_modules/lucide-react/src/icons/upload.ts","turbopack:///[project]/src/domain/constants/profile.constants.ts","turbopack:///[project]/src/presentation/hooks/useMetroAreas.ts"],"sourcesContent":["'use client';\r\n\r\nimport { useEffect } from 'react';\r\nimport { ProtectedRoute } from '@/presentation/components/auth/ProtectedRoute';\r\nimport { useAuthStore } from '@/presentation/store/useAuthStore';\r\nimport { useProfileStore } from '@/presentation/store/useProfileStore';\r\nimport { ProfilePhotoSection } from '@/presentation/components/features/profile/ProfilePhotoSection';\r\nimport { LocationSection } from '@/presentation/components/features/profile/LocationSection';\r\nimport { CulturalInterestsSection } from '@/presentation/components/features/profile/CulturalInterestsSection';\r\nimport { PreferredMetroAreasSection } from '@/presentation/components/features/profile/PreferredMetroAreasSection';\r\nimport { Button } from '@/presentation/components/ui/Button';\r\nimport { Logo } from '@/presentation/components/atoms/Logo';\r\nimport { useRouter } from 'next/navigation';\r\nimport { authRepository } from '@/infrastructure/api/repositories/auth.repository';\r\nimport { ArrowLeft } from 'lucide-react';\r\n\r\n/**\r\n * Profile Page\r\n *\r\n * User profile management page with:\r\n * - Profile photo upload/delete\r\n * - Basic info editing (future)\r\n * - Location info editing (future)\r\n * - Cultural interests editing (future)\r\n * - Languages editing (future)\r\n *\r\n * Phase 1: Photo upload only\r\n * Future phases will add additional sections\r\n */\r\nexport default function ProfilePage() {\r\n  const router = useRouter();\r\n  const { user, clearAuth, isAuthenticated, isLoading: authLoading } = useAuthStore();\r\n  const { loadProfile, profile, isLoading } = useProfileStore();\r\n\r\n  // Load profile on mount when user is authenticated\r\n  useEffect(() => {\r\n    if (isAuthenticated && user?.userId && !profile && !isLoading) {\r\n      loadProfile(user.userId);\r\n    }\r\n  }, [isAuthenticated, user?.userId, profile, isLoading, loadProfile]);\r\n\r\n  const handleLogout = async () => {\r\n    try {\r\n      await authRepository.logout();\r\n    } catch (error) {\r\n      // Silently handle logout errors (e.g., 401 when already logged out)\r\n      // The error is expected and clearAuth will handle cleanup\r\n    } finally {\r\n      clearAuth();\r\n      router.push('/login');\r\n    }\r\n  };\r\n\r\n  const handleBackToDashboard = () => {\r\n    router.push('/dashboard');\r\n  };\r\n\r\n  const getInitials = (name: string) => {\r\n    return name\r\n      .split(' ')\r\n      .map(n => n[0])\r\n      .join('')\r\n      .toUpperCase();\r\n  };\r\n\r\n  return (\r\n    <ProtectedRoute>\r\n      <div className=\"min-h-screen\" style={{ background: '#f7fafc' }}>\r\n        {/* Sri Lankan Flag Stripe Header */}\r\n        <div\r\n          className=\"h-2 fixed top-0 left-0 right-0 z-50\"\r\n          style={{\r\n            background: 'linear-gradient(90deg, #FF7900 0%, #FF7900 33%, #8B1538 33%, #8B1538 66%, #006400 66%, #006400 100%)'\r\n          }}\r\n        ></div>\r\n\r\n        {/* Header */}\r\n        <header className=\"bg-white border-b sticky top-2 z-40\" style={{\r\n          background: 'rgba(255, 255, 255, 0.95)',\r\n          backdropFilter: 'blur(10px)',\r\n          boxShadow: '0 2px 20px rgba(0,0,0,0.1)'\r\n        }}>\r\n          <div className=\"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-4\">\r\n            <div className=\"flex items-center justify-between\">\r\n              <div className=\"flex items-center gap-4\">\r\n                <Logo size=\"md\" showText={true} />\r\n                <div className=\"h-6 w-px bg-gray-300\"></div>\r\n                <h1 className=\"text-2xl font-bold\" style={{ color: '#8B1538' }}>My Profile</h1>\r\n              </div>\r\n\r\n              <div className=\"flex items-center gap-4\">\r\n                <Button\r\n                  onClick={handleBackToDashboard}\r\n                  variant=\"outline\"\r\n                  size=\"sm\"\r\n                  style={{\r\n                    borderColor: '#FF7900',\r\n                    color: '#8B1538'\r\n                  }}\r\n                >\r\n                  <ArrowLeft className=\"w-4 h-4 mr-2\" />\r\n                  Dashboard\r\n                </Button>\r\n                <Button\r\n                  onClick={handleLogout}\r\n                  variant=\"outline\"\r\n                  size=\"sm\"\r\n                  style={{\r\n                    borderColor: '#8B1538',\r\n                    color: '#8B1538'\r\n                  }}\r\n                >\r\n                  Logout\r\n                </Button>\r\n              </div>\r\n            </div>\r\n          </div>\r\n        </header>\r\n\r\n        {/* Main Content */}\r\n        <main className=\"max-w-4xl mx-auto px-4 sm:px-6 lg:px-8 py-8\">\r\n          <div className=\"space-y-6\">\r\n            {/* Welcome Section */}\r\n            <div\r\n              className=\"rounded-xl overflow-hidden\"\r\n              style={{\r\n                background: 'white',\r\n                boxShadow: '0 4px 6px rgba(0, 0, 0, 0.05)'\r\n              }}\r\n            >\r\n              <div\r\n                className=\"p-6\"\r\n                style={{\r\n                  background: 'linear-gradient(135deg, #FF7900 0%, #8B1538 50%, #006400 100%)',\r\n                  color: 'white'\r\n                }}\r\n              >\r\n                <div className=\"flex items-center gap-4\">\r\n                  <div\r\n                    className=\"w-16 h-16 rounded-full flex items-center justify-center text-white font-bold text-xl\"\r\n                    style={{ background: 'rgba(255, 255, 255, 0.2)' }}\r\n                  >\r\n                    {getInitials(user?.fullName || 'U')}\r\n                  </div>\r\n                  <div>\r\n                    <h2 className=\"text-2xl font-semibold mb-1\">\r\n                      Welcome, {user?.fullName}!\r\n                    </h2>\r\n                    <p className=\"text-white/90\">\r\n                      Manage your profile information to help others in the Sri Lankan community connect with you.\r\n                    </p>\r\n                  </div>\r\n                </div>\r\n              </div>\r\n            </div>\r\n\r\n            {/* Profile Photo Section */}\r\n            <ProfilePhotoSection />\r\n\r\n            {/* Location Section */}\r\n            <LocationSection />\r\n\r\n            {/* Cultural Interests Section */}\r\n            <CulturalInterestsSection />\r\n\r\n            {/* Preferred Metro Areas Section - Phase 5B */}\r\n            <PreferredMetroAreasSection />\r\n\r\n            {/* Future Sections - Phase 3+ */}\r\n            {/* <BasicInfoSection /> */}\r\n\r\n            {/* Loading State */}\r\n            {isLoading && (\r\n              <div className=\"bg-white rounded-xl shadow p-6 text-center\">\r\n                <div className=\"flex items-center justify-center gap-3\">\r\n                  <div\r\n                    className=\"animate-spin rounded-full h-8 w-8 border-b-2\"\r\n                    style={{ borderColor: '#FF7900' }}\r\n                  ></div>\r\n                  <p style={{ color: '#8B1538' }}>Loading profile...</p>\r\n                </div>\r\n              </div>\r\n            )}\r\n          </div>\r\n        </main>\r\n      </div>\r\n    </ProtectedRoute>\r\n  );\r\n}\r\n","'use client';\r\n\r\nimport React, { useRef, useState, useCallback } from 'react';\r\nimport Image from 'next/image';\r\nimport { Upload, X, Loader2 } from 'lucide-react';\r\nimport { Button } from '@/presentation/components/ui/Button';\r\nimport { cn } from '@/presentation/lib/utils';\r\n\r\nexport interface PhotoUploadWidgetProps {\r\n  currentPhotoUrl?: string | null;\r\n  onUpload: (file: File) => Promise<void> | void;\r\n  onDelete: () => Promise<void> | void;\r\n  maxSizeMB?: number;\r\n  acceptedFormats?: string[];\r\n  isLoading?: boolean;\r\n  error?: string;\r\n}\r\n\r\nconst DEFAULT_ACCEPTED_FORMATS = ['image/jpeg', 'image/jpg', 'image/png', 'image/webp'];\r\nconst DEFAULT_MAX_SIZE_MB = 5;\r\n\r\n/**\r\n * PhotoUploadWidget Component\r\n *\r\n * Reusable photo upload widget with:\r\n * - Drag and drop support\r\n * - Click to upload\r\n * - File validation (type and size)\r\n * - Preview current photo\r\n * - Delete functionality\r\n * - Loading states\r\n * - Error handling\r\n *\r\n * Follows UI/UX best practices with accessibility support\r\n */\r\nexport const PhotoUploadWidget: React.FC<PhotoUploadWidgetProps> = ({\r\n  currentPhotoUrl,\r\n  onUpload,\r\n  onDelete,\r\n  maxSizeMB = DEFAULT_MAX_SIZE_MB,\r\n  acceptedFormats = DEFAULT_ACCEPTED_FORMATS,\r\n  isLoading = false,\r\n  error,\r\n}) => {\r\n  const fileInputRef = useRef<HTMLInputElement>(null);\r\n  const [isDragOver, setIsDragOver] = useState(false);\r\n  const [validationError, setValidationError] = useState<string>('');\r\n\r\n  // Format accepted formats for display\r\n  const getFormatsDisplay = () => {\r\n    return acceptedFormats\r\n      .map((format) => format.replace('image/', '').toUpperCase())\r\n      .join(', ');\r\n  };\r\n\r\n  // Validate file\r\n  const validateFile = (file: File): boolean => {\r\n    setValidationError('');\r\n\r\n    // Check file type\r\n    if (!acceptedFormats.includes(file.type)) {\r\n      setValidationError(`Only ${getFormatsDisplay()} images are allowed`);\r\n      return false;\r\n    }\r\n\r\n    // Check file size\r\n    const fileSizeMB = file.size / (1024 * 1024);\r\n    if (fileSizeMB > maxSizeMB) {\r\n      setValidationError(`File size exceeds ${maxSizeMB}MB`);\r\n      return false;\r\n    }\r\n\r\n    return true;\r\n  };\r\n\r\n  // Handle file selection\r\n  const handleFileSelect = useCallback(\r\n    async (file: File | null) => {\r\n      if (!file) return;\r\n\r\n      if (validateFile(file)) {\r\n        await onUpload(file);\r\n      }\r\n    },\r\n    [onUpload, maxSizeMB, acceptedFormats]\r\n  );\r\n\r\n  // Handle file input change\r\n  const handleFileInputChange = (e: React.ChangeEvent<HTMLInputElement>) => {\r\n    const file = e.target.files?.[0];\r\n    if (file) {\r\n      handleFileSelect(file);\r\n    }\r\n    // Reset input value to allow selecting the same file again\r\n    if (fileInputRef.current) {\r\n      fileInputRef.current.value = '';\r\n    }\r\n  };\r\n\r\n  // Handle drag over\r\n  const handleDragOver = (e: React.DragEvent) => {\r\n    e.preventDefault();\r\n    e.stopPropagation();\r\n    setIsDragOver(true);\r\n  };\r\n\r\n  // Handle drag leave\r\n  const handleDragLeave = (e: React.DragEvent) => {\r\n    e.preventDefault();\r\n    e.stopPropagation();\r\n    setIsDragOver(false);\r\n  };\r\n\r\n  // Handle drop\r\n  const handleDrop = (e: React.DragEvent) => {\r\n    e.preventDefault();\r\n    e.stopPropagation();\r\n    setIsDragOver(false);\r\n\r\n    const file = e.dataTransfer.files?.[0];\r\n    if (file) {\r\n      handleFileSelect(file);\r\n    }\r\n  };\r\n\r\n  // Handle click on upload area\r\n  const handleUploadAreaClick = () => {\r\n    fileInputRef.current?.click();\r\n  };\r\n\r\n  // Handle delete\r\n  const handleDelete = async () => {\r\n    if (!isLoading) {\r\n      await onDelete();\r\n    }\r\n  };\r\n\r\n  const displayError = error || validationError;\r\n\r\n  return (\r\n    <div className=\"space-y-4\">\r\n      {/* Current Photo Preview */}\r\n      {currentPhotoUrl && (\r\n        <div className=\"relative flex flex-col items-center space-y-4\">\r\n          <div className=\"relative h-32 w-32 overflow-hidden rounded-full border-4 border-border\">\r\n            <Image\r\n              src={currentPhotoUrl}\r\n              alt=\"Current profile photo\"\r\n              fill\r\n              className=\"object-cover\"\r\n              sizes=\"128px\"\r\n            />\r\n          </div>\r\n          <Button\r\n            type=\"button\"\r\n            variant=\"destructive\"\r\n            size=\"sm\"\r\n            onClick={handleDelete}\r\n            disabled={isLoading}\r\n            aria-label=\"Delete photo\"\r\n          >\r\n            <X className=\"mr-2 h-4 w-4\" />\r\n            Delete Photo\r\n          </Button>\r\n        </div>\r\n      )}\r\n\r\n      {/* Upload Area */}\r\n      {!currentPhotoUrl && (\r\n        <div\r\n          className={cn(\r\n            'relative flex flex-col items-center justify-center rounded-lg border-2 border-dashed p-8 transition-colors',\r\n            isDragOver && 'border-primary bg-primary/5',\r\n            !isDragOver && 'border-border hover:border-primary/50',\r\n            isLoading && 'pointer-events-none opacity-50'\r\n          )}\r\n          onDragOver={handleDragOver}\r\n          onDragLeave={handleDragLeave}\r\n          onDrop={handleDrop}\r\n          onClick={handleUploadAreaClick}\r\n          role=\"button\"\r\n          tabIndex={0}\r\n          onKeyDown={(e) => {\r\n            if (e.key === 'Enter' || e.key === ' ') {\r\n              handleUploadAreaClick();\r\n            }\r\n          }}\r\n        >\r\n          <input\r\n            ref={fileInputRef}\r\n            type=\"file\"\r\n            accept={acceptedFormats.join(',')}\r\n            onChange={handleFileInputChange}\r\n            className=\"hidden\"\r\n            disabled={isLoading}\r\n            aria-label=\"Upload profile photo\"\r\n          />\r\n\r\n          {isLoading ? (\r\n            <div className=\"flex flex-col items-center space-y-2\" role=\"status\" aria-live=\"polite\">\r\n              <Loader2 className=\"h-12 w-12 animate-spin text-primary\" />\r\n              <p className=\"text-sm text-muted-foreground\">Uploading...</p>\r\n            </div>\r\n          ) : (\r\n            <>\r\n              <Upload className=\"mb-4 h-12 w-12 text-muted-foreground\" />\r\n              <p className=\"mb-2 text-sm font-medium text-foreground\">Upload Photo</p>\r\n              <p className=\"mb-1 text-xs text-muted-foreground\">\r\n                Drag and drop or click to select\r\n              </p>\r\n              <p className=\"text-xs text-muted-foreground\">\r\n                {getFormatsDisplay()} (Max {maxSizeMB}MB)\r\n              </p>\r\n            </>\r\n          )}\r\n        </div>\r\n      )}\r\n\r\n      {/* Error Message */}\r\n      {displayError && (\r\n        <div className=\"rounded-md bg-destructive/10 p-3\">\r\n          <p className=\"text-sm text-destructive\">{displayError}</p>\r\n        </div>\r\n      )}\r\n    </div>\r\n  );\r\n};\r\n","'use client';\r\n\r\nimport React from 'react';\r\nimport { useAuthStore } from '@/presentation/store/useAuthStore';\r\nimport { useProfileStore } from '@/presentation/store/useProfileStore';\r\nimport { PhotoUploadWidget } from '@/presentation/components/widgets/PhotoUploadWidget';\r\nimport { Card, CardHeader, CardTitle, CardDescription, CardContent } from '@/presentation/components/ui/Card';\r\n\r\n/**\r\n * ProfilePhotoSection Component\r\n *\r\n * Container component for profile photo upload/management\r\n * - Integrates with useAuthStore for user ID\r\n * - Integrates with useProfileStore for photo state and actions\r\n * - Uses PhotoUploadWidget for UI\r\n * - Handles upload/delete operations\r\n * - Shows section states (idle, saving, success, error)\r\n *\r\n * Follows UI/UX best practices with proper error handling and loading states\r\n */\r\nexport function ProfilePhotoSection() {\r\n  const { user, isAuthenticated } = useAuthStore();\r\n  const { profile, error, sectionStates, uploadPhoto, deletePhoto } = useProfileStore();\r\n\r\n  // Don't render if not authenticated\r\n  if (!isAuthenticated || !user) {\r\n    return null;\r\n  }\r\n\r\n  const currentPhotoUrl = profile?.profilePhotoUrl || null;\r\n  const isLoading = sectionStates.photo === 'saving';\r\n  const photoError = sectionStates.photo === 'error' ? error : null;\r\n\r\n  /**\r\n   * Handle photo upload\r\n   * Calls uploadPhoto action from store with user ID and file\r\n   */\r\n  const handleUpload = async (file: File) => {\r\n    await uploadPhoto(user.userId, file);\r\n  };\r\n\r\n  /**\r\n   * Handle photo deletion\r\n   * Calls deletePhoto action from store with user ID\r\n   */\r\n  const handleDelete = async () => {\r\n    await deletePhoto(user.userId);\r\n  };\r\n\r\n  return (\r\n    <section role=\"region\" aria-labelledby=\"profile-photo-heading\">\r\n      <Card>\r\n        <CardHeader>\r\n          <CardTitle id=\"profile-photo-heading\" style={{ color: '#8B1538' }}>Profile Photo</CardTitle>\r\n          <CardDescription>\r\n            Upload a photo to personalize your profile and help others recognize you\r\n          </CardDescription>\r\n        </CardHeader>\r\n        <CardContent>\r\n          <PhotoUploadWidget\r\n            currentPhotoUrl={currentPhotoUrl}\r\n            onUpload={handleUpload}\r\n            onDelete={handleDelete}\r\n            isLoading={isLoading}\r\n            error={photoError || undefined}\r\n            maxSizeMB={5}\r\n            acceptedFormats={['image/jpeg', 'image/jpg', 'image/png', 'image/webp']}\r\n          />\r\n        </CardContent>\r\n      </Card>\r\n    </section>\r\n  );\r\n}\r\n","'use client';\r\n\r\nimport React, { useState } from 'react';\r\nimport { useAuthStore } from '@/presentation/store/useAuthStore';\r\nimport { useProfileStore } from '@/presentation/store/useProfileStore';\r\nimport { Card, CardHeader, CardTitle, CardDescription, CardContent } from '@/presentation/components/ui/Card';\r\nimport { Button } from '@/presentation/components/ui/Button';\r\nimport { Input } from '@/presentation/components/ui/Input';\r\nimport { PROFILE_CONSTRAINTS } from '@/domain/constants/profile.constants';\r\nimport { Check, MapPin } from 'lucide-react';\r\n\r\n/**\r\n * LocationSection Component\r\n *\r\n * Manages user location information (City, State, ZipCode, Country)\r\n * - View mode: Display current location or \"Not set\"\r\n * - Edit mode: Form with validation for all 4 fields\r\n * - Integrates with useProfileStore for state and API calls\r\n * - Shows loading/success/error states\r\n *\r\n * Follows ProfilePhotoSection pattern for consistency\r\n */\r\nexport function LocationSection() {\r\n  const { user, isAuthenticated } = useAuthStore();\r\n  const { profile, error, sectionStates, updateLocation } = useProfileStore();\r\n\r\n  const [isEditing, setIsEditing] = useState(false);\r\n  const [formData, setFormData] = useState({\r\n    city: '',\r\n    state: '',\r\n    zipCode: '',\r\n    country: '',\r\n  });\r\n  const [validationErrors, setValidationErrors] = useState<Record<string, string>>({});\r\n\r\n  // Don't render if not authenticated\r\n  if (!isAuthenticated || !user) {\r\n    return null;\r\n  }\r\n\r\n  const currentLocation = profile?.location;\r\n  const isLoading = sectionStates.location === 'saving';\r\n  const isSuccess = sectionStates.location === 'success';\r\n  const isError = sectionStates.location === 'error';\r\n\r\n  /**\r\n   * Start editing mode\r\n   * Pre-fill form with current location or empty strings\r\n   */\r\n  const handleEdit = () => {\r\n    setFormData({\r\n      city: currentLocation?.city || '',\r\n      state: currentLocation?.state || '',\r\n      zipCode: currentLocation?.zipCode || '',\r\n      country: currentLocation?.country || '',\r\n    });\r\n    setValidationErrors({});\r\n    setIsEditing(true);\r\n  };\r\n\r\n  /**\r\n   * Cancel editing\r\n   * Reset form and return to view mode\r\n   */\r\n  const handleCancel = () => {\r\n    setIsEditing(false);\r\n    setValidationErrors({});\r\n  };\r\n\r\n  /**\r\n   * Validate form data\r\n   * Returns true if valid, false otherwise\r\n   */\r\n  const validateForm = (): boolean => {\r\n    const errors: Record<string, string> = {};\r\n\r\n    // City validation\r\n    if (!formData.city.trim()) {\r\n      errors.city = 'City is required';\r\n    } else if (formData.city.length > PROFILE_CONSTRAINTS.location.cityMaxLength) {\r\n      errors.city = `City cannot exceed ${PROFILE_CONSTRAINTS.location.cityMaxLength} characters`;\r\n    }\r\n\r\n    // State validation\r\n    if (!formData.state.trim()) {\r\n      errors.state = 'State is required';\r\n    } else if (formData.state.length > PROFILE_CONSTRAINTS.location.stateMaxLength) {\r\n      errors.state = `State cannot exceed ${PROFILE_CONSTRAINTS.location.stateMaxLength} characters`;\r\n    }\r\n\r\n    // Zip code validation\r\n    if (!formData.zipCode.trim()) {\r\n      errors.zipCode = 'Zip code is required';\r\n    } else if (formData.zipCode.length > PROFILE_CONSTRAINTS.location.zipCodeMaxLength) {\r\n      errors.zipCode = `Zip code cannot exceed ${PROFILE_CONSTRAINTS.location.zipCodeMaxLength} characters`;\r\n    }\r\n\r\n    // Country validation\r\n    if (!formData.country.trim()) {\r\n      errors.country = 'Country is required';\r\n    } else if (formData.country.length > PROFILE_CONSTRAINTS.location.countryMaxLength) {\r\n      errors.country = `Country cannot exceed ${PROFILE_CONSTRAINTS.location.countryMaxLength} characters`;\r\n    }\r\n\r\n    setValidationErrors(errors);\r\n    return Object.keys(errors).length === 0;\r\n  };\r\n\r\n  /**\r\n   * Handle form submission\r\n   * Validate and call API\r\n   */\r\n  const handleSave = async () => {\r\n    if (!validateForm()) {\r\n      return;\r\n    }\r\n\r\n    try {\r\n      await updateLocation(user.userId, {\r\n        city: formData.city.trim(),\r\n        state: formData.state.trim(),\r\n        zipCode: formData.zipCode.trim(),\r\n        country: formData.country.trim(),\r\n      });\r\n      // Exit edit mode on success (store sets state to 'success')\r\n      setIsEditing(false);\r\n    } catch (error) {\r\n      // Error state is handled by the store\r\n      // Keep editing mode open so user can retry\r\n    }\r\n  };\r\n\r\n  /**\r\n   * Handle input change\r\n   * Update form data and clear validation error for that field\r\n   */\r\n  const handleInputChange = (field: keyof typeof formData, value: string) => {\r\n    setFormData((prev) => ({ ...prev, [field]: value }));\r\n\r\n    // Clear validation error for this field\r\n    if (validationErrors[field]) {\r\n      setValidationErrors((prev) => {\r\n        const newErrors = { ...prev };\r\n        delete newErrors[field];\r\n        return newErrors;\r\n      });\r\n    }\r\n  };\r\n\r\n  return (\r\n    <section role=\"region\" aria-labelledby=\"location-heading\">\r\n      <Card>\r\n        <CardHeader>\r\n          <div className=\"flex items-center justify-between\">\r\n            <div className=\"flex items-center gap-2\">\r\n              <MapPin className=\"h-5 w-5\" style={{ color: '#FF7900' }} />\r\n              <CardTitle id=\"location-heading\" style={{ color: '#8B1538' }}>Location</CardTitle>\r\n            </div>\r\n            {!isEditing && (\r\n              <Button\r\n                onClick={handleEdit}\r\n                variant=\"outline\"\r\n                size=\"sm\"\r\n                disabled={isLoading}\r\n                style={{ borderColor: '#FF7900', color: '#8B1538' }}\r\n              >\r\n                Edit\r\n              </Button>\r\n            )}\r\n          </div>\r\n          <CardDescription>\r\n            Help others in the community find you by sharing your location\r\n          </CardDescription>\r\n        </CardHeader>\r\n        <CardContent>\r\n          {!isEditing ? (\r\n            // View Mode\r\n            <div className=\"space-y-2\">\r\n              {currentLocation ? (\r\n                <div className=\"text-sm\">\r\n                  <p className=\"font-medium text-foreground\">\r\n                    {currentLocation.city}, {currentLocation.state} {currentLocation.zipCode}\r\n                  </p>\r\n                  <p className=\"text-muted-foreground\">{currentLocation.country}</p>\r\n                </div>\r\n              ) : (\r\n                <p className=\"text-sm text-muted-foreground italic\">\r\n                  Not set - Click Edit to add your location\r\n                </p>\r\n              )}\r\n\r\n              {/* Success message */}\r\n              {isSuccess && (\r\n                <div className=\"flex items-center gap-2 text-sm\" style={{ color: '#006400' }}>\r\n                  <Check className=\"h-4 w-4\" />\r\n                  <span>Location saved successfully!</span>\r\n                </div>\r\n              )}\r\n\r\n              {/* Error message */}\r\n              {isError && error && (\r\n                <p className=\"text-sm text-destructive\" role=\"alert\">\r\n                  {error}\r\n                </p>\r\n              )}\r\n            </div>\r\n          ) : (\r\n            // Edit Mode\r\n            <div className=\"space-y-4\">\r\n              {/* City */}\r\n              <div>\r\n                <label htmlFor=\"city\" className=\"block text-sm font-medium mb-1\">\r\n                  City *\r\n                </label>\r\n                <Input\r\n                  id=\"city\"\r\n                  type=\"text\"\r\n                  value={formData.city}\r\n                  onChange={(e) => handleInputChange('city', e.target.value)}\r\n                  placeholder=\"e.g., Toronto\"\r\n                  disabled={isLoading}\r\n                  error={!!validationErrors.city}\r\n                  aria-label=\"City\"\r\n                  aria-invalid={!!validationErrors.city}\r\n                  aria-describedby={validationErrors.city ? 'city-error' : undefined}\r\n                  maxLength={PROFILE_CONSTRAINTS.location.cityMaxLength}\r\n                />\r\n                {validationErrors.city && (\r\n                  <p id=\"city-error\" className=\"text-sm text-destructive mt-1\" role=\"alert\">\r\n                    {validationErrors.city}\r\n                  </p>\r\n                )}\r\n              </div>\r\n\r\n              {/* State/Province */}\r\n              <div>\r\n                <label htmlFor=\"state\" className=\"block text-sm font-medium mb-1\">\r\n                  State/Province *\r\n                </label>\r\n                <Input\r\n                  id=\"state\"\r\n                  type=\"text\"\r\n                  value={formData.state}\r\n                  onChange={(e) => handleInputChange('state', e.target.value)}\r\n                  placeholder=\"e.g., Ontario\"\r\n                  disabled={isLoading}\r\n                  error={!!validationErrors.state}\r\n                  aria-label=\"State/Province\"\r\n                  aria-invalid={!!validationErrors.state}\r\n                  aria-describedby={validationErrors.state ? 'state-error' : undefined}\r\n                  maxLength={PROFILE_CONSTRAINTS.location.stateMaxLength}\r\n                />\r\n                {validationErrors.state && (\r\n                  <p id=\"state-error\" className=\"text-sm text-destructive mt-1\" role=\"alert\">\r\n                    {validationErrors.state}\r\n                  </p>\r\n                )}\r\n              </div>\r\n\r\n              {/* Zip/Postal Code */}\r\n              <div>\r\n                <label htmlFor=\"zipCode\" className=\"block text-sm font-medium mb-1\">\r\n                  Zip/Postal Code *\r\n                </label>\r\n                <Input\r\n                  id=\"zipCode\"\r\n                  type=\"text\"\r\n                  value={formData.zipCode}\r\n                  onChange={(e) => handleInputChange('zipCode', e.target.value)}\r\n                  placeholder=\"e.g., M5H 2N2\"\r\n                  disabled={isLoading}\r\n                  error={!!validationErrors.zipCode}\r\n                  aria-label=\"Zip/Postal Code\"\r\n                  aria-invalid={!!validationErrors.zipCode}\r\n                  aria-describedby={validationErrors.zipCode ? 'zipCode-error' : undefined}\r\n                  maxLength={PROFILE_CONSTRAINTS.location.zipCodeMaxLength}\r\n                />\r\n                {validationErrors.zipCode && (\r\n                  <p id=\"zipCode-error\" className=\"text-sm text-destructive mt-1\" role=\"alert\">\r\n                    {validationErrors.zipCode}\r\n                  </p>\r\n                )}\r\n              </div>\r\n\r\n              {/* Country */}\r\n              <div>\r\n                <label htmlFor=\"country\" className=\"block text-sm font-medium mb-1\">\r\n                  Country *\r\n                </label>\r\n                <Input\r\n                  id=\"country\"\r\n                  type=\"text\"\r\n                  value={formData.country}\r\n                  onChange={(e) => handleInputChange('country', e.target.value)}\r\n                  placeholder=\"e.g., Canada\"\r\n                  disabled={isLoading}\r\n                  error={!!validationErrors.country}\r\n                  aria-label=\"Country\"\r\n                  aria-invalid={!!validationErrors.country}\r\n                  aria-describedby={validationErrors.country ? 'country-error' : undefined}\r\n                  maxLength={PROFILE_CONSTRAINTS.location.countryMaxLength}\r\n                />\r\n                {validationErrors.country && (\r\n                  <p id=\"country-error\" className=\"text-sm text-destructive mt-1\" role=\"alert\">\r\n                    {validationErrors.country}\r\n                  </p>\r\n                )}\r\n              </div>\r\n\r\n              {/* Error message */}\r\n              {isError && error && (\r\n                <p className=\"text-sm text-destructive\" role=\"alert\">\r\n                  {error}\r\n                </p>\r\n              )}\r\n\r\n              {/* Action Buttons */}\r\n              <div className=\"flex gap-3 pt-2\">\r\n                <Button\r\n                  onClick={handleSave}\r\n                  disabled={isLoading}\r\n                  className=\"flex-1 text-white\"\r\n                  style={{ background: '#FF7900' }}\r\n                >\r\n                  {isLoading ? 'Saving...' : 'Save Location'}\r\n                </Button>\r\n                <Button\r\n                  onClick={handleCancel}\r\n                  variant=\"outline\"\r\n                  disabled={isLoading}\r\n                  className=\"flex-1\"\r\n                  style={{ borderColor: '#8B1538', color: '#8B1538' }}\r\n                >\r\n                  Cancel\r\n                </Button>\r\n              </div>\r\n            </div>\r\n          )}\r\n        </CardContent>\r\n      </Card>\r\n    </section>\r\n  );\r\n}\r\n","'use client';\r\n\r\nimport React, { useState } from 'react';\r\nimport { useAuthStore } from '@/presentation/store/useAuthStore';\r\nimport { useProfileStore } from '@/presentation/store/useProfileStore';\r\nimport { Card, CardHeader, CardTitle, CardDescription, CardContent } from '@/presentation/components/ui/Card';\r\nimport { Button } from '@/presentation/components/ui/Button';\r\nimport { CULTURAL_INTERESTS, PROFILE_CONSTRAINTS } from '@/domain/constants/profile.constants';\r\nimport { Check, Heart, X } from 'lucide-react';\r\n\r\n/**\r\n * CulturalInterestsSection Component\r\n *\r\n * Manages user's cultural interests (0-10 from predefined list)\r\n * - View mode: Display selected interests as badges\r\n * - Edit mode: Multi-select checkboxes\r\n * - Integrates with useProfileStore for state and API calls\r\n * - Shows loading/success/error states\r\n *\r\n * Follows ProfilePhotoSection pattern for consistency\r\n */\r\nexport function CulturalInterestsSection() {\r\n  const { user, isAuthenticated } = useAuthStore();\r\n  const { profile, error, sectionStates, updateCulturalInterests } = useProfileStore();\r\n\r\n  const [isEditing, setIsEditing] = useState(false);\r\n  const [selectedInterests, setSelectedInterests] = useState<string[]>([]);\r\n  const [validationError, setValidationError] = useState<string>('');\r\n\r\n  // Don't render if not authenticated\r\n  if (!isAuthenticated || !user) {\r\n    return null;\r\n  }\r\n\r\n  const currentInterests = profile?.culturalInterests || [];\r\n  const isLoading = sectionStates.culturalInterests === 'saving';\r\n  const isSuccess = sectionStates.culturalInterests === 'success';\r\n  const isError = sectionStates.culturalInterests === 'error';\r\n\r\n  /**\r\n   * Start editing mode\r\n   * Pre-fill with current interests\r\n   */\r\n  const handleEdit = () => {\r\n    setSelectedInterests([...currentInterests]);\r\n    setValidationError('');\r\n    setIsEditing(true);\r\n  };\r\n\r\n  /**\r\n   * Cancel editing\r\n   */\r\n  const handleCancel = () => {\r\n    setIsEditing(false);\r\n    setValidationError('');\r\n  };\r\n\r\n  /**\r\n   * Toggle interest selection\r\n   */\r\n  const handleToggleInterest = (code: string) => {\r\n    setSelectedInterests((prev) => {\r\n      if (prev.includes(code)) {\r\n        // Remove\r\n        return prev.filter((c) => c !== code);\r\n      } else {\r\n        // Add (check max limit)\r\n        if (prev.length >= PROFILE_CONSTRAINTS.culturalInterests.max) {\r\n          setValidationError(\r\n            `You can select up to ${PROFILE_CONSTRAINTS.culturalInterests.max} interests`\r\n          );\r\n          return prev;\r\n        }\r\n        setValidationError('');\r\n        return [...prev, code];\r\n      }\r\n    });\r\n  };\r\n\r\n  /**\r\n   * Handle form submission\r\n   */\r\n  const handleSave = async () => {\r\n    // Validate (0-10 allowed)\r\n    if (selectedInterests.length > PROFILE_CONSTRAINTS.culturalInterests.max) {\r\n      setValidationError(\r\n        `Maximum ${PROFILE_CONSTRAINTS.culturalInterests.max} interests allowed`\r\n      );\r\n      return;\r\n    }\r\n\r\n    try {\r\n      await updateCulturalInterests(user.userId, {\r\n        culturalInterests: selectedInterests,\r\n      });\r\n      // Exit edit mode on success (store sets state to 'success')\r\n      setIsEditing(false);\r\n    } catch (error) {\r\n      // Error state is handled by the store\r\n      // Keep editing mode open so user can retry\r\n    }\r\n  };\r\n\r\n  return (\r\n    <section role=\"region\" aria-labelledby=\"cultural-interests-heading\">\r\n      <Card>\r\n        <CardHeader>\r\n          <div className=\"flex items-center justify-between\">\r\n            <div className=\"flex items-center gap-2\">\r\n              <Heart className=\"h-5 w-5\" style={{ color: '#FF7900' }} />\r\n              <CardTitle id=\"cultural-interests-heading\" style={{ color: '#8B1538' }}>Cultural Interests</CardTitle>\r\n            </div>\r\n            {!isEditing && (\r\n              <Button\r\n                onClick={handleEdit}\r\n                variant=\"outline\"\r\n                size=\"sm\"\r\n                disabled={isLoading}\r\n                style={{ borderColor: '#FF7900', color: '#8B1538' }}\r\n              >\r\n                Edit\r\n              </Button>\r\n            )}\r\n          </div>\r\n          <CardDescription>\r\n            Share your cultural interests to connect with others (select 0-{PROFILE_CONSTRAINTS.culturalInterests.max})\r\n          </CardDescription>\r\n        </CardHeader>\r\n        <CardContent>\r\n          {!isEditing ? (\r\n            // View Mode\r\n            <div className=\"space-y-2\">\r\n              {currentInterests.length > 0 ? (\r\n                <div className=\"flex flex-wrap gap-2\">\r\n                  {currentInterests.map((code) => {\r\n                    const interest = CULTURAL_INTERESTS.find((i) => i.code === code);\r\n                    return interest ? (\r\n                      <span\r\n                        key={code}\r\n                        className=\"inline-flex items-center px-3 py-1 rounded-full text-sm font-medium\"\r\n                        style={{ background: '#FFE8CC', color: '#8B1538' }}\r\n                      >\r\n                        {interest.name}\r\n                      </span>\r\n                    ) : null;\r\n                  })}\r\n                </div>\r\n              ) : (\r\n                <p className=\"text-sm text-muted-foreground italic\">\r\n                  No interests selected - Click Edit to add your cultural interests\r\n                </p>\r\n              )}\r\n\r\n              {/* Success message */}\r\n              {isSuccess && (\r\n                <div className=\"flex items-center gap-2 text-sm\" style={{ color: '#006400' }}>\r\n                  <Check className=\"h-4 w-4\" />\r\n                  <span>Cultural interests saved successfully!</span>\r\n                </div>\r\n              )}\r\n\r\n              {/* Error message */}\r\n              {isError && error && (\r\n                <p className=\"text-sm text-destructive\" role=\"alert\">\r\n                  {error}\r\n                </p>\r\n              )}\r\n            </div>\r\n          ) : (\r\n            // Edit Mode\r\n            <div className=\"space-y-4\">\r\n              <div className=\"grid grid-cols-1 md:grid-cols-2 gap-3\">\r\n                {CULTURAL_INTERESTS.map((interest) => {\r\n                  const isSelected = selectedInterests.includes(interest.code);\r\n                  return (\r\n                    <label\r\n                      key={interest.code}\r\n                      className={`flex items-start gap-3 p-3 rounded-lg border cursor-pointer transition-colors ${\r\n                        isLoading ? 'opacity-50 cursor-not-allowed' : ''\r\n                      }`}\r\n                      style={{\r\n                        background: isSelected ? '#FFE8CC' : 'white',\r\n                        borderColor: isSelected ? '#FF7900' : '#e2e8f0'\r\n                      }}\r\n                    >\r\n                      <input\r\n                        type=\"checkbox\"\r\n                        checked={isSelected}\r\n                        onChange={() => handleToggleInterest(interest.code)}\r\n                        disabled={isLoading}\r\n                        className=\"mt-1 h-4 w-4 rounded border-gray-300 text-primary focus:ring-primary\"\r\n                        aria-label={interest.name}\r\n                      />\r\n                      <span className=\"text-sm flex-1\">{interest.name}</span>\r\n                    </label>\r\n                  );\r\n                })}\r\n              </div>\r\n\r\n              {/* Selected count */}\r\n              <p className=\"text-sm text-muted-foreground\">\r\n                {selectedInterests.length} of {PROFILE_CONSTRAINTS.culturalInterests.max} selected\r\n              </p>\r\n\r\n              {/* Validation error */}\r\n              {validationError && (\r\n                <p className=\"text-sm text-destructive\" role=\"alert\">\r\n                  {validationError}\r\n                </p>\r\n              )}\r\n\r\n              {/* API error */}\r\n              {isError && error && (\r\n                <p className=\"text-sm text-destructive\" role=\"alert\">\r\n                  {error}\r\n                </p>\r\n              )}\r\n\r\n              {/* Action Buttons */}\r\n              <div className=\"flex gap-3 pt-2\">\r\n                <Button\r\n                  onClick={handleSave}\r\n                  disabled={isLoading}\r\n                  className=\"flex-1 text-white\"\r\n                  style={{ background: '#FF7900' }}\r\n                >\r\n                  {isLoading ? 'Saving...' : 'Save Interests'}\r\n                </Button>\r\n                <Button\r\n                  onClick={handleCancel}\r\n                  variant=\"outline\"\r\n                  disabled={isLoading}\r\n                  className=\"flex-1\"\r\n                  style={{ borderColor: '#8B1538', color: '#8B1538' }}\r\n                >\r\n                  Cancel\r\n                </Button>\r\n              </div>\r\n            </div>\r\n          )}\r\n        </CardContent>\r\n      </Card>\r\n    </section>\r\n  );\r\n}\r\n","'use client';\n\nimport { useState, useRef, useEffect } from 'react';\nimport { ChevronDown, ChevronRight, Check } from 'lucide-react';\n\n/**\n * Tree node structure for hierarchical data\n */\nexport interface TreeNode {\n  id: string;\n  label: string;\n  checked: boolean;\n  children?: TreeNode[];\n}\n\n/**\n * TreeDropdown Props\n */\nexport interface TreeDropdownProps {\n  /** Tree data structure */\n  nodes: TreeNode[];\n  /** Selected node IDs */\n  selectedIds: string[];\n  /** Callback when selection changes */\n  onSelectionChange: (selectedIds: string[]) => void;\n  /** Placeholder text */\n  placeholder?: string;\n  /** Maximum number of selections allowed */\n  maxSelections?: number;\n  /** Disabled state */\n  disabled?: boolean;\n  /** Custom styling */\n  className?: string;\n}\n\n/**\n * TreeDropdown Component\n * Phase 6A.9: Tree structure dropdown for hierarchical selections\n *\n * Features:\n * - Hierarchical tree structure with expand/collapse\n * - Multi-select with checkboxes\n * - Max selection limit\n * - Keyboard accessible\n * - ARIA compliant\n */\nexport function TreeDropdown({\n  nodes,\n  selectedIds,\n  onSelectionChange,\n  placeholder = 'Select items',\n  maxSelections,\n  disabled = false,\n  className = '',\n}: TreeDropdownProps) {\n  const [isOpen, setIsOpen] = useState(false);\n  const [expandedNodes, setExpandedNodes] = useState<Set<string>>(new Set());\n  const dropdownRef = useRef<HTMLDivElement>(null);\n\n  // Close dropdown when clicking outside\n  useEffect(() => {\n    function handleClickOutside(event: MouseEvent) {\n      if (dropdownRef.current && !dropdownRef.current.contains(event.target as Node)) {\n        setIsOpen(false);\n      }\n    }\n\n    if (isOpen) {\n      document.addEventListener('mousedown', handleClickOutside);\n      return () => document.removeEventListener('mousedown', handleClickOutside);\n    }\n  }, [isOpen]);\n\n  const toggleNode = (nodeId: string) => {\n    const newExpanded = new Set(expandedNodes);\n    if (newExpanded.has(nodeId)) {\n      newExpanded.delete(nodeId);\n    } else {\n      newExpanded.add(nodeId);\n    }\n    setExpandedNodes(newExpanded);\n  };\n\n  const toggleSelection = (nodeId: string) => {\n    const newSelected = new Set(selectedIds);\n\n    if (newSelected.has(nodeId)) {\n      newSelected.delete(nodeId);\n    } else {\n      // Check max selections\n      if (maxSelections && newSelected.size >= maxSelections) {\n        return; // Don't add if max reached\n      }\n      newSelected.add(nodeId);\n    }\n\n    onSelectionChange(Array.from(newSelected));\n  };\n\n  const renderTreeNode = (node: TreeNode, level: number = 0) => {\n    const hasChildren = node.children && node.children.length > 0;\n    const isExpanded = expandedNodes.has(node.id);\n    const isSelected = selectedIds.includes(node.id);\n    const indentClass = level > 0 ? `ml-${level * 6}` : '';\n\n    return (\n      <div key={node.id}>\n        <div\n          className={`flex items-center gap-2 px-3 py-2 hover:bg-gray-50 cursor-pointer ${indentClass}`}\n          style={{ paddingLeft: `${level * 24 + 12}px` }}\n        >\n          {/* Expand/Collapse button for parent nodes */}\n          {hasChildren ? (\n            <button\n              onClick={(e) => {\n                e.stopPropagation();\n                toggleNode(node.id);\n              }}\n              className=\"p-0.5 hover:bg-gray-200 rounded\"\n              aria-label={isExpanded ? 'Collapse' : 'Expand'}\n            >\n              {isExpanded ? (\n                <ChevronDown className=\"h-4 w-4\" style={{ color: '#FF7900' }} />\n              ) : (\n                <ChevronRight className=\"h-4 w-4\" style={{ color: '#FF7900' }} />\n              )}\n            </button>\n          ) : (\n            <span className=\"w-5\" /> // Spacer for alignment\n          )}\n\n          {/* Checkbox */}\n          <label\n            className=\"flex items-center gap-2 flex-1 cursor-pointer\"\n            onClick={(e) => e.stopPropagation()}\n          >\n            <input\n              type=\"checkbox\"\n              checked={isSelected}\n              onChange={() => toggleSelection(node.id)}\n              disabled={disabled}\n              className=\"h-4 w-4 rounded border-gray-300 focus:ring-2 focus:ring-offset-0\"\n              style={{\n                accentColor: '#FF7900',\n              }}\n            />\n            <span className=\"text-sm\">{node.label}</span>\n            {isSelected && (\n              <Check className=\"h-3.5 w-3.5 ml-auto\" style={{ color: '#006400' }} />\n            )}\n          </label>\n        </div>\n\n        {/* Render children if expanded */}\n        {hasChildren && isExpanded && (\n          <div>\n            {node.children!.map((child) => renderTreeNode(child, level + 1))}\n          </div>\n        )}\n      </div>\n    );\n  };\n\n  const selectedCount = selectedIds.length;\n  const displayText =\n    selectedCount === 0\n      ? placeholder\n      : `${selectedCount} ${selectedCount === 1 ? 'item' : 'items'} selected`;\n\n  return (\n    <div ref={dropdownRef} className={`relative ${className}`}>\n      {/* Dropdown trigger */}\n      <button\n        type=\"button\"\n        onClick={() => !disabled && setIsOpen(!isOpen)}\n        disabled={disabled}\n        className=\"w-full flex items-center justify-between px-4 py-2 bg-white border-2 rounded-lg text-sm transition-colors hover:border-gray-400 focus:outline-none focus:ring-2 focus:ring-offset-0 disabled:opacity-50 disabled:cursor-not-allowed\"\n        style={{\n          borderColor: isOpen ? '#FF7900' : '#e2e8f0',\n        }}\n        aria-haspopup=\"listbox\"\n        aria-expanded={isOpen}\n      >\n        <span className={selectedCount === 0 ? 'text-gray-500' : 'text-gray-900'}>\n          {displayText}\n        </span>\n        <ChevronDown\n          className={`h-4 w-4 transition-transform ${isOpen ? 'rotate-180' : ''}`}\n          style={{ color: '#8B1538' }}\n        />\n      </button>\n\n      {/* Dropdown menu */}\n      {isOpen && (\n        <div\n          className=\"absolute z-50 w-full mt-2 bg-white border-2 rounded-lg shadow-lg max-h-96 overflow-y-auto\"\n          style={{ borderColor: '#FF7900' }}\n          role=\"listbox\"\n        >\n          {nodes.length === 0 ? (\n            <div className=\"px-4 py-3 text-sm text-gray-500 text-center\">\n              No items available\n            </div>\n          ) : (\n            <div className=\"py-1\">\n              {nodes.map((node) => renderTreeNode(node))}\n            </div>\n          )}\n\n          {/* Selection count footer with Done button */}\n          <div\n            className=\"px-4 py-2 border-t bg-gray-50 flex items-center justify-between\"\n            style={{ borderColor: '#e2e8f0' }}\n          >\n            {maxSelections && (\n              <span className=\"text-xs text-gray-600\">\n                {selectedCount} of {maxSelections} selected\n              </span>\n            )}\n            <button\n              type=\"button\"\n              onClick={() => setIsOpen(false)}\n              className=\"px-3 py-1 text-xs font-medium text-white rounded hover:opacity-90 transition-opacity\"\n              style={{ backgroundColor: '#FF7900' }}\n            >\n              Done\n            </button>\n          </div>\n        </div>\n      )}\n    </div>\n  );\n}\n","import { apiClient } from '../client/api-client';\n\n/**\n * Metro Area Response DTO from API\n * Matches backend MetroAreaDto structure\n */\nexport interface MetroAreaDto {\n  id: string;\n  name: string;\n  state: string;\n  centerLatitude: number;\n  centerLongitude: number;\n  radiusMiles: number;\n  isStateLevelArea: boolean;\n  isActive: boolean;\n}\n\n/**\n * Metro Areas Repository\n * Handles all metro area-related API calls\n * Phase 6A.9: Fix for hardcoded metro area IDs\n */\nexport const metroAreasRepository = {\n  /**\n   * Get all active metro areas\n   * Endpoint: GET /api/metro-areas?activeOnly=true\n   */\n  async getAll(activeOnly: boolean = true): Promise<MetroAreaDto[]> {\n    const data = await apiClient.get<MetroAreaDto[]>('/metro-areas', {\n      params: { activeOnly },\n    });\n    return data;\n  },\n\n  /**\n   * Get metro areas by state\n   * Client-side filtering of all metros by state code\n   */\n  async getByState(stateCode: string): Promise<MetroAreaDto[]> {\n    const allMetros = await this.getAll();\n    return allMetros.filter(metro => metro.state === stateCode);\n  },\n\n  /**\n   * Get a single metro area by ID\n   * Client-side lookup from all metros\n   */\n  async getById(id: string): Promise<MetroAreaDto | undefined> {\n    const allMetros = await this.getAll();\n    return allMetros.find(metro => metro.id === id);\n  },\n};\n","'use client';\r\n\r\nimport { useState, useMemo } from 'react';\r\nimport { MapPin, Check } from 'lucide-react';\r\nimport { Card, CardHeader, CardTitle, CardDescription, CardContent } from '@/presentation/components/ui/Card';\r\nimport { Button } from '@/presentation/components/ui/Button';\r\nimport { TreeDropdown, type TreeNode } from '@/presentation/components/ui/TreeDropdown';\r\nimport { useAuthStore } from '@/presentation/store/useAuthStore';\r\nimport { useProfileStore } from '@/presentation/store/useProfileStore';\r\nimport { useMetroAreas } from '@/presentation/hooks/useMetroAreas';\r\nimport { US_STATES } from '@/domain/constants/metroAreas.constants';\r\nimport { PROFILE_CONSTRAINTS } from '@/domain/constants/profile.constants';\r\n\r\n/**\r\n * PreferredMetroAreasSection Component\r\n * Phase 5B: User Preferred Metro Areas\r\n * Phase 6A.9: Updated to use TreeDropdown with API data\r\n *\r\n * Allows users to select 0-20 metro areas for location-based filtering\r\n * UI Pattern: Tree dropdown with state-grouped metros\r\n * - State-level selection (state-wide areas)\r\n * - City-level selection within expanded states\r\n * - Expand/collapse with [+] and [] indicators\r\n * - Pre-checked metros based on user's saved selections\r\n */\r\nexport function PreferredMetroAreasSection() {\r\n  const { user } = useAuthStore();\r\n  const { profile, updatePreferredMetroAreas, sectionStates, error, isLoading } = useProfileStore();\r\n\r\n  // Phase 6A.9: Fetch metro areas from API instead of hardcoded constants\r\n  const {\r\n    metroAreas,\r\n    metroAreasByState,\r\n    stateLevelMetros,\r\n    isLoading: metrosLoading,\r\n    error: metrosError,\r\n  } = useMetroAreas();\r\n\r\n  const [isEditing, setIsEditing] = useState(false);\r\n  const [selectedMetroAreas, setSelectedMetroAreas] = useState<string[]>([]);\r\n  const [validationError, setValidationError] = useState<string>('');\r\n\r\n  const sectionState = sectionStates.preferredMetroAreas;\r\n  const isSuccess = sectionState === 'success';\r\n  const isError = sectionState === 'error';\r\n  const isSaving = isLoading || sectionState === 'saving';\r\n\r\n  const currentMetroAreas = profile?.preferredMetroAreas || [];\r\n  const { max } = PROFILE_CONSTRAINTS.preferredMetroAreas;\r\n\r\n  // Convert metro areas data to tree structure for TreeDropdown\r\n  // MUST be called before any early returns (Rules of Hooks)\r\n  const treeNodes = useMemo<TreeNode[]>(() => {\r\n    const nodes: TreeNode[] = [];\r\n\r\n    US_STATES.forEach((state) => {\r\n      const metrosForState = metroAreasByState.get(state.code) || [];\r\n\r\n      if (metrosForState.length === 0) return;\r\n\r\n      // Separate state-level and city-level metros\r\n      const stateMetro = metrosForState.find((m) => m.isStateLevelArea);\r\n      const cityMetros = metrosForState.filter((m) => !m.isStateLevelArea);\r\n\r\n      const children: TreeNode[] = [];\r\n\r\n      // Add state-level metro first if it exists\r\n      if (stateMetro) {\r\n        children.push({\r\n          id: stateMetro.id,\r\n          label: stateMetro.name,\r\n          checked: selectedMetroAreas.includes(stateMetro.id),\r\n        });\r\n      }\r\n\r\n      // Add city-level metros\r\n      cityMetros.forEach((metro) => {\r\n        children.push({\r\n          id: metro.id,\r\n          label: metro.name,\r\n          checked: selectedMetroAreas.includes(metro.id),\r\n        });\r\n      });\r\n\r\n      nodes.push({\r\n        id: state.code,\r\n        label: state.name,\r\n        checked: false, // Parent nodes don't have checkboxes in our design\r\n        children,\r\n      });\r\n    });\r\n\r\n    return nodes;\r\n  }, [metroAreasByState, stateLevelMetros, selectedMetroAreas]);\r\n\r\n  // Return null if user not authenticated\r\n  if (!user) {\r\n    return null;\r\n  }\r\n\r\n  // Show loading state while fetching metros\r\n  if (metrosLoading) {\r\n    return (\r\n      <Card role=\"region\" aria-label=\"Preferred Metro Areas\">\r\n        <CardHeader>\r\n          <div className=\"flex items-center gap-2\">\r\n            <MapPin className=\"h-5 w-5\" style={{ color: '#FF7900' }} />\r\n            <CardTitle style={{ color: '#8B1538' }}>Preferred Metro Areas</CardTitle>\r\n          </div>\r\n          <CardDescription>Loading metro areas...</CardDescription>\r\n        </CardHeader>\r\n        <CardContent>\r\n          <div className=\"flex items-center justify-center p-4\">\r\n            <div className=\"animate-spin rounded-full h-8 w-8 border-b-2\" style={{ borderColor: '#FF7900' }}></div>\r\n          </div>\r\n        </CardContent>\r\n      </Card>\r\n    );\r\n  }\r\n\r\n  // Show error if metros failed to load\r\n  if (metrosError) {\r\n    return (\r\n      <Card role=\"region\" aria-label=\"Preferred Metro Areas\">\r\n        <CardHeader>\r\n          <div className=\"flex items-center gap-2\">\r\n            <MapPin className=\"h-5 w-5\" style={{ color: '#FF7900' }} />\r\n            <CardTitle style={{ color: '#8B1538' }}>Preferred Metro Areas</CardTitle>\r\n          </div>\r\n        </CardHeader>\r\n        <CardContent>\r\n          <p className=\"text-sm text-destructive\" role=\"alert\">\r\n            Failed to load metro areas: {metrosError}\r\n          </p>\r\n        </CardContent>\r\n      </Card>\r\n    );\r\n  }\r\n\r\n  const handleEdit = () => {\r\n    setIsEditing(true);\r\n    setSelectedMetroAreas([...currentMetroAreas]);\r\n    setValidationError('');\r\n  };\r\n\r\n  const handleCancel = () => {\r\n    setIsEditing(false);\r\n    setSelectedMetroAreas([]);\r\n    setValidationError('');\r\n  };\r\n\r\n  const handleSelectionChange = (newSelectedIds: string[]) => {\r\n    if (newSelectedIds.length > max) {\r\n      setValidationError(`You cannot select more than ${max} metro areas`);\r\n      return;\r\n    }\r\n    setValidationError('');\r\n    setSelectedMetroAreas(newSelectedIds);\r\n  };\r\n\r\n  const handleToggleMetroArea = (metroId: string) => {\r\n    setSelectedMetroAreas((prev) => {\r\n      if (prev.includes(metroId)) {\r\n        // Remove if already selected\r\n        setValidationError(''); // Clear error when removing\r\n        return prev.filter((id) => id !== metroId);\r\n      } else {\r\n        // Add (check max limit first)\r\n        if (prev.length >= max) {\r\n          setValidationError(`You cannot select more than ${max} metro areas`);\r\n          return prev; // Don't add\r\n        }\r\n        setValidationError(''); // Clear error\r\n        return [...prev, metroId];\r\n      }\r\n    });\r\n  };\r\n\r\n  const handleSave = async () => {\r\n    if (!user?.userId) return;\r\n\r\n    console.log('=== DEBUG: Attempting to save metro areas ===');\r\n    console.log('Selected IDs:', selectedMetroAreas);\r\n    console.log('Selected Count:', selectedMetroAreas.length);\r\n    selectedMetroAreas.forEach(id => {\r\n      const metro = getMetroById(id);\r\n      console.log(`  - ${id}: ${metro ? `${metro.name}, ${metro.state}` : 'NOT FOUND IN LOCAL DATA'}`);\r\n    });\r\n\r\n    try {\r\n      await updatePreferredMetroAreas(user.userId, {\r\n        metroAreaIds: selectedMetroAreas,\r\n      });\r\n\r\n      console.log(' Save successful');\r\n      // Exit edit mode on success (store will set state to 'success')\r\n      setIsEditing(false);\r\n      setValidationError('');\r\n    } catch (err) {\r\n      // Error handled by store, stay in edit mode for retry\r\n      console.error(' Save failed:', err);\r\n    }\r\n  };\r\n\r\n  // Helper to get metro by ID from API data\r\n  const getMetroById = (id: string) => {\r\n    return metroAreas.find(metro => metro.id === id);\r\n  };\r\n\r\n  // Helper to check if metro is state-level\r\n  const isStateLevelArea = (id: string) => {\r\n    const metro = getMetroById(id);\r\n    return metro?.isStateLevelArea ?? false;\r\n  };\r\n\r\n  return (\r\n    <Card role=\"region\" aria-label=\"Preferred Metro Areas\">\r\n      <CardHeader>\r\n        <div className=\"flex items-center justify-between\">\r\n          <div className=\"flex items-center gap-2\">\r\n            <MapPin className=\"h-5 w-5\" style={{ color: '#FF7900' }} />\r\n            <CardTitle style={{ color: '#8B1538' }}>Preferred Metro Areas</CardTitle>\r\n          </div>\r\n          {!isEditing && (\r\n            <Button\r\n              variant=\"outline\"\r\n              size=\"sm\"\r\n              onClick={handleEdit}\r\n              disabled={isSaving}\r\n              style={{ borderColor: '#FF7900', color: '#8B1538' }}\r\n            >\r\n              Edit\r\n            </Button>\r\n          )}\r\n        </div>\r\n        <CardDescription>\r\n          Select up to {max} metro areas for personalized event and content filtering. You can opt out by leaving\r\n          this empty.\r\n        </CardDescription>\r\n      </CardHeader>\r\n      <CardContent>\r\n        {!isEditing ? (\r\n          // ===== VIEW MODE =====\r\n          <div className=\"space-y-2\">\r\n            {currentMetroAreas.length > 0 ? (\r\n              <div className=\"flex flex-wrap gap-2\">\r\n                {currentMetroAreas.map((metroId) => {\r\n                  const metro = getMetroById(metroId);\r\n                  return metro ? (\r\n                    <div\r\n                      key={metroId}\r\n                      className=\"inline-flex items-center px-3 py-1 rounded-full text-sm font-medium\"\r\n                      style={{ background: '#FFE8CC', color: '#8B1538' }}\r\n                    >\r\n                      {metro.name}\r\n                      {!isStateLevelArea(metroId) && `, ${metro.state}`}\r\n                    </div>\r\n                  ) : null;\r\n                })}\r\n              </div>\r\n            ) : (\r\n              <p className=\"text-sm text-muted-foreground italic\">\r\n                No metro areas selected - Click Edit to add your preferred locations\r\n              </p>\r\n            )}\r\n\r\n            {/* Success message */}\r\n            {isSuccess && (\r\n              <div className=\"flex items-center gap-2 text-sm\" style={{ color: '#006400' }}>\r\n                <Check className=\"h-4 w-4\" />\r\n                <span>Preferred metro areas saved successfully!</span>\r\n              </div>\r\n            )}\r\n\r\n            {/* Error message */}\r\n            {isError && error && (\r\n              <p className=\"text-sm text-destructive\" role=\"alert\">\r\n                {error}\r\n              </p>\r\n            )}\r\n          </div>\r\n        ) : (\r\n          // ===== EDIT MODE: TREE DROPDOWN =====\r\n          <div className=\"space-y-3\">\r\n            <p className=\"text-sm text-muted-foreground mb-2\">\r\n              Select metro areas by expanding states and checking your preferred locations\r\n            </p>\r\n\r\n            <TreeDropdown\r\n              nodes={treeNodes}\r\n              selectedIds={selectedMetroAreas}\r\n              onSelectionChange={handleSelectionChange}\r\n              placeholder={`Select up to ${max} metro areas`}\r\n              maxSelections={max}\r\n              disabled={isSaving}\r\n              className=\"w-full\"\r\n            />\r\n\r\n            {/* Selection counter and validation */}\r\n            <div className=\"flex items-center justify-between pt-2 border-t\" style={{ borderColor: '#e2e8f0' }}>\r\n              <p className=\"text-sm text-muted-foreground\">\r\n                {selectedMetroAreas.length} of {max} selected\r\n              </p>\r\n\r\n              {validationError && (\r\n                <p className=\"text-sm text-destructive\" role=\"alert\">\r\n                  {validationError}\r\n                </p>\r\n              )}\r\n            </div>\r\n\r\n            {/* Action Buttons */}\r\n            <div className=\"flex gap-3 pt-2\">\r\n              <Button\r\n                onClick={handleSave}\r\n                disabled={isSaving || !!validationError}\r\n                className=\"flex-1 text-white\"\r\n                style={{ background: '#FF7900' }}\r\n              >\r\n                {isSaving ? 'Saving...' : 'Save Changes'}\r\n              </Button>\r\n              <Button\r\n                onClick={handleCancel}\r\n                variant=\"outline\"\r\n                disabled={isSaving}\r\n                className=\"flex-1\"\r\n                style={{ borderColor: '#8B1538', color: '#8B1538' }}\r\n              >\r\n                Cancel\r\n              </Button>\r\n            </div>\r\n          </div>\r\n        )}\r\n      </CardContent>\r\n    </Card>\r\n  );\r\n}\r\n","import createLucideIcon from '../createLucideIcon';\nimport { IconNode } from '../types';\n\nexport const __iconNode: IconNode = [\n  ['path', { d: 'M12 3v12', key: '1x0j5s' }],\n  ['path', { d: 'm17 8-5-5-5 5', key: '7q97r8' }],\n  ['path', { d: 'M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4', key: 'ih7n3h' }],\n];\n\n/**\n * @component @name Upload\n * @description Lucide SVG icon component, renders SVG Element with children.\n *\n * @preview ![img](data:image/svg+xml;base64,PHN2ZyAgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIgogIHdpZHRoPSIyNCIKICBoZWlnaHQ9IjI0IgogIHZpZXdCb3g9IjAgMCAyNCAyNCIKICBmaWxsPSJub25lIgogIHN0cm9rZT0iIzAwMCIgc3R5bGU9ImJhY2tncm91bmQtY29sb3I6ICNmZmY7IGJvcmRlci1yYWRpdXM6IDJweCIKICBzdHJva2Utd2lkdGg9IjIiCiAgc3Ryb2tlLWxpbmVjYXA9InJvdW5kIgogIHN0cm9rZS1saW5lam9pbj0icm91bmQiCj4KICA8cGF0aCBkPSJNMTIgM3YxMiIgLz4KICA8cGF0aCBkPSJtMTcgOC01LTUtNSA1IiAvPgogIDxwYXRoIGQ9Ik0yMSAxNXY0YTIgMiAwIDAgMS0yIDJINWEyIDIgMCAwIDEtMi0ydi00IiAvPgo8L3N2Zz4K) - https://lucide.dev/icons/upload\n * @see https://lucide.dev/guide/packages/lucide-react - Documentation\n *\n * @param {Object} props - Lucide icons props and any valid SVG attribute\n * @returns {JSX.Element} JSX Element\n *\n */\nconst Upload = createLucideIcon('upload', __iconNode);\n\nexport default Upload;\n","/**\r\n * Profile Constants\r\n *\r\n * Constants for cultural interests, languages, and proficiency levels\r\n * Matches backend CulturalInterest, LanguageCode, and ProficiencyLevel enums\r\n */\r\n\r\nimport type { ProficiencyLevel } from '../models/UserProfile';\r\n\r\n/**\r\n * Cultural Interests (20 predefined interests)\r\n * Code matches backend CulturalInterest.Code\r\n */\r\nexport interface CulturalInterestOption {\r\n  code: string;\r\n  name: string;\r\n}\r\n\r\nexport const CULTURAL_INTERESTS: readonly CulturalInterestOption[] = [\r\n  { code: 'SL_CUISINE', name: 'Sri Lankan Cuisine' },\r\n  { code: 'BUDDHIST_FEST', name: 'Buddhist Festivals & Traditions' },\r\n  { code: 'HINDU_FEST', name: 'Hindu Festivals & Traditions' },\r\n  { code: 'ISLAMIC_FEST', name: 'Islamic Festivals & Traditions' },\r\n  { code: 'CHRISTIAN_FEST', name: 'Christian Festivals & Traditions' },\r\n  { code: 'TRAD_DANCE', name: 'Traditional Dance (Kandyan, Sabaragamuwa, Low Country)' },\r\n  { code: 'CRICKET', name: 'Cricket & Sports' },\r\n  { code: 'AYURVEDA', name: 'Ayurvedic Medicine & Wellness' },\r\n  { code: 'SINHALA_MUSIC', name: 'Sinhala Music & Arts' },\r\n  { code: 'TAMIL_MUSIC', name: 'Tamil Music & Arts' },\r\n  { code: 'VESAK', name: 'Vesak & Poson Celebrations' },\r\n  { code: 'SINHALA_NY', name: 'Sinhala & Tamil New Year (Aluth Avurudda)' },\r\n  { code: 'TEA_CULTURE', name: 'Ceylon Tea Culture' },\r\n  { code: 'TRAD_ARTS', name: 'Traditional Arts & Crafts (Masks, Batik, Pottery)' },\r\n  { code: 'SL_WEDDINGS', name: 'Sri Lankan Wedding Traditions' },\r\n  { code: 'TEMPLE_ARCH', name: 'Temple Architecture & Heritage Sites' },\r\n  { code: 'SL_LITERATURE', name: 'Sinhala/Tamil Literature & Poetry' },\r\n  { code: 'TRAD_GAMES', name: 'Traditional Games (Elle, Ankeliya)' },\r\n  { code: 'SL_FASHION', name: 'Traditional Dress & Fashion (Saree, Sarong)' },\r\n  { code: 'DIASPORA_NET', name: 'Diaspora Community & Networking' },\r\n] as const;\r\n\r\n/**\r\n * Supported Languages (20 languages with ISO 639 codes)\r\n * Code matches backend LanguageCode.Code\r\n */\r\nexport interface LanguageOption {\r\n  code: string;\r\n  name: string;\r\n  nativeName: string;\r\n}\r\n\r\nexport const SUPPORTED_LANGUAGES: readonly LanguageOption[] = [\r\n  // Sri Lankan languages first (priority)\r\n  { code: 'si', name: 'Sinhala', nativeName: '' },\r\n  { code: 'ta', name: 'Tamil', nativeName: '' },\r\n  { code: 'en', name: 'English', nativeName: 'English' },\r\n\r\n  // Major South Asian languages\r\n  { code: 'hi', name: 'Hindi', nativeName: '' },\r\n  { code: 'bn', name: 'Bengali', nativeName: '' },\r\n  { code: 'ur', name: 'Urdu', nativeName: '' },\r\n  { code: 'pa', name: 'Punjabi', nativeName: '' },\r\n  { code: 'gu', name: 'Gujarati', nativeName: '' },\r\n  { code: 'ml', name: 'Malayalam', nativeName: '' },\r\n  { code: 'kn', name: 'Kannada', nativeName: '' },\r\n  { code: 'te', name: 'Telugu', nativeName: '' },\r\n  { code: 'mr', name: 'Marathi', nativeName: '' },\r\n\r\n  // International languages (for diaspora)\r\n  { code: 'ar', name: 'Arabic', nativeName: '' },\r\n  { code: 'fr', name: 'French', nativeName: 'Franais' },\r\n  { code: 'de', name: 'German', nativeName: 'Deutsch' },\r\n  { code: 'es', name: 'Spanish', nativeName: 'Espaol' },\r\n  { code: 'it', name: 'Italian', nativeName: 'Italiano' },\r\n  { code: 'pt', name: 'Portuguese', nativeName: 'Portugus' },\r\n  { code: 'nl', name: 'Dutch', nativeName: 'Nederlands' },\r\n  { code: 'sv', name: 'Swedish', nativeName: 'Svenska' },\r\n] as const;\r\n\r\n/**\r\n * Proficiency Level Options\r\n * Matches backend ProficiencyLevel enum (4-level scale)\r\n */\r\nexport interface ProficiencyLevelOption {\r\n  value: ProficiencyLevel;\r\n  label: string;\r\n  description: string;\r\n}\r\n\r\nexport const PROFICIENCY_LEVELS: readonly ProficiencyLevelOption[] = [\r\n  {\r\n    value: 'Basic',\r\n    label: 'Basic',\r\n    description: 'Can understand and use familiar everyday expressions',\r\n  },\r\n  {\r\n    value: 'Intermediate',\r\n    label: 'Intermediate',\r\n    description: 'Can handle routine work/social situations',\r\n  },\r\n  {\r\n    value: 'Advanced',\r\n    label: 'Advanced',\r\n    description: 'Can express ideas fluently and spontaneously',\r\n  },\r\n  {\r\n    value: 'Native',\r\n    label: 'Native/Near-Native',\r\n    description: 'Complete mastery of the language',\r\n  },\r\n] as const;\r\n\r\n/**\r\n * Validation Constraints (matches backend validation)\r\n */\r\nexport const PROFILE_CONSTRAINTS = {\r\n  location: {\r\n    cityMaxLength: 100,\r\n    stateMaxLength: 100,\r\n    zipCodeMaxLength: 20,\r\n    countryMaxLength: 100,\r\n  },\r\n  culturalInterests: {\r\n    min: 0, // Optional\r\n    max: 10, // Maximum 10 interests\r\n  },\r\n  languages: {\r\n    min: 1, // At least 1 language required\r\n    max: 5, // Maximum 5 languages\r\n  },\r\n  preferredMetroAreas: {\r\n    min: 0, // Optional (privacy choice)\r\n    max: 20, // Maximum 20 metro areas (Phase 5B: Expanded from 10)\r\n  },\r\n} as const;\r\n","import { useState, useEffect } from 'react';\nimport { metroAreasRepository, MetroAreaDto } from '@/infrastructure/api/repositories/metro-areas.repository';\n\n/**\n * Metro Areas State for UI\n * Includes grouped and sorted data for UI rendering\n */\nexport interface MetroAreasState {\n  /** All metro areas loaded from API */\n  metroAreas: MetroAreaDto[];\n\n  /** Metro areas grouped by state for dropdown rendering */\n  metroAreasByState: Map<string, MetroAreaDto[]>;\n\n  /** State-level metros only (All [State]) */\n  stateLevelMetros: MetroAreaDto[];\n\n  /** City-level metros only (excludes All [State]) */\n  cityLevelMetros: MetroAreaDto[];\n\n  /** Loading state */\n  isLoading: boolean;\n\n  /** Error message if fetch failed */\n  error: string | null;\n}\n\n/**\n * Hook to fetch and manage metro areas from the API\n * Phase 6A.9: Replaces hardcoded constants with dynamic API data\n *\n * Usage:\n * ```tsx\n * const { metroAreas, metroAreasByState, isLoading } = useMetroAreas();\n * ```\n */\nexport function useMetroAreas(): MetroAreasState {\n  const [metroAreas, setMetroAreas] = useState<MetroAreaDto[]>([]);\n  const [isLoading, setIsLoading] = useState(true);\n  const [error, setError] = useState<string | null>(null);\n\n  useEffect(() => {\n    let isMounted = true;\n\n    async function fetchMetroAreas() {\n      try {\n        setIsLoading(true);\n        setError(null);\n\n        const data = await metroAreasRepository.getAll(true);\n\n        if (isMounted) {\n          setMetroAreas(data);\n        }\n      } catch (err) {\n        if (isMounted) {\n          const errorMessage = err instanceof Error ? err.message : 'Failed to load metro areas';\n          setError(errorMessage);\n          console.error('Error fetching metro areas:', err);\n        }\n      } finally {\n        if (isMounted) {\n          setIsLoading(false);\n        }\n      }\n    }\n\n    fetchMetroAreas();\n\n    return () => {\n      isMounted = false;\n    };\n  }, []);\n\n  // Group metros by state\n  const metroAreasByState = new Map<string, MetroAreaDto[]>();\n  for (const metro of metroAreas) {\n    if (!metroAreasByState.has(metro.state)) {\n      metroAreasByState.set(metro.state, []);\n    }\n    metroAreasByState.get(metro.state)!.push(metro);\n  }\n\n  // Sort metros within each state (state-level first, then alphabetically)\n  for (const [, metros] of metroAreasByState) {\n    metros.sort((a, b) => {\n      if (a.isStateLevelArea && !b.isStateLevelArea) return -1;\n      if (!a.isStateLevelArea && b.isStateLevelArea) return 1;\n      return a.name.localeCompare(b.name);\n    });\n  }\n\n  // Separate state-level and city-level metros\n  const stateLevelMetros = metroAreas.filter(m => m.isStateLevelArea);\n  const cityLevelMetros = metroAreas.filter(m => !m.isStateLevelArea);\n\n  return {\n    metroAreas,\n    metroAreasByState,\n    stateLevelMetros,\n    cityLevelMetros,\n    isLoading,\n    error,\n  };\n}\n"],"names":[],"mappings":"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","ignoreList":[8]}