module.exports=[29312,a=>{"use strict";var b=a.i(64668);let c=new class{basePath="/events";async getEvents(a={}){let c=new URLSearchParams;void 0!==a.status&&c.append("status",String(a.status)),void 0!==a.category&&c.append("category",String(a.category)),a.startDateFrom&&c.append("startDateFrom",a.startDateFrom),a.startDateTo&&c.append("startDateTo",a.startDateTo),void 0!==a.isFreeOnly&&c.append("isFreeOnly",String(a.isFreeOnly)),a.city&&c.append("city",a.city),a.state&&c.append("state",a.state),a.userId&&c.append("userId",a.userId),void 0!==a.latitude&&c.append("latitude",String(a.latitude)),void 0!==a.longitude&&c.append("longitude",String(a.longitude)),a.metroAreaIds&&a.metroAreaIds.length>0&&a.metroAreaIds.forEach(a=>c.append("metroAreaIds",a));let d=c.toString(),e=d?`${this.basePath}?${d}`:this.basePath;return await b.apiClient.get(e)}async getEventById(a){return await b.apiClient.get(`${this.basePath}/${a}`)}async searchEvents(a){let c=new URLSearchParams({searchTerm:a.searchTerm,page:String(a.page??1),pageSize:String(a.pageSize??20)});return void 0!==a.category&&c.append("category",String(a.category)),void 0!==a.isFreeOnly&&c.append("isFreeOnly",String(a.isFreeOnly)),a.startDateFrom&&c.append("startDateFrom",a.startDateFrom),await b.apiClient.get(`${this.basePath}/search?${c.toString()}`)}async getNearbyEvents(a){let c=new URLSearchParams({latitude:String(a.latitude),longitude:String(a.longitude),radiusKm:String(a.radiusKm)});return void 0!==a.category&&c.append("category",String(a.category)),void 0!==a.isFreeOnly&&c.append("isFreeOnly",String(a.isFreeOnly)),a.startDateFrom&&c.append("startDateFrom",a.startDateFrom),await b.apiClient.get(`${this.basePath}/nearby?${c.toString()}`)}async getFeaturedEvents(a,c,d){let e=new URLSearchParams;a&&e.append("userId",a),void 0!==c&&e.append("latitude",String(c)),void 0!==d&&e.append("longitude",String(d));let f=e.toString(),g=f?`${this.basePath}/featured?${f}`:`${this.basePath}/featured`;return await b.apiClient.get(g)}async createEvent(a){return(await b.apiClient.post(this.basePath,a)).id}async updateEvent(a,c){await b.apiClient.put(`${this.basePath}/${a}`,{...c,eventId:a})}async deleteEvent(a){await b.apiClient.delete(`${this.basePath}/${a}`)}async submitForApproval(a){await b.apiClient.post(`${this.basePath}/${a}/submit`)}async publishEvent(a){await b.apiClient.post(`${this.basePath}/${a}/publish`)}async cancelEvent(a,c){await b.apiClient.post(`${this.basePath}/${a}/cancel`,{reason:c})}async postponeEvent(a,c){await b.apiClient.post(`${this.basePath}/${a}/postpone`,{reason:c})}async rsvpToEvent(a,c,d=1){await b.apiClient.post(`${this.basePath}/${a}/rsvp`,{eventId:a,userId:c,quantity:d})}async cancelRsvp(a){await b.apiClient.delete(`${this.basePath}/${a}/rsvp`)}async updateRsvp(a,c,d){await b.apiClient.put(`${this.basePath}/${a}/rsvp`,{userId:c,newQuantity:d})}async getUserRsvps(){return await b.apiClient.get(`${this.basePath}/my-rsvps`)}async getUpcomingEvents(){return await b.apiClient.get(`${this.basePath}/upcoming`)}async getUserCreatedEvents(){return await b.apiClient.get(`${this.basePath}/my-events`)}async addToWaitingList(a){await b.apiClient.post(`${this.basePath}/${a}/waiting-list`)}async removeFromWaitingList(a){await b.apiClient.delete(`${this.basePath}/${a}/waiting-list`)}async getWaitingList(a){return await b.apiClient.get(`${this.basePath}/${a}/waiting-list`)}async getEventSignUpLists(a){return await b.apiClient.get(`${this.basePath}/${a}/signups`)}async addSignUpList(a,c){await b.apiClient.post(`${this.basePath}/${a}/signups`,c)}async removeSignUpList(a,c){await b.apiClient.delete(`${this.basePath}/${a}/signups/${c}`)}async commitToSignUp(a,c,d){await b.apiClient.post(`${this.basePath}/${a}/signups/${c}/commit`,d)}async cancelCommitment(a,c,d){await b.apiClient.delete(`${this.basePath}/${a}/signups/${c}/commit`,{data:d})}async uploadEventImage(a,c){let d=new FormData;return d.append("image",c),await b.apiClient.postMultipart(`${this.basePath}/${a}/images`,d)}async deleteEventImage(a,c){await b.apiClient.delete(`${this.basePath}/${a}/images/${c}`)}async getEventIcs(a){let b=await fetch(`https://lankaconnect-api-staging.politebay-79d6e8a2.eastus2.azurecontainerapps.io/api${this.basePath}/${a}/ics`);if(!b.ok)throw Error("Failed to download ICS file");return await b.blob()}async recordEventShare(a,c){await b.apiClient.post(`${this.basePath}/${a}/share`,{platform:c})}};a.s(["eventsRepository",0,c])},74934,a=>{"use strict";var b=a.i(33217),c=a.i(70025),d=a.i(37927),e=a.i(29312);let f={all:["events"],lists:()=>[...f.all,"list"],list:a=>[...f.lists(),a],details:()=>[...f.all,"detail"],detail:a=>[...f.details(),a],search:a=>[...f.all,"search",a],featured:(a,b,c)=>[...f.all,"featured",{userId:a,lat:b,lng:c}]};function g(a,c){return(0,b.useQuery)({queryKey:f.list(a||{}),queryFn:async()=>await e.eventsRepository.getEvents(a),staleTime:3e5,refetchOnWindowFocus:!0,retry:1,...c})}function h(a,c){return(0,b.useQuery)({queryKey:f.detail(a||""),queryFn:()=>e.eventsRepository.getEventById(a),enabled:!!a,staleTime:6e5,refetchOnWindowFocus:!0,...c})}function i(a,c,d,g){return(0,b.useQuery)({queryKey:f.featured(a,c,d),queryFn:()=>e.eventsRepository.getFeaturedEvents(a,c,d),staleTime:3e5,refetchOnWindowFocus:!0,retry:1,...g})}function j(){let a=(0,d.useQueryClient)();return(0,c.useMutation)({mutationFn:a=>e.eventsRepository.createEvent(a),onSuccess:()=>{a.invalidateQueries({queryKey:f.lists()})}})}function k(){let a=(0,d.useQueryClient)();return(0,c.useMutation)({mutationFn:a=>e.eventsRepository.rsvpToEvent(a.eventId,a.userId,a.quantity),onMutate:async({eventId:b})=>{await a.cancelQueries({queryKey:f.detail(b)});let c=a.getQueryData(f.detail(b));return a.setQueryData(f.detail(b),a=>a?{...a,currentRegistrations:a.currentRegistrations+1}:a),{previousEvent:c}},onError:(b,{eventId:c},d)=>{d?.previousEvent&&a.setQueryData(f.detail(c),d.previousEvent)},onSuccess:(b,c)=>{a.invalidateQueries({queryKey:f.detail(c.eventId)})}})}a.s(["eventKeys",0,f,"useCreateEvent",()=>j,"useEventById",()=>h,"useEvents",()=>g,"useFeaturedEvents",()=>i,"useRsvpToEvent",()=>k])},24987,a=>{"use strict";let b=(0,a.i(70106).default)("map-pin",[["path",{d:"M20 10c0 4.993-5.539 10.193-7.399 11.799a1 1 0 0 1-1.202 0C9.539 20.193 4 14.993 4 10a8 8 0 0 1 16 0",key:"1r0f0z"}],["circle",{cx:"12",cy:"10",r:"3",key:"ilqhr7"}]]);a.s(["MapPin",()=>b],24987)},41675,a=>{"use strict";let b=(0,a.i(70106).default)("calendar",[["path",{d:"M8 2v4",key:"1cmpym"}],["path",{d:"M16 2v4",key:"4m81vk"}],["rect",{width:"18",height:"18",x:"3",y:"4",rx:"2",key:"1hopcy"}],["path",{d:"M3 10h18",key:"8toen8"}]]);a.s(["Calendar",()=>b],41675)},63535,a=>{"use strict";var b=a.i(87924),c=a.i(72131),d=a.i(187),e=a.i(18203);let f=(0,d.cva)("inline-flex items-center rounded-full px-2.5 py-0.5 text-xs font-medium transition-colors",{variants:{variant:{default:"bg-gray-100 text-gray-800",cultural:"bg-saffron-100 text-saffron-800",arts:"bg-pink-100 text-pink-800",food:"bg-orange-100 text-orange-800",business:"bg-cyan-100 text-cyan-800",community:"bg-purple-100 text-purple-800",featured:"bg-green-100 text-green-800",new:"bg-emerald-100 text-emerald-800",hot:"bg-red-100 text-red-800"}},defaultVariants:{variant:"default"}}),g=c.forwardRef(({className:a,variant:c,...d},g)=>(0,b.jsx)("span",{ref:g,className:(0,e.cn)(f({variant:c}),a),...d}));g.displayName="Badge",a.s(["Badge",()=>g])},41710,a=>{"use strict";let b=(0,a.i(70106).default)("clock",[["path",{d:"M12 6v6l4 2",key:"mmk7yg"}],["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}]]);a.s(["Clock",()=>b],41710)},8406,a=>{"use strict";let b=(0,a.i(70106).default)("sparkles",[["path",{d:"M11.017 2.814a1 1 0 0 1 1.966 0l1.051 5.558a2 2 0 0 0 1.594 1.594l5.558 1.051a1 1 0 0 1 0 1.966l-5.558 1.051a2 2 0 0 0-1.594 1.594l-1.051 5.558a1 1 0 0 1-1.966 0l-1.051-5.558a2 2 0 0 0-1.594-1.594l-5.558-1.051a1 1 0 0 1 0-1.966l5.558-1.051a2 2 0 0 0 1.594-1.594z",key:"1s2grr"}],["path",{d:"M20 2v4",key:"1rf3ol"}],["path",{d:"M22 4h-4",key:"gwowj6"}],["circle",{cx:"4",cy:"20",r:"2",key:"6kqj1y"}]]);a.s(["Sparkles",()=>b],8406)},30654,a=>{"use strict";let b=(0,a.i(70106).default)("newspaper",[["path",{d:"M15 18h-5",key:"95g1m2"}],["path",{d:"M18 14h-8",key:"sponae"}],["path",{d:"M4 22h16a2 2 0 0 0 2-2V4a2 2 0 0 0-2-2H8a2 2 0 0 0-2 2v16a2 2 0 0 1-4 0v-9a2 2 0 0 1 2-2h2",key:"39pd36"}],["rect",{width:"8",height:"4",x:"10",y:"6",rx:"1",key:"aywv1n"}]]);a.s(["Newspaper",()=>b],30654)},94332,a=>{"use strict";var b=a.i(72131);function c(a=!0){let[d,e]=(0,b.useState)({latitude:null,longitude:null,loading:a,error:null});return(0,b.useEffect)(()=>{if(!a)return void e({latitude:null,longitude:null,loading:!1,error:null});let b=!0,c=async()=>{try{let a=await fetch("https://ipapi.co/json/",{method:"GET",headers:{Accept:"application/json"}});if(!a.ok)throw Error(`IP geolocation API error: ${a.status}`);let c=await a.json();if(b&&c.latitude&&c.longitude)e({latitude:c.latitude,longitude:c.longitude,loading:!1,error:null});else throw Error("Invalid response from IP geolocation service")}catch(a){console.error("IP-based geolocation failed:",a),b&&e({latitude:null,longitude:null,loading:!1,error:a instanceof Error?a.message:"Failed to detect location"})}};return(async()=>{"geolocation"in navigator?navigator.geolocation.getCurrentPosition(a=>{b&&e({latitude:a.coords.latitude,longitude:a.coords.longitude,loading:!1,error:null})},async a=>{console.warn("Browser geolocation failed:",a.message),await c()},{timeout:1e4,maximumAge:3e5,enableHighAccuracy:!1}):await c()})(),()=>{b=!1}},[a]),d}a.s(["useGeolocation",()=>c])},98075,a=>{a.v(b=>Promise.all(["server/chunks/ssr/src_infrastructure_api_repositories_auth_repository_ts_228441a4._.js"].map(b=>a.l(b))).then(()=>b(43061)))}];

//# sourceMappingURL=_9064595a._.js.map