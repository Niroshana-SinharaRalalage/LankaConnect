{
  "analysisMetadata": {
    "date": "2025-10-07",
    "project": "LankaConnect",
    "ruleViolated": "For any given type there should be a separate class file",
    "taskId": "task-1759866397398-75joxt6if"
  },
  "summary": {
    "totalFilesAnalyzed": 939,
    "filesWithViolations": 361,
    "violationPercentage": 38.4,
    "interfaceFileViolations": 41,
    "totalRefactoringActions": 4302,
    "estimatedEffortHours": "63-90"
  },
  "topViolators": [
    {
      "rank": 1,
      "file": "src\\LankaConnect.API\\DTOs\\CulturalIntelligenceBillingDTOs.cs",
      "typeCount": 28,
      "category": "API DTOs",
      "severity": "CRITICAL"
    },
    {
      "rank": 2,
      "file": "src\\LankaConnect.Application\\Common\\DisasterRecovery\\RevenueContinuityStrategy.cs",
      "typeCount": 21,
      "category": "Disaster Recovery",
      "severity": "CRITICAL"
    },
    {
      "rank": 3,
      "file": "src\\LankaConnect.Application\\Common\\DisasterRecovery\\RecoveryComplianceReportResult.cs",
      "typeCount": 19,
      "category": "Disaster Recovery",
      "severity": "CRITICAL"
    },
    {
      "rank": 4,
      "file": "src\\LankaConnect.Application\\Common\\DisasterRecovery\\RevenueImpactMonitoringConfiguration.cs",
      "typeCount": 19,
      "category": "Disaster Recovery",
      "severity": "CRITICAL"
    },
    {
      "rank": 5,
      "file": "src\\LankaConnect.API\\Controllers\\CulturalCommunicationsController.cs",
      "typeCount": 16,
      "category": "Controller",
      "severity": "HIGH"
    },
    {
      "rank": 6,
      "file": "src\\LankaConnect.API\\Controllers\\CulturalEventsController.cs",
      "typeCount": 16,
      "category": "Controller",
      "severity": "HIGH"
    },
    {
      "rank": 7,
      "file": "src\\LankaConnect.Application\\Common\\DisasterRecovery\\AlternativeRevenueChannelResult.cs",
      "typeCount": 16,
      "category": "Disaster Recovery",
      "severity": "HIGH"
    },
    {
      "rank": 8,
      "file": "src\\LankaConnect.Application\\Common\\DisasterRecovery\\BillingContinuityConfiguration.cs",
      "typeCount": 16,
      "category": "Disaster Recovery",
      "severity": "HIGH"
    },
    {
      "rank": 9,
      "file": "src\\LankaConnect.Application\\Common\\DisasterRecovery\\BillingContinuityResult.cs",
      "typeCount": 16,
      "category": "Disaster Recovery",
      "severity": "HIGH"
    },
    {
      "rank": 10,
      "file": "src\\LankaConnect.Application\\Common\\DisasterRecovery\\RevenueProtectionImplementationResult.cs",
      "typeCount": 16,
      "category": "Disaster Recovery",
      "severity": "HIGH"
    }
  ],
  "violationPatterns": [
    {
      "pattern": "Controller Files with Inline DTOs",
      "description": "Controllers define request/response DTOs inline instead of separate files",
      "affectedFiles": 8,
      "severity": "HIGH",
      "examples": [
        "BusinessesController.cs (6 types)",
        "CulturalCommunicationsController.cs (16 types)",
        "CulturalEventsController.cs (16 types)"
      ]
    },
    {
      "pattern": "Interface Files with Embedded Types",
      "description": "Interface files contain implementation classes, DTOs, or enums",
      "affectedFiles": 41,
      "severity": "HIGH",
      "examples": [
        "IStripeWebhookHandler.cs (15 types)",
        "ICulturalConflictResolutionEngine.cs (13 types)",
        "IDatabaseSecurityOptimizationEngine.cs (30 types)"
      ]
    },
    {
      "pattern": "Configuration Files with Mixed Types",
      "description": "Configuration and result files contain both classes and enums",
      "affectedFiles": 89,
      "severity": "MEDIUM",
      "examples": [
        "AlternativeChannelConfiguration.cs (15 types: 7 classes + 8 enums)",
        "BillingContinuityConfiguration.cs (16 types: 7 classes + 9 enums)",
        "RevenueContinuityStrategy.cs (21 types: 8 classes + 13 enums)"
      ]
    },
    {
      "pattern": "Large DTO Collection Files",
      "description": "Single files containing many related DTOs",
      "affectedFiles": 15,
      "severity": "CRITICAL",
      "examples": [
        "CulturalIntelligenceBillingDTOs.cs (28 types)"
      ]
    }
  ],
  "affectedAreas": [
    {
      "category": "Disaster Recovery",
      "filesAffected": 89,
      "typesCount": "1200+",
      "impact": "CRITICAL",
      "note": "Complex domain models spread across large files"
    },
    {
      "category": "API Controllers",
      "filesAffected": 8,
      "typesCount": "70+",
      "impact": "HIGH",
      "note": "Public API surface mixed with DTOs"
    },
    {
      "category": "DTOs",
      "filesAffected": 15,
      "typesCount": "120+",
      "impact": "HIGH",
      "note": "Data contracts grouped in large files"
    },
    {
      "category": "Interface Files",
      "filesAffected": 41,
      "typesCount": "250+",
      "impact": "HIGH",
      "note": "Architecture principle violations"
    },
    {
      "category": "Application Models",
      "filesAffected": 45,
      "typesCount": "180+",
      "impact": "MEDIUM",
      "note": "Domain logic organization issues"
    },
    {
      "category": "Infrastructure",
      "filesAffected": 30,
      "typesCount": "90+",
      "impact": "MEDIUM",
      "note": "Data access layer organization"
    },
    {
      "category": "Others",
      "filesAffected": 133,
      "typesCount": "392+",
      "impact": "LOW-MEDIUM",
      "note": "Various minor violations"
    }
  ],
  "criticalIssues": [
    {
      "issue": "Interface Files Should Be Pure",
      "violationCount": 41,
      "impact": "Violates Interface Segregation Principle, makes code harder to navigate",
      "priority": 1
    },
    {
      "issue": "Controllers Mixed with DTOs",
      "violationCount": 8,
      "impact": "DTOs not reusable, controllers hard to test, violates SRP",
      "priority": 1
    },
    {
      "issue": "Disaster Recovery Mega Files",
      "violationCount": 89,
      "impact": "Navigation nightmare, merge conflicts, hard to understand",
      "priority": 2
    },
    {
      "issue": "Large DTO Collection Files",
      "violationCount": 15,
      "impact": "Difficult to locate specific DTOs, maintenance overhead",
      "priority": 1
    }
  ],
  "refactoringPlan": {
    "phase1": {
      "name": "Quick Wins",
      "timeline": "Week 1-2",
      "filesAffected": 100,
      "actions": [
        "Extract controller DTOs to separate files (8 controllers)",
        "Split large DTO files (CulturalIntelligenceBillingDTOs.cs)",
        "Clean up interface files (remove embedded implementations)"
      ],
      "impact": "~30% of violations, high visibility improvements"
    },
    "phase2": {
      "name": "Disaster Recovery Refactoring",
      "timeline": "Week 3-5",
      "filesAffected": 90,
      "actions": [
        "Split configuration files (separate classes and enums)",
        "Split result files (separate classes and enums)",
        "Organize into feature-based folder structure"
      ],
      "impact": "~25% of violations, improved domain clarity"
    },
    "phase3": {
      "name": "Model Files",
      "timeline": "Week 6-8",
      "filesAffected": 100,
      "actions": [
        "Split multi-language model files",
        "Split security model files",
        "Split application model files"
      ],
      "impact": "~25% of violations"
    },
    "phase4": {
      "name": "Remaining Files & Prevention",
      "timeline": "Week 9-10",
      "filesAffected": 71,
      "actions": [
        "Address all remaining violations",
        "Add Roslyn analyzer to prevent future violations",
        "Update coding standards documentation"
      ],
      "impact": "~20% of violations, long-term prevention"
    }
  },
  "riskAssessment": {
    "highRiskAreas": [
      {
        "area": "Namespace Changes",
        "description": "4,302 files will need updated using statements",
        "mitigation": "Use automated refactoring tools, test incrementally"
      },
      {
        "area": "Circular Dependencies",
        "description": "Some extracted types may reveal hidden circular dependencies",
        "mitigation": "Identify and resolve dependency cycles during extraction"
      },
      {
        "area": "Build Breaking",
        "description": "Large-scale refactoring may temporarily break the build",
        "mitigation": "Use feature branches, commit frequently, run CI pipeline"
      },
      {
        "area": "Test Impact",
        "description": "Tests may need updated references",
        "mitigation": "Run full test suite after each batch, update as needed"
      }
    ],
    "mitigationStrategy": [
      "Incremental approach - refactor one feature area at a time",
      "Use Roslyn analyzers and automated refactoring tools",
      "Run tests after each batch of changes",
      "Use feature branches and commit frequently",
      "Code review each batch before merging"
    ]
  },
  "resources": {
    "fullReport": "docs/FILE_ORGANIZATION_VIOLATIONS_REPORT.md",
    "quickReference": "docs/FILE_VIOLATIONS_SUMMARY.md",
    "rawData": "docs/violations-raw.json",
    "swarmMemoryKey": "swarm/analyzer/file-violations"
  }
}
