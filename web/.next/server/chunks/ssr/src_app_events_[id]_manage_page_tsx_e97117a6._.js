module.exports=[72174,a=>{"use strict";var b=a.i(87924),c=a.i(72131),d=a.i(50944),e=a.i(210),f=a.i(70106);let g=(0,f.default)("square-pen",[["path",{d:"M12 3H5a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2v-7",key:"1m0v6g"}],["path",{d:"M18.375 2.625a1 1 0 0 1 3 3l-9.013 9.014a2 2 0 0 1-.853.505l-2.873.84a.5.5 0 0 1-.62-.62l.84-2.873a2 2 0 0 1 .506-.852z",key:"ohrbg2"}]]);var h=a.i(73320),i=a.i(60246),j=a.i(41675),k=a.i(24987),l=a.i(90166);let m=(0,f.default)("image",[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",ry:"2",key:"1m3agn"}],["circle",{cx:"9",cy:"9",r:"2",key:"af1f0g"}],["path",{d:"m21 15-3.086-3.086a2 2 0 0 0-2.828 0L6 21",key:"1xmnt7"}]]);var n=a.i(50388),o=a.i(93003),p=a.i(50253),q=a.i(42043),r=a.i(63535),s=a.i(74934),t=a.i(55100),u=a.i(72988),v=a.i(69212),w=a.i(29312);function x({params:a}){let{id:f}=(0,c.use)(a),x=(0,d.useRouter)(),{user:y}=(0,u.useAuthStore)(),[z,A]=(0,c.useState)(!1),[B,C]=(0,c.useState)(null),[D,E]=(0,c.useState)(null),[F,G]=(0,c.useState)(!1),{data:H,isLoading:I,error:J,refetch:K}=(0,s.useEventById)(f),L={[v.EventCategory.Religious]:"Religious",[v.EventCategory.Cultural]:"Cultural",[v.EventCategory.Community]:"Community",[v.EventCategory.Educational]:"Educational",[v.EventCategory.Social]:"Social",[v.EventCategory.Business]:"Business",[v.EventCategory.Charity]:"Charity",[v.EventCategory.Entertainment]:"Entertainment"},M={[v.EventStatus.Draft]:"Draft",[v.EventStatus.Published]:"Published",[v.EventStatus.Active]:"Active",[v.EventStatus.Postponed]:"Postponed",[v.EventStatus.Cancelled]:"Cancelled",[v.EventStatus.Completed]:"Completed",[v.EventStatus.Archived]:"Archived",[v.EventStatus.UnderReview]:"Under Review"},N=async()=>{if(H&&H.organizerId===y?.userId)try{A(!0),C(null),await w.eventsRepository.publishEvent(f),A(!1),await K()}catch(a){console.error("Failed to publish event:",a),C(a instanceof Error?a.message:"Failed to publish event. Please try again."),A(!1)}},O=async()=>{if(D&&H)try{G(!0),C(null),await w.eventsRepository.uploadEventImage(f,D),E(null),G(!1),await K()}catch(a){console.error("Failed to upload image:",a),C(a instanceof Error?a.message:"Failed to upload image. Please try again."),G(!1)}};if(I)return(0,b.jsxs)("div",{className:"min-h-screen bg-gradient-to-b from-neutral-50 to-white",children:[(0,b.jsx)(n.Header,{}),(0,b.jsx)("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-12",children:(0,b.jsx)(p.Card,{className:"animate-pulse",children:(0,b.jsxs)(p.CardContent,{className:"p-12",children:[(0,b.jsx)("div",{className:"h-8 bg-neutral-200 rounded w-3/4 mb-4"}),(0,b.jsx)("div",{className:"h-4 bg-neutral-200 rounded w-1/2 mb-8"}),(0,b.jsx)("div",{className:"h-64 bg-neutral-200 rounded"})]})})}),(0,b.jsx)(o.default,{})]});if(J||!H)return(0,b.jsxs)("div",{className:"min-h-screen bg-gradient-to-b from-neutral-50 to-white",children:[(0,b.jsx)(n.Header,{}),(0,b.jsx)("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-12",children:(0,b.jsx)(p.Card,{children:(0,b.jsxs)(p.CardContent,{className:"p-12 text-center",children:[(0,b.jsx)("h2",{className:"text-2xl font-bold text-red-600 mb-4",children:"Event Not Found"}),(0,b.jsx)("p",{className:"text-neutral-600 mb-6",children:"The event you're looking for doesn't exist or you don't have permission to manage it."}),(0,b.jsx)(q.Button,{onClick:()=>x.push("/dashboard"),children:"Go to Dashboard"})]})})}),(0,b.jsx)(o.default,{})]});if(H.organizerId!==y?.userId)return(0,b.jsxs)("div",{className:"min-h-screen bg-gradient-to-b from-neutral-50 to-white",children:[(0,b.jsx)(n.Header,{}),(0,b.jsx)("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-12",children:(0,b.jsx)(p.Card,{children:(0,b.jsxs)(p.CardContent,{className:"p-12 text-center",children:[(0,b.jsx)("h2",{className:"text-2xl font-bold text-red-600 mb-4",children:"Access Denied"}),(0,b.jsx)("p",{className:"text-neutral-600 mb-6",children:"You don't have permission to manage this event."}),(0,b.jsx)(q.Button,{onClick:()=>x.push(`/events/${f}`),children:"View Event"})]})})}),(0,b.jsx)(o.default,{})]});let P=H.capacity-H.currentRegistrations,Q=H.currentRegistrations/H.capacity*100,R=H.status===v.EventStatus.Draft||"Draft"===H.status||"draft"===String(H.status).toLowerCase();return console.log("Event Status Check:",{rawStatus:H.status,statusType:typeof H.status,isDraft:R,EventStatusDraft:v.EventStatus.Draft}),(0,b.jsxs)("div",{className:"min-h-screen bg-gradient-to-b from-neutral-50 to-white",children:[(0,b.jsx)(n.Header,{}),(0,b.jsx)("div",{className:"bg-gradient-to-r from-orange-600 via-rose-800 to-emerald-800 py-8",children:(0,b.jsx)("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:(0,b.jsxs)("div",{className:"flex items-center justify-between",children:[(0,b.jsxs)("div",{children:[(0,b.jsx)("h1",{className:"text-3xl font-bold text-white mb-2",children:"Manage Event"}),(0,b.jsx)("p",{className:"text-white/90",children:H.title})]}),(0,b.jsx)(r.Badge,{className:"text-sm px-4 py-2",style:{backgroundColor:H.status===v.EventStatus.Published?"#10B981":"#6B7280"},children:M[H.status]})]})})}),(0,b.jsx)("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-6",children:(0,b.jsxs)("div",{className:"flex items-center justify-between gap-4 flex-wrap",children:[(0,b.jsxs)(q.Button,{variant:"outline",onClick:()=>x.push("/dashboard"),className:"flex items-center gap-2 text-neutral-900 border-neutral-300",children:[(0,b.jsx)(e.ArrowLeft,{className:"h-4 w-4"}),"Back to Dashboard"]}),(0,b.jsxs)("div",{className:"flex items-center gap-3 flex-wrap",children:[R&&(0,b.jsx)(q.Button,{onClick:N,disabled:z,className:"flex items-center gap-2 text-white",style:{background:"#10B981",color:"white"},children:z?"Publishing...":"Publish Event"}),(0,b.jsxs)(q.Button,{onClick:()=>x.push(`/events/${f}/manage-signups`),className:"flex items-center gap-2 text-white",style:{background:"#8B1538",color:"white"},children:[(0,b.jsx)(i.Users,{className:"h-4 w-4"}),"Manage Sign-up Lists"]}),(0,b.jsxs)(q.Button,{onClick:()=>x.push(`/events/${f}/edit`),className:"flex items-center gap-2 text-white",style:{background:"#FF7900",color:"white"},children:[(0,b.jsx)(g,{className:"h-4 w-4"}),"Edit Event"]})]})]})}),B&&(0,b.jsx)("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 mb-6",children:(0,b.jsx)("div",{className:"p-4 bg-red-50 border border-red-200 rounded-lg",children:(0,b.jsx)("p",{className:"text-sm text-red-600",children:B})})}),(0,b.jsx)("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 pb-12",children:(0,b.jsxs)("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-6",children:[(0,b.jsxs)("div",{className:"lg:col-span-2 space-y-6",children:[(0,b.jsxs)(p.Card,{children:[(0,b.jsxs)(p.CardHeader,{children:[(0,b.jsx)(p.CardTitle,{style:{color:"#8B1538"},children:"Event Statistics"}),(0,b.jsx)(p.CardDescription,{children:"Track your event's performance"})]}),(0,b.jsx)(p.CardContent,{children:(0,b.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[(0,b.jsxs)("div",{className:"p-4 bg-blue-50 rounded-lg border border-blue-200",children:[(0,b.jsxs)("div",{className:"flex items-center justify-between mb-2",children:[(0,b.jsx)(i.Users,{className:"h-5 w-5 text-blue-600"}),(0,b.jsx)("span",{className:"text-2xl font-bold text-blue-900",children:H.currentRegistrations})]}),(0,b.jsx)("p",{className:"text-sm text-blue-700 font-medium",children:"Registered"}),(0,b.jsxs)("p",{className:"text-xs text-blue-600 mt-1",children:[Q.toFixed(0),"% of capacity"]})]}),(0,b.jsxs)("div",{className:"p-4 bg-green-50 rounded-lg border border-green-200",children:[(0,b.jsxs)("div",{className:"flex items-center justify-between mb-2",children:[(0,b.jsx)(i.Users,{className:"h-5 w-5 text-green-600"}),(0,b.jsx)("span",{className:"text-2xl font-bold text-green-900",children:P})]}),(0,b.jsx)("p",{className:"text-sm text-green-700 font-medium",children:"Spots Left"}),(0,b.jsxs)("p",{className:"text-xs text-green-600 mt-1",children:["Total capacity: ",H.capacity]})]}),!H.isFree&&H.ticketPriceAmount&&(0,b.jsxs)("div",{className:"p-4 bg-orange-50 rounded-lg border border-orange-200",children:[(0,b.jsxs)("div",{className:"flex items-center justify-between mb-2",children:[(0,b.jsx)(l.DollarSign,{className:"h-5 w-5 text-orange-600"}),(0,b.jsxs)("span",{className:"text-2xl font-bold text-orange-900",children:["$",(H.ticketPriceAmount*H.currentRegistrations).toFixed(2)]})]}),(0,b.jsx)("p",{className:"text-sm text-orange-700 font-medium",children:"Revenue"}),(0,b.jsxs)("p",{className:"text-xs text-orange-600 mt-1",children:["$",H.ticketPriceAmount," per ticket"]})]})]})})]}),(0,b.jsxs)(p.Card,{children:[(0,b.jsxs)(p.CardHeader,{children:[(0,b.jsx)(p.CardTitle,{style:{color:"#8B1538"},children:"Event Details"}),(0,b.jsx)(p.CardDescription,{children:"Your event information"})]}),(0,b.jsxs)(p.CardContent,{className:"space-y-4",children:[(0,b.jsxs)("div",{children:[(0,b.jsx)("h4",{className:"text-sm font-semibold text-neutral-700 mb-2",children:"Event Title"}),(0,b.jsx)("p",{className:"text-lg font-semibold text-neutral-900",children:H.title})]}),(0,b.jsxs)("div",{children:[(0,b.jsx)("h4",{className:"text-sm font-semibold text-neutral-700 mb-2",children:"Description"}),(0,b.jsx)("p",{className:"text-neutral-600",children:H.description})]}),(0,b.jsxs)("div",{className:"flex items-start gap-3",children:[(0,b.jsx)(j.Calendar,{className:"h-5 w-5 text-[#FF7900] mt-0.5"}),(0,b.jsxs)("div",{children:[(0,b.jsx)("h4",{className:"text-sm font-semibold text-neutral-700",children:"Date & Time"}),(0,b.jsx)("p",{className:"text-neutral-600",children:new Date(H.startDate).toLocaleString("en-US",{dateStyle:"full",timeStyle:"short"})}),H.endDate&&(0,b.jsxs)("p",{className:"text-sm text-neutral-500",children:["Ends: ",new Date(H.endDate).toLocaleString("en-US",{dateStyle:"full",timeStyle:"short"})]})]})]}),H.city&&(0,b.jsxs)("div",{className:"flex items-start gap-3",children:[(0,b.jsx)(k.MapPin,{className:"h-5 w-5 text-[#FF7900] mt-0.5"}),(0,b.jsxs)("div",{children:[(0,b.jsx)("h4",{className:"text-sm font-semibold text-neutral-700",children:"Location"}),(0,b.jsxs)("p",{className:"text-neutral-600",children:[H.address&&`${H.address}, `,H.city,", ",H.state," ",H.zipCode]})]})]}),(0,b.jsxs)("div",{children:[(0,b.jsx)("h4",{className:"text-sm font-semibold text-neutral-700 mb-2",children:"Category"}),(0,b.jsx)(r.Badge,{className:"bg-gray-100 text-gray-700",children:L[H.category]})]}),(0,b.jsxs)("div",{children:[(0,b.jsx)("h4",{className:"text-sm font-semibold text-neutral-700 mb-2",children:"Pricing"}),H.isFree?(0,b.jsx)(r.Badge,{className:"bg-green-100 text-green-700",children:"Free Event"}):(0,b.jsxs)(r.Badge,{className:"bg-[#FFE8CC] text-[#8B1538]",children:["$",H.ticketPriceAmount," per ticket"]})]})]})]}),(0,b.jsx)(t.SignUpManagementSection,{eventId:f,isOrganizer:!0})]}),(0,b.jsx)("div",{className:"space-y-6",children:(0,b.jsxs)(p.Card,{children:[(0,b.jsxs)(p.CardHeader,{children:[(0,b.jsxs)("div",{className:"flex items-center gap-2",children:[(0,b.jsx)(m,{className:"h-5 w-5",style:{color:"#FF7900"}}),(0,b.jsx)(p.CardTitle,{style:{color:"#8B1538"},children:"Event Images"})]}),(0,b.jsx)(p.CardDescription,{children:"Upload photos to attract attendees"})]}),(0,b.jsxs)(p.CardContent,{className:"space-y-4",children:[H.images&&H.images.length>0&&(0,b.jsxs)("div",{className:"space-y-2",children:[(0,b.jsxs)("h4",{className:"text-sm font-semibold text-neutral-700",children:["Current Images (",H.images.length,")"]}),(0,b.jsx)("div",{className:"grid grid-cols-2 gap-2",children:H.images.slice(0,4).map(a=>(0,b.jsx)("div",{className:"relative aspect-square",children:(0,b.jsx)("img",{src:a.imageUrl,alt:"Event",className:"w-full h-full object-cover rounded-lg"})},a.id))})]}),(0,b.jsxs)("div",{children:[(0,b.jsx)("label",{htmlFor:"image-upload",className:"block text-sm font-medium text-neutral-700 mb-2",children:"Upload New Image"}),(0,b.jsx)("input",{id:"image-upload",type:"file",accept:"image/*",onChange:a=>E(a.target.files?.[0]||null),className:"block w-full text-sm text-neutral-600 file:mr-4 file:py-2 file:px-4 file:rounded-lg file:border-0 file:text-sm file:font-semibold file:bg-orange-50 file:text-orange-700 hover:file:bg-orange-100"})]}),D&&(0,b.jsxs)("div",{className:"p-3 bg-blue-50 rounded-lg border border-blue-200",children:[(0,b.jsx)("p",{className:"text-sm text-blue-700 font-medium mb-1",children:"Selected:"}),(0,b.jsx)("p",{className:"text-xs text-blue-600",children:D.name})]}),(0,b.jsxs)(q.Button,{onClick:O,disabled:!D||F,className:"w-full",style:{background:"#FF7900"},children:[(0,b.jsx)(h.Upload,{className:"h-4 w-4 mr-2"}),F?"Uploading...":"Upload Image"]})]})]})})]})}),(0,b.jsx)(o.default,{})]})}a.s(["default",()=>x],72174)}];

//# sourceMappingURL=src_app_events_%5Bid%5D_manage_page_tsx_e97117a6._.js.map