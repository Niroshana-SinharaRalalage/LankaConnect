(globalThis.TURBOPACK||(globalThis.TURBOPACK=[])).push(["object"==typeof document?document.currentScript:void 0,75244,e=>{"use strict";var t=e.i(43476),s=e.i(71645),a=e.i(57022);let r=s.forwardRef(({className:e,type:s="text",error:r,...i},n)=>(0,t.jsx)("input",{type:s,className:(0,a.cn)("flex h-10 w-full rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background file:border-0 file:bg-transparent file:text-sm file:font-medium placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50",r&&"border-destructive focus-visible:ring-destructive",e),ref:n,"aria-invalid":r?"true":void 0,...i}));r.displayName="Input",e.s(["Input",()=>r])},67735,e=>{"use strict";var t=e.i(43476),s=e.i(71645),a=e.i(25913),r=e.i(57022);let i=(0,a.cva)("inline-flex items-center rounded-full px-2.5 py-0.5 text-xs font-medium transition-colors",{variants:{variant:{default:"bg-gray-100 text-gray-800",cultural:"bg-saffron-100 text-saffron-800",arts:"bg-pink-100 text-pink-800",food:"bg-orange-100 text-orange-800",business:"bg-cyan-100 text-cyan-800",community:"bg-purple-100 text-purple-800",featured:"bg-green-100 text-green-800",new:"bg-emerald-100 text-emerald-800",hot:"bg-red-100 text-red-800"}},defaultVariants:{variant:"default"}}),n=s.forwardRef(({className:e,variant:s,...a},n)=>(0,t.jsx)("span",{ref:n,className:(0,r.cn)(i({variant:s}),e),...a}));n.displayName="Badge",e.s(["Badge",()=>n])},71689,e=>{"use strict";let t=(0,e.i(75254).default)("arrow-left",[["path",{d:"m12 19-7-7 7-7",key:"1l729n"}],["path",{d:"M19 12H5",key:"x3x0zl"}]]);e.s(["ArrowLeft",()=>t],71689)},45771,e=>{"use strict";var t,s,a,r,i,n=((t={})[t.Draft=0]="Draft",t[t.Published=1]="Published",t[t.Active=2]="Active",t[t.Postponed=3]="Postponed",t[t.Cancelled=4]="Cancelled",t[t.Completed=5]="Completed",t[t.Archived=6]="Archived",t[t.UnderReview=7]="UnderReview",t),l=((s={})[s.Religious=0]="Religious",s[s.Cultural=1]="Cultural",s[s.Community=2]="Community",s[s.Educational=3]="Educational",s[s.Social=4]="Social",s[s.Business=5]="Business",s[s.Charity=6]="Charity",s[s.Entertainment=7]="Entertainment",s),o=((a={})[a.USD=1]="USD",a[a.LKR=2]="LKR",a[a.GBP=3]="GBP",a[a.EUR=4]="EUR",a[a.CAD=5]="CAD",a[a.AUD=6]="AUD",a),d=((r={})[r.Open=0]="Open",r[r.Predefined=1]="Predefined",r),c=((i={})[i.Mandatory=0]="Mandatory",i[i.Preferred=1]="Preferred",i[i.Suggested=2]="Suggested",i);e.s(["Currency",()=>o,"EventCategory",()=>l,"EventStatus",()=>n,"SignUpItemCategory",()=>c,"SignUpType",()=>d])},61911,e=>{"use strict";let t=(0,e.i(75254).default)("users",[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["path",{d:"M16 3.128a4 4 0 0 1 0 7.744",key:"16gr8j"}],["path",{d:"M22 21v-2a4 4 0 0 0-3-3.87",key:"kshegd"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}]]);e.s(["Users",()=>t],61911)},46897,e=>{"use strict";let t=(0,e.i(75254).default)("map-pin",[["path",{d:"M20 10c0 4.993-5.539 10.193-7.399 11.799a1 1 0 0 1-1.202 0C9.539 20.193 4 14.993 4 10a8 8 0 0 1 16 0",key:"1r0f0z"}],["circle",{cx:"12",cy:"10",r:"3",key:"ilqhr7"}]]);e.s(["MapPin",()=>t],46897)},87316,e=>{"use strict";let t=(0,e.i(75254).default)("calendar",[["path",{d:"M8 2v4",key:"1cmpym"}],["path",{d:"M16 2v4",key:"4m81vk"}],["rect",{width:"18",height:"18",x:"3",y:"4",rx:"2",key:"1hopcy"}],["path",{d:"M3 10h18",key:"8toen8"}]]);e.s(["Calendar",()=>t],87316)},12426,e=>{"use strict";let t=(0,e.i(75254).default)("dollar-sign",[["line",{x1:"12",x2:"12",y1:"2",y2:"22",key:"7eqyqh"}],["path",{d:"M17 5H9.5a3.5 3.5 0 0 0 0 7h5a3.5 3.5 0 0 1 0 7H6",key:"1b0p4s"}]]);e.s(["DollarSign",()=>t],12426)},63209,e=>{"use strict";let t=(0,e.i(75254).default)("circle-alert",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["line",{x1:"12",x2:"12",y1:"8",y2:"12",key:"1pkeuh"}],["line",{x1:"12",x2:"12.01",y1:"16",y2:"16",key:"4dfq90"}]]);e.s(["AlertCircle",()=>t],63209)},3116,e=>{"use strict";let t=(0,e.i(75254).default)("clock",[["path",{d:"M12 6v6l4 2",key:"mmk7yg"}],["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}]]);e.s(["Clock",()=>t],3116)},34866,e=>{"use strict";var t=e.i(68834),s=e.i(79473);e.i(47167);var a=e.i(48831);let r=new class{basePath="/users";async getProfile(e){return await a.apiClient.get(`${this.basePath}/${e}`)}async uploadProfilePhoto(e,t){let s=new FormData;s.append("image",t);let r=`/api/proxy${this.basePath}/${e}/profile-photo`,i=a.apiClient.authToken,n=await fetch(r,{method:"POST",body:s,credentials:"include",headers:{...i?{Authorization:`Bearer ${i}`}:{}}});if(!n.ok){let e=await n.text(),t=`Upload failed with status ${n.status}`;try{let s=JSON.parse(e);t=s.message||s.error||t}catch{}throw Error(t)}return await n.json()}async deleteProfilePhoto(e){return await a.apiClient.delete(`${this.basePath}/${e}/profile-photo`)}async updateLocation(e,t){return await a.apiClient.put(`${this.basePath}/${e}/location`,t)}async updateCulturalInterests(e,t){return await a.apiClient.put(`${this.basePath}/${e}/cultural-interests`,t),await this.getProfile(e)}async updateLanguages(e,t){return await a.apiClient.put(`${this.basePath}/${e}/languages`,t)}async updateBasicInfo(e,t){return await a.apiClient.put(`${this.basePath}/${e}`,t)}async updatePreferredMetroAreas(e,t){return await a.apiClient.put(`${this.basePath}/${e}/preferred-metro-areas`,t),await this.getProfile(e)}async getPreferredMetroAreas(e){return await a.apiClient.get(`${this.basePath}/${e}/preferred-metro-areas`)}},i={photo:"idle",basicInfo:"idle",location:"idle",culturalInterests:"idle",languages:"idle",preferredMetroAreas:"idle"},n=(0,t.create)()((0,s.devtools)((e,t)=>({profile:null,originalProfile:null,isLoading:!1,error:null,sectionStates:{...i},setProfile:t=>{e({profile:t,originalProfile:JSON.parse(JSON.stringify(t)),error:null})},loadProfile:async s=>{e({isLoading:!0,error:null});try{let e=await r.getProfile(s);t().setProfile(e)}catch(t){e({error:t instanceof Error?t.message:"Failed to load profile",profile:null,originalProfile:null})}finally{e({isLoading:!1})}},clearProfile:()=>{e({profile:null,originalProfile:null,isLoading:!1,error:null,sectionStates:{...i}})},uploadPhoto:async(t,s)=>{e(e=>({sectionStates:{...e.sectionStates,photo:"saving"},error:null}));try{let a=await r.uploadProfilePhoto(t,s);e(e=>({profile:e.profile?{...e.profile,profilePhotoUrl:a.profilePhotoUrl}:null,originalProfile:e.originalProfile?{...e.originalProfile,profilePhotoUrl:a.profilePhotoUrl}:null,sectionStates:{...e.sectionStates,photo:"success"}})),setTimeout(()=>{e(e=>({sectionStates:{...e.sectionStates,photo:"idle"}}))},2e3)}catch(s){let t=s instanceof Error?s.message:"Failed to upload photo";e(e=>({error:t,sectionStates:{...e.sectionStates,photo:"error"}}))}},deletePhoto:async t=>{e(e=>({sectionStates:{...e.sectionStates,photo:"saving"},error:null}));try{await r.deleteProfilePhoto(t),e(e=>({profile:e.profile?{...e.profile,profilePhotoUrl:null}:null,originalProfile:e.originalProfile?{...e.originalProfile,profilePhotoUrl:null}:null,sectionStates:{...e.sectionStates,photo:"success"}})),setTimeout(()=>{e(e=>({sectionStates:{...e.sectionStates,photo:"idle"}}))},2e3)}catch(s){let t=s instanceof Error?s.message:"Failed to delete photo";e(e=>({error:t,sectionStates:{...e.sectionStates,photo:"error"}}))}},updateBasicInfo:async(s,a)=>{e(e=>({sectionStates:{...e.sectionStates,basicInfo:"saving"},error:null}));try{let i=await r.updateBasicInfo(s,a);t().setProfile(i),e(e=>({sectionStates:{...e.sectionStates,basicInfo:"success"}})),setTimeout(()=>{e(e=>({sectionStates:{...e.sectionStates,basicInfo:"idle"}}))},2e3)}catch(s){let t=s instanceof Error?s.message:"Failed to update basic info";e(e=>({error:t,sectionStates:{...e.sectionStates,basicInfo:"error"}}))}},updateLocation:async(s,a)=>{e(e=>({sectionStates:{...e.sectionStates,location:"saving"},error:null}));try{let i=await r.updateLocation(s,a);t().setProfile(i),e(e=>({sectionStates:{...e.sectionStates,location:"success"}})),setTimeout(()=>{e(e=>({sectionStates:{...e.sectionStates,location:"idle"}}))},2e3)}catch(s){let t=s instanceof Error?s.message:"Failed to update location";e(e=>({error:t,sectionStates:{...e.sectionStates,location:"error"}}))}},updateCulturalInterests:async(s,a)=>{e(e=>({sectionStates:{...e.sectionStates,culturalInterests:"saving"},error:null}));try{let i=await r.updateCulturalInterests(s,a);t().setProfile(i),e(e=>({sectionStates:{...e.sectionStates,culturalInterests:"success"}})),setTimeout(()=>{e(e=>({sectionStates:{...e.sectionStates,culturalInterests:"idle"}}))},2e3)}catch(s){let t=s instanceof Error?s.message:"Failed to update cultural interests";e(e=>({error:t,sectionStates:{...e.sectionStates,culturalInterests:"error"}}))}},updateLanguages:async(s,a)=>{e(e=>({sectionStates:{...e.sectionStates,languages:"saving"},error:null}));try{let i=await r.updateLanguages(s,a);t().setProfile(i),e(e=>({sectionStates:{...e.sectionStates,languages:"success"}})),setTimeout(()=>{e(e=>({sectionStates:{...e.sectionStates,languages:"idle"}}))},2e3)}catch(s){let t=s instanceof Error?s.message:"Failed to update languages";e(e=>({error:t,sectionStates:{...e.sectionStates,languages:"error"}}))}},updatePreferredMetroAreas:async(s,a)=>{if(a.MetroAreaIds.length>20)return void e(e=>({error:"Cannot select more than 20 metro areas",sectionStates:{...e.sectionStates,preferredMetroAreas:"error"}}));e(e=>({sectionStates:{...e.sectionStates,preferredMetroAreas:"saving"},error:null}));try{let i=await r.updatePreferredMetroAreas(s,a);t().setProfile(i),e(e=>({sectionStates:{...e.sectionStates,preferredMetroAreas:"success"}})),setTimeout(()=>{e(e=>({sectionStates:{...e.sectionStates,preferredMetroAreas:"idle"}}))},2e3)}catch(s){let t=s instanceof Error?s.message:"Failed to update preferred metro areas";e(e=>({error:t,sectionStates:{...e.sectionStates,preferredMetroAreas:"error"}}))}},markSectionDirty:t=>{e(e=>({sectionStates:{...e.sectionStates,[t]:"dirty"}}))},markSectionClean:t=>{e(e=>({sectionStates:{...e.sectionStates,[t]:"idle"}}))},resetSectionState:t=>{e(e=>({sectionStates:{...e.sectionStates,[t]:"idle"}}))},isSectionDirty:e=>"dirty"===t().sectionStates[e]}),{name:"ProfileStore"}));e.s(["useProfileStore",0,n],34866)},91499,e=>{"use strict";var t=e.i(66027),s=e.i(54616),a=e.i(12598),r=e.i(3318),i=e.i(97353);let n={all:["signups"],lists:()=>[...n.all,"list"],list:e=>[...n.lists(),e]};function l(e,s){return(0,t.useQuery)({queryKey:n.list(e||""),queryFn:()=>r.eventsRepository.getEventSignUpLists(e),enabled:!!e,staleTime:3e5,refetchOnWindowFocus:!0,retry:1,...s})}function o(){let e=(0,a.useQueryClient)();return(0,s.useMutation)({mutationFn:({eventId:e,signupId:t})=>r.eventsRepository.removeSignUpList(e,t),onMutate:async({eventId:t,signupId:s})=>{await e.cancelQueries({queryKey:n.list(t)});let a=e.getQueryData(n.list(t));return e.setQueryData(n.list(t),e=>e?.filter(e=>e.id!==s)||[]),{previousSignUps:a}},onError:(t,{eventId:s},a)=>{a?.previousSignUps&&e.setQueryData(n.list(s),a.previousSignUps)},onSuccess:(t,s)=>{e.invalidateQueries({queryKey:n.list(s.eventId)}),e.invalidateQueries({queryKey:i.eventKeys.detail(s.eventId)})}})}function d(){let e=(0,a.useQueryClient)();return(0,s.useMutation)({mutationFn:({eventId:e,signupId:t,...s})=>r.eventsRepository.commitToSignUp(e,t,s),onMutate:async({eventId:t,signupId:s,userId:a,itemDescription:r,quantity:i})=>{await e.cancelQueries({queryKey:n.list(t)});let l=e.getQueryData(n.list(t));return e.setQueryData(n.list(t),e=>e?e.map(e=>e.id!==s?e:{...e,commitments:[...e.commitments,{id:`temp-${Date.now()}`,userId:a,itemDescription:r,quantity:i,committedAt:new Date().toISOString()}],commitmentCount:e.commitmentCount+1}):e),{previousSignUps:l}},onError:(t,{eventId:s},a)=>{a?.previousSignUps&&e.setQueryData(n.list(s),a.previousSignUps)},onSuccess:(t,s)=>{e.invalidateQueries({queryKey:n.list(s.eventId)})}})}function c(){let e=(0,a.useQueryClient)();return(0,s.useMutation)({mutationFn:({eventId:e,signupId:t,...s})=>r.eventsRepository.cancelCommitment(e,t,s),onMutate:async({eventId:t,signupId:s,userId:a})=>{await e.cancelQueries({queryKey:n.list(t)});let r=e.getQueryData(n.list(t));return e.setQueryData(n.list(t),e=>e?e.map(e=>e.id!==s?e:{...e,commitments:e.commitments.filter(e=>e.userId!==a),commitmentCount:Math.max(0,e.commitmentCount-1)}):e),{previousSignUps:r}},onError:(t,{eventId:s},a)=>{a?.previousSignUps&&e.setQueryData(n.list(s),a.previousSignUps)},onSuccess:(t,s)=>{e.invalidateQueries({queryKey:n.list(s.eventId)})}})}function m(){let e=(0,a.useQueryClient)();return(0,s.useMutation)({mutationFn:({eventId:e,...t})=>r.eventsRepository.createSignUpList(e,t),onSuccess:(t,s)=>{e.invalidateQueries({queryKey:n.list(s.eventId)}),e.invalidateQueries({queryKey:i.eventKeys.detail(s.eventId)})}})}function u(){let e=(0,a.useQueryClient)();return(0,s.useMutation)({mutationFn:({eventId:e,signupId:t,itemId:s})=>r.eventsRepository.removeSignUpItem(e,t,s),onMutate:async({eventId:t,signupId:s,itemId:a})=>{await e.cancelQueries({queryKey:n.list(t)});let r=e.getQueryData(n.list(t));return e.setQueryData(n.list(t),e=>e?e.map(e=>e.id!==s?e:{...e,items:e.items.filter(e=>e.id!==a)}):e),{previousSignUps:r}},onError:(t,{eventId:s},a)=>{a?.previousSignUps&&e.setQueryData(n.list(s),a.previousSignUps)},onSuccess:(t,s)=>{e.invalidateQueries({queryKey:n.list(s.eventId)})}})}function x(){let e=(0,a.useQueryClient)();return(0,s.useMutation)({mutationFn:({eventId:e,signupId:t,itemId:s,...a})=>r.eventsRepository.commitToSignUpItem(e,t,s,a),onSuccess:(t,s)=>{e.invalidateQueries({queryKey:n.list(s.eventId)})}})}e.s(["useCancelCommitment",()=>c,"useCommitToSignUp",()=>d,"useCommitToSignUpItem",()=>x,"useCreateSignUpList",()=>m,"useEventSignUps",()=>l,"useRemoveSignUpItem",()=>u,"useRemoveSignUpList",()=>o])},48145,31343,e=>{"use strict";var t=e.i(43476),s=e.i(71645),a=e.i(91499),r=e.i(45771),i=e.i(21065),n=e.i(44212);function l({eventId:e,userId:l,isOrganizer:o=!1}){let[d,c]=(0,s.useState)(!1),[m,u]=(0,s.useState)(null),[x,h]=(0,s.useState)(""),[p,g]=(0,s.useState)(1),[f,y]=(0,s.useState)(null),[b,v]=(0,s.useState)(1),[j,N]=(0,s.useState)(""),{data:S,isLoading:w,error:C}=(0,a.useEventSignUps)(e),P=(0,a.useCommitToSignUp)(),k=(0,a.useCancelCommitment)(),I=(0,a.useCommitToSignUpItem)(),F=async t=>{if(!l)return void alert("Please log in to commit to items");if(!x.trim())return void alert("Please enter an item description");try{await P.mutateAsync({eventId:e,signupId:t,userId:l,itemDescription:x.trim(),quantity:p}),h(""),g(1),c(!1),u(null)}catch(e){console.error("Failed to commit:",e),alert("Failed to commit. Please try again.")}},U=async t=>{if(l&&confirm("Are you sure you want to cancel your commitment?"))try{await k.mutateAsync({eventId:e,signupId:t,userId:l})}catch(e){console.error("Failed to cancel commitment:",e),alert("Failed to cancel commitment. Please try again.")}},A=async(t,s)=>{if(!l)return void alert("Please log in to commit to items");if(b<1)return void alert("Please enter a valid quantity");try{await I.mutateAsync({eventId:e,signupId:t,itemId:s,userId:l,quantity:b,notes:j.trim()||void 0}),y(null),v(1),N("")}catch(e){console.error("Failed to commit to item:",e),alert("Failed to commit. Please try again.")}};return w?(0,t.jsx)("div",{className:"py-8",children:(0,t.jsx)("p",{className:"text-center text-muted-foreground",children:"Loading sign-up lists..."})}):C?(0,t.jsx)("div",{className:"py-8",children:(0,t.jsx)("p",{className:"text-center text-destructive",children:"Failed to load sign-up lists. Please try again."})}):S&&0!==S.length?(0,t.jsxs)("div",{className:"space-y-6",children:[(0,t.jsx)("h2",{className:"text-2xl font-bold",children:"Sign-Up Lists"}),S.map(e=>{let s=e.commitments.find(e=>e.userId===l),a=e.items&&e.items.length>0;return(0,t.jsxs)(i.Card,{children:[(0,t.jsxs)(i.CardHeader,{children:[(0,t.jsx)(i.CardTitle,{children:e.category}),(0,t.jsx)(i.CardDescription,{children:e.description}),(0,t.jsx)("div",{className:"text-sm text-muted-foreground",children:a?(0,t.jsxs)("div",{className:"flex gap-2 flex-wrap mt-2",children:[e.hasMandatoryItems&&(0,t.jsx)("span",{className:"px-2 py-1 rounded text-xs font-medium bg-red-100 text-red-800",children:"Has Mandatory Items"}),e.hasPreferredItems&&(0,t.jsx)("span",{className:"px-2 py-1 rounded text-xs font-medium bg-blue-100 text-blue-800",children:"Has Preferred Items"}),e.hasSuggestedItems&&(0,t.jsx)("span",{className:"px-2 py-1 rounded text-xs font-medium bg-green-100 text-green-800",children:"Has Suggested Items"})]}):(0,t.jsxs)("span",{children:["Type: ",e.signUpType===r.SignUpType.Predefined?"Predefined Items":"Open"]})})]}),(0,t.jsx)(i.CardContent,{children:a?(0,t.jsx)("div",{className:"space-y-6",children:[r.SignUpItemCategory.Mandatory,r.SignUpItemCategory.Preferred,r.SignUpItemCategory.Suggested].map(s=>{let a=e.items.filter(e=>e.itemCategory===s);return 0===a.length?null:(0,t.jsxs)("div",{className:"space-y-3",children:[(0,t.jsxs)("h4",{className:"font-semibold flex items-center gap-2",children:[(0,t.jsx)("span",{className:`px-2 py-1 rounded text-xs font-medium border ${(e=>{switch(e){case r.SignUpItemCategory.Mandatory:return"bg-red-100 text-red-800 border-red-300";case r.SignUpItemCategory.Preferred:return"bg-blue-100 text-blue-800 border-blue-300";case r.SignUpItemCategory.Suggested:return"bg-green-100 text-green-800 border-green-300";default:return"bg-gray-100 text-gray-800 border-gray-300"}})(s)}`,children:(e=>{switch(e){case r.SignUpItemCategory.Mandatory:return"Mandatory";case r.SignUpItemCategory.Preferred:return"Preferred";case r.SignUpItemCategory.Suggested:return"Suggested";default:return"Unknown"}})(s)}),(0,t.jsxs)("span",{className:"text-sm text-muted-foreground",children:["(",a.length," ",1===a.length?"item":"items",")"]})]}),(0,t.jsx)("div",{className:"space-y-3",children:a.map(s=>{let a=s.commitments.find(e=>e.userId===l),r=s.remainingQuantity,i=Math.round(s.committedQuantity/s.quantity*100);return(0,t.jsxs)("div",{className:"border rounded-lg p-4 space-y-2",children:[(0,t.jsxs)("div",{className:"flex justify-between items-start",children:[(0,t.jsxs)("div",{className:"flex-1",children:[(0,t.jsx)("p",{className:"font-medium",children:s.itemDescription}),s.notes&&(0,t.jsx)("p",{className:"text-sm text-muted-foreground mt-1",children:s.notes})]}),(0,t.jsxs)("div",{className:"text-right ml-4",children:[(0,t.jsxs)("p",{className:`text-sm font-medium ${0===r?"text-green-600":"text-blue-600"}`,children:[s.committedQuantity," of ",s.quantity," committed"]}),(0,t.jsxs)("p",{className:"text-xs text-muted-foreground",children:[r," remaining"]})]})]}),(0,t.jsx)("div",{className:"w-full bg-gray-200 rounded-full h-2",children:(0,t.jsx)("div",{className:`h-2 rounded-full ${100===i?"bg-green-500":"bg-blue-500"}`,style:{width:`${i}%`}})}),s.commitments.length>0&&(0,t.jsxs)("div",{className:"space-y-1 mt-2",children:[(0,t.jsx)("p",{className:"text-xs font-medium text-muted-foreground",children:"Commitments:"}),s.commitments.map(e=>(0,t.jsxs)("div",{className:"text-sm bg-muted p-2 rounded",children:[(0,t.jsxs)("div",{className:"flex justify-between items-center",children:[(0,t.jsxs)("span",{children:["Quantity: ",e.quantity]}),e.userId===l&&(0,t.jsx)("span",{className:"text-xs text-blue-600 font-medium",children:"(You)"})]}),e.notes&&(0,t.jsxs)("p",{className:"text-xs text-muted-foreground mt-1",children:["Note: ",e.notes]})]},e.id))]}),!a&&l&&r>0&&(0,t.jsx)("div",{className:"mt-3",children:f===s.id?(0,t.jsxs)("div",{className:"space-y-2",children:[(0,t.jsxs)("div",{children:[(0,t.jsxs)("label",{className:"block text-sm font-medium mb-1",children:["Quantity (max: ",r,")"]}),(0,t.jsx)("input",{type:"number",min:"1",max:r,value:b,onChange:e=>v(Math.min(parseInt(e.target.value)||1,r)),className:"w-full px-3 py-2 border rounded-md"})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)("label",{className:"block text-sm font-medium mb-1",children:"Notes (optional)"}),(0,t.jsx)("textarea",{value:j,onChange:e=>N(e.target.value),placeholder:"Any additional details...",rows:2,className:"w-full px-3 py-2 border rounded-md"})]}),(0,t.jsxs)("div",{className:"flex gap-2",children:[(0,t.jsx)(n.Button,{onClick:()=>A(e.id,s.id),disabled:I.isPending,size:"sm",children:I.isPending?"Committing...":"Confirm Commitment"}),(0,t.jsx)(n.Button,{variant:"outline",size:"sm",onClick:()=>{y(null),v(1),N("")},children:"Cancel"})]})]}):(0,t.jsx)(n.Button,{onClick:()=>{y(s.id),v(Math.min(1,r))},size:"sm",variant:"outline",children:"I can bring this"})}),!l&&r>0&&(0,t.jsx)("p",{className:"text-xs text-muted-foreground mt-2",children:"Please log in to commit to this item"}),a&&(0,t.jsx)("div",{className:"mt-2 p-2 bg-blue-50 border border-blue-200 rounded",children:(0,t.jsxs)("p",{className:"text-sm font-medium text-blue-800",children:["You committed to bring ",a.quantity," of this item"]})}),0===r&&!a&&(0,t.jsx)("div",{className:"mt-2 p-2 bg-green-50 border border-green-200 rounded",children:(0,t.jsx)("p",{className:"text-sm font-medium text-green-800",children:"âœ“ Fully committed - Thank you everyone!"})})]},s.id)})})]},s)})}):(0,t.jsxs)(t.Fragment,{children:[e.signUpType===r.SignUpType.Predefined&&e.predefinedItems.length>0&&(0,t.jsxs)("div",{className:"mb-4",children:[(0,t.jsx)("h4",{className:"font-semibold mb-2",children:"Suggested Items:"}),(0,t.jsx)("ul",{className:"list-disc list-inside text-sm text-muted-foreground",children:e.predefinedItems.map((e,s)=>(0,t.jsx)("li",{children:e},s))})]}),e.commitments.length>0?(0,t.jsxs)("div",{children:[(0,t.jsxs)("h4",{className:"font-semibold mb-2",children:["Commitments (",e.commitmentCount,"):"]}),(0,t.jsx)("div",{className:"space-y-2",children:e.commitments.map(s=>(0,t.jsxs)("div",{className:"flex justify-between items-center p-2 bg-muted rounded-md",children:[(0,t.jsxs)("div",{children:[(0,t.jsx)("p",{className:"font-medium",children:s.itemDescription}),(0,t.jsxs)("p",{className:"text-sm text-muted-foreground",children:["Quantity: ",s.quantity]})]}),s.userId===l&&(0,t.jsx)(n.Button,{variant:"destructive",size:"sm",onClick:()=>U(e.id),disabled:k.isPending,children:k.isPending?"Canceling...":"Cancel"})]},s.id))})]}):(0,t.jsx)("p",{className:"text-sm text-muted-foreground",children:"No commitments yet. Be the first!"})]})}),!a&&(0,t.jsxs)(i.CardFooter,{children:[!s&&l&&(0,t.jsx)("div",{className:"w-full space-y-3",children:m===e.id?(0,t.jsxs)("div",{className:"space-y-3",children:[(0,t.jsxs)("div",{children:[(0,t.jsx)("label",{className:"block text-sm font-medium mb-1",children:"Item Description *"}),(0,t.jsx)("input",{type:"text",value:x,onChange:e=>h(e.target.value),placeholder:"What will you bring?",className:"w-full px-3 py-2 border rounded-md"})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)("label",{className:"block text-sm font-medium mb-1",children:"Quantity"}),(0,t.jsx)("input",{type:"number",min:"1",value:p,onChange:e=>g(parseInt(e.target.value)||1),className:"w-full px-3 py-2 border rounded-md"})]}),(0,t.jsxs)("div",{className:"flex gap-2",children:[(0,t.jsx)(n.Button,{onClick:()=>F(e.id),disabled:P.isPending||!x.trim(),children:P.isPending?"Committing...":"Confirm"}),(0,t.jsx)(n.Button,{variant:"outline",onClick:()=>{u(null),h(""),g(1)},children:"Cancel"})]})]}):(0,t.jsx)(n.Button,{onClick:()=>u(e.id),children:"I can bring something"})}),!l&&(0,t.jsx)("p",{className:"text-sm text-muted-foreground",children:"Please log in to commit to items"})]})]},e.id)})]}):(0,t.jsx)("div",{className:"py-8",children:(0,t.jsx)(i.Card,{children:(0,t.jsxs)(i.CardHeader,{children:[(0,t.jsx)(i.CardTitle,{children:"Sign-Up Lists"}),(0,t.jsxs)(i.CardDescription,{children:["No sign-up lists for this event yet.",o&&" Create one to let attendees volunteer to bring items!"]})]})})})}e.s(["SignUpManagementSection",()=>l],48145);let o=(0,e.i(75254).default)("play",[["path",{d:"M5 5a2 2 0 0 1 3.008-1.728l11.997 6.998a2 2 0 0 1 .003 3.458l-12 7A2 2 0 0 1 5 19z",key:"10ikf1"}]]);e.s(["Play",()=>o],31343)},31410,e=>{"use strict";var t=e.i(43476),s=e.i(71645),a=e.i(18566),r=e.i(71689),i=e.i(87316),n=e.i(46897),l=e.i(61911),o=e.i(12426),d=e.i(3116),c=e.i(63209),m=e.i(3224),u=e.i(79574),x=e.i(21065),h=e.i(44212),p=e.i(67735),g=e.i(97353),f=e.i(48145),y=e.i(75244),b=e.i(88129),v=e.i(34866);function j({eventId:e,spotsLeft:a,isFree:r,ticketPrice:i,hasDualPricing:n,adultPrice:l,childPrice:o,childAgeLimit:c,hasGroupPricing:m,groupPricingTiers:u,isProcessing:x,onSubmit:p,error:g}){let{user:f}=(0,b.useAuthStore)(),{profile:j,loadProfile:N}=(0,v.useProfileStore)(),[S,w]=(0,s.useState)(1),[C,P]=(0,s.useState)(""),[k,I]=(0,s.useState)(""),[F,U]=(0,s.useState)(""),[A,E]=(0,s.useState)([{name:"",age:""}]),[D,M]=(0,s.useState)({address:!1,email:!1,phoneNumber:!1,attendees:[]});(0,s.useEffect)(()=>{f?.userId&&!j&&N(f.userId)},[f?.userId,j,N]),(0,s.useEffect)(()=>{f&&j&&(I(j.email),U(j.phoneNumber||""),j.location&&P([j.location.city,j.location.state,j.location.zipCode].filter(Boolean).join(", ")),E([{name:`${j.firstName} ${j.lastName}`.trim(),age:""}]))},[f,j]),(0,s.useEffect)(()=>{E(Array.from({length:S},(e,t)=>A[t]||{name:"",age:""})),M(e=>({...e,attendees:Array(S).fill(!1)}))},[S]);let $=(e,t,s)=>{let a=[...A];a[e]={...a[e],[t]:"age"===t?""===s?"":Number(s):s},E(a)},R=e=>{let t=[...D.attendees];t[e]=!0,M(e=>({...e,attendees:t}))},B=()=>{if(!m||!u||0===u.length)return null;for(let e of[...u].sort((e,t)=>e.minAttendees-t.minAttendees))if(S>=e.minAttendees&&(!e.maxAttendees||S<=e.maxAttendees))return e;return null},T={address:!D.address||f||C.trim()?"":"Address is required",email:!D.email||f||k.trim()&&/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(k)?"":"Valid email is required",phoneNumber:!D.phoneNumber||f||F.trim()&&/^\+?[\d\s\-()]+$/.test(F)?"":"Valid phone number is required",attendees:A.map((e,t)=>D.attendees[t]?{name:e.name.trim()?"":"Name is required",age:!e.age||e.age<1||e.age>120?"Valid age is required (1-120)":""}:{name:"",age:""})},Q=f?A.every(e=>e.name.trim()&&e.age&&e.age>=1&&e.age<=120):C.trim()&&k.trim()&&/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(k)&&F.trim()&&/^\+?[\d\s\-()]+$/.test(F)&&A.every(e=>e.name.trim()&&e.age&&e.age>=1&&e.age<=120),L=async e=>{if(e.preventDefault(),M({address:!0,email:!0,phoneNumber:!0,attendees:Array(S).fill(!0)}),!Q)return;let t=A.map(e=>({name:e.name.trim(),age:Number(e.age)}));if(f){let e={userId:f.userId,attendees:t,email:k.trim()||void 0,phoneNumber:F.trim()||void 0,address:C.trim()||void 0};await p(e)}else{let e={attendees:t,address:C.trim(),email:k.trim(),phoneNumber:F.trim()};await p(e)}},q=(()=>{if(r)return 0;if(m&&u&&u.length>0){let e=B();return e?e.pricePerPerson*S:0}return n&&l&&o&&c?A.reduce((e,t)=>""===t.age||0===t.age?e:e+(Number(t.age)<c?o:l),0):i?i*S:0})(),O=m?B():null;return(0,t.jsxs)("form",{onSubmit:L,className:"space-y-4",children:[(0,t.jsxs)("div",{children:[(0,t.jsx)("label",{className:"block text-sm font-medium mb-2 text-neutral-700",children:"Number of Attendees"}),(0,t.jsx)(y.Input,{type:"number",min:"1",max:Math.min(10,a),value:S,onChange:e=>w(parseInt(e.target.value)||1),disabled:x,className:"w-full"}),(0,t.jsx)("p",{className:"text-xs text-neutral-500 mt-1",children:"You'll provide name and age for each attendee below"})]}),(0,t.jsxs)("div",{className:"border-t pt-4",children:[(0,t.jsx)("h4",{className:"text-sm font-semibold mb-3 text-neutral-700",children:"Attendee Information"}),!f&&(0,t.jsx)("p",{className:"text-xs text-neutral-500 mb-4",children:"Please provide name and age for each attendee"}),f&&j&&(0,t.jsx)("p",{className:"text-xs text-neutral-500 mb-4",children:"First attendee pre-populated from your profile. You can edit if needed."}),(0,t.jsx)("div",{className:"space-y-4",children:A.map((e,s)=>(0,t.jsxs)("div",{className:"p-4 bg-neutral-50 rounded-lg border border-neutral-200",children:[(0,t.jsxs)("h5",{className:"text-sm font-medium mb-3 text-neutral-700",children:["Attendee ",s+1]}),(0,t.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[(0,t.jsxs)("div",{children:[(0,t.jsxs)("label",{className:"block text-sm font-medium mb-2 text-neutral-700",children:["Full Name ",(0,t.jsx)("span",{className:"text-red-500",children:"*"})]}),(0,t.jsx)(y.Input,{type:"text",value:e.name,onChange:e=>$(s,"name",e.target.value),onBlur:()=>R(s),error:!!T.attendees[s]?.name,disabled:x,placeholder:"Enter full name",className:"w-full"}),T.attendees[s]?.name&&(0,t.jsx)("p",{className:"text-xs text-red-600 mt-1",children:T.attendees[s].name})]}),(0,t.jsxs)("div",{children:[(0,t.jsxs)("label",{className:"block text-sm font-medium mb-2 text-neutral-700",children:["Age ",(0,t.jsx)("span",{className:"text-red-500",children:"*"}),n&&c&&(0,t.jsxs)("span",{className:"text-xs text-neutral-500 ml-2",children:["(Under ",c," = child price)"]})]}),(0,t.jsx)(y.Input,{type:"number",min:"1",max:"120",value:e.age,onChange:e=>$(s,"age",e.target.value?parseInt(e.target.value):""),onBlur:()=>R(s),error:!!T.attendees[s]?.age,disabled:x,placeholder:"Age",className:"w-full"}),T.attendees[s]?.age&&(0,t.jsx)("p",{className:"text-xs text-red-600 mt-1",children:T.attendees[s].age})]})]})]},s))})]}),!f&&(0,t.jsxs)("div",{className:"border-t pt-4",children:[(0,t.jsx)("h4",{className:"text-sm font-semibold mb-3 text-neutral-700",children:"Contact Information"}),(0,t.jsx)("p",{className:"text-xs text-neutral-500 mb-4",children:"We'll use this information to send you event updates and confirmations."}),(0,t.jsxs)("div",{className:"mb-4",children:[(0,t.jsxs)("label",{className:"block text-sm font-medium mb-2 text-neutral-700",children:["Address ",(0,t.jsx)("span",{className:"text-red-500",children:"*"})]}),(0,t.jsx)(y.Input,{type:"text",value:C,onChange:e=>P(e.target.value),onBlur:()=>M({...D,address:!0}),error:!!T.address,disabled:x,placeholder:"Enter your address",className:"w-full"}),T.address&&(0,t.jsx)("p",{className:"text-xs text-red-600 mt-1",children:T.address})]}),(0,t.jsxs)("div",{className:"mb-4",children:[(0,t.jsxs)("label",{className:"block text-sm font-medium mb-2 text-neutral-700",children:["Email ",(0,t.jsx)("span",{className:"text-red-500",children:"*"})]}),(0,t.jsx)(y.Input,{type:"email",value:k,onChange:e=>I(e.target.value),onBlur:()=>M({...D,email:!0}),error:!!T.email,disabled:x,placeholder:"your.email@example.com",className:"w-full"}),T.email&&(0,t.jsx)("p",{className:"text-xs text-red-600 mt-1",children:T.email})]}),(0,t.jsxs)("div",{children:[(0,t.jsxs)("label",{className:"block text-sm font-medium mb-2 text-neutral-700",children:["Phone Number ",(0,t.jsx)("span",{className:"text-red-500",children:"*"})]}),(0,t.jsx)(y.Input,{type:"tel",value:F,onChange:e=>U(e.target.value),onBlur:()=>M({...D,phoneNumber:!0}),error:!!T.phoneNumber,disabled:x,placeholder:"+1-123-456-7890",className:"w-full"}),T.phoneNumber&&(0,t.jsx)("p",{className:"text-xs text-red-600 mt-1",children:T.phoneNumber})]})]}),f&&j&&(0,t.jsxs)("div",{className:"border-t pt-4",children:[(0,t.jsx)("h4",{className:"text-sm font-semibold mb-3 text-neutral-700",children:"Contact Details"}),(0,t.jsxs)("div",{className:"bg-neutral-50 p-4 rounded-lg space-y-2 text-sm",children:[(0,t.jsxs)("div",{children:[(0,t.jsx)("span",{className:"font-medium",children:"Email:"})," ",j.email]}),j.phoneNumber&&(0,t.jsxs)("div",{children:[(0,t.jsx)("span",{className:"font-medium",children:"Phone:"})," ",j.phoneNumber]}),C&&(0,t.jsxs)("div",{children:[(0,t.jsx)("span",{className:"font-medium",children:"Address:"})," ",C]})]}),(0,t.jsx)("p",{className:"text-xs text-neutral-500 mt-2",children:"Contact details from your profile"})]}),!r&&q>0&&(0,t.jsxs)("div",{className:"p-4 bg-neutral-50 rounded-lg border-t-2 border-orange-500",children:[m&&O&&(0,t.jsxs)("div",{className:"mb-3 space-y-2 text-sm",children:[(0,t.jsx)("h5",{className:"font-medium text-neutral-700",children:"Group Pricing Applied:"}),(0,t.jsxs)("div",{className:"flex justify-between items-center p-3 bg-white rounded-lg border border-orange-200",children:[(0,t.jsxs)("div",{children:[(0,t.jsx)("span",{className:"font-medium text-orange-600",children:O.tierRange}),(0,t.jsx)("span",{className:"text-neutral-600 ml-2",children:"attendees"})]}),(0,t.jsxs)("div",{className:"text-right",children:[(0,t.jsxs)("div",{className:"text-sm font-medium text-neutral-700",children:["$",O.pricePerPerson.toFixed(2)," per person"]}),(0,t.jsxs)("div",{className:"text-xs text-neutral-500",children:[S," Ã— $",O.pricePerPerson.toFixed(2)]})]})]})]}),n&&l&&o&&c&&(0,t.jsxs)("div",{className:"mb-3 space-y-2 text-sm",children:[(0,t.jsx)("h5",{className:"font-medium text-neutral-700",children:"Price Breakdown:"}),A.map((e,s)=>{if(!e.age)return null;let a=Number(e.age),r=a<c?o:l,i=a<c?"Child":"Adult";return(0,t.jsxs)("div",{className:"flex justify-between text-xs text-neutral-600",children:[(0,t.jsxs)("span",{children:[e.name||`Attendee ${s+1}`," (",i,", Age ",a,")"]}),(0,t.jsxs)("span",{children:["$",r.toFixed(2)]})]},s)})]}),(0,t.jsxs)("div",{className:"flex justify-between items-center border-t pt-3",children:[(0,t.jsx)("span",{className:"text-base font-medium text-neutral-700",children:"Total"}),(0,t.jsxs)("span",{className:"text-xl font-bold",style:{color:"#8B1538"},children:["$",q.toFixed(2)]})]})]}),g&&(0,t.jsx)("div",{className:"p-4 bg-red-50 border border-red-200 rounded-lg",children:(0,t.jsx)("p",{className:"text-sm text-red-600",children:g})}),(0,t.jsx)(h.Button,{type:"submit",disabled:x||!Q,className:"w-full text-lg py-6",style:{background:"#FF7900"},children:x?(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(d.Clock,{className:"h-5 w-5 mr-2 animate-spin"}),"Processing..."]}):r?"Register for Free":"Continue to Payment"}),!f&&(0,t.jsxs)("p",{className:"text-sm text-center text-neutral-500",children:["Have an account? ",(0,t.jsx)("a",{href:"/login",className:"text-orange-600 hover:underline",children:"Sign in"})," to register faster"]})]})}var N=e.i(37727),S=e.i(31343);let w=(0,e.i(75254).default)("chevron-left",[["path",{d:"m15 18-6-6 6-6",key:"1wnfg3"}]]);var C=e.i(63059),P=e.i(57022);function k({open:e,onOpenChange:a,children:r}){return(s.useEffect(()=>{let t=e=>{"Escape"===e.key&&a(!1)};return e&&(document.addEventListener("keydown",t),document.body.style.overflow="hidden"),()=>{document.removeEventListener("keydown",t),document.body.style.overflow="unset"}},[e,a]),e)?(0,t.jsxs)("div",{className:"fixed inset-0 z-50",children:[(0,t.jsx)("div",{className:"fixed inset-0 bg-black/80 backdrop-blur-sm",onClick:()=>a(!1),"aria-hidden":"true"}),r]}):null}let I=s.forwardRef(({className:e,children:s,...a},r)=>(0,t.jsx)("div",{ref:r,className:(0,P.cn)("fixed left-1/2 top-1/2 z-50 -translate-x-1/2 -translate-y-1/2","bg-white dark:bg-neutral-900 rounded-lg shadow-xl","w-full max-w-lg p-6",e),onClick:e=>e.stopPropagation(),...a,children:s}));function F({images:e=[],videos:a=[],className:r=""}){let[i,n]=(0,s.useState)(!1),[l,o]=(0,s.useState)(0),[d,c]=(0,s.useState)("image"),m=e.length,u=a.length;return 0===m+u?null:(0,t.jsxs)(t.Fragment,{children:[(0,t.jsxs)("div",{className:`space-y-6 ${r}`,children:[m>0&&(0,t.jsxs)("div",{children:[(0,t.jsxs)("h3",{className:"text-lg font-semibold text-neutral-900 dark:text-neutral-100 mb-3",children:["Photos (",m,")"]}),(0,t.jsx)("div",{className:"grid grid-cols-2 sm:grid-cols-3 md:grid-cols-4 gap-4",children:[...e].sort((e,t)=>e.displayOrder-t.displayOrder).map((e,s)=>(0,t.jsxs)("button",{onClick:()=>{o(s),c("image"),n(!0)},className:"relative aspect-square rounded-lg overflow-hidden bg-neutral-100 dark:bg-neutral-800 hover:opacity-90 transition-opacity group",children:[(0,t.jsx)("img",{src:e.imageUrl,alt:`Event photo ${e.displayOrder}`,className:"w-full h-full object-cover"}),(0,t.jsx)("div",{className:"absolute inset-0 bg-black/0 group-hover:bg-black/10 transition-colors"}),(0,t.jsx)("div",{className:"absolute top-2 left-2 bg-black/50 text-white text-xs px-2 py-1 rounded",children:e.displayOrder})]},e.id))})]}),u>0&&(0,t.jsxs)("div",{children:[(0,t.jsxs)("h3",{className:"text-lg font-semibold text-neutral-900 dark:text-neutral-100 mb-3",children:["Videos (",u,")"]}),(0,t.jsx)("div",{className:"grid grid-cols-1 sm:grid-cols-2 md:grid-cols-3 gap-4",children:[...a].sort((e,t)=>e.displayOrder-t.displayOrder).map((e,s)=>(0,t.jsxs)("button",{onClick:()=>{o(s),c("video"),n(!0)},className:"relative aspect-video rounded-lg overflow-hidden bg-neutral-100 dark:bg-neutral-800 hover:opacity-90 transition-opacity group",children:[(0,t.jsx)("img",{src:e.thumbnailUrl,alt:`Video ${e.displayOrder}`,className:"w-full h-full object-cover"}),(0,t.jsx)("div",{className:"absolute inset-0 bg-black/30 group-hover:bg-black/40 transition-colors flex items-center justify-center",children:(0,t.jsx)("div",{className:"bg-white/90 rounded-full p-4",children:(0,t.jsx)(S.Play,{className:"h-8 w-8 text-neutral-900",fill:"currentColor"})})}),(0,t.jsx)("div",{className:"absolute top-2 left-2 bg-black/50 text-white text-xs px-2 py-1 rounded",children:e.displayOrder})]},e.id))})]})]}),(0,t.jsx)(k,{open:i,onOpenChange:n,children:(0,t.jsx)(I,{className:"max-w-7xl w-full h-[90vh] p-0 bg-black/95",children:(0,t.jsxs)("div",{className:"relative w-full h-full flex items-center justify-center",children:[(0,t.jsx)("button",{onClick:()=>n(!1),className:"absolute top-4 right-4 z-50 p-2 rounded-full bg-white/10 hover:bg-white/20 transition-colors","aria-label":"Close lightbox",children:(0,t.jsx)(N.X,{className:"h-6 w-6 text-white"})}),("image"===d&&m>1||"video"===d&&u>1)&&(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)("button",{onClick:()=>{"image"===d?o(e=>0===e?m-1:e-1):o(e=>0===e?u-1:e-1)},className:"absolute left-4 z-50 p-3 rounded-full bg-white/10 hover:bg-white/20 transition-colors","aria-label":"Previous media",children:(0,t.jsx)(w,{className:"h-6 w-6 text-white"})}),(0,t.jsx)("button",{onClick:()=>{"image"===d?o(e=>e===m-1?0:e+1):o(e=>e===u-1?0:e+1)},className:"absolute right-4 z-50 p-3 rounded-full bg-white/10 hover:bg-white/20 transition-colors","aria-label":"Next media",children:(0,t.jsx)(C.ChevronRight,{className:"h-6 w-6 text-white"})})]}),(0,t.jsxs)("div",{className:"w-full h-full flex items-center justify-center p-12",children:["image"===d&&e[l]&&(0,t.jsx)("img",{src:e[l].imageUrl,alt:`Event photo ${e[l].displayOrder}`,className:"max-w-full max-h-full object-contain"}),"video"===d&&a[l]&&(0,t.jsx)("video",{src:a[l].videoUrl,controls:!0,autoPlay:!0,className:"max-w-full max-h-full",poster:a[l].thumbnailUrl,children:"Your browser does not support the video tag."})]}),(0,t.jsxs)("div",{className:"absolute bottom-4 left-1/2 -translate-x-1/2 bg-white/10 text-white text-sm px-4 py-2 rounded-full",children:[l+1," / ","image"===d?m:u]})]})})})]})}I.displayName="DialogContent",s.forwardRef(({className:e,...s},a)=>(0,t.jsx)("div",{ref:a,className:(0,P.cn)("flex flex-col space-y-1.5 mb-4",e),...s})).displayName="DialogHeader",s.forwardRef(({className:e,...s},a)=>(0,t.jsx)("h2",{ref:a,className:(0,P.cn)("text-lg font-semibold text-neutral-900 dark:text-neutral-100",e),...s})).displayName="DialogTitle",s.forwardRef(({className:e,...s},a)=>(0,t.jsx)("p",{ref:a,className:(0,P.cn)("text-sm text-neutral-600 dark:text-neutral-400",e),...s})).displayName="DialogDescription",s.forwardRef(({className:e,...s},a)=>(0,t.jsx)("div",{ref:a,className:(0,P.cn)("flex items-center justify-end gap-3 mt-6",e),...s})).displayName="DialogFooter";var U=e.i(45771),A=e.i(3318);function E({params:e}){let{id:y}=(0,s.use)(e),v=(0,a.useRouter)(),{user:N}=(0,b.useAuthStore)(),[S,w]=(0,s.useState)(!1),[C,P]=(0,s.useState)(null),[k,I]=(0,s.useState)(!1),[E,D]=(0,s.useState)(!1),{data:M,isLoading:$,error:R}=(0,g.useEventById)(y),B=(0,g.useRsvpToEvent)(),T={[U.EventCategory.Religious]:"Religious",[U.EventCategory.Cultural]:"Cultural",[U.EventCategory.Community]:"Community",[U.EventCategory.Educational]:"Educational",[U.EventCategory.Social]:"Social",[U.EventCategory.Business]:"Business",[U.EventCategory.Charity]:"Charity",[U.EventCategory.Entertainment]:"Entertainment"},Q=async e=>{if(M)try{if(w(!0),P(null),"userId"in e){let t=window.location.origin,s=`${t}/events/payment/success?eventId=${y}`,a=`${t}/events/payment/cancel?eventId=${y}`,r=await B.mutateAsync({eventId:y,userId:e.userId,...e.attendees?{attendees:e.attendees}:{quantity:e.quantity||1},email:e.email,phoneNumber:e.phoneNumber,address:e.address,successUrl:s,cancelUrl:a});if(r){window.location.href=r;return}alert("Registration successful!"),window.location.reload()}else await A.eventsRepository.registerAnonymous(y,e),alert("Registration successful! We've sent a confirmation email to "+e.email),window.location.reload();w(!1)}catch(e){console.error("Registration failed:",e),P(e instanceof Error?e.message:"Failed to register. Please try again."),w(!1)}},L=async()=>{if(!N?.userId)return void v.push("/login?redirect="+encodeURIComponent(`/events/${y}`));try{I(!0),P(null),await A.eventsRepository.addToWaitingList(y),I(!1),alert("Successfully joined waitlist! You will be notified when a spot becomes available.")}catch(e){console.error("Failed to join waitlist:",e),P(e instanceof Error?e.message:"Failed to join waitlist. Please try again."),I(!1)}},q=async()=>{if(M&&M.organizerId===N?.userId)try{D(!0),P(null),await A.eventsRepository.publishEvent(y),D(!1),window.location.reload()}catch(e){console.error("Failed to publish event:",e),P(e instanceof Error?e.message:"Failed to publish event. Please try again."),D(!1)}};if($)return(0,t.jsxs)("div",{className:"min-h-screen bg-gradient-to-b from-neutral-50 to-white",children:[(0,t.jsx)(m.Header,{}),(0,t.jsx)("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-12",children:(0,t.jsx)(x.Card,{className:"animate-pulse",children:(0,t.jsxs)(x.CardContent,{className:"p-12",children:[(0,t.jsx)("div",{className:"h-8 bg-neutral-200 rounded w-3/4 mb-4"}),(0,t.jsx)("div",{className:"h-4 bg-neutral-200 rounded w-1/2 mb-8"}),(0,t.jsx)("div",{className:"h-64 bg-neutral-200 rounded mb-8"}),(0,t.jsx)("div",{className:"h-32 bg-neutral-200 rounded"})]})})}),(0,t.jsx)(u.default,{})]});if(R||!M)return(0,t.jsxs)("div",{className:"min-h-screen bg-gradient-to-b from-neutral-50 to-white",children:[(0,t.jsx)(m.Header,{}),(0,t.jsx)("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-12",children:(0,t.jsx)(x.Card,{children:(0,t.jsxs)(x.CardContent,{className:"p-12 text-center",children:[(0,t.jsx)(c.AlertCircle,{className:"h-16 w-16 mx-auto mb-4 text-destructive"}),(0,t.jsx)("h3",{className:"text-xl font-semibold text-neutral-900 mb-2",children:"Event Not Found"}),(0,t.jsx)("p",{className:"text-neutral-500 mb-6",children:"The event you're looking for doesn't exist or has been removed."}),(0,t.jsx)(h.Button,{onClick:()=>v.push("/events"),children:"Back to Events"})]})})}),(0,t.jsx)(u.default,{})]});let O=new Date(M.startDate),K=new Date(M.endDate),z=O.toLocaleDateString("en-US",{month:"long",day:"numeric",year:"numeric"}),H=O.toLocaleTimeString("en-US",{hour:"numeric",minute:"2-digit"}),Y=K.toLocaleTimeString("en-US",{hour:"numeric",minute:"2-digit"}),J=M.currentRegistrations>=M.capacity,V=M.capacity-M.currentRegistrations;return(0,t.jsxs)("div",{className:"min-h-screen bg-gradient-to-b from-neutral-50 to-white",children:[(0,t.jsx)(m.Header,{}),(0,t.jsx)("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-6",children:(0,t.jsxs)("div",{className:"flex items-center justify-between gap-4",children:[(0,t.jsxs)(h.Button,{variant:"outline",onClick:()=>v.push("/events"),className:"flex items-center gap-2",children:[(0,t.jsx)(r.ArrowLeft,{className:"h-4 w-4"}),"Back to Events"]}),M&&N&&M.organizerId===N.userId&&(0,t.jsx)("div",{className:"flex items-center gap-3",children:M.status===U.EventStatus.Draft&&(0,t.jsx)(h.Button,{onClick:q,disabled:E,className:"flex items-center gap-2",style:{background:"#10B981"},children:E?"Publishing...":"Publish Event"})})]})}),(0,t.jsxs)("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 pb-12",children:[(0,t.jsxs)(x.Card,{className:"overflow-hidden",children:[M.images&&M.images.length>0&&(0,t.jsxs)("div",{className:"relative h-96 bg-gradient-to-br from-orange-500 to-rose-500",children:[(0,t.jsx)("img",{src:M.images[0].imageUrl,alt:M.title,className:"w-full h-full object-cover"}),(0,t.jsx)("div",{className:"absolute top-4 right-4",children:(0,t.jsx)(p.Badge,{variant:"default",className:"text-white shadow-lg text-base px-4 py-2",style:{background:"#8B1538"},children:T[M.category]})})]}),(0,t.jsxs)(x.CardContent,{className:"p-8",children:[(0,t.jsxs)("div",{className:"mb-8",children:[(0,t.jsx)("h1",{className:"text-4xl font-bold text-neutral-900 mb-4",children:M.title}),(0,t.jsx)("p",{className:"text-lg text-neutral-600 leading-relaxed whitespace-pre-wrap",children:M.description})]}),(0,t.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6 mb-8",children:[(0,t.jsxs)("div",{className:"flex items-start gap-3",children:[(0,t.jsx)("div",{className:"p-3 rounded-lg",style:{background:"#FFF4ED"},children:(0,t.jsx)(i.Calendar,{className:"h-6 w-6",style:{color:"#FF7900"}})}),(0,t.jsxs)("div",{children:[(0,t.jsx)("p",{className:"text-sm font-medium text-neutral-500",children:"Date & Time"}),(0,t.jsx)("p",{className:"text-base font-semibold text-neutral-900",children:z}),(0,t.jsxs)("p",{className:"text-sm text-neutral-600",children:[H," - ",Y]})]})]}),M.city&&M.state&&(0,t.jsxs)("div",{className:"flex items-start gap-3",children:[(0,t.jsx)("div",{className:"p-3 rounded-lg",style:{background:"#FFF4ED"},children:(0,t.jsx)(n.MapPin,{className:"h-6 w-6",style:{color:"#FF7900"}})}),(0,t.jsxs)("div",{children:[(0,t.jsx)("p",{className:"text-sm font-medium text-neutral-500",children:"Location"}),(0,t.jsxs)("p",{className:"text-base font-semibold text-neutral-900",children:[M.city,", ",M.state]}),M.address&&(0,t.jsx)("p",{className:"text-sm text-neutral-600",children:M.address})]})]}),(0,t.jsxs)("div",{className:"flex items-start gap-3",children:[(0,t.jsx)("div",{className:"p-3 rounded-lg",style:{background:"#FFF4ED"},children:(0,t.jsx)(l.Users,{className:"h-6 w-6",style:{color:"#FF7900"}})}),(0,t.jsxs)("div",{children:[(0,t.jsx)("p",{className:"text-sm font-medium text-neutral-500",children:"Capacity"}),(0,t.jsxs)("p",{className:"text-base font-semibold text-neutral-900",children:[M.currentRegistrations," / ",M.capacity," registered"]}),J?(0,t.jsx)(p.Badge,{className:"mt-1 bg-red-600 text-white",children:"Event Full"}):(0,t.jsxs)("p",{className:"text-sm text-neutral-600",children:[V," ",1===V?"spot":"spots"," remaining"]})]})]}),(0,t.jsxs)("div",{className:"flex items-start gap-3",children:[(0,t.jsx)("div",{className:"p-3 rounded-lg",style:{background:"#FFF4ED"},children:(0,t.jsx)(o.DollarSign,{className:"h-6 w-6",style:{color:"#FF7900"}})}),(0,t.jsxs)("div",{children:[(0,t.jsx)("p",{className:"text-sm font-medium text-neutral-500",children:"Pricing"}),M.isFree?(0,t.jsx)("p",{className:"text-base font-semibold",style:{color:"#8B1538"},children:"Free Event"}):M.hasDualPricing?(0,t.jsxs)(t.Fragment,{children:[(0,t.jsxs)("p",{className:"text-base font-semibold",style:{color:"#8B1538"},children:["Adult: $",M.adultPriceAmount?.toFixed(2)]}),(0,t.jsxs)("p",{className:"text-base font-semibold",style:{color:"#8B1538"},children:["Child (under ",M.childAgeLimit,"): $",M.childPriceAmount?.toFixed(2)]}),(0,t.jsx)("p",{className:"text-sm text-neutral-600",children:1===M.adultPriceCurrency?"USD":"LKR"})]}):(0,t.jsxs)(t.Fragment,{children:[(0,t.jsxs)("p",{className:"text-base font-semibold",style:{color:"#8B1538"},children:["$",M.ticketPriceAmount?.toFixed(2)," per person"]}),(0,t.jsx)("p",{className:"text-sm text-neutral-600",children:1===M.ticketPriceCurrency?"USD":"LKR"})]})]})]})]}),(M.images&&M.images.length>0||M.videos&&M.videos.length>0)&&(0,t.jsx)("div",{className:"mb-8",children:(0,t.jsx)(F,{images:M.images,videos:M.videos})}),(0,t.jsxs)(x.Card,{className:"border-2",style:{borderColor:"#FF7900"},children:[(0,t.jsxs)(x.CardHeader,{children:[(0,t.jsx)(x.CardTitle,{children:"Register for this Event"}),(0,t.jsx)(x.CardDescription,{children:J?"This event is currently full. Join the waitlist to be notified when spots become available.":"Reserve your spot now!"})]}),(0,t.jsx)(x.CardContent,{children:J?(0,t.jsxs)(t.Fragment,{children:[(0,t.jsxs)("div",{className:"space-y-4",children:[(0,t.jsx)(h.Button,{onClick:L,disabled:k,className:"w-full text-lg py-6",variant:"outline",style:{borderColor:"#FF7900",color:"#FF7900"},children:k?(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(d.Clock,{className:"h-5 w-5 mr-2 animate-spin"}),"Joining..."]}):"Join Waitlist"}),!N?.userId&&(0,t.jsx)("p",{className:"text-sm text-center text-neutral-500",children:"You'll be redirected to login before joining the waitlist"})]}),C&&(0,t.jsx)("div",{className:"mt-4 p-4 bg-red-50 border border-red-200 rounded-lg",children:(0,t.jsx)("p",{className:"text-sm text-red-600",children:C})})]}):(0,t.jsx)(j,{eventId:y,spotsLeft:V,isFree:M.isFree,ticketPrice:M.ticketPriceAmount??void 0,hasDualPricing:M.hasDualPricing,adultPrice:M.adultPriceAmount??void 0,childPrice:M.childPriceAmount??void 0,childAgeLimit:M.childAgeLimit??void 0,isProcessing:S,onSubmit:Q,error:C})})]})]})]}),(0,t.jsx)("div",{className:"mt-8",children:(0,t.jsx)(f.SignUpManagementSection,{eventId:y,userId:N?.userId,isOrganizer:M.organizerId===N?.userId})})]}),(0,t.jsx)(u.default,{})]})}e.s(["default",()=>E],31410)},45865,e=>{e.v(t=>Promise.all(["static/chunks/f0466de78faadcde.js"].map(t=>e.l(t))).then(()=>t(42490)))}]);