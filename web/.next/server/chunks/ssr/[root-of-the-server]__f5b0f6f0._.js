module.exports=[24361,(a,b,c)=>{b.exports=a.x("util",()=>require("util"))},14747,(a,b,c)=>{b.exports=a.x("path",()=>require("path"))},36313,(a,b,c)=>{"use strict";b.exports=a.r(42602).vendored.contexts.HooksClientContext},18341,(a,b,c)=>{"use strict";b.exports=a.r(42602).vendored.contexts.ServerInsertedHtml},56704,(a,b,c)=>{b.exports=a.x("next/dist/server/app-render/work-async-storage.external.js",()=>require("next/dist/server/app-render/work-async-storage.external.js"))},20635,(a,b,c)=>{b.exports=a.x("next/dist/server/app-render/action-async-storage.external.js",()=>require("next/dist/server/app-render/action-async-storage.external.js"))},32319,(a,b,c)=>{b.exports=a.x("next/dist/server/app-render/work-unit-async-storage.external.js",()=>require("next/dist/server/app-render/work-unit-async-storage.external.js"))},9270,(a,b,c)=>{"use strict";b.exports=a.r(42602).vendored.contexts.AppRouterContext},3706,a=>{"use strict";var b=a.i(87924),c=a.i(72131),d=a.i(50944),e=a.i(72988),f=a.i(42043);function g({isOpen:a,userName:d,onClose:e,onConfirm:g,isLoading:h=!1}){let[i,j]=c.useState("");return a?(0,b.jsx)("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black bg-opacity-50",children:(0,b.jsxs)("div",{className:"bg-white rounded-lg shadow-xl max-w-md w-full mx-4 p-6",children:[(0,b.jsx)("h2",{className:"text-2xl font-bold text-[#8B1538] mb-4",children:"Reject Role Upgrade"}),(0,b.jsxs)("p",{className:"text-gray-700 mb-4",children:["Are you sure you want to reject the role upgrade request for ",(0,b.jsx)("strong",{children:d}),"?"]}),(0,b.jsxs)("div",{className:"mb-6",children:[(0,b.jsx)("label",{htmlFor:"reason",className:"block text-sm font-medium text-gray-700 mb-2",children:"Reason (Optional)"}),(0,b.jsx)("textarea",{id:"reason",value:i,onChange:a=>j(a.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-[#FF7900] focus:border-transparent",rows:4,placeholder:"Provide a reason for rejection (optional)",disabled:h})]}),(0,b.jsxs)("div",{className:"flex gap-3 justify-end",children:[(0,b.jsx)(f.Button,{variant:"outline",onClick:()=>{j(""),e()},disabled:h,className:"border-gray-300 text-gray-700 hover:bg-gray-50",children:"Cancel"}),(0,b.jsx)(f.Button,{variant:"default",onClick:()=>{g(i)},disabled:h,className:"bg-red-600 hover:bg-red-700 text-white",children:h?"Rejecting...":"Reject"})]})]})}):null}var h=a.i(64668);let i=new class{basePath="/approvals";async getPendingApprovals(){return await h.apiClient.get(`${this.basePath}/pending`)}async approveRoleUpgrade(a){await h.apiClient.post(`${this.basePath}/${a}/approve`)}async rejectRoleUpgrade(a,b){await h.apiClient.post(`${this.basePath}/${a}/reject`,{reason:b})}};function j({approvals:a,onUpdate:d}){let[e,h]=c.useState(null),[j,k]=c.useState(!1),[l,m]=c.useState(null),n=async a=>{try{m(a),await i.approveRoleUpgrade(a),d()}catch(a){console.error("Error approving role upgrade:",a),alert("Failed to approve role upgrade")}finally{m(null)}},o=async a=>{if(e)try{m(e.userId),await i.rejectRoleUpgrade(e.userId,a),k(!1),h(null),d()}catch(a){console.error("Error rejecting role upgrade:",a),alert("Failed to reject role upgrade")}finally{m(null)}};return 0===a.length?(0,b.jsx)("div",{className:"bg-white rounded-lg shadow p-8 text-center",children:(0,b.jsx)("p",{className:"text-gray-500 text-lg",children:"No pending approvals"})}):(0,b.jsxs)(b.Fragment,{children:[(0,b.jsx)("div",{className:"bg-white rounded-lg shadow overflow-hidden",children:(0,b.jsxs)("table",{className:"min-w-full divide-y divide-gray-200",children:[(0,b.jsx)("thead",{className:"bg-gray-50",children:(0,b.jsxs)("tr",{children:[(0,b.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"User"}),(0,b.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Email"}),(0,b.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Current Role"}),(0,b.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Requested Role"}),(0,b.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Requested At"}),(0,b.jsx)("th",{className:"px-6 py-3 text-right text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Actions"})]})}),(0,b.jsx)("tbody",{className:"bg-white divide-y divide-gray-200",children:a.map(a=>(0,b.jsxs)("tr",{className:"hover:bg-gray-50",children:[(0,b.jsx)("td",{className:"px-6 py-4 whitespace-nowrap",children:(0,b.jsx)("div",{className:"text-sm font-medium text-gray-900",children:a.fullName})}),(0,b.jsx)("td",{className:"px-6 py-4 whitespace-nowrap",children:(0,b.jsx)("div",{className:"text-sm text-gray-500",children:a.email})}),(0,b.jsx)("td",{className:"px-6 py-4 whitespace-nowrap",children:(0,b.jsx)("span",{className:"px-2 inline-flex text-xs leading-5 font-semibold rounded-full bg-gray-100 text-gray-800",children:a.currentRole})}),(0,b.jsx)("td",{className:"px-6 py-4 whitespace-nowrap",children:(0,b.jsx)("span",{className:"px-2 inline-flex text-xs leading-5 font-semibold rounded-full bg-[#FFE8CC] text-[#8B1538]",children:a.requestedRole})}),(0,b.jsx)("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500",children:new Date(a.requestedAt).toLocaleDateString("en-US",{year:"numeric",month:"short",day:"numeric",hour:"2-digit",minute:"2-digit"})}),(0,b.jsx)("td",{className:"px-6 py-4 whitespace-nowrap text-right text-sm font-medium",children:(0,b.jsxs)("div",{className:"flex gap-2 justify-end",children:[(0,b.jsx)(f.Button,{size:"sm",variant:"default",onClick:()=>n(a.userId),disabled:l===a.userId,className:"bg-green-600 hover:bg-green-700 text-white",children:l===a.userId?"Approving...":"Approve"}),(0,b.jsx)(f.Button,{size:"sm",variant:"outline",onClick:()=>{h(a),k(!0)},disabled:l===a.userId,className:"border-red-600 text-red-600 hover:bg-red-50",children:"Reject"})]})})]},a.userId))})]})}),(0,b.jsx)(g,{isOpen:j,userName:e?.fullName||"",onClose:()=>{k(!1),h(null)},onConfirm:o,isLoading:l===e?.userId})]})}function k(){let a=(0,d.useRouter)(),{user:f,isAuthenticated:g}=(0,e.useAuthStore)(),[h,k]=c.useState([]),[l,m]=c.useState(!0),[n,o]=c.useState(null),p=f?.role==="Admin"||f?.role==="AdminManager";c.useEffect(()=>{g?p?q():a.push("/dashboard"):a.push("/login")},[g,p,a]);let q=async()=>{try{m(!0),o(null);let a=await i.getPendingApprovals();k(a)}catch(a){console.error("Error loading approvals:",a),o("Failed to load pending approvals")}finally{m(!1)}};return g&&p?(0,b.jsxs)("div",{className:"min-h-screen bg-gray-50",children:[(0,b.jsx)("div",{className:"bg-white shadow",children:(0,b.jsx)("div",{className:"container mx-auto px-4 sm:px-6 lg:px-8 py-6",children:(0,b.jsxs)("div",{className:"flex items-center justify-between",children:[(0,b.jsxs)("div",{children:[(0,b.jsx)("h1",{className:"text-3xl font-bold text-[#8B1538]",children:"Role Upgrade Approvals"}),(0,b.jsx)("p",{className:"mt-1 text-sm text-gray-500",children:"Manage pending Event Organizer role requests"})]}),(0,b.jsx)("button",{onClick:q,disabled:l,className:"px-4 py-2 bg-[#FF7900] text-white rounded-lg hover:bg-[#E66D00] transition-colors disabled:opacity-50",children:l?"Refreshing...":"Refresh"})]})})}),(0,b.jsxs)("div",{className:"container mx-auto px-4 sm:px-6 lg:px-8 py-8",children:[(0,b.jsx)("div",{className:"mb-6 grid grid-cols-1 gap-5 sm:grid-cols-2 lg:grid-cols-3",children:(0,b.jsx)("div",{className:"bg-white overflow-hidden shadow rounded-lg",children:(0,b.jsxs)("div",{className:"px-4 py-5 sm:p-6",children:[(0,b.jsx)("dt",{className:"text-sm font-medium text-gray-500 truncate",children:"Pending Requests"}),(0,b.jsx)("dd",{className:"mt-1 text-3xl font-semibold text-[#8B1538]",children:h.length})]})})}),n&&(0,b.jsx)("div",{className:"mb-6 bg-red-50 border border-red-200 rounded-lg p-4",children:(0,b.jsx)("p",{className:"text-red-800",children:n})}),l?(0,b.jsx)("div",{className:"bg-white rounded-lg shadow p-8 text-center",children:(0,b.jsx)("p",{className:"text-gray-500",children:"Loading approvals..."})}):(0,b.jsx)(j,{approvals:h,onUpdate:q})]})]}):null}a.s(["default",()=>k],3706)}];

//# sourceMappingURL=%5Broot-of-the-server%5D__f5b0f6f0._.js.map