module.exports=[30125,a=>{"use strict";var b=a.i(87924),c=a.i(72131),d=a.i(50944),e=a.i(50388),f=a.i(93003),g=a.i(72988),h=a.i(74934),i=a.i(11760),j=a.i(50253),k=a.i(42043),l=a.i(13858),m=a.i(15618),n=a.i(70106);let o=(0,n.default)("trash-2",[["path",{d:"M10 11v6",key:"nco0om"}],["path",{d:"M14 11v6",key:"outv1u"}],["path",{d:"M19 6v14a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2V6",key:"miytrc"}],["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M8 6V4a2 2 0 0 1 2-2h4a2 2 0 0 1 2 2v2",key:"e791ji"}]]),p=(0,n.default)("download",[["path",{d:"M12 15V3",key:"m9g1x1"}],["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["path",{d:"m7 10 5 5 5-5",key:"brsn70"}]]);var q=a.i(210);let r=(0,n.default)("list-plus",[["path",{d:"M16 5H3",key:"m91uny"}],["path",{d:"M11 12H3",key:"51ecnj"}],["path",{d:"M16 19H3",key:"zzsher"}],["path",{d:"M18 9v6",key:"1twb98"}],["path",{d:"M21 12h-6",key:"bt1uis"}]]);var s=a.i(60246),t=a.i(69212),u=a.i(64734);function v(){let a=(0,d.useParams)(),n=(0,d.useRouter)(),v=a.id,{user:w,isAuthenticated:x}=(0,g.useAuthStore)(),{data:y,isLoading:z}=(0,h.useEventById)(v),{data:A,isLoading:B}=(0,i.useEventSignUps)(v),C=(0,i.useAddSignUpList)(),D=(0,i.useRemoveSignUpList)(),[E,F]=(0,c.useState)(!1),[G,H]=(0,c.useState)(""),[I,J]=(0,c.useState)(""),[K,L]=(0,c.useState)(t.SignUpType.Open),[M,N]=(0,c.useState)([]),[O,P]=(0,c.useState)(""),[Q,R]=(0,c.useState)(null),[S,T]=(0,c.useState)(null);(0,c.useEffect)(()=>{if(!x||!w?.userId)return void n.push("/login?redirect="+encodeURIComponent(`/events/${v}/manage-signups`));let a=y&&(y.organizerId===w.userId||w.role===u.UserRole.Admin||w.role===u.UserRole.AdminManager);y&&!a&&n.push(`/events/${v}`)},[x,w,y,v,n]);let U=()=>{O.trim()&&(N([...M,O.trim()]),P(""))},V=async()=>{if(!G.trim())return void T("Category is required");if(!I.trim())return void T("Description is required");if(K===t.SignUpType.Predefined&&0===M.length)return void T("Please add at least one predefined item");try{T(null);let a={category:G.trim(),description:I.trim(),signUpType:K,predefinedItems:K===t.SignUpType.Predefined?M:void 0};await C.mutateAsync({eventId:v,...a}),H(""),J(""),L(t.SignUpType.Open),N([]),F(!1)}catch(a){console.error("Failed to create sign-up list:",a),T(a instanceof Error?a.message:"Failed to create sign-up list")}},W=async a=>{try{await D.mutateAsync({eventId:v,signupId:a}),R(null)}catch(a){console.error("Failed to delete sign-up list:",a),alert("Failed to delete sign-up list. Please try again.")}};if(!x||!w?.userId)return(0,b.jsxs)("div",{className:"min-h-screen bg-gradient-to-b from-neutral-50 to-white",children:[(0,b.jsx)(e.Header,{}),(0,b.jsx)("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-12",children:(0,b.jsx)("div",{className:"text-center",children:(0,b.jsx)("p",{className:"text-neutral-500",children:"Redirecting to login..."})})}),(0,b.jsx)(f.default,{})]});if(z||!y)return(0,b.jsxs)("div",{className:"min-h-screen bg-gradient-to-b from-neutral-50 to-white",children:[(0,b.jsx)(e.Header,{}),(0,b.jsx)("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-12",children:(0,b.jsx)("div",{className:"text-center",children:(0,b.jsx)("p",{className:"text-neutral-500",children:"Loading event..."})})}),(0,b.jsx)(f.default,{})]});if(y.organizerId!==w.userId)return(0,b.jsxs)("div",{className:"min-h-screen bg-gradient-to-b from-neutral-50 to-white",children:[(0,b.jsx)(e.Header,{}),(0,b.jsx)("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-12",children:(0,b.jsx)("div",{className:"text-center",children:(0,b.jsx)("p",{className:"text-destructive",children:"You are not authorized to manage this event"})})}),(0,b.jsx)(f.default,{})]});let X=A?.reduce((a,b)=>a+b.commitmentCount,0)||0;return(0,b.jsxs)("div",{className:"min-h-screen bg-gradient-to-b from-neutral-50 to-white",children:[(0,b.jsx)(e.Header,{}),(0,b.jsxs)("div",{className:"bg-gradient-to-r from-orange-600 via-rose-800 to-emerald-800 py-8 relative overflow-hidden",children:[(0,b.jsx)("div",{className:"absolute inset-0 opacity-10",children:(0,b.jsx)("div",{className:"absolute inset-0",style:{backgroundImage:"url(\"data:image/svg+xml,%3Csvg width='60' height='60' viewBox='0 0 60 60' xmlns='http://www.w3.org/2000/svg'%3E%3Cg fill='none' fill-rule='evenodd'%3E%3Cg fill='%23ffffff' fill-opacity='1'%3E%3Cpath d='M36 34v-4h-2v4h-4v2h4v4h2v-4h4v-2h-4zm0-30V0h-2v4h-4v2h4v4h2V6h4V4h-4zM6 34v-4H4v4H0v2h4v4h2v-4h4v-2H6zM6 4V0H4v4H0v2h4v4h2V6h4V4H6z'/%3E%3C/g%3E%3C/g%3E%3C/svg%3E\")"}})}),(0,b.jsxs)("div",{className:"relative max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:[(0,b.jsxs)(k.Button,{variant:"outline",onClick:()=>n.push(`/events/${v}/manage`),className:"mb-4 bg-white/10 text-white border-white/30 hover:bg-white/20 hover:border-white/50",children:[(0,b.jsx)(q.ArrowLeft,{className:"h-4 w-4 mr-2"}),"Back to Manage Event"]}),(0,b.jsx)("h1",{className:"text-3xl font-bold text-white mb-2",children:"Manage Sign-Up Lists"}),(0,b.jsx)("p",{className:"text-lg text-white/90",children:y.title})]})]}),(0,b.jsxs)("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8",children:[(0,b.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6 mb-8",children:[(0,b.jsx)(j.Card,{children:(0,b.jsx)(j.CardContent,{className:"p-6",children:(0,b.jsxs)("div",{className:"flex items-center justify-between",children:[(0,b.jsxs)("div",{children:[(0,b.jsx)("p",{className:"text-sm font-medium text-neutral-500",children:"Total Sign-Up Lists"}),(0,b.jsx)("p",{className:"text-3xl font-bold text-neutral-900 mt-1",children:A?.length||0})]}),(0,b.jsx)("div",{className:"p-3 rounded-lg",style:{background:"#FFF4ED"},children:(0,b.jsx)(r,{className:"h-6 w-6",style:{color:"#FF7900"}})})]})})}),(0,b.jsx)(j.Card,{children:(0,b.jsx)(j.CardContent,{className:"p-6",children:(0,b.jsxs)("div",{className:"flex items-center justify-between",children:[(0,b.jsxs)("div",{children:[(0,b.jsx)("p",{className:"text-sm font-medium text-neutral-500",children:"Total Commitments"}),(0,b.jsx)("p",{className:"text-3xl font-bold text-neutral-900 mt-1",children:X})]}),(0,b.jsx)("div",{className:"p-3 rounded-lg",style:{background:"#FFF4ED"},children:(0,b.jsx)(s.Users,{className:"h-6 w-6",style:{color:"#FF7900"}})})]})})})]}),(0,b.jsxs)("div",{className:"flex items-center justify-between mb-6",children:[(0,b.jsx)("h2",{className:"text-2xl font-bold",style:{color:"#8B1538"},children:"Sign-Up Lists"}),(0,b.jsxs)("div",{className:"flex gap-3",children:[A&&A.length>0&&(0,b.jsxs)(k.Button,{variant:"outline",onClick:()=>{if(!A||0===A.length)return void alert("No sign-up lists to download");let a="Category,Item Description,User ID,Quantity,Committed At\n";A.forEach(b=>{b.commitments.forEach(c=>{a+=`"${b.category}","${c.itemDescription}","${c.userId}",${c.quantity},"${c.committedAt}"
`})});let b=new Blob([a],{type:"text/csv;charset=utf-8;"}),c=document.createElement("a"),d=URL.createObjectURL(b);c.setAttribute("href",d),c.setAttribute("download",`event-${v}-signups.csv`),c.style.visibility="hidden",document.body.appendChild(c),c.click(),document.body.removeChild(c)},className:"flex items-center gap-2",children:[(0,b.jsx)(p,{className:"h-4 w-4"}),"Download CSV"]}),(0,b.jsxs)(k.Button,{onClick:()=>F(!E),style:{background:"#FF7900"},className:"flex items-center gap-2",children:[(0,b.jsx)(m.Plus,{className:"h-4 w-4"}),E?"Cancel":"Create Sign-Up List"]})]})]}),E&&(0,b.jsxs)(j.Card,{className:"mb-6",children:[(0,b.jsxs)(j.CardHeader,{children:[(0,b.jsx)(j.CardTitle,{style:{color:"#8B1538"},children:"Create New Sign-Up List"}),(0,b.jsx)(j.CardDescription,{children:"Add a new sign-up list for attendees to commit to bringing items"})]}),(0,b.jsxs)(j.CardContent,{className:"space-y-4",children:[(0,b.jsxs)("div",{children:[(0,b.jsx)("label",{htmlFor:"category",className:"block text-sm font-medium text-neutral-700 mb-2",children:"Category *"}),(0,b.jsx)(l.Input,{id:"category",type:"text",placeholder:"e.g., Food & Drinks, Decorations, Supplies",value:G,onChange:a=>H(a.target.value)})]}),(0,b.jsxs)("div",{children:[(0,b.jsx)("label",{htmlFor:"description",className:"block text-sm font-medium text-neutral-700 mb-2",children:"Description *"}),(0,b.jsx)("textarea",{id:"description",rows:3,placeholder:"Describe what items are needed or provide instructions...",className:"w-full px-4 py-2 border border-neutral-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-orange-500 resize-none",value:I,onChange:a=>J(a.target.value)})]}),(0,b.jsxs)("div",{children:[(0,b.jsx)("label",{htmlFor:"signUpType",className:"block text-sm font-medium text-neutral-700 mb-2",children:"Sign-Up Type *"}),(0,b.jsxs)("select",{id:"signUpType",className:"w-full px-4 py-2 border border-neutral-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-orange-500",value:K,onChange:a=>L(Number(a.target.value)),children:[(0,b.jsx)("option",{value:t.SignUpType.Open,children:"Open (Users can specify any item)"}),(0,b.jsx)("option",{value:t.SignUpType.Predefined,children:"Predefined (Users choose from list)"})]})]}),K===t.SignUpType.Predefined&&(0,b.jsxs)("div",{children:[(0,b.jsx)("label",{className:"block text-sm font-medium text-neutral-700 mb-2",children:"Predefined Items *"}),(0,b.jsxs)("div",{className:"space-y-2",children:[M.map((a,c)=>(0,b.jsxs)("div",{className:"flex items-center gap-2",children:[(0,b.jsx)(l.Input,{type:"text",value:a,disabled:!0,className:"flex-1"}),(0,b.jsx)(k.Button,{variant:"outline",size:"sm",onClick:()=>{N(M.filter((a,b)=>b!==c))},children:(0,b.jsx)(o,{className:"h-4 w-4"})})]},c)),(0,b.jsxs)("div",{className:"flex items-center gap-2",children:[(0,b.jsx)(l.Input,{type:"text",placeholder:"Enter item name",value:O,onChange:a=>P(a.target.value),onKeyPress:a=>{"Enter"===a.key&&(a.preventDefault(),U())},className:"flex-1"}),(0,b.jsx)(k.Button,{type:"button",onClick:U,style:{background:"#FF7900"},children:"Add Item"})]})]})]}),S&&(0,b.jsx)("div",{className:"p-3 bg-red-50 border border-red-200 rounded-lg",children:(0,b.jsx)("p",{className:"text-sm text-red-600",children:S})}),(0,b.jsxs)("div",{className:"flex items-center justify-end gap-3 pt-4",children:[(0,b.jsx)(k.Button,{variant:"outline",onClick:()=>{F(!1),H(""),J(""),L(t.SignUpType.Open),N([]),T(null)},children:"Cancel"}),(0,b.jsx)(k.Button,{onClick:V,disabled:C.isPending,style:{background:"#FF7900"},children:C.isPending?"Creating...":"Create Sign-Up List"})]})]})]}),B?(0,b.jsx)("div",{className:"grid grid-cols-1 gap-6",children:[void 0,void 0].map((a,c)=>(0,b.jsx)(j.Card,{className:"animate-pulse",children:(0,b.jsxs)(j.CardContent,{className:"p-6",children:[(0,b.jsx)("div",{className:"h-6 bg-neutral-200 rounded w-1/3 mb-4"}),(0,b.jsx)("div",{className:"h-4 bg-neutral-200 rounded w-2/3"})]})},c))}):A&&A.length>0?(0,b.jsx)("div",{className:"grid grid-cols-1 gap-6",children:A.map(a=>(0,b.jsxs)(j.Card,{children:[(0,b.jsx)(j.CardHeader,{children:(0,b.jsxs)("div",{className:"flex items-start justify-between",children:[(0,b.jsxs)("div",{children:[(0,b.jsx)(j.CardTitle,{style:{color:"#8B1538"},children:a.category}),(0,b.jsx)(j.CardDescription,{className:"mt-2",children:a.description})]}),Q===a.id?(0,b.jsxs)("div",{className:"flex gap-2",children:[(0,b.jsx)(k.Button,{variant:"destructive",size:"sm",onClick:()=>W(a.id),disabled:D.isPending,children:"Confirm Delete"}),(0,b.jsx)(k.Button,{variant:"outline",size:"sm",onClick:()=>R(null),children:"Cancel"})]}):(0,b.jsxs)(k.Button,{variant:"outline",size:"sm",onClick:()=>R(a.id),className:"text-red-600 hover:text-red-700",children:[(0,b.jsx)(o,{className:"h-4 w-4 mr-2"}),"Delete"]})]})}),(0,b.jsx)(j.CardContent,{children:(0,b.jsxs)("div",{className:"space-y-4",children:[(0,b.jsx)("div",{children:(0,b.jsx)("span",{className:"inline-block px-3 py-1 text-sm font-medium rounded-full border-2",style:{borderColor:"#FF7900",color:"#FF7900",background:"white"},children:a.signUpType===t.SignUpType.Open?"Open List":"Predefined List"})}),a.signUpType===t.SignUpType.Predefined&&a.predefinedItems.length>0&&(0,b.jsxs)("div",{children:[(0,b.jsx)("h4",{className:"text-sm font-semibold text-neutral-700 mb-2",children:"Available Items:"}),(0,b.jsx)("div",{className:"flex flex-wrap gap-2",children:a.predefinedItems.map((a,c)=>(0,b.jsx)("span",{className:"px-3 py-1 text-sm bg-neutral-100 text-neutral-700 rounded-full",children:a},c))})]}),(0,b.jsxs)("div",{children:[(0,b.jsxs)("h4",{className:"text-sm font-semibold text-neutral-700 mb-3",children:["Commitments (",a.commitmentCount,")"]}),a.commitments.length>0?(0,b.jsx)("div",{className:"space-y-2",children:a.commitments.map(a=>(0,b.jsxs)("div",{className:"flex items-center justify-between p-3 bg-neutral-50 rounded-lg",children:[(0,b.jsxs)("div",{className:"flex-1",children:[(0,b.jsx)("p",{className:"font-medium text-neutral-900",children:a.itemDescription}),(0,b.jsxs)("p",{className:"text-sm text-neutral-500",children:["Quantity: ",a.quantity," â€¢ User: ",a.userId.substring(0,8),"..."]})]}),(0,b.jsx)("p",{className:"text-sm text-neutral-400",children:new Date(a.committedAt).toLocaleDateString()})]},a.id))}):(0,b.jsx)("p",{className:"text-neutral-500 text-sm italic",children:"No commitments yet"})]})]})})]},a.id))}):(0,b.jsx)(j.Card,{children:(0,b.jsxs)(j.CardContent,{className:"p-12 text-center",children:[(0,b.jsx)(r,{className:"h-16 w-16 mx-auto mb-4 text-neutral-400"}),(0,b.jsx)("h3",{className:"text-xl font-semibold text-neutral-900 mb-2",children:"No Sign-Up Lists Yet"}),(0,b.jsx)("p",{className:"text-neutral-500 mb-6",children:"Create your first sign-up list to let attendees commit to bringing items"}),(0,b.jsxs)(k.Button,{onClick:()=>F(!0),style:{background:"#FF7900"},children:[(0,b.jsx)(m.Plus,{className:"h-4 w-4 mr-2"}),"Create Sign-Up List"]})]})})]}),(0,b.jsx)(f.default,{})]})}a.s(["default",()=>v],30125)}];

//# sourceMappingURL=src_app_events_%5Bid%5D_manage-signups_page_tsx_b7e58f41._.js.map