{"TimeStamp": "2025-12-05T21:48:08.97344", "Log": "Connecting to the container 'lankaconnect-api-staging'..."}
{"TimeStamp": "2025-12-05T21:48:09.00035", "Log": "Successfully Connected to container: 'lankaconnect-api-staging' [Revision: 'lankaconnect-api-staging--0000210', Replica: 'lankaconnect-api-staging--0000210-6c9bd8bd7c-4n5p9']"}
{"TimeStamp": "2025-12-05T21:47:25.611845+00:00", "Log": "communications.email_messages AS e"}
{"TimeStamp": "2025-12-05T21:47:25.6118512+00:00", "Log": "e.status = 'Queued'"}
{"TimeStamp": "2025-12-05T21:47:25.611859+00:00", "Log": "BY e.priority, e.\"CreatedAt\""}
{"TimeStamp": "2025-12-05T21:47:25.6118643+00:00", "Log": "@__p_0"}
{"TimeStamp": "2025-12-05T21:47:26.2733244+00:00", "Log": "21:47:26.273 +00:00 [INF] 4da40f3b-d329-472f-95ce-b2dc43077c69 LankaConnect.API.Security.LoggingAuthorizationHandler: Authorization evaluation - UserId: 5e782b4d-29ed-4e1d-9039-6c8f698aeea9, Email: niroshhh2@gmail.com, Role: EventOrganizer, IsAuthenticated: True"}
{"TimeStamp": "2025-12-05T21:47:26.2736391+00:00", "Log": "21:47:26.273 +00:00 [INF] 4da40f3b-d329-472f-95ce-b2dc43077c69 LankaConnect.API.Security.LoggingAuthorizationHandler: Authorization requirement: DenyAnonymousAuthorizationRequirement - DenyAnonymousAuthorizationRequirement: Requires an authenticated user."}
{"TimeStamp": "2025-12-05T21:47:26.2736515+00:00", "Log": "21:47:26.273 +00:00 [INF] 4da40f3b-d329-472f-95ce-b2dc43077c69 Microsoft.AspNetCore.Routing.EndpointMiddleware: Executing endpoint 'LankaConnect.API.Controllers.NotificationsController.GetUnreadNotifications (LankaConnect.API)'"}
{"TimeStamp": "2025-12-05T21:47:26.2736691+00:00", "Log": "21:47:26.273 +00:00 [INF] 4da40f3b-d329-472f-95ce-b2dc43077c69 Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker: Route matched with {action = \"GetUnreadNotifications\", controller = \"Notifications\"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetUnreadNotifications() on controller LankaConnect.API.Controllers.NotificationsController (LankaConnect.API)."}
{"TimeStamp": "2025-12-05T21:47:26.2736899+00:00", "Log": "21:47:26.273 +00:00 [INF] 4da40f3b-d329-472f-95ce-b2dc43077c69 LankaConnect.API.Controllers.NotificationsController: User 5e782b4d-29ed-4e1d-9039-6c8f698aeea9 retrieving unread notifications"}
{"TimeStamp": "2025-12-05T21:47:26.2737038+00:00", "Log": "21:47:26.273 +00:00 [INF] 4da40f3b-d329-472f-95ce-b2dc43077c69 LankaConnect.Application.Common.Behaviors.LoggingPipelineBehavior: Processing GetUnreadNotificationsQuery with ID cc852b34-1be7-497d-8a3d-917ca8950595"}
{"TimeStamp": "2025-12-05T21:47:26.275589+00:00", "Log": "21:47:26.275 +00:00 [INF] 4da40f3b-d329-472f-95ce-b2dc43077c69 Microsoft.EntityFrameworkCore.Database.Command: Executed DbCommand (2ms) [Parameters=[@__userId_0='?' (DbType = Guid)], CommandType='Text', CommandTimeout='30']"}
{"TimeStamp": "2025-12-05T21:47:26.2756051+00:00", "Log": "n.\"Id\", n.\"CreatedAt\", n.\"IsRead\", n.\"Message\", n.\"ReadAt\", n.\"RelatedEntityId\", n.\"RelatedEntityType\", n.\"Title\", n.\"Type\", n.\"UpdatedAt\", n.\"UserId\""}
{"TimeStamp": "2025-12-05T21:47:26.2756109+00:00", "Log": "notifications.notifications AS n"}
{"TimeStamp": "2025-12-05T21:47:26.275616+00:00", "Log": "n.\"UserId\" = @__userId_0 AND NOT (n.\"IsRead\")"}
{"TimeStamp": "2025-12-05T21:47:26.2756213+00:00", "Log": "BY n.\"CreatedAt\" DESC"}
{"TimeStamp": "2025-12-05T21:47:26.2760977+00:00", "Log": "21:47:26.275 +00:00 [INF] 4da40f3b-d329-472f-95ce-b2dc43077c69 LankaConnect.Application.Common.Behaviors.LoggingPipelineBehavior: Successfully completed GetUnreadNotificationsQuery with ID cc852b34-1be7-497d-8a3d-917ca8950595 in 2ms"}
{"TimeStamp": "2025-12-05T21:47:26.2761122+00:00", "Log": "21:47:26.275 +00:00 [INF] 4da40f3b-d329-472f-95ce-b2dc43077c69 Microsoft.AspNetCore.Mvc.Infrastructure.ObjectResultExecutor: Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[LankaConnect.Application.Notifications.DTOs.NotificationDto, LankaConnect.Application, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'."}
{"TimeStamp": "2025-12-05T21:47:26.2762317+00:00", "Log": "21:47:26.275 +00:00 [INF] 4da40f3b-d329-472f-95ce-b2dc43077c69 Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker: Executed action LankaConnect.API.Controllers.NotificationsController.GetUnreadNotifications (LankaConnect.API) in 2.4005ms"}
{"TimeStamp": "2025-12-05T21:47:26.276239+00:00", "Log": "21:47:26.275 +00:00 [INF] 4da40f3b-d329-472f-95ce-b2dc43077c69 Microsoft.AspNetCore.Routing.EndpointMiddleware: Executed endpoint 'LankaConnect.API.Controllers.NotificationsController.GetUnreadNotifications (LankaConnect.API)'"}
{"TimeStamp": "2025-12-05T21:47:26.2762445+00:00", "Log": "21:47:26.275 +00:00 [INF] 4da40f3b-d329-472f-95ce-b2dc43077c69 Serilog.AspNetCore.RequestLoggingMiddleware: HTTP GET /api/notifications/unread responded 200 in 2.7266 ms"}
{"TimeStamp": "2025-12-05T21:47:55.6110264+00:00", "Log": "21:47:55.610 +00:00 [WRN]  LankaConnect.Infrastructure.Email.Services.RazorEmailTemplateService: Cannot create template directory /app/Templates/Email - templates must be included in container image or mounted volume"}
{"TimeStamp": "2025-12-05T21:47:55.6110732+00:00", "Log": "Access to the path '/app/Templates' is denied."}
{"TimeStamp": "2025-12-05T21:47:55.6110804+00:00", "Log": "---> System.IO.IOException: Permission denied"}
{"TimeStamp": "2025-12-05T21:47:55.6110861+00:00", "Log": "--- End of inner exception stack trace ---"}
{"TimeStamp": "2025-12-05T21:47:55.6110919+00:00", "Log": "at System.IO.FileSystem.CreateParentsAndDirectory(String fullPath, UnixFileMode unixCreateMode)"}
{"TimeStamp": "2025-12-05T21:47:55.6110969+00:00", "Log": "at System.IO.FileSystem.CreateDirectory(String fullPath, UnixFileMode unixCreateMode)"}
{"TimeStamp": "2025-12-05T21:47:55.6111025+00:00", "Log": "at System.IO.Directory.CreateDirectory(String path)"}
{"TimeStamp": "2025-12-05T21:47:55.6111702+00:00", "Log": "at LankaConnect.Infrastructure.Email.Services.RazorEmailTemplateService..ctor(IOptions`1 emailSettings, IMemoryCache cache, ILogger`1 logger) in /home/runner/work/LankaConnect/LankaConnect/src/LankaConnect.Infrastructure/Email/Services/RazorEmailTemplateService.cs:line 37"}
{"TimeStamp": "2025-12-05T21:47:55.6124629+00:00", "Log": "21:47:55.612 +00:00 [INF]  Microsoft.EntityFrameworkCore.Database.Command: Executed DbCommand (2ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']"}
{"TimeStamp": "2025-12-05T21:47:55.6124797+00:00", "Log": "e.\"Id\", e.\"BackoffMultiplier\", e.\"BypassReason\", e.clicked_at, e.\"ConcurrentAccessAttempts\", e.\"CreatedAt\", e.cultural_context, e.\"CulturalDelayBypassed\", e.\"CulturalDelayReason\", e.\"CulturalTimingOptimized\", e.delivered_at, e.\"DeliveryConfirmationReceived\", e.\"DiasporaOptimized\", e.error_message, e.failed_at, e.\"FestivalContext\", e.\"GeographicOptimization\", e.\"GeographicRegion\", e.\"HasAllRecipientsDelivered\", e.html_content, e.\"LastStateTransition\", e.\"LocalizedSendTime\", e.max_retries, e.\"MessageId\", e.next_retry_at, e.opened_at, e.\"OptimalSendTime\", e.\"PermanentFailureReason\", e.\"PostponementReason\", e.priority, e.recipient_statuses, e.\"ReligiousObservanceConsidered\", e.retry_count, e.\"RetryStrategy\", e.\"SendingStartedAt\", e.sent_at, e.status, e.\"TargetTimezone\", e.template_data, e.template_name, e.text_content, e.type, e.\"UpdatedAt\", e.bcc_emails, e.cc_emails, e.to_emails, e.from_email, e.subject"}
{"TimeStamp": "2025-12-05T21:47:55.6124854+00:00", "Log": "communications.email_messages AS e"}
{"TimeStamp": "2025-12-05T21:47:55.6124912+00:00", "Log": "e.status = 'Queued'"}
{"TimeStamp": "2025-12-05T21:47:55.6124967+00:00", "Log": "BY e.priority, e.\"CreatedAt\""}
{"TimeStamp": "2025-12-05T21:47:55.6125008+00:00", "Log": "@__p_0"}
{"TimeStamp": "2025-12-05T21:47:56.7835231+00:00", "Log": "21:47:56.783 +00:00 [INF] be8119d2-116e-4b44-be20-c250e2381a6b LankaConnect.API.Security.LoggingAuthorizationHandler: Authorization evaluation - UserId: 5e782b4d-29ed-4e1d-9039-6c8f698aeea9, Email: niroshhh2@gmail.com, Role: EventOrganizer, IsAuthenticated: True"}
{"TimeStamp": "2025-12-05T21:47:56.7835562+00:00", "Log": "21:47:56.783 +00:00 [INF] be8119d2-116e-4b44-be20-c250e2381a6b LankaConnect.API.Security.LoggingAuthorizationHandler: Authorization requirement: DenyAnonymousAuthorizationRequirement - DenyAnonymousAuthorizationRequirement: Requires an authenticated user."}
{"TimeStamp": "2025-12-05T21:47:56.783569+00:00", "Log": "21:47:56.783 +00:00 [INF] be8119d2-116e-4b44-be20-c250e2381a6b Microsoft.AspNetCore.Routing.EndpointMiddleware: Executing endpoint 'LankaConnect.API.Controllers.NotificationsController.GetUnreadNotifications (LankaConnect.API)'"}
{"TimeStamp": "2025-12-05T21:47:56.7841926+00:00", "Log": "21:47:56.783 +00:00 [INF] be8119d2-116e-4b44-be20-c250e2381a6b Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker: Route matched with {action = \"GetUnreadNotifications\", controller = \"Notifications\"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetUnreadNotifications() on controller LankaConnect.API.Controllers.NotificationsController (LankaConnect.API)."}
{"TimeStamp": "2025-12-05T21:47:56.7843701+00:00", "Log": "21:47:56.783 +00:00 [INF] be8119d2-116e-4b44-be20-c250e2381a6b LankaConnect.API.Controllers.NotificationsController: User 5e782b4d-29ed-4e1d-9039-6c8f698aeea9 retrieving unread notifications"}
{"TimeStamp": "2025-12-05T21:47:56.7843757+00:00", "Log": "21:47:56.783 +00:00 [INF] be8119d2-116e-4b44-be20-c250e2381a6b LankaConnect.Application.Common.Behaviors.LoggingPipelineBehavior: Processing GetUnreadNotificationsQuery with ID 5b0d85f5-a671-40e5-86fa-040d1c369c59"}
{"TimeStamp": "2025-12-05T21:47:56.7858234+00:00", "Log": "21:47:56.785 +00:00 [INF] be8119d2-116e-4b44-be20-c250e2381a6b Microsoft.EntityFrameworkCore.Database.Command: Executed DbCommand (1ms) [Parameters=[@__userId_0='?' (DbType = Guid)], CommandType='Text', CommandTimeout='30']"}
{"TimeStamp": "2025-12-05T21:47:56.7858375+00:00", "Log": "n.\"Id\", n.\"CreatedAt\", n.\"IsRead\", n.\"Message\", n.\"ReadAt\", n.\"RelatedEntityId\", n.\"RelatedEntityType\", n.\"Title\", n.\"Type\", n.\"UpdatedAt\", n.\"UserId\""}
{"TimeStamp": "2025-12-05T21:47:56.7858435+00:00", "Log": "notifications.notifications AS n"}
{"TimeStamp": "2025-12-05T21:47:56.7858512+00:00", "Log": "n.\"UserId\" = @__userId_0 AND NOT (n.\"IsRead\")"}
{"TimeStamp": "2025-12-05T21:47:56.7858567+00:00", "Log": "BY n.\"CreatedAt\" DESC"}
{"TimeStamp": "2025-12-05T21:47:56.7859806+00:00", "Log": "21:47:56.785 +00:00 [INF] be8119d2-116e-4b44-be20-c250e2381a6b LankaConnect.Application.Common.Behaviors.LoggingPipelineBehavior: Successfully completed GetUnreadNotificationsQuery with ID 5b0d85f5-a671-40e5-86fa-040d1c369c59 in 2ms"}
{"TimeStamp": "2025-12-05T21:47:56.786014+00:00", "Log": "21:47:56.785 +00:00 [INF] be8119d2-116e-4b44-be20-c250e2381a6b Microsoft.AspNetCore.Mvc.Infrastructure.ObjectResultExecutor: Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[LankaConnect.Application.Notifications.DTOs.NotificationDto, LankaConnect.Application, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'."}
{"TimeStamp": "2025-12-05T21:47:56.7861517+00:00", "Log": "21:47:56.785 +00:00 [INF] be8119d2-116e-4b44-be20-c250e2381a6b Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker: Executed action LankaConnect.API.Controllers.NotificationsController.GetUnreadNotifications (LankaConnect.API) in 2.3715ms"}
{"TimeStamp": "2025-12-05T21:47:56.786158+00:00", "Log": "21:47:56.786 +00:00 [INF] be8119d2-116e-4b44-be20-c250e2381a6b Microsoft.AspNetCore.Routing.EndpointMiddleware: Executed endpoint 'LankaConnect.API.Controllers.NotificationsController.GetUnreadNotifications (LankaConnect.API)'"}
{"TimeStamp": "2025-12-05T21:47:56.786184+00:00", "Log": "21:47:56.786 +00:00 [INF] be8119d2-116e-4b44-be20-c250e2381a6b Serilog.AspNetCore.RequestLoggingMiddleware: HTTP GET /api/notifications/unread responded 200 in 2.8030 ms"}
