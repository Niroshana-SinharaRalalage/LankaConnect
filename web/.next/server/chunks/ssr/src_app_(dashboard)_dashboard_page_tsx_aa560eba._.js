module.exports=[89400,a=>{"use strict";var b,c=a.i(87924),d=a.i(71987),e=a.i(72493),f=a.i(72988),g=a.i(42043),h=a.i(72131);function i({tabs:a,defaultTab:b,onChange:d,className:e=""}){let[f,g]=h.useState(b||(a.length>0?a[0].id:"")),i=h.useMemo(()=>a.find(a=>a.id===f)?.content,[a,f]);return(0,c.jsxs)("div",{className:`w-full ${e}`,children:[(0,c.jsx)("div",{role:"tablist",className:"flex border-b border-gray-200 overflow-x-auto",onKeyDown:b=>{let c=a.findIndex(a=>a.id===f);if("ArrowRight"===b.key){b.preventDefault();let e=(c+1)%a.length,f=a[e].id;g(f),d?.(f)}else if("ArrowLeft"===b.key){b.preventDefault();let e=0===c?a.length-1:c-1,f=a[e].id;g(f),d?.(f)}},style:{scrollbarWidth:"thin"},children:a.map(a=>{let b=a.id===f,e=a.icon;return(0,c.jsxs)("button",{role:"tab","aria-selected":b,"aria-controls":`tabpanel-${a.id}`,id:`tab-${a.id}`,onClick:()=>{var b;g(b=a.id),d?.(b)},className:`
                flex items-center gap-2 px-4 py-3 font-medium text-sm
                transition-all duration-200 whitespace-nowrap
                ${b?"border-b-2 text-[#8B1538]":"text-gray-600 hover:text-[#FF7900] hover:bg-gray-50"}
              `,style:b?{borderImage:"linear-gradient(90deg, #FF7900 0%, #8B1538 100%) 1"}:void 0,children:[e&&(0,c.jsx)(e,{className:"w-4 h-4"}),(0,c.jsx)("span",{children:a.label})]},a.id)})}),(0,c.jsx)("div",{role:"tabpanel",id:`tabpanel-${f}`,"aria-labelledby":`tab-${f}`,className:"mt-6",children:i})]})}var j=a.i(33483),k=a.i(93003),l=a.i(50944),m=a.i(43061),n=a.i(64734);function o(a){return a===n.UserRole.Admin||a===n.UserRole.AdminManager}(b={}).None="None",b.Trialing="Trialing",b.Active="Active",b.PastDue="PastDue",b.Canceled="Canceled",b.Expired="Expired";var p=a.i(41675),q=a.i(60246),r=a.i(5784),s=a.i(46842),t=a.i(20005),u=a.i(8406),v=a.i(70106);let w=(0,v.default)("clipboard-check",[["rect",{width:"8",height:"4",x:"8",y:"2",rx:"1",ry:"1",key:"tgr4d6"}],["path",{d:"M16 4h2a2 2 0 0 1 2 2v14a2 2 0 0 1-2 2H6a2 2 0 0 1-2-2V6a2 2 0 0 1 2-2h2",key:"116196"}],["path",{d:"m9 14 2 2 4-4",key:"df797q"}]]),x=(0,v.default)("folder-open",[["path",{d:"m6 14 1.5-2.9A2 2 0 0 1 9.24 10H20a2 2 0 0 1 1.94 2.5l-1.54 6a2 2 0 0 1-1.95 1.5H4a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h3.9a2 2 0 0 1 1.69.9l.81 1.2a2 2 0 0 0 1.67.9H18a2 2 0 0 1 2 2v2",key:"usdka0"}]]),y=(0,v.default)("bell",[["path",{d:"M10.268 21a2 2 0 0 0 3.464 0",key:"vwvbt9"}],["path",{d:"M3.262 15.326A1 1 0 0 0 4 17h16a1 1 0 0 0 .74-1.673C19.41 13.956 18 12.499 18 8A6 6 0 0 0 6 8c0 4.499-1.411 5.956-2.738 7.326",key:"11g9vi"}]]);var z=a.i(24987),A=a.i(69212);function B({events:a,isLoading:b=!1,emptyMessage:d="No events to display",onEventClick:e}){let f=a=>new Date(a).toLocaleDateString("en-US",{year:"numeric",month:"short",day:"2-digit"});return b?(0,c.jsx)("div",{className:"flex items-center justify-center py-12",children:(0,c.jsxs)("div",{className:"text-center",children:[(0,c.jsx)("div",{className:"inline-block w-8 h-8 border-4 border-gray-300 border-t-[#FF7900] rounded-full animate-spin",role:"status"}),(0,c.jsx)("p",{className:"mt-2 text-gray-600",children:"Loading events..."})]})}):0===a.length?(0,c.jsxs)("div",{className:"text-center py-12",children:[(0,c.jsx)(p.Calendar,{className:"w-16 h-16 mx-auto mb-4 text-gray-400"}),(0,c.jsx)("p",{className:"text-gray-600 text-lg",children:d})]}):(0,c.jsx)("div",{className:"space-y-4",children:a.map(a=>(0,c.jsxs)("div",{onClick:()=>e?.(a.id),className:`bg-white rounded-lg shadow-sm border border-gray-200 p-4 transition-all hover:shadow-md ${e?"cursor-pointer":""}`,children:[(0,c.jsxs)("div",{className:"flex items-start justify-between mb-2",children:[(0,c.jsx)("h3",{className:"text-lg font-semibold text-[#8B1538] flex-1",children:a.title}),(0,c.jsx)("div",{className:"flex gap-2 ml-4",children:(0,c.jsx)("span",{className:"px-2 py-1 rounded-full text-xs font-semibold text-white whitespace-nowrap",style:{backgroundColor:(a=>{switch(a){case A.EventStatus.Published:return"#10B981";case A.EventStatus.Active:return"#FF7900";case A.EventStatus.Draft:return"#6B7280";case A.EventStatus.Postponed:return"#F59E0B";case A.EventStatus.Cancelled:return"#EF4444";case A.EventStatus.Completed:return"#3B82F6";case A.EventStatus.UnderReview:return"#8B5CF6";default:return"#6B7280"}})(a.status)},children:(a=>{switch(console.log("Event status value:",a,"Type:",typeof a),a){case A.EventStatus.Published:return"Published";case A.EventStatus.Active:return"Active";case A.EventStatus.Draft:return"Draft";case A.EventStatus.Postponed:return"Postponed";case A.EventStatus.Cancelled:return"Cancelled";case A.EventStatus.Completed:return"Completed";case A.EventStatus.UnderReview:return"Under Review";case A.EventStatus.Archived:return"Archived";default:return console.warn(`Unknown status value: ${a}, Type: ${typeof a}, EventStatus.Draft=${A.EventStatus.Draft}`),`Unknown (${a})`}})(a.status)})})]}),(0,c.jsxs)("div",{className:"space-y-2",children:[(0,c.jsxs)("div",{className:"flex items-center text-sm text-gray-600",children:[(0,c.jsx)(p.Calendar,{className:"w-4 h-4 mr-2 text-[#FF7900]"}),(0,c.jsxs)("span",{children:[f(a.startDate),a.endDate&&a.endDate!==a.startDate&&(0,c.jsxs)(c.Fragment,{children:[" - ",f(a.endDate)]})]})]}),a.city&&a.state&&(0,c.jsxs)("div",{className:"flex items-center text-sm text-gray-600",children:[(0,c.jsx)(z.MapPin,{className:"w-4 h-4 mr-2 text-[#FF7900]"}),(0,c.jsxs)("span",{children:[a.city,", ",a.state]})]}),(0,c.jsxs)("div",{className:"flex items-center text-sm text-gray-600",children:[(0,c.jsx)(q.Users,{className:"w-4 h-4 mr-2 text-[#FF7900]"}),(0,c.jsxs)("span",{children:[a.currentRegistrations," / ",a.capacity," registered"]})]})]}),(0,c.jsx)("div",{className:"flex items-center justify-between mt-3 pt-3 border-t border-gray-200",children:(0,c.jsxs)("div",{className:"flex gap-2",children:[(0,c.jsx)("span",{className:"px-2 py-1 bg-gray-100 text-gray-700 rounded text-xs font-medium",children:(a=>{switch(a){case A.EventCategory.Religious:return"Religious";case A.EventCategory.Cultural:return"Cultural";case A.EventCategory.Community:return"Community";case A.EventCategory.Educational:return"Educational";case A.EventCategory.Social:return"Social";case A.EventCategory.Business:return"Business";case A.EventCategory.Charity:return"Charity";case A.EventCategory.Entertainment:return"Entertainment";default:return"Other"}})(a.category)}),a.isFree&&(0,c.jsx)("span",{className:"px-2 py-1 bg-green-100 text-green-700 rounded text-xs font-medium",children:"Free"}),!a.isFree&&(0,c.jsx)("span",{className:"px-2 py-1 bg-[#FFE8CC] text-[#8B1538] rounded text-xs font-medium",children:a.hasDualPricing?`Adult: $${a.adultPriceAmount} | Child: $${a.childPriceAmount}`:`$${a.ticketPriceAmount}`})]})})]},a.id))})}function C({isOpen:a,userName:b,onClose:d,onConfirm:e,isLoading:f=!1}){let[i,j]=h.useState("");return a?(0,c.jsx)("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black bg-opacity-50",children:(0,c.jsxs)("div",{className:"bg-white rounded-lg shadow-xl max-w-md w-full mx-4 p-6",children:[(0,c.jsx)("h2",{className:"text-2xl font-bold text-[#8B1538] mb-4",children:"Reject Role Upgrade"}),(0,c.jsxs)("p",{className:"text-gray-700 mb-4",children:["Are you sure you want to reject the role upgrade request for ",(0,c.jsx)("strong",{children:b}),"?"]}),(0,c.jsxs)("div",{className:"mb-6",children:[(0,c.jsx)("label",{htmlFor:"reason",className:"block text-sm font-medium text-gray-700 mb-2",children:"Reason (Optional)"}),(0,c.jsx)("textarea",{id:"reason",value:i,onChange:a=>j(a.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-[#FF7900] focus:border-transparent",rows:4,placeholder:"Provide a reason for rejection (optional)",disabled:f})]}),(0,c.jsxs)("div",{className:"flex gap-3 justify-end",children:[(0,c.jsx)(g.Button,{variant:"outline",onClick:()=>{j(""),d()},disabled:f,className:"border-gray-300 text-gray-700 hover:bg-gray-50",children:"Cancel"}),(0,c.jsx)(g.Button,{variant:"default",onClick:()=>{e(i)},disabled:f,className:"bg-red-600 hover:bg-red-700 text-white",children:f?"Rejecting...":"Reject"})]})]})}):null}var D=a.i(64668);let E=new class{basePath="/approvals";async getPendingApprovals(){return await D.apiClient.get(`${this.basePath}/pending`)}async approveRoleUpgrade(a){await D.apiClient.post(`${this.basePath}/${a}/approve`)}async rejectRoleUpgrade(a,b){await D.apiClient.post(`${this.basePath}/${a}/reject`,{reason:b})}};function F({approvals:a,onUpdate:b}){let[d,e]=h.useState(null),[f,i]=h.useState(!1),[j,k]=h.useState(null),l=async a=>{try{k(a),await E.approveRoleUpgrade(a),b()}catch(a){console.error("Error approving role upgrade:",a),alert("Failed to approve role upgrade")}finally{k(null)}},m=async a=>{if(d)try{k(d.userId),await E.rejectRoleUpgrade(d.userId,a),i(!1),e(null),b()}catch(a){console.error("Error rejecting role upgrade:",a),alert("Failed to reject role upgrade")}finally{k(null)}};return 0===a.length?(0,c.jsx)("div",{className:"bg-white rounded-lg shadow p-8 text-center",children:(0,c.jsx)("p",{className:"text-gray-500 text-lg",children:"No pending approvals"})}):(0,c.jsxs)(c.Fragment,{children:[(0,c.jsx)("div",{className:"bg-white rounded-lg shadow overflow-x-auto",children:(0,c.jsxs)("table",{className:"min-w-full divide-y divide-gray-200",children:[(0,c.jsx)("thead",{className:"bg-gray-50",children:(0,c.jsxs)("tr",{children:[(0,c.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"User"}),(0,c.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Email"}),(0,c.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Current Role"}),(0,c.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Requested Role"}),(0,c.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Requested At"}),(0,c.jsx)("th",{className:"px-6 py-3 text-right text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Actions"})]})}),(0,c.jsx)("tbody",{className:"bg-white divide-y divide-gray-200",children:a.map(a=>(0,c.jsxs)("tr",{className:"hover:bg-gray-50",children:[(0,c.jsx)("td",{className:"px-6 py-4 whitespace-nowrap",children:(0,c.jsx)("div",{className:"text-sm font-medium text-gray-900",children:a.fullName})}),(0,c.jsx)("td",{className:"px-6 py-4 whitespace-nowrap",children:(0,c.jsx)("div",{className:"text-sm text-gray-500",children:a.email})}),(0,c.jsx)("td",{className:"px-6 py-4 whitespace-nowrap",children:(0,c.jsx)("span",{className:"px-2 inline-flex text-xs leading-5 font-semibold rounded-full bg-gray-100 text-gray-800",children:a.currentRole})}),(0,c.jsx)("td",{className:"px-6 py-4 whitespace-nowrap",children:(0,c.jsx)("span",{className:"px-2 inline-flex text-xs leading-5 font-semibold rounded-full bg-[#FFE8CC] text-[#8B1538]",children:a.requestedRole})}),(0,c.jsx)("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500",children:new Date(a.requestedAt).toLocaleDateString("en-US",{year:"numeric",month:"short",day:"numeric",hour:"2-digit",minute:"2-digit"})}),(0,c.jsx)("td",{className:"px-6 py-4 whitespace-nowrap text-right text-sm font-medium",children:(0,c.jsxs)("div",{className:"flex gap-2 justify-end",children:[(0,c.jsx)(g.Button,{size:"sm",variant:"default",onClick:()=>l(a.userId),disabled:j===a.userId,className:"bg-green-600 hover:bg-green-700 text-white",children:j===a.userId?"Approving...":"Approve"}),(0,c.jsx)(g.Button,{size:"sm",variant:"outline",onClick:()=>{e(a),i(!0)},disabled:j===a.userId,className:"border-red-600 text-red-600 hover:bg-red-50",children:"Reject"})]})})]},a.userId))})]})}),(0,c.jsx)(C,{isOpen:f,userName:d?.fullName||"",onClose:()=>{i(!1),e(null)},onConfirm:m,isLoading:j===d?.userId})]})}var G=a.i(33508),H=a.i(33441),I=a.i(70025),J=a.i(37927);let K=new class{basePath="/users/me";async requestUpgrade(a){return await D.apiClient.post(`${this.basePath}/request-upgrade`,a),{success:!0,message:"Role upgrade request submitted successfully"}}async cancelUpgrade(){return await D.apiClient.post(`${this.basePath}/cancel-upgrade`,{}),{success:!0,message:"Role upgrade request canceled successfully"}}};function L({isOpen:a,onClose:b}){let d,[e,f]=h.useState(""),[i,j]=h.useState(!1),k=(d=(0,J.useQueryClient)(),(0,I.useMutation)({mutationFn:a=>K.requestUpgrade(a),onSuccess:()=>{d.invalidateQueries({queryKey:["user"]})}}));h.useEffect(()=>{a||(f(""),j(!1),k.reset())},[a]);let l=async a=>{if(a.preventDefault(),!(e.trim().length<20))try{await k.mutateAsync({targetRole:"EventOrganizer",reason:e.trim()}),j(!0),setTimeout(()=>{b()},2e3)}catch(a){console.error("Failed to request upgrade:",a)}};return a?i?(0,c.jsx)("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4",children:(0,c.jsxs)("div",{className:"bg-white rounded-xl p-8 max-w-md w-full text-center",children:[(0,c.jsx)("div",{className:"w-16 h-16 bg-green-100 rounded-full flex items-center justify-center mx-auto mb-4",children:(0,c.jsx)(H.Check,{className:"w-8 h-8 text-green-600"})}),(0,c.jsx)("h3",{className:"text-2xl font-bold text-[#8B1538] mb-2",children:"Request Submitted!"}),(0,c.jsx)("p",{className:"text-gray-600",children:"Your upgrade request has been submitted for admin review. You'll be notified once it's processed."})]})}):(0,c.jsx)("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4",children:(0,c.jsxs)("div",{className:"bg-white rounded-xl max-w-2xl w-full max-h-[90vh] overflow-y-auto",children:[(0,c.jsxs)("div",{className:"p-6 flex items-center justify-between",style:{background:"linear-gradient(135deg, #FF7900 0%, #8B1538 100%)"},children:[(0,c.jsxs)("div",{className:"flex items-center gap-3",children:[(0,c.jsx)(u.Sparkles,{className:"w-6 h-6 text-white"}),(0,c.jsx)("h2",{className:"text-2xl font-bold text-white",children:"Upgrade to Event Organizer"})]}),(0,c.jsx)("button",{onClick:b,className:"text-white hover:bg-white/20 rounded-lg p-2 transition-colors",disabled:k.isPending,children:(0,c.jsx)(G.X,{className:"w-6 h-6"})})]}),(0,c.jsxs)("div",{className:"p-6",children:[(0,c.jsxs)("div",{className:"mb-6",children:[(0,c.jsx)("h3",{className:"text-lg font-semibold text-[#8B1538] mb-4",children:"Event Organizer Benefits"}),(0,c.jsx)("div",{className:"space-y-3",children:["Create and manage unlimited events","6-month free trial to explore all features","Access to event analytics and insights","Priority event listing in search results","Custom event branding and themes","Email notifications to interested attendees"].map((a,b)=>(0,c.jsxs)("div",{className:"flex items-start gap-3",children:[(0,c.jsx)("div",{className:"w-6 h-6 rounded-full bg-green-100 flex items-center justify-center flex-shrink-0 mt-0.5",children:(0,c.jsx)(H.Check,{className:"w-4 h-4 text-green-600"})}),(0,c.jsx)("p",{className:"text-gray-700",children:a})]},b))})]}),(0,c.jsx)("div",{className:"mb-6 p-4 bg-orange-50 rounded-lg border border-orange-200",children:(0,c.jsxs)("p",{className:"text-sm text-gray-700",children:[(0,c.jsx)("span",{className:"font-semibold text-[#FF7900]",children:"Free for 6 months!"})," After your trial, Event Organizer subscription is just $9.99/month. Cancel anytime."]})}),(0,c.jsxs)("form",{onSubmit:l,children:[(0,c.jsxs)("div",{className:"mb-6",children:[(0,c.jsxs)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:["Tell us why you want to become an Event Organizer ",(0,c.jsx)("span",{className:"text-red-500",children:"*"})]}),(0,c.jsx)("textarea",{value:e,onChange:a=>f(a.target.value),className:"w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-[#FF7900] focus:border-transparent transition-all resize-none",rows:4,placeholder:"Describe the types of events you plan to organize and how you'll engage the community... (minimum 20 characters)",disabled:k.isPending,required:!0}),(0,c.jsxs)("p",{className:"text-sm text-gray-500 mt-1",children:[e.length,"/20 characters minimum"]})]}),k.isError&&(0,c.jsx)("div",{className:"mb-4 p-4 bg-red-50 border border-red-200 rounded-lg",children:(0,c.jsx)("p",{className:"text-sm text-red-600",children:k.error instanceof Error?k.error.message:"Failed to submit upgrade request. Please try again."})}),(0,c.jsxs)("div",{className:"flex gap-3",children:[(0,c.jsx)(g.Button,{type:"button",onClick:b,variant:"outline",className:"flex-1",disabled:k.isPending,children:"Cancel"}),(0,c.jsx)(g.Button,{type:"submit",className:"flex-1",style:{background:"linear-gradient(135deg, #FF7900 0%, #8B1538 100%)",color:"white"},disabled:k.isPending||e.trim().length<20,children:k.isPending?"Submitting...":"Submit Request"})]})]})]})]})}):null}var M=a.i(41710);function N({upgradeRequestedAt:a}){let b,[d,e]=h.useState(!1),[f,i]=h.useState(!1),j=(b=(0,J.useQueryClient)(),(0,I.useMutation)({mutationFn:()=>K.cancelUpgrade(),onSuccess:()=>{b.invalidateQueries({queryKey:["user"]})}})),k=async()=>{try{await j.mutateAsync(),i(!1)}catch(a){console.error("Failed to cancel upgrade:",a)}};return d?null:(0,c.jsxs)(c.Fragment,{children:[(0,c.jsxs)("div",{className:"mb-6 p-4 rounded-lg border-2 flex items-start gap-4",style:{background:"linear-gradient(135deg, #FFF5E6 0%, #FFE8CC 100%)",borderColor:"#FF7900"},children:[(0,c.jsx)("div",{className:"flex-shrink-0",children:(0,c.jsx)("div",{className:"w-10 h-10 rounded-full bg-[#FF7900] flex items-center justify-center",children:(0,c.jsx)(M.Clock,{className:"w-5 h-5 text-white"})})}),(0,c.jsxs)("div",{className:"flex-1",children:[(0,c.jsx)("h3",{className:"text-lg font-semibold text-[#8B1538] mb-1",children:"Event Organizer Upgrade Pending"}),(0,c.jsx)("p",{className:"text-gray-700 text-sm mb-3",children:"Your request to become an Event Organizer is under review. Our team will review your application and notify you within 2-3 business days."}),a&&(0,c.jsxs)("p",{className:"text-xs text-gray-600",children:["Requested on: ",new Date(a).toLocaleDateString("en-US",{month:"long",day:"numeric",year:"numeric",hour:"2-digit",minute:"2-digit"})]}),(0,c.jsx)("div",{className:"mt-3 flex gap-2",children:(0,c.jsx)(g.Button,{size:"sm",variant:"outline",onClick:()=>i(!0),disabled:j.isPending,className:"text-sm",style:{borderColor:"#8B1538",color:"#8B1538"},children:j.isPending?"Canceling...":"Cancel Request"})})]}),(0,c.jsx)("button",{onClick:()=>e(!0),className:"flex-shrink-0 text-gray-500 hover:text-gray-700 transition-colors",title:"Dismiss banner",children:(0,c.jsx)(G.X,{className:"w-5 h-5"})})]}),f&&(0,c.jsx)("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4",children:(0,c.jsxs)("div",{className:"bg-white rounded-xl p-6 max-w-md w-full",children:[(0,c.jsx)("h3",{className:"text-xl font-bold text-[#8B1538] mb-3",children:"Cancel Upgrade Request?"}),(0,c.jsx)("p",{className:"text-gray-700 mb-6",children:"Are you sure you want to cancel your Event Organizer upgrade request? You can submit a new request anytime."}),j.isError&&(0,c.jsx)("div",{className:"mb-4 p-3 bg-red-50 border border-red-200 rounded-lg",children:(0,c.jsx)("p",{className:"text-sm text-red-600",children:"Failed to cancel request. Please try again."})}),(0,c.jsxs)("div",{className:"flex gap-3",children:[(0,c.jsx)(g.Button,{variant:"outline",onClick:()=>i(!1),className:"flex-1",disabled:j.isPending,children:"Keep Request"}),(0,c.jsx)(g.Button,{onClick:k,className:"flex-1",style:{background:"#8B1538",color:"white"},disabled:j.isPending,children:j.isPending?"Canceling...":"Yes, Cancel"})]})]})})]})}var O=a.i(18203),P=a.i(45744);function Q({notifications:a,onNotificationClick:b,isLoading:d=!1,error:e=null,className:f=""}){return d?(0,c.jsx)("div",{className:(0,O.cn)("flex items-center justify-center py-12",f),children:(0,c.jsxs)("div",{className:"text-center",children:[(0,c.jsxs)("svg",{className:"animate-spin h-12 w-12 mx-auto mb-4 text-[#FF7900]",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",children:[(0,c.jsx)("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),(0,c.jsx)("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]}),(0,c.jsx)("p",{className:"text-gray-600",children:"Loading notifications..."})]})}):e?(0,c.jsx)("div",{className:(0,O.cn)("flex items-center justify-center py-12",f),children:(0,c.jsxs)("div",{className:"text-center",children:[(0,c.jsx)("svg",{className:"w-12 h-12 mx-auto mb-4 text-red-500",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",xmlns:"http://www.w3.org/2000/svg",children:(0,c.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 8v4m0 4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"})}),(0,c.jsx)("p",{className:"text-red-600 font-medium mb-2",children:"Failed to load notifications"}),(0,c.jsx)("p",{className:"text-gray-600 text-sm",children:e.message})]})}):0===a.length?(0,c.jsx)("div",{className:(0,O.cn)("flex items-center justify-center py-12",f),children:(0,c.jsxs)("div",{className:"text-center",children:[(0,c.jsx)("svg",{className:"w-16 h-16 mx-auto mb-4 text-gray-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",xmlns:"http://www.w3.org/2000/svg",children:(0,c.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M15 17h5l-1.405-1.405A2.032 2.032 0 0118 14.158V11a6.002 6.002 0 00-4-5.659V5a2 2 0 10-4 0v.341C7.67 6.165 6 8.388 6 11v3.159c0 .538-.214 1.055-.595 1.436L4 17h5m6 0v1a3 3 0 11-6 0v-1m6 0H9"})}),(0,c.jsx)("p",{className:"text-gray-600 font-medium mb-2",children:"No notifications"}),(0,c.jsx)("p",{className:"text-gray-500 text-sm",children:"You're all caught up!"})]})}):(0,c.jsx)("div",{className:(0,O.cn)("space-y-3",f),children:a.map(a=>{let d,e,f,g,h=P.notificationTypeConfig[a.type];return(0,c.jsx)("div",{role:"button",tabIndex:0,className:(0,O.cn)("p-4 rounded-lg border transition-all cursor-pointer","hover:shadow-md hover:border-[#FF7900]","bg-white border-gray-200","focus:outline-none focus:ring-2 focus:ring-[#FF7900] focus:ring-offset-2"),onClick:()=>b(a.id),onKeyDown:c=>{("Enter"===c.key||" "===c.key)&&(c.preventDefault(),b(a.id))},children:(0,c.jsxs)("div",{className:"flex gap-4",children:[(0,c.jsx)("div",{className:(0,O.cn)("flex-shrink-0 w-12 h-12 rounded-full","flex items-center justify-center text-xl",h.bgColor,h.color),children:h.icon}),(0,c.jsxs)("div",{className:"flex-1 min-w-0",children:[(0,c.jsxs)("div",{className:"flex items-start justify-between gap-4 mb-2",children:[(0,c.jsx)("h3",{className:"font-semibold text-[#8B1538] text-base",children:a.title}),!a.isRead&&(0,c.jsx)("span",{className:"flex-shrink-0 w-2 h-2 rounded-full bg-[#FF7900]","aria-label":"Unread"})]}),(0,c.jsx)("p",{className:"text-gray-700 text-sm mb-2 leading-relaxed",children:a.message}),(0,c.jsxs)("div",{className:"flex items-center gap-2",children:[(0,c.jsx)("span",{className:(0,O.cn)("inline-block px-2 py-0.5 rounded text-xs font-medium",h.bgColor,h.color),children:a.type.replace(/([A-Z])/g," $1").trim()}),(0,c.jsx)("span",{className:"text-gray-500 text-xs",children:(d=new Date(a.createdAt),g=Math.floor((f=Math.floor((e=Math.floor((new Date().getTime()-d.getTime())/6e4))/60))/24),e<1?"Just now":e<60?`${e} ${1===e?"minute":"minutes"} ago`:f<24?`${f} ${1===f?"hour":"hours"} ago`:g<7?`${g} ${1===g?"day":"days"} ago`:d.toLocaleDateString("en-US",{month:"short",day:"numeric",year:"numeric"}))})]})]})]})},a.id)})})}var R=a.i(29312),S=a.i(73992);function T(){let a=(0,l.useRouter)(),{user:b,clearAuth:v}=(0,f.useAuthStore)(),[z,A]=(0,h.useState)(!1),[C,D]=(0,h.useState)(!1),[G,H]=(0,h.useState)(!1),I=(0,h.useRef)(null),[J,K]=(0,h.useState)([]),[M,O]=(0,h.useState)([]),[P,T]=(0,h.useState)(!1),[U,V]=(0,h.useState)(!1),[W,X]=(0,h.useState)([]),[Y,Z]=(0,h.useState)(!1),{data:$=[],isLoading:_}=(0,S.useUnreadNotifications)(),aa=(0,S.useMarkNotificationAsRead)();(0,h.useEffect)(()=>{D(!0)},[]),(0,h.useEffect)(()=>{function a(a){I.current&&!I.current.contains(a.target)&&A(!1)}return document.addEventListener("mousedown",a),()=>document.removeEventListener("mousedown",a)},[]),(0,h.useEffect)(()=>{let a=async()=>{try{T(!0);let a=await R.eventsRepository.getUserRsvps();K(a)}catch(a){console.error("Error loading registered events:",a)}finally{T(!1)}};b&&a()},[b]),(0,h.useEffect)(()=>{let a=async()=>{try{V(!0);let a=await R.eventsRepository.getUserCreatedEvents();O(a)}catch(a){console.error("Error loading created events:",a)}finally{V(!1)}};b&&(b.role===n.UserRole.EventOrganizer||o(b.role))&&a()},[b]),(0,h.useEffect)(()=>{let a=async()=>{try{Z(!0);let a=await E.getPendingApprovals();X(a)}catch(a){console.error("Error loading approvals:",a)}finally{Z(!1)}};b&&o(b.role)&&a()},[b]);let ab=async()=>{try{let a=await E.getPendingApprovals();X(a)}catch(a){console.error("Error refreshing approvals:",a)}},ac=async a=>{try{await aa.mutateAsync(a)}catch(a){console.error("Failed to mark notification as read:",a)}},ad=b=>{a.push(`/events/${b}`)},ae=b=>{a.push(`/events/${b}/manage`)},af=async()=>{try{await m.authRepository.logout()}catch(a){}finally{v(),a.push("/login")}};return(0,c.jsx)(e.ProtectedRoute,{children:(0,c.jsxs)("div",{className:"min-h-screen",style:{background:"#f7fafc"},children:[(0,c.jsx)("header",{className:"bg-white sticky top-0 z-40",style:{background:"rgba(255, 255, 255, 0.95)",backdropFilter:"blur(10px)",boxShadow:"0 2px 20px rgba(0,0,0,0.1)"},children:(0,c.jsx)("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-4",children:(0,c.jsxs)("div",{className:"flex items-center justify-between",children:[(0,c.jsxs)("div",{className:"flex items-center gap-8",children:[(0,c.jsx)(j.OfficialLogo,{size:"md"}),(0,c.jsxs)("nav",{className:"hidden md:flex items-center gap-6",children:[(0,c.jsx)("a",{href:"/events",className:"text-[#333] hover:text-[#FF7900] font-medium transition-colors",children:"Events"}),(0,c.jsx)("a",{href:"/forums",className:"text-[#333] hover:text-[#FF7900] font-medium transition-colors",children:"Forums"}),(0,c.jsx)("a",{href:"/business",className:"text-[#333] hover:text-[#FF7900] font-medium transition-colors",children:"Business"}),(0,c.jsx)("a",{href:"/marketplace",className:"text-[#333] hover:text-[#FF7900] font-medium transition-colors",children:"Marketplace"}),(0,c.jsx)("a",{href:"/dashboard",className:"text-[#FF7900] font-medium transition-colors",children:"Dashboard"})]})]}),(0,c.jsx)("div",{className:"flex items-center gap-4",suppressHydrationWarning:!0,children:C&&(0,c.jsxs)("div",{className:"relative",ref:I,children:[(0,c.jsxs)("button",{onClick:()=>A(!z),className:"flex items-center gap-3 hover:bg-gray-50 rounded-lg p-2 transition-colors",children:[b?.profilePhotoUrl?(0,c.jsx)(d.default,{src:b.profilePhotoUrl,alt:b.fullName,width:40,height:40,className:"w-10 h-10 rounded-full object-cover"}):(0,c.jsx)("div",{className:"w-10 h-10 rounded-full flex items-center justify-center text-white font-semibold",style:{background:"linear-gradient(135deg, #FF7900 0%, #8B1538 100%)"},children:(b?.fullName||"U").split(" ").map(a=>a[0]).join("").toUpperCase()}),(0,c.jsxs)("div",{className:"hidden md:block text-left",children:[(0,c.jsx)("p",{className:"text-sm font-medium",style:{color:"#8B1538"},children:b?.fullName}),(0,c.jsx)("p",{className:"text-xs",style:{color:"#718096"},children:b?.role})]}),(0,c.jsx)(r.ChevronDown,{className:`w-4 h-4 text-gray-600 transition-transform ${z?"rotate-180":""}`})]}),z&&(0,c.jsxs)("div",{className:"absolute right-0 mt-2 w-48 rounded-lg shadow-lg overflow-hidden z-50",style:{background:"white",border:"1px solid #e2e8f0"},children:[(0,c.jsxs)("button",{onClick:()=>{A(!1),a.push("/profile")},className:"w-full flex items-center gap-3 px-4 py-3 hover:bg-gray-50 transition-colors text-left",children:[(0,c.jsx)(s.User,{className:"w-4 h-4",style:{color:"#FF7900"}}),(0,c.jsx)("span",{style:{color:"#2d3748"},children:"Profile"})]}),(0,c.jsx)("div",{style:{borderTop:"1px solid #e2e8f0"}}),(0,c.jsxs)("button",{onClick:()=>{A(!1),af()},className:"w-full flex items-center gap-3 px-4 py-3 hover:bg-gray-50 transition-colors text-left",children:[(0,c.jsx)(t.LogOut,{className:"w-4 h-4",style:{color:"#8B1538"}}),(0,c.jsx)("span",{style:{color:"#2d3748"},children:"Logout"})]})]})]})})]})})}),(0,c.jsxs)("main",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8",children:[b?.pendingUpgradeRole&&(0,c.jsx)(N,{upgradeRequestedAt:b.upgradeRequestedAt?new Date(b.upgradeRequestedAt):void 0}),(0,c.jsx)("div",{className:"mb-8",children:(0,c.jsxs)("div",{className:"flex flex-col sm:flex-row gap-3",children:[b&&b.role===n.UserRole.GeneralUser&&!b.pendingUpgradeRole&&(0,c.jsxs)(g.Button,{onClick:()=>H(!0),className:"flex-1 sm:flex-none rounded-lg",style:{background:"linear-gradient(135deg, #FF7900 0%, #8B1538 100%)",color:"white",transition:"all 0.3s"},variant:"default",children:[(0,c.jsx)(u.Sparkles,{className:"w-4 h-4 mr-2"}),"Upgrade to Event Organizer"]}),b&&(b.role===n.UserRole.EventOrganizer||b.role===n.UserRole.Admin||b.role===n.UserRole.AdminManager)&&(0,c.jsxs)(g.Button,{onClick:()=>a.push("/events/create"),className:"flex-1 sm:flex-none rounded-lg",style:{background:"#FF7900",color:"white",transition:"all 0.3s"},variant:"default",children:[(0,c.jsx)(p.Calendar,{className:"w-4 h-4 mr-2"}),"Create Event"]})]})}),(0,c.jsx)("div",{children:(0,c.jsx)("div",{children:(0,c.jsx)("div",{className:"bg-white rounded-xl shadow-sm",children:b&&o(b.role)?(0,c.jsx)(i,{tabs:[{id:"registered",label:"My Registered Events",icon:q.Users,content:(0,c.jsx)(B,{events:J,isLoading:P,emptyMessage:"You haven't registered for any events yet",onEventClick:ad})},{id:"created",label:"My Created Events",icon:x,content:(0,c.jsx)(B,{events:M,isLoading:U,emptyMessage:"You haven't created any events yet",onEventClick:ae})},{id:"admin",label:"Admin Tasks",icon:w,content:(0,c.jsxs)("div",{children:[(0,c.jsx)("h3",{className:"text-lg font-semibold mb-4 text-[#8B1538]",children:"Pending Approvals"}),Y?(0,c.jsx)("div",{className:"text-center py-8",children:(0,c.jsx)("p",{className:"text-gray-600",children:"Loading approvals..."})}):(0,c.jsx)(F,{approvals:W,onUpdate:ab})]})},{id:"notifications",label:"Notifications",icon:y,content:(0,c.jsx)(Q,{notifications:$,isLoading:_,onNotificationClick:ac})}]}):b&&b.role===n.UserRole.EventOrganizer?(0,c.jsx)(i,{tabs:[{id:"registered",label:"My Registered Events",icon:q.Users,content:(0,c.jsx)(B,{events:J,isLoading:P,emptyMessage:"You haven't registered for any events yet",onEventClick:ad})},{id:"created",label:"My Created Events",icon:x,content:(0,c.jsx)(B,{events:M,isLoading:U,emptyMessage:"You haven't created any events yet",onEventClick:ae})},{id:"notifications",label:"Notifications",icon:y,content:(0,c.jsx)(Q,{notifications:$,isLoading:_,onNotificationClick:ac})}]}):(0,c.jsx)(i,{tabs:[{id:"registered",label:"My Registered Events",icon:q.Users,content:(0,c.jsx)(B,{events:J,isLoading:P,emptyMessage:"You haven't registered for any events yet. Browse events to join!",onEventClick:ad})},{id:"notifications",label:"Notifications",icon:y,content:(0,c.jsx)(Q,{notifications:$,isLoading:_,onNotificationClick:ac})}]})})})})]}),(0,c.jsx)(k.default,{}),(0,c.jsx)(L,{isOpen:G,onClose:()=>H(!1)})]})})}a.s(["default",()=>T],89400)}];

//# sourceMappingURL=src_app_%28dashboard%29_dashboard_page_tsx_aa560eba._.js.map