(globalThis.TURBOPACK||(globalThis.TURBOPACK=[])).push(["object"==typeof document?document.currentScript:void 0,42490,e=>{"use strict";var s=e.i(48831);class r{basePath="/auth";async login(e){return await s.apiClient.post(`${this.basePath}/login`,e)}async register(e){return await s.apiClient.post(`${this.basePath}/register`,e)}async refreshToken(e){return await s.apiClient.post(`${this.basePath}/refresh-token`,{refreshToken:e})}async logout(){await s.apiClient.post(`${this.basePath}/logout`)}async requestPasswordReset(e){return await s.apiClient.post(`${this.basePath}/forgot-password`,{email:e})}async resetPassword(e,r){return await s.apiClient.post(`${this.basePath}/reset-password`,{token:e,newPassword:r})}async verifyEmail(e){return await s.apiClient.post(`${this.basePath}/verify-email`,{token:e})}async resendVerificationEmail(e){return await s.apiClient.post(`${this.basePath}/resend-verification`,{email:e})}async testVerifyEmail(e){return await s.apiClient.post(`${this.basePath}/test/verify-user/${e}`,{})}}let a=new r;e.s(["AuthRepository",()=>r,"authRepository",0,a])},75244,e=>{"use strict";var s=e.i(43476),r=e.i(71645),a=e.i(57022);let t=r.forwardRef(({className:e,type:r="text",error:t,...i},n)=>(0,s.jsx)("input",{type:r,className:(0,a.cn)("flex h-10 w-full rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background file:border-0 file:bg-transparent file:text-sm file:font-medium placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50",t&&"border-destructive focus-visible:ring-destructive",e),ref:n,"aria-invalid":t?"true":void 0,...i}));t.displayName="Input",e.s(["Input",()=>t])},83033,e=>{"use strict";var s=e.i(43476),r=e.i(71645),a=e.i(18566),t=e.i(53145),i=e.i(94814),n=e.i(42490),d=e.i(44212),l=e.i(75244),o=e.i(21065),c=e.i(10769),x=e.i(66793);function m({token:e}){let m=(0,a.useRouter)(),[p,h]=(0,r.useState)(null),[u,f]=(0,r.useState)(null),{register:w,handleSubmit:b,formState:{errors:g,isSubmitting:j}}=(0,t.useForm)({resolver:(0,i.zodResolver)(c.resetPasswordSchema)}),y=async s=>{try{h(null),f(null);let r=await n.authRepository.resetPassword(e,s.password);f(r.message||"Your password has been reset successfully!"),setTimeout(()=>{m.push("/login")},3e3)}catch(e){e instanceof x.ApiError?h(e.message):h("An unexpected error occurred. Please try again.")}};return(0,s.jsxs)(o.Card,{className:"w-full max-w-md",children:[(0,s.jsxs)(o.CardHeader,{children:[(0,s.jsx)(o.CardTitle,{children:"Reset Password"}),(0,s.jsx)(o.CardDescription,{children:"Enter your new password below."})]}),(0,s.jsxs)("form",{onSubmit:b(y),children:[(0,s.jsxs)(o.CardContent,{className:"space-y-4",children:[u&&(0,s.jsxs)("div",{className:"p-4 bg-green-50 border border-green-200 rounded-md",children:[(0,s.jsx)("p",{className:"text-sm text-green-800",children:u}),(0,s.jsx)("p",{className:"text-sm text-green-600 mt-2",children:"Redirecting to login..."})]}),p&&(0,s.jsx)("div",{className:"p-4 bg-red-50 border border-red-200 rounded-md",children:(0,s.jsx)("p",{className:"text-sm text-red-800",children:p})}),(0,s.jsxs)("div",{className:"space-y-2",children:[(0,s.jsx)("label",{htmlFor:"password",className:"block text-sm font-medium text-gray-700",children:"New Password"}),(0,s.jsx)(l.Input,{id:"password",type:"password",placeholder:"Enter new password",error:!!g.password,"aria-invalid":g.password?"true":"false","aria-describedby":g.password?"password-error":void 0,...w("password")}),g.password&&(0,s.jsx)("p",{id:"password-error",className:"text-sm text-red-600",children:g.password.message})]}),(0,s.jsxs)("div",{className:"space-y-2",children:[(0,s.jsx)("label",{htmlFor:"confirmPassword",className:"block text-sm font-medium text-gray-700",children:"Confirm New Password"}),(0,s.jsx)(l.Input,{id:"confirmPassword",type:"password",placeholder:"Confirm new password",error:!!g.confirmPassword,"aria-invalid":g.confirmPassword?"true":"false","aria-describedby":g.confirmPassword?"confirmPassword-error":void 0,...w("confirmPassword")}),g.confirmPassword&&(0,s.jsx)("p",{id:"confirmPassword-error",className:"text-sm text-red-600",children:g.confirmPassword.message})]}),(0,s.jsxs)("div",{className:"text-xs text-gray-600 space-y-1",children:[(0,s.jsx)("p",{className:"font-medium",children:"Password must contain:"}),(0,s.jsxs)("ul",{className:"list-disc list-inside space-y-1 ml-2",children:[(0,s.jsx)("li",{children:"At least 8 characters"}),(0,s.jsx)("li",{children:"One uppercase letter"}),(0,s.jsx)("li",{children:"One lowercase letter"}),(0,s.jsx)("li",{children:"One number"}),(0,s.jsx)("li",{children:"One special character (!@#$%^&*...)"})]})]})]}),(0,s.jsx)(o.CardFooter,{children:(0,s.jsx)(d.Button,{type:"submit",className:"w-full",loading:j,disabled:j||!!u,children:j?"Resetting...":"Reset Password"})})]})]})}var p=e.i(22016),h=e.i(57688);function u(){let e=(0,a.useSearchParams)().get("token");return e?(0,s.jsx)(m,{token:e}):(0,s.jsxs)(o.Card,{className:"w-full max-w-md",children:[(0,s.jsxs)(o.CardHeader,{children:[(0,s.jsx)(o.CardTitle,{children:"Invalid Reset Link"}),(0,s.jsx)(o.CardDescription,{children:"The password reset link is invalid or missing the required token."})]}),(0,s.jsxs)(o.CardContent,{className:"space-y-4",children:[(0,s.jsx)("div",{className:"p-4 bg-red-50 border border-red-200 rounded-md",children:(0,s.jsx)("p",{className:"text-sm text-red-800",children:"This password reset link appears to be invalid. Please request a new password reset."})}),(0,s.jsxs)("div",{className:"flex flex-col space-y-2",children:[(0,s.jsx)(p.default,{href:"/forgot-password",className:"text-primary hover:underline text-sm text-center",children:"Request New Password Reset"}),(0,s.jsx)(p.default,{href:"/login",className:"text-primary hover:underline text-sm text-center",children:"Back to Login"})]})]})]})}function f(){return(0,s.jsx)("div",{className:"min-h-screen flex items-center justify-center p-5",style:{backgroundImage:"url(/images/batik-sri-lanka.jpg)",backgroundSize:"cover",backgroundPosition:"center",backgroundRepeat:"no-repeat"},children:(0,s.jsxs)("div",{className:"relative z-10 w-full max-w-[1000px] grid grid-cols-1 md:grid-cols-2 bg-white rounded-[20px] overflow-hidden shadow-[0_20px_60px_rgba(0,0,0,0.3)]",children:[(0,s.jsxs)("div",{className:"hidden md:flex flex-col justify-center text-white px-10 py-[60px] relative overflow-hidden",style:{background:"linear-gradient(135deg, #FF7900 0%, #8B1538 50%, #006400 100%)"},children:[(0,s.jsx)("div",{className:"absolute -top-1/2 -right-1/2 w-[200%] h-[200%] pointer-events-none",style:{background:"radial-gradient(circle, rgba(255,255,255,0.1) 0%, transparent 70%)",animation:"pulse 8s ease-in-out infinite"}}),(0,s.jsx)("div",{className:"relative z-10 mb-10",children:(0,s.jsxs)("div",{className:"flex items-center text-[2rem] font-bold mb-5",children:[(0,s.jsx)(h.default,{src:"/lankaconnect-logo-transparent.png",alt:"LankaConnect",width:80,height:80,className:"mr-5",priority:!0}),"LankaConnect"]})}),(0,s.jsxs)("div",{className:"relative z-10",children:[(0,s.jsx)("h1",{className:"text-[2.5rem] font-bold mb-5 drop-shadow-[2px_2px_4px_rgba(0,0,0,0.2)]",children:"Create New Password"}),(0,s.jsx)("p",{className:"text-[1.1rem] opacity-95 leading-[1.6] mb-[30px]",children:"You're almost there! Create a strong, secure password to protect your account and continue connecting with the Sri Lankan American community."})]}),(0,s.jsxs)("div",{className:"relative z-10",children:[(0,s.jsxs)("div",{className:"flex items-center mb-[15px] p-[15px] bg-white/10 backdrop-blur-[10px] rounded-[10px]",children:[(0,s.jsx)("div",{className:"w-10 h-10 rounded-[10px] flex items-center justify-center text-[1.3rem] mr-[15px] flex-shrink-0",style:{background:"#FFD700"},children:"ðŸ”"}),(0,s.jsxs)("div",{children:[(0,s.jsx)("strong",{className:"block",children:"Secure & Safe"}),(0,s.jsx)("div",{className:"text-[0.9rem] opacity-90",children:"Your password is encrypted"})]})]}),(0,s.jsxs)("div",{className:"flex items-center mb-[15px] p-[15px] bg-white/10 backdrop-blur-[10px] rounded-[10px]",children:[(0,s.jsx)("div",{className:"w-10 h-10 rounded-[10px] flex items-center justify-center text-[1.3rem] mr-[15px] flex-shrink-0",style:{background:"#FFD700"},children:"âœ…"}),(0,s.jsxs)("div",{children:[(0,s.jsx)("strong",{className:"block",children:"Strong Password"}),(0,s.jsx)("div",{className:"text-[0.9rem] opacity-90",children:"Use 8+ characters with variety"})]})]}),(0,s.jsxs)("div",{className:"flex items-center mb-[15px] p-[15px] bg-white/10 backdrop-blur-[10px] rounded-[10px]",children:[(0,s.jsx)("div",{className:"w-10 h-10 rounded-[10px] flex items-center justify-center text-[1.3rem] mr-[15px] flex-shrink-0",style:{background:"#FFD700"},children:"ðŸŽ¯"}),(0,s.jsxs)("div",{children:[(0,s.jsx)("strong",{className:"block",children:"Instant Access"}),(0,s.jsx)("div",{className:"text-[0.9rem] opacity-90",children:"Login immediately after reset"})]})]})]})]}),(0,s.jsxs)("div",{className:"flex flex-col justify-center px-[50px] py-[60px]",style:{background:"linear-gradient(to bottom, #ffffff 0%, #fef9f5 100%)"},children:[(0,s.jsxs)("div",{className:"mb-8 md:hidden text-center",children:[(0,s.jsx)(h.default,{src:"/lankaconnect-logo-transparent.png",alt:"LankaConnect",width:60,height:60,className:"mx-auto mb-2",priority:!0}),(0,s.jsx)("span",{className:"text-2xl font-bold",style:{color:"#8B1538"},children:"LankaConnect"})]}),(0,s.jsx)(r.Suspense,{fallback:(0,s.jsx)(o.Card,{className:"w-full",children:(0,s.jsx)(o.CardHeader,{children:(0,s.jsx)(o.CardTitle,{children:"Loading..."})})}),children:(0,s.jsx)(u,{})})]})]})})}e.s(["default",()=>f],83033)}]);