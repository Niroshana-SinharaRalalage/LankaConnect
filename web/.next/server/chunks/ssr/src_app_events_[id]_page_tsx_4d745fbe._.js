module.exports=[53033,a=>{"use strict";var b=a.i(87924),c=a.i(72131),d=a.i(50944),e=a.i(210),f=a.i(41675),g=a.i(24987),h=a.i(60246),i=a.i(90166),j=a.i(41710),k=a.i(92e3),l=a.i(50388),m=a.i(93003),n=a.i(50253),o=a.i(42043),p=a.i(63535),q=a.i(74934),r=a.i(55100),s=a.i(13858),t=a.i(72988),u=a.i(23482);function v({eventId:a,spotsLeft:d,isFree:e,ticketPrice:f,hasDualPricing:g,adultPrice:h,childPrice:i,childAgeLimit:k,hasGroupPricing:l,groupPricingTiers:m,isProcessing:n,onSubmit:p,error:q}){let{user:r}=(0,t.useAuthStore)(),{profile:v,loadProfile:w}=(0,u.useProfileStore)(),[x,y]=(0,c.useState)(1),[z,A]=(0,c.useState)(""),[B,C]=(0,c.useState)(""),[D,E]=(0,c.useState)(""),[F,G]=(0,c.useState)([{name:"",age:""}]),[H,I]=(0,c.useState)({address:!1,email:!1,phoneNumber:!1,attendees:[]});(0,c.useEffect)(()=>{r?.userId&&!v&&w(r.userId)},[r?.userId,v,w]),(0,c.useEffect)(()=>{r&&v&&(C(v.email),E(v.phoneNumber||""),v.location&&A([v.location.city,v.location.state,v.location.zipCode].filter(Boolean).join(", ")),G([{name:`${v.firstName} ${v.lastName}`.trim(),age:""}]))},[r,v]),(0,c.useEffect)(()=>{G(Array.from({length:x},(a,b)=>F[b]||{name:"",age:""})),I(a=>({...a,attendees:Array(x).fill(!1)}))},[x]);let J=(a,b,c)=>{let d=[...F];d[a]={...d[a],[b]:"age"===b?""===c?"":Number(c):c},G(d)},K=a=>{let b=[...H.attendees];b[a]=!0,I(a=>({...a,attendees:b}))},L=()=>{if(!l||!m||0===m.length)return null;for(let a of[...m].sort((a,b)=>a.minAttendees-b.minAttendees))if(x>=a.minAttendees&&(!a.maxAttendees||x<=a.maxAttendees))return a;return null},M={address:!H.address||r||z.trim()?"":"Address is required",email:!H.email||r||B.trim()&&/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(B)?"":"Valid email is required",phoneNumber:!H.phoneNumber||r||D.trim()&&/^\+?[\d\s\-()]+$/.test(D)?"":"Valid phone number is required",attendees:F.map((a,b)=>H.attendees[b]?{name:a.name.trim()?"":"Name is required",age:!a.age||a.age<1||a.age>120?"Valid age is required (1-120)":""}:{name:"",age:""})},N=r?F.every(a=>a.name.trim()&&a.age&&a.age>=1&&a.age<=120):z.trim()&&B.trim()&&/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(B)&&D.trim()&&/^\+?[\d\s\-()]+$/.test(D)&&F.every(a=>a.name.trim()&&a.age&&a.age>=1&&a.age<=120),O=async a=>{if(a.preventDefault(),I({address:!0,email:!0,phoneNumber:!0,attendees:Array(x).fill(!0)}),!N)return;let b=F.map(a=>({name:a.name.trim(),age:Number(a.age)}));if(r){let a={userId:r.userId,attendees:b,email:B.trim()||void 0,phoneNumber:D.trim()||void 0,address:z.trim()||void 0};await p(a)}else{let a={attendees:b,address:z.trim(),email:B.trim(),phoneNumber:D.trim()};await p(a)}},P=(()=>{if(e)return 0;if(l&&m&&m.length>0){let a=L();return a?a.pricePerPerson*x:0}return g&&h&&i&&k?F.reduce((a,b)=>""===b.age||0===b.age?a:a+(Number(b.age)<k?i:h),0):f?f*x:0})(),Q=l?L():null;return(0,b.jsxs)("form",{onSubmit:O,className:"space-y-4",children:[(0,b.jsxs)("div",{children:[(0,b.jsx)("label",{className:"block text-sm font-medium mb-2 text-neutral-700",children:"Number of Attendees"}),(0,b.jsx)(s.Input,{type:"number",min:"1",max:Math.min(10,d),value:x,onChange:a=>y(parseInt(a.target.value)||1),disabled:n,className:"w-full"}),(0,b.jsx)("p",{className:"text-xs text-neutral-500 mt-1",children:"You'll provide name and age for each attendee below"})]}),(0,b.jsxs)("div",{className:"border-t pt-4",children:[(0,b.jsx)("h4",{className:"text-sm font-semibold mb-3 text-neutral-700",children:"Attendee Information"}),!r&&(0,b.jsx)("p",{className:"text-xs text-neutral-500 mb-4",children:"Please provide name and age for each attendee"}),r&&v&&(0,b.jsx)("p",{className:"text-xs text-neutral-500 mb-4",children:"First attendee pre-populated from your profile. You can edit if needed."}),(0,b.jsx)("div",{className:"space-y-4",children:F.map((a,c)=>(0,b.jsxs)("div",{className:"p-4 bg-neutral-50 rounded-lg border border-neutral-200",children:[(0,b.jsxs)("h5",{className:"text-sm font-medium mb-3 text-neutral-700",children:["Attendee ",c+1]}),(0,b.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[(0,b.jsxs)("div",{children:[(0,b.jsxs)("label",{className:"block text-sm font-medium mb-2 text-neutral-700",children:["Full Name ",(0,b.jsx)("span",{className:"text-red-500",children:"*"})]}),(0,b.jsx)(s.Input,{type:"text",value:a.name,onChange:a=>J(c,"name",a.target.value),onBlur:()=>K(c),error:!!M.attendees[c]?.name,disabled:n,placeholder:"Enter full name",className:"w-full"}),M.attendees[c]?.name&&(0,b.jsx)("p",{className:"text-xs text-red-600 mt-1",children:M.attendees[c].name})]}),(0,b.jsxs)("div",{children:[(0,b.jsxs)("label",{className:"block text-sm font-medium mb-2 text-neutral-700",children:["Age ",(0,b.jsx)("span",{className:"text-red-500",children:"*"}),g&&k&&(0,b.jsxs)("span",{className:"text-xs text-neutral-500 ml-2",children:["(Under ",k," = child price)"]})]}),(0,b.jsx)(s.Input,{type:"number",min:"1",max:"120",value:a.age,onChange:a=>J(c,"age",a.target.value?parseInt(a.target.value):""),onBlur:()=>K(c),error:!!M.attendees[c]?.age,disabled:n,placeholder:"Age",className:"w-full"}),M.attendees[c]?.age&&(0,b.jsx)("p",{className:"text-xs text-red-600 mt-1",children:M.attendees[c].age})]})]})]},c))})]}),!r&&(0,b.jsxs)("div",{className:"border-t pt-4",children:[(0,b.jsx)("h4",{className:"text-sm font-semibold mb-3 text-neutral-700",children:"Contact Information"}),(0,b.jsx)("p",{className:"text-xs text-neutral-500 mb-4",children:"We'll use this information to send you event updates and confirmations."}),(0,b.jsxs)("div",{className:"mb-4",children:[(0,b.jsxs)("label",{className:"block text-sm font-medium mb-2 text-neutral-700",children:["Address ",(0,b.jsx)("span",{className:"text-red-500",children:"*"})]}),(0,b.jsx)(s.Input,{type:"text",value:z,onChange:a=>A(a.target.value),onBlur:()=>I({...H,address:!0}),error:!!M.address,disabled:n,placeholder:"Enter your address",className:"w-full"}),M.address&&(0,b.jsx)("p",{className:"text-xs text-red-600 mt-1",children:M.address})]}),(0,b.jsxs)("div",{className:"mb-4",children:[(0,b.jsxs)("label",{className:"block text-sm font-medium mb-2 text-neutral-700",children:["Email ",(0,b.jsx)("span",{className:"text-red-500",children:"*"})]}),(0,b.jsx)(s.Input,{type:"email",value:B,onChange:a=>C(a.target.value),onBlur:()=>I({...H,email:!0}),error:!!M.email,disabled:n,placeholder:"your.email@example.com",className:"w-full"}),M.email&&(0,b.jsx)("p",{className:"text-xs text-red-600 mt-1",children:M.email})]}),(0,b.jsxs)("div",{children:[(0,b.jsxs)("label",{className:"block text-sm font-medium mb-2 text-neutral-700",children:["Phone Number ",(0,b.jsx)("span",{className:"text-red-500",children:"*"})]}),(0,b.jsx)(s.Input,{type:"tel",value:D,onChange:a=>E(a.target.value),onBlur:()=>I({...H,phoneNumber:!0}),error:!!M.phoneNumber,disabled:n,placeholder:"+1-123-456-7890",className:"w-full"}),M.phoneNumber&&(0,b.jsx)("p",{className:"text-xs text-red-600 mt-1",children:M.phoneNumber})]})]}),r&&v&&(0,b.jsxs)("div",{className:"border-t pt-4",children:[(0,b.jsx)("h4",{className:"text-sm font-semibold mb-3 text-neutral-700",children:"Contact Details"}),(0,b.jsxs)("div",{className:"bg-neutral-50 p-4 rounded-lg space-y-2 text-sm",children:[(0,b.jsxs)("div",{children:[(0,b.jsx)("span",{className:"font-medium",children:"Email:"})," ",v.email]}),v.phoneNumber&&(0,b.jsxs)("div",{children:[(0,b.jsx)("span",{className:"font-medium",children:"Phone:"})," ",v.phoneNumber]}),z&&(0,b.jsxs)("div",{children:[(0,b.jsx)("span",{className:"font-medium",children:"Address:"})," ",z]})]}),(0,b.jsx)("p",{className:"text-xs text-neutral-500 mt-2",children:"Contact details from your profile"})]}),!e&&P>0&&(0,b.jsxs)("div",{className:"p-4 bg-neutral-50 rounded-lg border-t-2 border-orange-500",children:[l&&Q&&(0,b.jsxs)("div",{className:"mb-3 space-y-2 text-sm",children:[(0,b.jsx)("h5",{className:"font-medium text-neutral-700",children:"Group Pricing Applied:"}),(0,b.jsxs)("div",{className:"flex justify-between items-center p-3 bg-white rounded-lg border border-orange-200",children:[(0,b.jsxs)("div",{children:[(0,b.jsx)("span",{className:"font-medium text-orange-600",children:Q.tierRange}),(0,b.jsx)("span",{className:"text-neutral-600 ml-2",children:"attendees"})]}),(0,b.jsxs)("div",{className:"text-right",children:[(0,b.jsxs)("div",{className:"text-sm font-medium text-neutral-700",children:["$",Q.pricePerPerson.toFixed(2)," per person"]}),(0,b.jsxs)("div",{className:"text-xs text-neutral-500",children:[x," Ã— $",Q.pricePerPerson.toFixed(2)]})]})]})]}),g&&h&&i&&k&&(0,b.jsxs)("div",{className:"mb-3 space-y-2 text-sm",children:[(0,b.jsx)("h5",{className:"font-medium text-neutral-700",children:"Price Breakdown:"}),F.map((a,c)=>{if(!a.age)return null;let d=Number(a.age),e=d<k?i:h,f=d<k?"Child":"Adult";return(0,b.jsxs)("div",{className:"flex justify-between text-xs text-neutral-600",children:[(0,b.jsxs)("span",{children:[a.name||`Attendee ${c+1}`," (",f,", Age ",d,")"]}),(0,b.jsxs)("span",{children:["$",e.toFixed(2)]})]},c)})]}),(0,b.jsxs)("div",{className:"flex justify-between items-center border-t pt-3",children:[(0,b.jsx)("span",{className:"text-base font-medium text-neutral-700",children:"Total"}),(0,b.jsxs)("span",{className:"text-xl font-bold",style:{color:"#8B1538"},children:["$",P.toFixed(2)]})]})]}),q&&(0,b.jsx)("div",{className:"p-4 bg-red-50 border border-red-200 rounded-lg",children:(0,b.jsx)("p",{className:"text-sm text-red-600",children:q})}),(0,b.jsx)(o.Button,{type:"submit",disabled:n||!N,className:"w-full text-lg py-6",style:{background:"#FF7900"},children:n?(0,b.jsxs)(b.Fragment,{children:[(0,b.jsx)(j.Clock,{className:"h-5 w-5 mr-2 animate-spin"}),"Processing..."]}):e?"Register for Free":"Continue to Payment"}),!r&&(0,b.jsxs)("p",{className:"text-sm text-center text-neutral-500",children:["Have an account? ",(0,b.jsx)("a",{href:"/login",className:"text-orange-600 hover:underline",children:"Sign in"})," to register faster"]})]})}var w=a.i(33508),x=a.i(25015);let y=(0,a.i(70106).default)("chevron-left",[["path",{d:"m15 18-6-6 6-6",key:"1wnfg3"}]]);var z=a.i(50522),A=a.i(26371);function B({images:a=[],videos:d=[],className:e=""}){let[f,g]=(0,c.useState)(!1),[h,i]=(0,c.useState)(0),[j,k]=(0,c.useState)("image"),l=a.length,m=d.length;return 0===l+m?null:(0,b.jsxs)(b.Fragment,{children:[(0,b.jsxs)("div",{className:`space-y-6 ${e}`,children:[l>0&&(0,b.jsxs)("div",{children:[(0,b.jsxs)("h3",{className:"text-lg font-semibold text-neutral-900 dark:text-neutral-100 mb-3",children:["Photos (",l,")"]}),(0,b.jsx)("div",{className:"grid grid-cols-2 sm:grid-cols-3 md:grid-cols-4 gap-4",children:[...a].sort((a,b)=>a.displayOrder-b.displayOrder).map((a,c)=>(0,b.jsxs)("button",{onClick:()=>{i(c),k("image"),g(!0)},className:"relative aspect-square rounded-lg overflow-hidden bg-neutral-100 dark:bg-neutral-800 hover:opacity-90 transition-opacity group",children:[(0,b.jsx)("img",{src:a.imageUrl,alt:`Event photo ${a.displayOrder}`,className:"w-full h-full object-cover"}),(0,b.jsx)("div",{className:"absolute inset-0 bg-black/0 group-hover:bg-black/10 transition-colors"}),(0,b.jsx)("div",{className:"absolute top-2 left-2 bg-black/50 text-white text-xs px-2 py-1 rounded",children:a.displayOrder})]},a.id))})]}),m>0&&(0,b.jsxs)("div",{children:[(0,b.jsxs)("h3",{className:"text-lg font-semibold text-neutral-900 dark:text-neutral-100 mb-3",children:["Videos (",m,")"]}),(0,b.jsx)("div",{className:"grid grid-cols-1 sm:grid-cols-2 md:grid-cols-3 gap-4",children:[...d].sort((a,b)=>a.displayOrder-b.displayOrder).map((a,c)=>(0,b.jsxs)("button",{onClick:()=>{i(c),k("video"),g(!0)},className:"relative aspect-video rounded-lg overflow-hidden bg-neutral-100 dark:bg-neutral-800 hover:opacity-90 transition-opacity group",children:[(0,b.jsx)("img",{src:a.thumbnailUrl,alt:`Video ${a.displayOrder}`,className:"w-full h-full object-cover"}),(0,b.jsx)("div",{className:"absolute inset-0 bg-black/30 group-hover:bg-black/40 transition-colors flex items-center justify-center",children:(0,b.jsx)("div",{className:"bg-white/90 rounded-full p-4",children:(0,b.jsx)(x.Play,{className:"h-8 w-8 text-neutral-900",fill:"currentColor"})})}),(0,b.jsx)("div",{className:"absolute top-2 left-2 bg-black/50 text-white text-xs px-2 py-1 rounded",children:a.displayOrder})]},a.id))})]})]}),(0,b.jsx)(A.Dialog,{open:f,onOpenChange:g,children:(0,b.jsx)(A.DialogContent,{className:"max-w-7xl w-full h-[90vh] p-0 bg-black/95",children:(0,b.jsxs)("div",{className:"relative w-full h-full flex items-center justify-center",children:[(0,b.jsx)("button",{onClick:()=>g(!1),className:"absolute top-4 right-4 z-50 p-2 rounded-full bg-white/10 hover:bg-white/20 transition-colors","aria-label":"Close lightbox",children:(0,b.jsx)(w.X,{className:"h-6 w-6 text-white"})}),("image"===j&&l>1||"video"===j&&m>1)&&(0,b.jsxs)(b.Fragment,{children:[(0,b.jsx)("button",{onClick:()=>{"image"===j?i(a=>0===a?l-1:a-1):i(a=>0===a?m-1:a-1)},className:"absolute left-4 z-50 p-3 rounded-full bg-white/10 hover:bg-white/20 transition-colors","aria-label":"Previous media",children:(0,b.jsx)(y,{className:"h-6 w-6 text-white"})}),(0,b.jsx)("button",{onClick:()=>{"image"===j?i(a=>a===l-1?0:a+1):i(a=>a===m-1?0:a+1)},className:"absolute right-4 z-50 p-3 rounded-full bg-white/10 hover:bg-white/20 transition-colors","aria-label":"Next media",children:(0,b.jsx)(z.ChevronRight,{className:"h-6 w-6 text-white"})})]}),(0,b.jsxs)("div",{className:"w-full h-full flex items-center justify-center p-12",children:["image"===j&&a[h]&&(0,b.jsx)("img",{src:a[h].imageUrl,alt:`Event photo ${a[h].displayOrder}`,className:"max-w-full max-h-full object-contain"}),"video"===j&&d[h]&&(0,b.jsx)("video",{src:d[h].videoUrl,controls:!0,autoPlay:!0,className:"max-w-full max-h-full",poster:d[h].thumbnailUrl,children:"Your browser does not support the video tag."})]}),(0,b.jsxs)("div",{className:"absolute bottom-4 left-1/2 -translate-x-1/2 bg-white/10 text-white text-sm px-4 py-2 rounded-full",children:[h+1," / ","image"===j?l:m]})]})})})]})}var C=a.i(69212),D=a.i(29312);function E({params:a}){let{id:s}=(0,c.use)(a),u=(0,d.useRouter)(),{user:w}=(0,t.useAuthStore)(),[x,y]=(0,c.useState)(!1),[z,A]=(0,c.useState)(null),[E,F]=(0,c.useState)(!1),[G,H]=(0,c.useState)(!1),[I,J]=(0,c.useState)(!1),[K,L]=(0,c.useState)(null),[M,N]=(0,c.useState)(!1),{data:O,isLoading:P,error:Q}=(0,q.useEventById)(s),{data:R,isLoading:S}=(0,q.useUserRsvpForEvent)(w?.userId?s:void 0),T=!!R,{data:U,isLoading:V}=(0,q.useUserRegistrationDetails)(w?.userId?s:void 0,T),W=(0,q.useRsvpToEvent)(),X={[C.EventCategory.Religious]:"Religious",[C.EventCategory.Cultural]:"Cultural",[C.EventCategory.Community]:"Community",[C.EventCategory.Educational]:"Educational",[C.EventCategory.Social]:"Social",[C.EventCategory.Business]:"Business",[C.EventCategory.Charity]:"Charity",[C.EventCategory.Entertainment]:"Entertainment"},Y=async a=>{if(O)try{if(y(!0),A(null),"userId"in a){let b=`/events/payment/success?eventId=${s}`,c=`/events/payment/cancel?eventId=${s}`,d=await W.mutateAsync({eventId:s,userId:a.userId,...a.attendees?{attendees:a.attendees}:{quantity:a.quantity||1},email:a.email,phoneNumber:a.phoneNumber,address:a.address,successUrl:b,cancelUrl:c});if(d){window.location.href=d;return}alert("Registration successful!"),window.location.reload()}else await D.eventsRepository.registerAnonymous(s,a),alert("Registration successful! We've sent a confirmation email to "+a.email),window.location.reload();y(!1)}catch(a){console.error("Registration failed:",a),A(a instanceof Error?a.message:"Failed to register. Please try again."),y(!1)}},Z=async()=>{if(!w?.userId)return void u.push("/login?redirect="+encodeURIComponent(`/events/${s}`));try{F(!0),A(null),await D.eventsRepository.addToWaitingList(s),F(!1),alert("Successfully joined waitlist! You will be notified when a spot becomes available.")}catch(a){console.error("Failed to join waitlist:",a),A(a instanceof Error?a.message:"Failed to join waitlist. Please try again."),F(!1)}},$=async()=>{if(O&&O.organizerId===w?.userId)try{H(!0),A(null),await D.eventsRepository.publishEvent(s),H(!1),window.location.reload()}catch(a){console.error("Failed to publish event:",a),A(a instanceof Error?a.message:"Failed to publish event. Please try again."),H(!1)}};if(P)return(0,b.jsxs)("div",{className:"min-h-screen bg-gradient-to-b from-neutral-50 to-white",children:[(0,b.jsx)(l.Header,{}),(0,b.jsx)("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-12",children:(0,b.jsx)(n.Card,{className:"animate-pulse",children:(0,b.jsxs)(n.CardContent,{className:"p-12",children:[(0,b.jsx)("div",{className:"h-8 bg-neutral-200 rounded w-3/4 mb-4"}),(0,b.jsx)("div",{className:"h-4 bg-neutral-200 rounded w-1/2 mb-8"}),(0,b.jsx)("div",{className:"h-64 bg-neutral-200 rounded mb-8"}),(0,b.jsx)("div",{className:"h-32 bg-neutral-200 rounded"})]})})}),(0,b.jsx)(m.default,{})]});if(Q||!O)return(0,b.jsxs)("div",{className:"min-h-screen bg-gradient-to-b from-neutral-50 to-white",children:[(0,b.jsx)(l.Header,{}),(0,b.jsx)("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-12",children:(0,b.jsx)(n.Card,{children:(0,b.jsxs)(n.CardContent,{className:"p-12 text-center",children:[(0,b.jsx)(k.AlertCircle,{className:"h-16 w-16 mx-auto mb-4 text-destructive"}),(0,b.jsx)("h3",{className:"text-xl font-semibold text-neutral-900 mb-2",children:"Event Not Found"}),(0,b.jsx)("p",{className:"text-neutral-500 mb-6",children:"The event you're looking for doesn't exist or has been removed."}),(0,b.jsx)(o.Button,{onClick:()=>u.push("/events"),children:"Back to Events"})]})})}),(0,b.jsx)(m.default,{})]});let _=new Date(O.startDate),aa=new Date(O.endDate),ab=_.toLocaleDateString("en-US",{month:"long",day:"numeric",year:"numeric"}),ac=_.toLocaleTimeString("en-US",{hour:"numeric",minute:"2-digit"}),ad=aa.toLocaleTimeString("en-US",{hour:"numeric",minute:"2-digit"}),ae=O.currentRegistrations>=O.capacity,af=O.capacity-O.currentRegistrations;return(0,b.jsxs)("div",{className:"min-h-screen bg-gradient-to-b from-neutral-50 to-white",children:[(0,b.jsx)(l.Header,{}),(0,b.jsx)("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-6",children:(0,b.jsxs)("div",{className:"flex items-center justify-between gap-4",children:[(0,b.jsxs)(o.Button,{variant:"outline",onClick:()=>u.push("/events"),className:"flex items-center gap-2",children:[(0,b.jsx)(e.ArrowLeft,{className:"h-4 w-4"}),"Back to Events"]}),O&&w&&O.organizerId===w.userId&&(0,b.jsx)("div",{className:"flex items-center gap-3",children:O.status===C.EventStatus.Draft&&(0,b.jsx)(o.Button,{onClick:$,disabled:G,className:"flex items-center gap-2",style:{background:"#10B981"},children:G?"Publishing...":"Publish Event"})})]})}),(0,b.jsxs)("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 pb-12",children:[(0,b.jsxs)(n.Card,{className:"overflow-hidden",children:[O.images&&O.images.length>0&&(0,b.jsxs)("div",{className:"relative h-96 bg-gradient-to-br from-orange-500 to-rose-500",children:[(0,b.jsx)("img",{src:O.images[0].imageUrl,alt:O.title,className:"w-full h-full object-cover"}),(0,b.jsx)("div",{className:"absolute top-4 right-4",children:(0,b.jsx)(p.Badge,{variant:"default",className:"text-white shadow-lg text-base px-4 py-2",style:{background:"#8B1538"},children:X[O.category]})})]}),(0,b.jsxs)(n.CardContent,{className:"p-8",children:[(0,b.jsxs)("div",{className:"mb-8",children:[(0,b.jsx)("h1",{className:"text-4xl font-bold text-neutral-900 mb-4",children:O.title}),(0,b.jsx)("p",{className:"text-lg text-neutral-600 leading-relaxed whitespace-pre-wrap",children:O.description})]}),(0,b.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6 mb-8",children:[(0,b.jsxs)("div",{className:"flex items-start gap-3",children:[(0,b.jsx)("div",{className:"p-3 rounded-lg",style:{background:"#FFF4ED"},children:(0,b.jsx)(f.Calendar,{className:"h-6 w-6",style:{color:"#FF7900"}})}),(0,b.jsxs)("div",{children:[(0,b.jsx)("p",{className:"text-sm font-medium text-neutral-500",children:"Date & Time"}),(0,b.jsx)("p",{className:"text-base font-semibold text-neutral-900",children:ab}),(0,b.jsxs)("p",{className:"text-sm text-neutral-600",children:[ac," - ",ad]})]})]}),O.city&&O.state&&(0,b.jsxs)("div",{className:"flex items-start gap-3",children:[(0,b.jsx)("div",{className:"p-3 rounded-lg",style:{background:"#FFF4ED"},children:(0,b.jsx)(g.MapPin,{className:"h-6 w-6",style:{color:"#FF7900"}})}),(0,b.jsxs)("div",{children:[(0,b.jsx)("p",{className:"text-sm font-medium text-neutral-500",children:"Location"}),(0,b.jsxs)("p",{className:"text-base font-semibold text-neutral-900",children:[O.city,", ",O.state]}),O.address&&(0,b.jsx)("p",{className:"text-sm text-neutral-600",children:O.address})]})]}),(0,b.jsxs)("div",{className:"flex items-start gap-3",children:[(0,b.jsx)("div",{className:"p-3 rounded-lg",style:{background:"#FFF4ED"},children:(0,b.jsx)(h.Users,{className:"h-6 w-6",style:{color:"#FF7900"}})}),(0,b.jsxs)("div",{children:[(0,b.jsx)("p",{className:"text-sm font-medium text-neutral-500",children:"Capacity"}),(0,b.jsxs)("p",{className:"text-base font-semibold text-neutral-900",children:[O.currentRegistrations," / ",O.capacity," registered"]}),ae?(0,b.jsx)(p.Badge,{className:"mt-1 bg-red-600 text-white",children:"Event Full"}):(0,b.jsxs)("p",{className:"text-sm text-neutral-600",children:[af," ",1===af?"spot":"spots"," remaining"]})]})]}),(0,b.jsxs)("div",{className:"flex items-start gap-3",children:[(0,b.jsx)("div",{className:"p-3 rounded-lg",style:{background:"#FFF4ED"},children:(0,b.jsx)(i.DollarSign,{className:"h-6 w-6",style:{color:"#FF7900"}})}),(0,b.jsxs)("div",{children:[(0,b.jsx)("p",{className:"text-sm font-medium text-neutral-500",children:"Pricing"}),O.isFree?(0,b.jsx)("p",{className:"text-base font-semibold",style:{color:"#8B1538"},children:"Free Event"}):O.hasDualPricing?(0,b.jsxs)(b.Fragment,{children:[(0,b.jsxs)("p",{className:"text-base font-semibold",style:{color:"#8B1538"},children:["Adult: $",O.adultPriceAmount?.toFixed(2)]}),(0,b.jsxs)("p",{className:"text-base font-semibold",style:{color:"#8B1538"},children:["Child (under ",O.childAgeLimit,"): $",O.childPriceAmount?.toFixed(2)]}),(0,b.jsx)("p",{className:"text-sm text-neutral-600",children:1===O.adultPriceCurrency?"USD":"LKR"})]}):(0,b.jsxs)(b.Fragment,{children:[(0,b.jsxs)("p",{className:"text-base font-semibold",style:{color:"#8B1538"},children:["$",O.ticketPriceAmount?.toFixed(2)," per person"]}),(0,b.jsx)("p",{className:"text-sm text-neutral-600",children:1===O.ticketPriceCurrency?"USD":"LKR"})]})]})]})]}),(O.images&&O.images.length>0||O.videos&&O.videos.length>0)&&(0,b.jsx)("div",{className:"mb-8",children:(0,b.jsx)(B,{images:O.images,videos:O.videos})}),(0,b.jsxs)(n.Card,{className:"border-2",style:{borderColor:"#FF7900"},children:[(0,b.jsxs)(n.CardHeader,{children:[(0,b.jsx)(n.CardTitle,{children:T?"Your Registration":"Register for this Event"}),(0,b.jsx)(n.CardDescription,{children:T?"You are already registered for this event!":ae?"This event is currently full. Join the waitlist to be notified when spots become available.":"Reserve your spot now!"})]}),(0,b.jsx)(n.CardContent,{children:T?(0,b.jsxs)("div",{className:"space-y-4",children:[(0,b.jsxs)("div",{className:"p-4 bg-green-50 dark:bg-green-900/20 border border-green-200 dark:border-green-800 rounded-lg",children:[(0,b.jsxs)("div",{className:"flex items-center gap-2 mb-3",children:[(0,b.jsx)("svg",{className:"h-5 w-5 text-green-600 dark:text-green-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,b.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M5 13l4 4L19 7"})}),(0,b.jsx)("h3",{className:"text-lg font-semibold text-green-900 dark:text-green-100",children:"You're Registered!"})]}),(0,b.jsx)("p",{className:"text-sm text-green-800 dark:text-green-200 mb-3",children:"You have successfully registered for this event. We look forward to seeing you there!"}),(0,b.jsxs)("div",{className:"mt-3 pt-3 border-t border-green-200 dark:border-green-700",children:[(0,b.jsx)("h4",{className:"text-sm font-medium text-green-900 dark:text-green-100 mb-2",children:"Registration Details:"}),V?(0,b.jsx)("p",{className:"text-sm text-green-800 dark:text-green-200",children:"Loading registration details..."}):U&&U.attendees&&U.attendees.length>0?(0,b.jsxs)("div",{className:"space-y-2",children:[(0,b.jsxs)("p",{className:"text-sm font-medium text-green-900 dark:text-green-100",children:["Attendees (",U.attendees.length,"):"]}),(0,b.jsx)("ul",{className:"space-y-1",children:U.attendees.map((a,c)=>(0,b.jsxs)("li",{className:"text-sm text-green-800 dark:text-green-200 pl-3",children:["â€¢ ",a.name," (Age: ",a.age,")"]},c))}),U.contactEmail&&(0,b.jsxs)("p",{className:"text-xs text-green-700 dark:text-green-300 mt-2",children:["Contact: ",U.contactEmail]})]}):(0,b.jsx)("div",{className:"text-sm text-green-800 dark:text-green-200",children:(0,b.jsxs)("p",{children:["Number of attendees: ",U?.quantity||R.currentRegistrations||1]})})]})]}),K&&(0,b.jsx)("div",{className:"mb-4 p-4 bg-red-50 border border-red-200 rounded-lg",children:(0,b.jsxs)("div",{className:"flex items-start gap-2",children:[(0,b.jsx)(k.AlertCircle,{className:"h-5 w-5 text-red-600 flex-shrink-0 mt-0.5"}),(0,b.jsxs)("div",{className:"flex-1",children:[(0,b.jsx)("h4",{className:"text-sm font-semibold text-red-900 mb-1",children:"Failed to Cancel Registration"}),(0,b.jsx)("p",{className:"text-sm text-red-700",children:K}),(0,b.jsx)("p",{className:"text-xs text-red-600 mt-2",children:"Please try again or contact support if the problem persists."})]})]})}),(0,b.jsxs)("div",{className:"flex gap-3",children:[(0,b.jsx)(o.Button,{variant:"outline",className:"flex-1",onClick:()=>{alert("Edit registration feature coming soon! You will be able to update attendee names and ages.")},children:"Edit Registration"}),I?(0,b.jsxs)("div",{className:"flex flex-1 gap-2",children:[(0,b.jsx)(o.Button,{variant:"outline",className:"flex-1",onClick:()=>{console.log("[CancelRsvp] User cancelled the cancellation"),J(!1),L(null),N(!1)},children:"Keep Registration"}),(0,b.jsx)(o.Button,{variant:"outline",className:"flex-1",disabled:M,style:{borderColor:"#EF4444",color:"#FFFFFF",backgroundColor:"#EF4444",opacity:M?.6:1},onClick:async()=>{try{console.log("[CancelRsvp] User confirmed cancellation, attempting to cancel registration for event:",s),N(!0),L(null),await D.eventsRepository.cancelRsvp(s),console.log("[CancelRsvp] Successfully cancelled registration - reloading page"),window.location.reload()}catch(a){console.error("[CancelRsvp] Failed to cancel registration:",a),console.error("[CancelRsvp] Error details:",{message:a?.message,response:a?.response,status:a?.response?.status,data:a?.response?.data,detail:a?.response?.data?.detail}),L(a?.response?.data?.detail||a?.response?.data?.message||a?.message||"Unknown error"),N(!1)}},children:M?"Cancelling...":"Confirm Cancel"})]}):(0,b.jsx)(o.Button,{variant:"outline",className:"flex-1",style:{borderColor:"#EF4444",color:"#EF4444"},onClick:()=>{console.log("[CancelRsvp] User clicked Cancel Registration button"),J(!0)},children:"Cancel Registration"})]})]}):ae?(0,b.jsxs)(b.Fragment,{children:[(0,b.jsxs)("div",{className:"space-y-4",children:[(0,b.jsx)(o.Button,{onClick:Z,disabled:E,className:"w-full text-lg py-6",variant:"outline",style:{borderColor:"#FF7900",color:"#FF7900"},children:E?(0,b.jsxs)(b.Fragment,{children:[(0,b.jsx)(j.Clock,{className:"h-5 w-5 mr-2 animate-spin"}),"Joining..."]}):"Join Waitlist"}),!w?.userId&&(0,b.jsx)("p",{className:"text-sm text-center text-neutral-500",children:"You'll be redirected to login before joining the waitlist"})]}),z&&(0,b.jsx)("div",{className:"mt-4 p-4 bg-red-50 border border-red-200 rounded-lg",children:(0,b.jsx)("p",{className:"text-sm text-red-600",children:z})})]}):(0,b.jsx)(v,{eventId:s,spotsLeft:af,isFree:O.isFree,ticketPrice:O.ticketPriceAmount??void 0,hasDualPricing:O.hasDualPricing,adultPrice:O.adultPriceAmount??void 0,childPrice:O.childPriceAmount??void 0,childAgeLimit:O.childAgeLimit??void 0,isProcessing:x,onSubmit:Y,error:z})})]})]})]}),(0,b.jsx)("div",{className:"mt-8",children:(0,b.jsx)(r.SignUpManagementSection,{eventId:s,userId:w?.userId,isOrganizer:O.organizerId===w?.userId})})]}),(0,b.jsx)(m.default,{})]})}a.s(["default",()=>E],53033)}];

//# sourceMappingURL=src_app_events_%5Bid%5D_page_tsx_4d745fbe._.js.map