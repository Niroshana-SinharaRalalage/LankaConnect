{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 4, "column": 0}, "map": {"version":3,"sources":["file:///C:/Work/LankaConnect/web/src/infrastructure/api/client/api-errors.ts"],"sourcesContent":["/**\r\n * Base API Error class\r\n */\r\nexport class ApiError extends Error {\r\n  public readonly statusCode?: number;\r\n  public readonly validationErrors?: Record<string, string[]>;\r\n\r\n  constructor(message: string, statusCode?: number, validationErrors?: Record<string, string[]>) {\r\n    super(message);\r\n    this.name = 'ApiError';\r\n    this.statusCode = statusCode;\r\n    this.validationErrors = validationErrors;\r\n    Object.setPrototypeOf(this, ApiError.prototype);\r\n  }\r\n}\r\n\r\n/**\r\n * Network Error (no response from server)\r\n */\r\nexport class NetworkError extends ApiError {\r\n  constructor(message: string = 'Network error occurred') {\r\n    super(message);\r\n    this.name = 'NetworkError';\r\n    Object.setPrototypeOf(this, NetworkError.prototype);\r\n  }\r\n}\r\n\r\n/**\r\n * Validation Error (400)\r\n */\r\nexport class ValidationError extends ApiError {\r\n  constructor(message: string = 'Validation failed', validationErrors?: Record<string, string[]>) {\r\n    super(message, 400, validationErrors);\r\n    this.name = 'ValidationError';\r\n    Object.setPrototypeOf(this, ValidationError.prototype);\r\n  }\r\n}\r\n\r\n/**\r\n * Unauthorized Error (401)\r\n */\r\nexport class UnauthorizedError extends ApiError {\r\n  constructor(message: string = 'Unauthorized') {\r\n    super(message, 401);\r\n    this.name = 'UnauthorizedError';\r\n    Object.setPrototypeOf(this, UnauthorizedError.prototype);\r\n  }\r\n}\r\n\r\n/**\r\n * Forbidden Error (403)\r\n */\r\nexport class ForbiddenError extends ApiError {\r\n  constructor(message: string = 'Forbidden') {\r\n    super(message, 403);\r\n    this.name = 'ForbiddenError';\r\n    Object.setPrototypeOf(this, ForbiddenError.prototype);\r\n  }\r\n}\r\n\r\n/**\r\n * Not Found Error (404)\r\n */\r\nexport class NotFoundError extends ApiError {\r\n  constructor(message: string = 'Resource not found') {\r\n    super(message, 404);\r\n    this.name = 'NotFoundError';\r\n    Object.setPrototypeOf(this, NotFoundError.prototype);\r\n  }\r\n}\r\n\r\n/**\r\n * Server Error (500+)\r\n */\r\nexport class ServerError extends ApiError {\r\n  constructor(message: string = 'Internal server error', statusCode: number = 500) {\r\n    super(message, statusCode);\r\n    this.name = 'ServerError';\r\n    Object.setPrototypeOf(this, ServerError.prototype);\r\n  }\r\n}\r\n"],"names":[],"mappings":"AAAA;;CAEC;;;;;;;;;;;;;;;;AACM,MAAM,iBAAiB;IACZ,WAAoB;IACpB,iBAA4C;IAE5D,YAAY,OAAe,EAAE,UAAmB,EAAE,gBAA2C,CAAE;QAC7F,KAAK,CAAC;QACN,IAAI,CAAC,IAAI,GAAG;QACZ,IAAI,CAAC,UAAU,GAAG;QAClB,IAAI,CAAC,gBAAgB,GAAG;QACxB,OAAO,cAAc,CAAC,IAAI,EAAE,SAAS,SAAS;IAChD;AACF;AAKO,MAAM,qBAAqB;IAChC,YAAY,UAAkB,wBAAwB,CAAE;QACtD,KAAK,CAAC;QACN,IAAI,CAAC,IAAI,GAAG;QACZ,OAAO,cAAc,CAAC,IAAI,EAAE,aAAa,SAAS;IACpD;AACF;AAKO,MAAM,wBAAwB;IACnC,YAAY,UAAkB,mBAAmB,EAAE,gBAA2C,CAAE;QAC9F,KAAK,CAAC,SAAS,KAAK;QACpB,IAAI,CAAC,IAAI,GAAG;QACZ,OAAO,cAAc,CAAC,IAAI,EAAE,gBAAgB,SAAS;IACvD;AACF;AAKO,MAAM,0BAA0B;IACrC,YAAY,UAAkB,cAAc,CAAE;QAC5C,KAAK,CAAC,SAAS;QACf,IAAI,CAAC,IAAI,GAAG;QACZ,OAAO,cAAc,CAAC,IAAI,EAAE,kBAAkB,SAAS;IACzD;AACF;AAKO,MAAM,uBAAuB;IAClC,YAAY,UAAkB,WAAW,CAAE;QACzC,KAAK,CAAC,SAAS;QACf,IAAI,CAAC,IAAI,GAAG;QACZ,OAAO,cAAc,CAAC,IAAI,EAAE,eAAe,SAAS;IACtD;AACF;AAKO,MAAM,sBAAsB;IACjC,YAAY,UAAkB,oBAAoB,CAAE;QAClD,KAAK,CAAC,SAAS;QACf,IAAI,CAAC,IAAI,GAAG;QACZ,OAAO,cAAc,CAAC,IAAI,EAAE,cAAc,SAAS;IACrD;AACF;AAKO,MAAM,oBAAoB;IAC/B,YAAY,UAAkB,uBAAuB,EAAE,aAAqB,GAAG,CAAE;QAC/E,KAAK,CAAC,SAAS;QACf,IAAI,CAAC,IAAI,GAAG;QACZ,OAAO,cAAc,CAAC,IAAI,EAAE,YAAY,SAAS;IACnD;AACF","debugId":null}},
    {"offset": {"line": 82, "column": 0}, "map": {"version":3,"sources":["file:///C:/Work/LankaConnect/web/src/infrastructure/api/client/api-client.ts"],"sourcesContent":["import axios, { AxiosInstance, AxiosError, AxiosRequestConfig, AxiosResponse } from 'axios';\r\nimport {\r\n  ApiError,\r\n  NetworkError,\r\n  ValidationError,\r\n  UnauthorizedError,\r\n  ForbiddenError,\r\n  NotFoundError,\r\n  ServerError,\r\n} from './api-errors';\r\n\r\n/**\r\n * API Client Configuration\r\n */\r\nexport interface ApiClientConfig {\r\n  baseURL: string;\r\n  timeout?: number;\r\n  headers?: Record<string, string>;\r\n}\r\n\r\n/**\r\n * API Client\r\n * Singleton pattern for managing HTTP requests\r\n */\r\nexport class ApiClient {\r\n  private static instance: ApiClient;\r\n  private axiosInstance: AxiosInstance;\r\n  private authToken: string | null = null;\r\n\r\n  private constructor(config?: Partial<ApiClientConfig>) {\r\n    const baseURL = config?.baseURL || process.env.NEXT_PUBLIC_API_URL || 'http://localhost:5000/api';\r\n\r\n    this.axiosInstance = axios.create({\r\n      baseURL,\r\n      timeout: config?.timeout || 30000,\r\n      headers: {\r\n        'Content-Type': 'application/json',\r\n        ...config?.headers,\r\n      },\r\n    });\r\n\r\n    this.setupInterceptors();\r\n  }\r\n\r\n  /**\r\n   * Get singleton instance\r\n   */\r\n  public static getInstance(config?: Partial<ApiClientConfig>): ApiClient {\r\n    if (!ApiClient.instance) {\r\n      ApiClient.instance = new ApiClient(config);\r\n    }\r\n    return ApiClient.instance;\r\n  }\r\n\r\n  /**\r\n   * Setup request and response interceptors\r\n   */\r\n  private setupInterceptors(): void {\r\n    // Request interceptor\r\n    this.axiosInstance.interceptors.request.use(\r\n      (config) => {\r\n        // Add auth token if available\r\n        if (this.authToken) {\r\n          config.headers.Authorization = `Bearer ${this.authToken}`;\r\n        }\r\n        return config;\r\n      },\r\n      (error) => Promise.reject(this.handleError(error))\r\n    );\r\n\r\n    // Response interceptor\r\n    this.axiosInstance.interceptors.response.use(\r\n      (response) => response,\r\n      (error) => Promise.reject(this.handleError(error))\r\n    );\r\n  }\r\n\r\n  /**\r\n   * Handle errors and convert to custom error types\r\n   */\r\n  private handleError(error: unknown): ApiError {\r\n    if (axios.isAxiosError(error)) {\r\n      const axiosError = error as AxiosError<any>;\r\n\r\n      // Network error (no response)\r\n      if (!axiosError.response) {\r\n        return new NetworkError(axiosError.message || 'Network error occurred');\r\n      }\r\n\r\n      const { status, data } = axiosError.response;\r\n\r\n      // Extract error message\r\n      const message = data?.message || data?.error || axiosError.message || 'An error occurred';\r\n\r\n      // Handle specific status codes\r\n      switch (status) {\r\n        case 400:\r\n          return new ValidationError(message, data?.errors || data?.validationErrors);\r\n        case 401:\r\n          return new UnauthorizedError(message);\r\n        case 403:\r\n          return new ForbiddenError(message);\r\n        case 404:\r\n          return new NotFoundError(message);\r\n        case 500:\r\n        case 502:\r\n        case 503:\r\n        case 504:\r\n          return new ServerError(message, status);\r\n        default:\r\n          return new ApiError(message, status);\r\n      }\r\n    }\r\n\r\n    // Unknown error\r\n    if (error instanceof Error) {\r\n      return new ApiError(error.message);\r\n    }\r\n\r\n    return new ApiError('An unknown error occurred');\r\n  }\r\n\r\n  /**\r\n   * Set authentication token\r\n   */\r\n  public setAuthToken(token: string): void {\r\n    this.authToken = token;\r\n  }\r\n\r\n  /**\r\n   * Clear authentication token\r\n   */\r\n  public clearAuthToken(): void {\r\n    this.authToken = null;\r\n  }\r\n\r\n  /**\r\n   * GET request\r\n   */\r\n  public async get<T = any>(url: string, config?: AxiosRequestConfig): Promise<T> {\r\n    const response: AxiosResponse<T> = await this.axiosInstance.get(url, config);\r\n    return response.data;\r\n  }\r\n\r\n  /**\r\n   * POST request\r\n   */\r\n  public async post<T = any>(url: string, data?: any, config?: AxiosRequestConfig): Promise<T> {\r\n    const response: AxiosResponse<T> = await this.axiosInstance.post(url, data, config);\r\n    return response.data;\r\n  }\r\n\r\n  /**\r\n   * PUT request\r\n   */\r\n  public async put<T = any>(url: string, data?: any, config?: AxiosRequestConfig): Promise<T> {\r\n    const response: AxiosResponse<T> = await this.axiosInstance.put(url, data, config);\r\n    return response.data;\r\n  }\r\n\r\n  /**\r\n   * PATCH request\r\n   */\r\n  public async patch<T = any>(url: string, data?: any, config?: AxiosRequestConfig): Promise<T> {\r\n    const response: AxiosResponse<T> = await this.axiosInstance.patch(url, data, config);\r\n    return response.data;\r\n  }\r\n\r\n  /**\r\n   * DELETE request\r\n   */\r\n  public async delete<T = any>(url: string, config?: AxiosRequestConfig): Promise<T> {\r\n    const response: AxiosResponse<T> = await this.axiosInstance.delete(url, config);\r\n    return response.data;\r\n  }\r\n\r\n  /**\r\n   * POST request with multipart/form-data (for file uploads)\r\n   */\r\n  public async postMultipart<T = any>(\r\n    url: string,\r\n    formData: FormData,\r\n    config?: AxiosRequestConfig\r\n  ): Promise<T> {\r\n    const response: AxiosResponse<T> = await this.axiosInstance.post(url, formData, {\r\n      ...config,\r\n      headers: {\r\n        'Content-Type': 'multipart/form-data',\r\n        ...config?.headers,\r\n      },\r\n    });\r\n    return response.data;\r\n  }\r\n}\r\n\r\n// Export singleton instance\r\nexport const apiClient = ApiClient.getInstance();\r\n"],"names":[],"mappings":"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","debugId":null}},
    {"offset": {"line": 229, "column": 0}, "map": {"version":3,"sources":["file:///C:/Work/LankaConnect/web/src/infrastructure/api/repositories/events.repository.ts"],"sourcesContent":["import { apiClient } from '../client/api-client';\r\nimport type {\r\n  EventDto,\r\n  RsvpDto,\r\n  EventSearchResultDto,\r\n  WaitingListEntryDto,\r\n  GetEventsRequest,\r\n  SearchEventsRequest,\r\n  GetNearbyEventsRequest,\r\n  CreateEventRequest,\r\n  UpdateEventRequest,\r\n  RsvpRequest,\r\n  UpdateRsvpRequest,\r\n  CancelEventRequest,\r\n  PostponeEventRequest,\r\n  CreateEventResponse,\r\n  EventImageDto,\r\n} from '../types/events.types';\r\nimport type { PagedResult } from '../types/common.types';\r\n\r\n/**\r\n * EventsRepository\r\n * Handles all event-related API calls following the repository pattern\r\n *\r\n * Backend endpoints from EventsController.cs:\r\n * - GET /api/events - Get all events with filters\r\n * - GET /api/events/{id} - Get event by ID\r\n * - GET /api/events/search - Full-text search\r\n * - GET /api/events/nearby - Geospatial search\r\n * - POST /api/events - Create event\r\n * - PUT /api/events/{id} - Update event\r\n * - DELETE /api/events/{id} - Delete event\r\n * - POST /api/events/{id}/rsvp - RSVP to event\r\n * - DELETE /api/events/{id}/rsvp - Cancel RSVP\r\n * - PUT /api/events/{id}/rsvp - Update RSVP\r\n * - GET /api/events/my-rsvps - Get user's RSVPs\r\n * - POST /api/events/{id}/images - Upload image\r\n */\r\nexport class EventsRepository {\r\n  private readonly basePath = '/events';\r\n\r\n  // ==================== PUBLIC QUERIES ====================\r\n\r\n  /**\r\n   * Get all events with optional filtering\r\n   * Maps to backend GetEventsQuery\r\n   */\r\n  async getEvents(filters: GetEventsRequest = {}): Promise<EventDto[]> {\r\n    const params = new URLSearchParams();\r\n\r\n    if (filters.status) params.append('status', filters.status);\r\n    if (filters.category) params.append('category', filters.category);\r\n    if (filters.startDateFrom) params.append('startDateFrom', filters.startDateFrom);\r\n    if (filters.startDateTo) params.append('startDateTo', filters.startDateTo);\r\n    if (filters.isFreeOnly !== undefined) params.append('isFreeOnly', String(filters.isFreeOnly));\r\n    if (filters.city) params.append('city', filters.city);\r\n\r\n    const queryString = params.toString();\r\n    const url = queryString ? `${this.basePath}?${queryString}` : this.basePath;\r\n\r\n    return await apiClient.get<EventDto[]>(url);\r\n  }\r\n\r\n  /**\r\n   * Get event by ID\r\n   * Maps to backend GetEventByIdQuery\r\n   */\r\n  async getEventById(id: string): Promise<EventDto> {\r\n    return await apiClient.get<EventDto>(`${this.basePath}/${id}`);\r\n  }\r\n\r\n  /**\r\n   * Search events using full-text search (PostgreSQL FTS)\r\n   * Returns paginated results with relevance scores\r\n   */\r\n  async searchEvents(request: SearchEventsRequest): Promise<PagedResult<EventSearchResultDto>> {\r\n    const params = new URLSearchParams({\r\n      searchTerm: request.searchTerm,\r\n      page: String(request.page ?? 1),\r\n      pageSize: String(request.pageSize ?? 20),\r\n    });\r\n\r\n    if (request.category) params.append('category', request.category);\r\n    if (request.isFreeOnly !== undefined) params.append('isFreeOnly', String(request.isFreeOnly));\r\n    if (request.startDateFrom) params.append('startDateFrom', request.startDateFrom);\r\n\r\n    return await apiClient.get<PagedResult<EventSearchResultDto>>(\r\n      `${this.basePath}/search?${params.toString()}`\r\n    );\r\n  }\r\n\r\n  /**\r\n   * Get nearby events using geospatial query\r\n   * Maps to backend GetNearbyEventsQuery\r\n   */\r\n  async getNearbyEvents(request: GetNearbyEventsRequest): Promise<EventDto[]> {\r\n    const params = new URLSearchParams({\r\n      latitude: String(request.latitude),\r\n      longitude: String(request.longitude),\r\n      radiusKm: String(request.radiusKm),\r\n    });\r\n\r\n    if (request.category) params.append('category', request.category);\r\n    if (request.isFreeOnly !== undefined) params.append('isFreeOnly', String(request.isFreeOnly));\r\n    if (request.startDateFrom) params.append('startDateFrom', request.startDateFrom);\r\n\r\n    return await apiClient.get<EventDto[]>(`${this.basePath}/nearby?${params.toString()}`);\r\n  }\r\n\r\n  // ==================== AUTHENTICATED MUTATIONS ====================\r\n\r\n  /**\r\n   * Create a new event\r\n   * Requires authentication\r\n   * Maps to backend CreateEventCommand\r\n   */\r\n  async createEvent(data: CreateEventRequest): Promise<string> {\r\n    const response = await apiClient.post<CreateEventResponse>(this.basePath, data);\r\n    return response.id;\r\n  }\r\n\r\n  /**\r\n   * Update an existing event\r\n   * Requires authentication and ownership\r\n   * Maps to backend UpdateEventCommand\r\n   */\r\n  async updateEvent(id: string, data: UpdateEventRequest): Promise<void> {\r\n    await apiClient.put<void>(`${this.basePath}/${id}`, { ...data, eventId: id });\r\n  }\r\n\r\n  /**\r\n   * Delete an event\r\n   * Requires authentication and ownership\r\n   * Only allowed for Draft/Cancelled events\r\n   */\r\n  async deleteEvent(id: string): Promise<void> {\r\n    await apiClient.delete<void>(`${this.basePath}/${id}`);\r\n  }\r\n\r\n  /**\r\n   * Submit event for approval (if approval workflow is enabled)\r\n   */\r\n  async submitForApproval(id: string): Promise<void> {\r\n    await apiClient.post<void>(`${this.basePath}/${id}/submit`);\r\n  }\r\n\r\n  /**\r\n   * Publish event (make it visible to public)\r\n   * Requires authentication and ownership\r\n   */\r\n  async publishEvent(id: string): Promise<void> {\r\n    await apiClient.post<void>(`${this.basePath}/${id}/publish`);\r\n  }\r\n\r\n  /**\r\n   * Cancel event with reason\r\n   * Notifies all registered users\r\n   */\r\n  async cancelEvent(id: string, reason: string): Promise<void> {\r\n    const request: CancelEventRequest = { reason };\r\n    await apiClient.post<void>(`${this.basePath}/${id}/cancel`, request);\r\n  }\r\n\r\n  /**\r\n   * Postpone event with reason\r\n   * Changes status to Postponed\r\n   */\r\n  async postponeEvent(id: string, reason: string): Promise<void> {\r\n    const request: PostponeEventRequest = { reason };\r\n    await apiClient.post<void>(`${this.basePath}/${id}/postpone`, request);\r\n  }\r\n\r\n  // ==================== RSVP OPERATIONS ====================\r\n\r\n  /**\r\n   * RSVP to an event\r\n   * Creates a registration for the user\r\n   * Maps to backend RsvpToEventCommand\r\n   */\r\n  async rsvpToEvent(eventId: string, userId: string, quantity: number = 1): Promise<void> {\r\n    const request: RsvpRequest = { eventId, userId, quantity };\r\n    await apiClient.post<void>(`${this.basePath}/${eventId}/rsvp`, request);\r\n  }\r\n\r\n  /**\r\n   * Cancel RSVP\r\n   * Removes registration and frees up capacity\r\n   */\r\n  async cancelRsvp(eventId: string): Promise<void> {\r\n    await apiClient.delete<void>(`${this.basePath}/${eventId}/rsvp`);\r\n  }\r\n\r\n  /**\r\n   * Update RSVP quantity\r\n   * Changes number of attendees for registration\r\n   */\r\n  async updateRsvp(eventId: string, userId: string, newQuantity: number): Promise<void> {\r\n    const request: UpdateRsvpRequest = { userId, newQuantity };\r\n    await apiClient.put<void>(`${this.basePath}/${eventId}/rsvp`, request);\r\n  }\r\n\r\n  /**\r\n   * Get current user's RSVPs\r\n   * Returns all events user has registered for\r\n   */\r\n  async getUserRsvps(): Promise<RsvpDto[]> {\r\n    return await apiClient.get<RsvpDto[]>(`${this.basePath}/my-rsvps`);\r\n  }\r\n\r\n  /**\r\n   * Get upcoming events for user\r\n   * Returns events happening in the future\r\n   */\r\n  async getUpcomingEvents(): Promise<EventDto[]> {\r\n    return await apiClient.get<EventDto[]>(`${this.basePath}/upcoming`);\r\n  }\r\n\r\n  // ==================== WAITING LIST ====================\r\n\r\n  /**\r\n   * Add user to waiting list\r\n   * Used when event is at capacity\r\n   */\r\n  async addToWaitingList(eventId: string): Promise<void> {\r\n    await apiClient.post<void>(`${this.basePath}/${eventId}/waiting-list`);\r\n  }\r\n\r\n  /**\r\n   * Remove user from waiting list\r\n   */\r\n  async removeFromWaitingList(eventId: string): Promise<void> {\r\n    await apiClient.delete<void>(`${this.basePath}/${eventId}/waiting-list`);\r\n  }\r\n\r\n  /**\r\n   * Get waiting list for event\r\n   * Returns list of users waiting for spots\r\n   */\r\n  async getWaitingList(eventId: string): Promise<WaitingListEntryDto[]> {\r\n    return await apiClient.get<WaitingListEntryDto[]>(`${this.basePath}/${eventId}/waiting-list`);\r\n  }\r\n\r\n  // ==================== MEDIA OPERATIONS ====================\r\n\r\n  /**\r\n   * Upload image to event gallery\r\n   * Uses multipart/form-data for file upload\r\n   */\r\n  async uploadEventImage(eventId: string, file: File): Promise<EventImageDto> {\r\n    const formData = new FormData();\r\n    formData.append('image', file);\r\n\r\n    return await apiClient.postMultipart<EventImageDto>(\r\n      `${this.basePath}/${eventId}/images`,\r\n      formData\r\n    );\r\n  }\r\n\r\n  /**\r\n   * Delete image from event gallery\r\n   */\r\n  async deleteEventImage(eventId: string, imageId: string): Promise<void> {\r\n    await apiClient.delete<void>(`${this.basePath}/${eventId}/images/${imageId}`);\r\n  }\r\n\r\n  // ==================== UTILITY OPERATIONS ====================\r\n\r\n  /**\r\n   * Export event as ICS calendar file\r\n   * Returns blob for download\r\n   */\r\n  async getEventIcs(eventId: string): Promise<Blob> {\r\n    // Note: This endpoint returns a file, not JSON\r\n    // Using fetch directly instead of apiClient\r\n    const baseURL = process.env.NEXT_PUBLIC_API_URL || 'http://localhost:5000/api';\r\n    const response = await fetch(`${baseURL}${this.basePath}/${eventId}/ics`);\r\n\r\n    if (!response.ok) {\r\n      throw new Error('Failed to download ICS file');\r\n    }\r\n\r\n    return await response.blob();\r\n  }\r\n\r\n  /**\r\n   * Record social share for analytics\r\n   * Tracks event sharing on social media\r\n   */\r\n  async recordEventShare(eventId: string, platform?: string): Promise<void> {\r\n    await apiClient.post<void>(`${this.basePath}/${eventId}/share`, { platform });\r\n  }\r\n}\r\n\r\n/**\r\n * Singleton instance of the events repository\r\n * Export for use in React components and hooks\r\n */\r\nexport const eventsRepository = new EventsRepository();\r\n"],"names":[],"mappings":"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","debugId":null}},
    {"offset": {"line": 449, "column": 0}, "map": {"version":3,"sources":["file:///C:/Work/LankaConnect/web/src/presentation/hooks/useEvents.ts"],"sourcesContent":["/**\r\n * Events React Query Hooks\r\n *\r\n * Provides React Query hooks for Events API integration\r\n * Implements caching, optimistic updates, and proper error handling\r\n *\r\n * PREREQUISITES:\r\n * - events.repository.ts must be created in infrastructure/repositories/\r\n * - events.types.ts must be created in infrastructure/api/types/\r\n *\r\n * @requires @tanstack/react-query\r\n * @requires eventsRepository from infrastructure/repositories/events.repository\r\n * @requires Event types from infrastructure/api/types/events.types\r\n */\r\n\r\nimport {\r\n  useQuery,\r\n  useMutation,\r\n  useQueryClient,\r\n  UseQueryOptions,\r\n  UseMutationOptions,\r\n} from '@tanstack/react-query';\r\n\r\nimport { eventsRepository } from '@/infrastructure/api/repositories/events.repository';\r\nimport type {\r\n  EventDto,\r\n  GetEventsRequest,\r\n  CreateEventRequest,\r\n  UpdateEventRequest,\r\n  RsvpRequest,\r\n} from '@/infrastructure/api/types/events.types';\r\n\r\nimport { ApiError } from '@/infrastructure/api/client/api-errors';\r\n\r\n/**\r\n * Query Keys for Events\r\n * Centralized query key management for cache invalidation\r\n */\r\nexport const eventKeys = {\r\n  all: ['events'] as const,\r\n  lists: () => [...eventKeys.all, 'list'] as const,\r\n  list: (filters: any) => [...eventKeys.lists(), filters] as const,\r\n  details: () => [...eventKeys.all, 'detail'] as const,\r\n  detail: (id: string) => [...eventKeys.details(), id] as const,\r\n  search: (searchTerm: string) => [...eventKeys.all, 'search', searchTerm] as const,\r\n};\r\n\r\n/**\r\n * useEvents Hook\r\n *\r\n * Fetches a list of events with optional filters\r\n *\r\n * Features:\r\n * - Automatic caching with 5-minute stale time\r\n * - Refetch on window focus\r\n * - Proper error handling with ApiError types\r\n * - Query key includes filters for granular cache control\r\n *\r\n * @param filters - Optional filters for events (location, date, category, etc.)\r\n * @param options - Additional React Query options\r\n *\r\n * @example\r\n * ```tsx\r\n * const { data, isLoading, error } = useEvents({\r\n *   metroArea: 'colombo',\r\n *   startDate: '2024-01-01',\r\n *   category: 'cultural'\r\n * });\r\n * ```\r\n */\r\nexport function useEvents(\r\n  filters?: GetEventsRequest,\r\n  options?: Omit<UseQueryOptions<EventDto[], ApiError>, 'queryKey' | 'queryFn'>\r\n) {\r\n  return useQuery({\r\n    queryKey: eventKeys.list(filters || {}),\r\n    queryFn: async () => {\r\n      console.log('üîÑ useEvents queryFn called with filters:', filters);\r\n      try {\r\n        const result = await eventsRepository.getEvents(filters);\r\n        console.log('‚úÖ useEvents queryFn SUCCESS:', result.length, 'events');\r\n        return result;\r\n      } catch (error) {\r\n        console.error('‚ùå useEvents queryFn ERROR:', error);\r\n        throw error;\r\n      }\r\n    },\r\n    staleTime: 5 * 60 * 1000, // 5 minutes\r\n    refetchOnWindowFocus: true,\r\n    retry: 1, // Only retry once\r\n    ...options,\r\n  });\r\n}\r\n\r\n/**\r\n * useEventById Hook\r\n *\r\n * Fetches a single event by ID\r\n *\r\n * Features:\r\n * - Caches individual event details\r\n * - Longer stale time (10 minutes) for detail pages\r\n * - Automatic refetch on window focus\r\n * - Enabled only when ID is provided\r\n *\r\n * @param id - Event ID (GUID)\r\n * @param options - Additional React Query options\r\n *\r\n * @example\r\n * ```tsx\r\n * const { data: event, isLoading } = useEventById(eventId);\r\n * ```\r\n */\r\nexport function useEventById(\r\n  id: string | undefined,\r\n  options?: Omit<UseQueryOptions<EventDto, ApiError>, 'queryKey' | 'queryFn'>\r\n) {\r\n  return useQuery({\r\n    queryKey: eventKeys.detail(id || ''),\r\n    queryFn: () => eventsRepository.getEventById(id!),\r\n    enabled: !!id, // Only fetch when ID is provided\r\n    staleTime: 10 * 60 * 1000, // 10 minutes\r\n    refetchOnWindowFocus: true,\r\n    ...options,\r\n  });\r\n}\r\n\r\n/**\r\n * useSearchEvents Hook\r\n *\r\n * Searches events by search term\r\n *\r\n * Features:\r\n * - Debounced search (implement debouncing in component)\r\n * - Separate cache for search results\r\n * - 2-minute stale time for search results\r\n * - Only enabled when search term is provided\r\n *\r\n * @param searchTerm - Search query string\r\n * @param options - Additional React Query options\r\n *\r\n * @example\r\n * ```tsx\r\n * const debouncedSearch = useDebounce(searchTerm, 500);\r\n * const { data: results } = useSearchEvents(debouncedSearch);\r\n * ```\r\n */\r\nexport function useSearchEvents(\r\n  searchTerm: string | undefined,\r\n  options?: Omit<UseQueryOptions<any, ApiError>, 'queryKey' | 'queryFn'>\r\n) {\r\n  return useQuery({\r\n    queryKey: eventKeys.search(searchTerm || ''),\r\n    queryFn: () => eventsRepository.searchEvents({\r\n      searchTerm: searchTerm!,\r\n      page: 1,\r\n      pageSize: 20\r\n    }),\r\n    enabled: !!searchTerm && searchTerm.length >= 2, // Only search with 2+ characters\r\n    staleTime: 2 * 60 * 1000, // 2 minutes\r\n    refetchOnWindowFocus: false, // Don't refetch searches on focus\r\n    ...options,\r\n  });\r\n}\r\n\r\n/**\r\n * useCreateEvent Hook\r\n *\r\n * Mutation hook for creating a new event\r\n *\r\n * Features:\r\n * - Optimistic updates (optional)\r\n * - Automatic cache invalidation after success\r\n * - Proper error handling\r\n * - Success/error callbacks\r\n *\r\n * @param options - Additional React Query mutation options\r\n *\r\n * @example\r\n * ```tsx\r\n * const createEvent = useCreateEvent();\r\n *\r\n * await createEvent.mutateAsync({\r\n *   title: 'New Event',\r\n *   date: '2024-12-01',\r\n *   location: 'Colombo'\r\n * });\r\n * ```\r\n */\r\nexport function useCreateEvent() {\r\n  const queryClient = useQueryClient();\r\n\r\n  return useMutation({\r\n    mutationFn: (data: CreateEventRequest) => eventsRepository.createEvent(data),\r\n    onSuccess: () => {\r\n      // Invalidate all event lists to refetch with new event\r\n      queryClient.invalidateQueries({ queryKey: eventKeys.lists() });\r\n    },\r\n  });\r\n}\r\n\r\n/**\r\n * useUpdateEvent Hook\r\n *\r\n * Mutation hook for updating an existing event\r\n *\r\n * Features:\r\n * - Optimistic updates\r\n * - Automatic cache invalidation\r\n * - Rollback on error\r\n *\r\n * @param options - Additional React Query mutation options\r\n *\r\n * @example\r\n * ```tsx\r\n * const updateEvent = useUpdateEvent();\r\n *\r\n * await updateEvent.mutateAsync({\r\n *   id: 'event-123',\r\n *   title: 'Updated Title'\r\n * });\r\n * ```\r\n */\r\nexport function useUpdateEvent() {\r\n  const queryClient = useQueryClient();\r\n\r\n  return useMutation({\r\n    mutationFn: ({ id, ...data }: { id: string } & UpdateEventRequest) =>\r\n      eventsRepository.updateEvent(id, data),\r\n    onMutate: async ({ id, ...newData }) => {\r\n      // Cancel outgoing refetches\r\n      await queryClient.cancelQueries({ queryKey: eventKeys.detail(id) });\r\n\r\n      // Snapshot previous value for rollback\r\n      const previousEvent = queryClient.getQueryData(eventKeys.detail(id));\r\n\r\n      // Optimistically update\r\n      queryClient.setQueryData(eventKeys.detail(id), (old: EventDto | undefined) => {\r\n        if (!old) return old;\r\n        return {\r\n          ...old,\r\n          ...newData,\r\n        };\r\n      });\r\n\r\n      return { previousEvent };\r\n    },\r\n    onError: (err, { id }, context) => {\r\n      // Rollback on error\r\n      if (context?.previousEvent) {\r\n        queryClient.setQueryData(eventKeys.detail(id), context.previousEvent);\r\n      }\r\n    },\r\n    onSuccess: (_data, variables) => {\r\n      // Invalidate affected queries\r\n      queryClient.invalidateQueries({ queryKey: eventKeys.detail(variables.id) });\r\n      queryClient.invalidateQueries({ queryKey: eventKeys.lists() });\r\n    },\r\n  });\r\n}\r\n\r\n/**\r\n * useDeleteEvent Hook\r\n *\r\n * Mutation hook for deleting an event\r\n *\r\n * Features:\r\n * - Immediate cache removal\r\n * - Automatic list invalidation\r\n * - Rollback on error\r\n *\r\n * @param options - Additional React Query mutation options\r\n *\r\n * @example\r\n * ```tsx\r\n * const deleteEvent = useDeleteEvent();\r\n *\r\n * await deleteEvent.mutateAsync('event-123');\r\n * ```\r\n */\r\nexport function useDeleteEvent() {\r\n  const queryClient = useQueryClient();\r\n\r\n  return useMutation({\r\n    mutationFn: (id: string) => eventsRepository.deleteEvent(id),\r\n    onMutate: async (id) => {\r\n      // Cancel queries\r\n      await queryClient.cancelQueries({ queryKey: eventKeys.detail(id) });\r\n\r\n      // Snapshot for rollback\r\n      const previousEvent = queryClient.getQueryData(eventKeys.detail(id));\r\n\r\n      // Remove from cache immediately\r\n      queryClient.removeQueries({ queryKey: eventKeys.detail(id) });\r\n\r\n      return { previousEvent };\r\n    },\r\n    onError: (err, id, context) => {\r\n      // Restore on error\r\n      if (context?.previousEvent) {\r\n        queryClient.setQueryData(eventKeys.detail(id), context.previousEvent);\r\n      }\r\n    },\r\n    onSuccess: () => {\r\n      // Invalidate lists\r\n      queryClient.invalidateQueries({ queryKey: eventKeys.lists() });\r\n    },\r\n  });\r\n}\r\n\r\n/**\r\n * useRsvpToEvent Hook\r\n *\r\n * Mutation hook for RSVPing to an event\r\n *\r\n * Features:\r\n * - Optimistic RSVP count update\r\n * - Automatic event detail refetch\r\n * - Rollback on error\r\n *\r\n * @param options - Additional React Query mutation options\r\n *\r\n * @example\r\n * ```tsx\r\n * const rsvpToEvent = useRsvpToEvent();\r\n *\r\n * await rsvpToEvent.mutateAsync({\r\n *   eventId: 'event-123',\r\n *   status: 'attending'\r\n * });\r\n * ```\r\n */\r\nexport function useRsvpToEvent() {\r\n  const queryClient = useQueryClient();\r\n\r\n  return useMutation({\r\n    mutationFn: (data: RsvpRequest) =>\r\n      eventsRepository.rsvpToEvent(data.eventId, data.userId, data.quantity),\r\n    onMutate: async ({ eventId }) => {\r\n      // Cancel queries\r\n      await queryClient.cancelQueries({ queryKey: eventKeys.detail(eventId) });\r\n\r\n      // Snapshot\r\n      const previousEvent = queryClient.getQueryData(eventKeys.detail(eventId));\r\n\r\n      // Optimistically update RSVP count\r\n      queryClient.setQueryData(eventKeys.detail(eventId), (old: EventDto | undefined) => {\r\n        if (!old) return old;\r\n\r\n        return {\r\n          ...old,\r\n          currentRegistrations: old.currentRegistrations + 1,\r\n        };\r\n      });\r\n\r\n      return { previousEvent };\r\n    },\r\n    onError: (err, { eventId }, context) => {\r\n      // Rollback\r\n      if (context?.previousEvent) {\r\n        queryClient.setQueryData(eventKeys.detail(eventId), context.previousEvent);\r\n      }\r\n    },\r\n    onSuccess: (_data, variables) => {\r\n      // Refetch to get accurate data from server\r\n      queryClient.invalidateQueries({ queryKey: eventKeys.detail(variables.eventId) });\r\n    },\r\n  });\r\n}\r\n\r\n/**\r\n * usePrefetchEvent Hook\r\n *\r\n * Utility hook to prefetch an event for better UX\r\n * Useful for hover states or predictive loading\r\n *\r\n * @example\r\n * ```tsx\r\n * const prefetchEvent = usePrefetchEvent();\r\n *\r\n * <Link\r\n *   onMouseEnter={() => prefetchEvent(eventId)}\r\n * >\r\n *   Event Details\r\n * </Link>\r\n * ```\r\n */\r\nexport function usePrefetchEvent() {\r\n  const queryClient = useQueryClient();\r\n\r\n  return (id: string) => {\r\n    queryClient.prefetchQuery({\r\n      queryKey: eventKeys.detail(id),\r\n      queryFn: () => eventsRepository.getEventById(id),\r\n      staleTime: 10 * 60 * 1000,\r\n    });\r\n  };\r\n}\r\n\r\n/**\r\n * useInvalidateEvents Hook\r\n *\r\n * Utility hook to manually invalidate event queries\r\n * Useful for force refresh scenarios\r\n *\r\n * @example\r\n * ```tsx\r\n * const invalidateEvents = useInvalidateEvents();\r\n *\r\n * <button onClick={() => invalidateEvents.all()}>\r\n *   Refresh All Events\r\n * </button>\r\n * ```\r\n */\r\nexport function useInvalidateEvents() {\r\n  const queryClient = useQueryClient();\r\n\r\n  return {\r\n    all: () => queryClient.invalidateQueries({ queryKey: eventKeys.all }),\r\n    lists: () => queryClient.invalidateQueries({ queryKey: eventKeys.lists() }),\r\n    detail: (id: string) => queryClient.invalidateQueries({ queryKey: eventKeys.detail(id) }),\r\n  };\r\n}\r\n\r\n/**\r\n * Export all hooks\r\n */\r\nexport default {\r\n  useEvents,\r\n  useEventById,\r\n  useSearchEvents,\r\n  useCreateEvent,\r\n  useUpdateEvent,\r\n  useDeleteEvent,\r\n  useRsvpToEvent,\r\n  usePrefetchEvent,\r\n  useInvalidateEvents,\r\n};\r\n"],"names":[],"mappings":"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","debugId":null}},
    {"offset": {"line": 823, "column": 0}, "map": {"version":3,"sources":["file:///C:/Work/LankaConnect/web/src/infrastructure/api/types/events.types.ts"],"sourcesContent":["/**\r\n * Events API Type Definitions\r\n * DTOs matching backend API contracts (LankaConnect.Application.Events.Common)\r\n */\r\n\r\n// ==================== Enums ====================\r\n\r\n/**\r\n * Event status enum matching backend LankaConnect.Domain.Events.Enums.EventStatus\r\n */\r\nexport enum EventStatus {\r\n  Draft = 0,\r\n  Published = 1,\r\n  Active = 2,\r\n  Postponed = 3,\r\n  Cancelled = 4,\r\n  Completed = 5,\r\n  Archived = 6,\r\n  UnderReview = 7,\r\n}\r\n\r\n/**\r\n * Event category enum matching backend LankaConnect.Domain.Events.Enums.EventCategory\r\n */\r\nexport enum EventCategory {\r\n  Religious = 0,\r\n  Cultural = 1,\r\n  Community = 2,\r\n  Educational = 3,\r\n  Social = 4,\r\n  Business = 5,\r\n  Charity = 6,\r\n  Entertainment = 7,\r\n}\r\n\r\n/**\r\n * Registration status enum matching backend LankaConnect.Domain.Events.Enums.RegistrationStatus\r\n */\r\nexport enum RegistrationStatus {\r\n  Pending = 0,\r\n  Confirmed = 1,\r\n  Waitlisted = 2,\r\n  CheckedIn = 3,\r\n  Completed = 4,\r\n  Cancelled = 5,\r\n  Refunded = 6,\r\n}\r\n\r\n/**\r\n * Currency enum matching backend LankaConnect.Domain.Shared.Enums.Currency\r\n */\r\nexport enum Currency {\r\n  USD = 1,\r\n  LKR = 2,\r\n  GBP = 3,\r\n  EUR = 4,\r\n  CAD = 5,\r\n  AUD = 6,\r\n}\r\n\r\n// ==================== Event DTOs ====================\r\n\r\n/**\r\n * Event image DTO\r\n * Matches backend EventImageDto\r\n */\r\nexport interface EventImageDto {\r\n  id: string;\r\n  imageUrl: string;\r\n  displayOrder: number;\r\n  uploadedAt: string;\r\n}\r\n\r\n/**\r\n * Event video DTO\r\n * Matches backend EventVideoDto\r\n */\r\nexport interface EventVideoDto {\r\n  id: string;\r\n  videoUrl: string;\r\n  thumbnailUrl: string;\r\n  duration?: string | null; // ISO 8601 duration (e.g., PT1H30M)\r\n  format: string;\r\n  fileSizeBytes: number;\r\n  displayOrder: number;\r\n  uploadedAt: string;\r\n}\r\n\r\n/**\r\n * Main Event DTO\r\n * Matches backend EventDto from LankaConnect.Application.Events.Common\r\n */\r\nexport interface EventDto {\r\n  id: string;\r\n  title: string;\r\n  description: string;\r\n  startDate: string; // ISO 8601 date-time\r\n  endDate: string; // ISO 8601 date-time\r\n  organizerId: string;\r\n  capacity: number;\r\n  currentRegistrations: number;\r\n  status: EventStatus;\r\n  category: EventCategory;\r\n  createdAt: string;\r\n  updatedAt?: string | null;\r\n\r\n  // Location information (nullable - not all events have physical locations)\r\n  address?: string | null;\r\n  city?: string | null;\r\n  state?: string | null;\r\n  zipCode?: string | null;\r\n  country?: string | null;\r\n  latitude?: number | null;\r\n  longitude?: number | null;\r\n\r\n  // Ticket pricing (nullable - free events)\r\n  ticketPriceAmount?: number | null;\r\n  ticketPriceCurrency?: Currency | null;\r\n  isFree: boolean;\r\n\r\n  // Media galleries (Epic 2 Phase 2)\r\n  images: readonly EventImageDto[];\r\n  videos: readonly EventVideoDto[];\r\n}\r\n\r\n/**\r\n * Event search result DTO with relevance score\r\n * Matches backend EventSearchResultDto\r\n */\r\nexport interface EventSearchResultDto extends EventDto {\r\n  searchRank: number; // PostgreSQL FTS relevance score\r\n}\r\n\r\n/**\r\n * RSVP/Registration DTO\r\n */\r\nexport interface RsvpDto {\r\n  id: string;\r\n  eventId: string;\r\n  userId: string;\r\n  quantity: number;\r\n  status: RegistrationStatus;\r\n  createdAt: string;\r\n  updatedAt?: string | null;\r\n\r\n  // Denormalized event info (optional)\r\n  eventTitle?: string | null;\r\n  eventStartDate?: string | null;\r\n  eventEndDate?: string | null;\r\n  eventStatus?: EventStatus | null;\r\n}\r\n\r\n/**\r\n * Waiting list entry DTO\r\n */\r\nexport interface WaitingListEntryDto {\r\n  id: string;\r\n  eventId: string;\r\n  userId: string;\r\n  addedAt: string;\r\n  position: number;\r\n}\r\n\r\n// ==================== Request DTOs ====================\r\n\r\n/**\r\n * Get events query filters\r\n * Matches backend GetEventsQuery parameters\r\n */\r\nexport interface GetEventsRequest {\r\n  status?: EventStatus;\r\n  category?: EventCategory;\r\n  startDateFrom?: string; // ISO 8601 date\r\n  startDateTo?: string; // ISO 8601 date\r\n  isFreeOnly?: boolean;\r\n  city?: string;\r\n}\r\n\r\n/**\r\n * Search events request with pagination\r\n */\r\nexport interface SearchEventsRequest {\r\n  searchTerm: string;\r\n  page?: number;\r\n  pageSize?: number;\r\n  category?: EventCategory;\r\n  isFreeOnly?: boolean;\r\n  startDateFrom?: string;\r\n}\r\n\r\n/**\r\n * Get nearby events request (geospatial query)\r\n */\r\nexport interface GetNearbyEventsRequest {\r\n  latitude: number;\r\n  longitude: number;\r\n  radiusKm: number;\r\n  category?: EventCategory;\r\n  isFreeOnly?: boolean;\r\n  startDateFrom?: string;\r\n}\r\n\r\n/**\r\n * Create event request\r\n * Matches backend CreateEventCommand\r\n */\r\nexport interface CreateEventRequest {\r\n  title: string;\r\n  description: string;\r\n  startDate: string;\r\n  endDate: string;\r\n  organizerId: string;\r\n  capacity: number;\r\n  category?: EventCategory;\r\n\r\n  // Location (optional)\r\n  locationAddress?: string;\r\n  locationCity?: string;\r\n  locationState?: string;\r\n  locationZipCode?: string;\r\n  locationCountry?: string;\r\n  locationLatitude?: number;\r\n  locationLongitude?: number;\r\n\r\n  // Ticket Price (optional)\r\n  ticketPriceAmount?: number;\r\n  ticketPriceCurrency?: Currency;\r\n}\r\n\r\n/**\r\n * Update event request\r\n */\r\nexport interface UpdateEventRequest {\r\n  eventId: string;\r\n  title?: string;\r\n  description?: string;\r\n  startDate?: string;\r\n  endDate?: string;\r\n  capacity?: number;\r\n  category?: EventCategory;\r\n\r\n  // Location\r\n  address?: string;\r\n  city?: string;\r\n  state?: string;\r\n  zipCode?: string;\r\n  country?: string;\r\n  latitude?: number;\r\n  longitude?: number;\r\n\r\n  // Pricing\r\n  ticketPriceAmount?: number;\r\n  ticketPriceCurrency?: Currency;\r\n  isFree?: boolean;\r\n}\r\n\r\n/**\r\n * RSVP to event request\r\n * Matches backend RsvpToEventCommand\r\n */\r\nexport interface RsvpRequest {\r\n  eventId: string;\r\n  userId: string;\r\n  quantity?: number; // Default: 1\r\n}\r\n\r\n/**\r\n * Update RSVP request\r\n */\r\nexport interface UpdateRsvpRequest {\r\n  userId: string;\r\n  newQuantity: number;\r\n}\r\n\r\n/**\r\n * Cancel event request\r\n */\r\nexport interface CancelEventRequest {\r\n  reason: string;\r\n}\r\n\r\n/**\r\n * Postpone event request\r\n */\r\nexport interface PostponeEventRequest {\r\n  reason: string;\r\n}\r\n\r\n// ==================== Response DTOs ====================\r\n\r\n/**\r\n * Create event response\r\n * Returns the newly created event ID\r\n */\r\nexport interface CreateEventResponse {\r\n  id: string;\r\n}\r\n\r\n/**\r\n * Upload event image response\r\n */\r\nexport interface UploadEventImageResponse {\r\n  id: string;\r\n  imageUrl: string;\r\n  displayOrder: number;\r\n  uploadedAt: string;\r\n}\r\n"],"names":[],"mappings":"AAAA;;;CAGC,GAED,kDAAkD;AAElD;;CAEC;;;;;;;;;;AACM,IAAA,AAAK,qCAAA;;;;;;;;;WAAA;;AAcL,IAAA,AAAK,uCAAA;;;;;;;;;WAAA;;AAcL,IAAA,AAAK,4CAAA;;;;;;;;WAAA;;AAaL,IAAA,AAAK,kCAAA;;;;;;;WAAA","debugId":null}},
    {"offset": {"line": 887, "column": 0}, "map": {"version":3,"sources":["file:///C:/Work/LankaConnect/web/src/app/test-events/page.tsx"],"sourcesContent":["'use client';\r\n\r\nimport React from 'react';\r\nimport { useEvents } from '@/presentation/hooks/useEvents';\r\nimport { EventStatus } from '@/infrastructure/api/types/events.types';\r\nimport { eventsRepository } from '@/infrastructure/api/repositories/events.repository';\r\n\r\nexport default function TestEventsPage() {\r\n  const [directApiResult, setDirectApiResult] = React.useState<any>(null);\r\n  const [directApiError, setDirectApiError] = React.useState<any>(null);\r\n\r\n  const { data: events, isLoading, error, fetchStatus, status } = useEvents({\r\n    status: EventStatus.Published,\r\n    startDateFrom: new Date().toISOString(),\r\n  });\r\n\r\n  // Try direct API call without React Query\r\n  React.useEffect(() => {\r\n    eventsRepository.getEvents({\r\n      status: EventStatus.Published,\r\n      startDateFrom: new Date().toISOString(),\r\n    })\r\n      .then((result) => {\r\n        console.log('‚úÖ Direct API call SUCCESS:', result);\r\n        setDirectApiResult(result);\r\n      })\r\n      .catch((err) => {\r\n        console.error('‚ùå Direct API call ERROR:', err);\r\n        setDirectApiError(err);\r\n      });\r\n  }, []);\r\n\r\n  console.log('=== DEBUG INFO ===');\r\n  console.log('API URL:', process.env.NEXT_PUBLIC_API_URL);\r\n  console.log('React Query - Events:', events);\r\n  console.log('React Query - Loading:', isLoading);\r\n  console.log('React Query - Error:', error);\r\n  console.log('React Query - Status:', status);\r\n  console.log('React Query - Fetch Status:', fetchStatus);\r\n  console.log('Direct API - Result:', directApiResult);\r\n  console.log('Direct API - Error:', directApiError);\r\n\r\n  return (\r\n    <div style={{ padding: '20px', fontFamily: 'monospace' }}>\r\n      <h1>Events API Test Page</h1>\r\n\r\n      <div style={{ marginTop: '20px', padding: '10px', background: '#f0f0f0' }}>\r\n        <h2>Configuration</h2>\r\n        <p><strong>API URL:</strong> {process.env.NEXT_PUBLIC_API_URL || 'NOT SET'}</p>\r\n      </div>\r\n\r\n      <div style={{ marginTop: '20px', padding: '10px', background: '#f0f0f0' }}>\r\n        <h2>React Query Status</h2>\r\n        <p><strong>Loading:</strong> {isLoading ? 'YES' : 'NO'}</p>\r\n        <p><strong>Status:</strong> {status}</p>\r\n        <p><strong>Fetch Status:</strong> {fetchStatus}</p>\r\n        <p><strong>Error:</strong> {error ? JSON.stringify(error, null, 2) : 'None'}</p>\r\n        <p><strong>Events Count:</strong> {events?.length || 0}</p>\r\n      </div>\r\n\r\n      <div style={{ marginTop: '20px', padding: '10px', background: '#e0e0ff' }}>\r\n        <h2>Direct API Call Status</h2>\r\n        <p><strong>Result:</strong> {directApiResult ? `${directApiResult.length} events` : 'Pending...'}</p>\r\n        <p><strong>Error:</strong> {directApiError ? JSON.stringify(directApiError, null, 2) : 'None'}</p>\r\n      </div>\r\n\r\n      {error && (\r\n        <div style={{ marginTop: '20px', padding: '10px', background: '#ffcccc' }}>\r\n          <h2>Error Details</h2>\r\n          <pre>{JSON.stringify(error, null, 2)}</pre>\r\n        </div>\r\n      )}\r\n\r\n      {events && events.length > 0 && (\r\n        <div style={{ marginTop: '20px', padding: '10px', background: '#ccffcc' }}>\r\n          <h2>Events ({events.length})</h2>\r\n          <ul>\r\n            {events.map((event) => (\r\n              <li key={event.id}>\r\n                <strong>{event.title}</strong> - {event.city}, {event.state}\r\n              </li>\r\n            ))}\r\n          </ul>\r\n        </div>\r\n      )}\r\n\r\n      {isLoading && (\r\n        <div style={{ marginTop: '20px', padding: '10px', background: '#ffffcc' }}>\r\n          <h2>Loading...</h2>\r\n          <p>Fetching events from API...</p>\r\n        </div>\r\n      )}\r\n    </div>\r\n  );\r\n}\r\n"],"names":[],"mappings":"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","debugId":null}}]
}